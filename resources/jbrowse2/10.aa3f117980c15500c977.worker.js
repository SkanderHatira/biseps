this.webpackChunk([10,11],{1007:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r(12),i=r(11),a=1,s=2,o=4,u=8,c=16,h=32,f=64,l=128,d=256,p=512,b=1024,v=2048,g="=ACMGRSVTWYHKDBN".split(""),y="MIDNSHP=X???????".split(""),m=function(){function e(t){Object(n.a)(this,e),this.data={},this._tagList=[],this._allTagsParsed=!1;var r=t.bytes,i=t.fileOffset,a=r.byteArray,s=r.start;this.data={},this.bytes=r,this._id=i,this._refID=a.readInt32LE(s+4),this.data.start=a.readInt32LE(s+8),this.flags=(4294901760&a.readInt32LE(s+16))>>16}return Object(i.a)(e,[{key:"get",value:function(e){return this[e]?(this.data[e]||(this.data[e]=this[e]()),this.data[e]):this._get(e.toLowerCase())}},{key:"end",value:function(){return this.get("start")+this.get("length_on_ref")}},{key:"seq_id",value:function(){return this._refID}},{key:"_get",value:function(e){return e in this.data||(this.data[e]=this._parseTag(e)),this.data[e]}},{key:"_tags",value:function(){var e=this;this._parseAllTags();var t=["seq"];this.isSegmentUnmapped()||t.push("start","end","strand","score","qual","MQ","CIGAR","length_on_ref","template_length"),this.isPaired()&&t.push("next_segment_position","pair_orientation"),t=t.concat(this._tagList||[]),Object.keys(this.data).forEach((function(e){"_"!==e[0]&&"next_seq_id"!==e&&t.push(e)}));var r={};return t.filter((function(t){if(t in e.data&&void 0===e.data[t]||"CG"===t||"cg"===t)return!1;var n=t.toLowerCase(),i=r[n];return r[n]=!0,!i}))}},{key:"parent",value:function(){}},{key:"children",value:function(){return this.get("subfeatures")}},{key:"id",value:function(){return this._id}},{key:"mq",value:function(){var e=(65280&this.get("_bin_mq_nl"))>>8;return 255===e?void 0:e}},{key:"score",value:function(){return this.get("mq")}},{key:"qual",value:function(){var e;return null===(e=this.qualRaw())||void 0===e?void 0:e.join(" ")}},{key:"qualRaw",value:function(){if(!this.isSegmentUnmapped()){var e=this.bytes,t=e.start,r=e.byteArray,n=t+36+this.get("_l_read_name")+4*this.get("_n_cigar_op")+this.get("_seq_bytes"),i=this.get("seq_length");return r.subarray(n,n+i)}}},{key:"strand",value:function(){return this.isReverseComplemented()?-1:1}},{key:"multi_segment_next_segment_strand",value:function(){if(!this.isMateUnmapped())return this.isMateReverseComplemented()?-1:1}},{key:"name",value:function(){return this.get("_read_name")}},{key:"_read_name",value:function(){var e=this.get("_l_read_name"),t=this.bytes,r=t.byteArray,n=t.start;return r.toString("ascii",n+36,n+36+e-1)}},{key:"_parseTag",value:function(e){if(!this._allTagsParsed){for(var t,r=this.bytes,n=r.byteArray,i=r.start,a=this._tagOffset||i+36+this.get("_l_read_name")+4*this.get("_n_cigar_op")+this.get("_seq_bytes")+this.get("seq_length"),s=this.bytes.end;a<s&&t!==e;){var o=String.fromCharCode(n[a],n[a+1]);t=o.toLowerCase();var u=String.fromCharCode(n[a+2]);a+=3;var c=void 0;switch(u){case"A":c=String.fromCharCode(n[a]),a+=1;break;case"i":c=n.readInt32LE(a),a+=4;break;case"I":c=n.readUInt32LE(a),a+=4;break;case"c":c=n.readInt8(a),a+=1;break;case"C":c=n.readUInt8(a),a+=1;break;case"s":c=n.readInt16LE(a),a+=2;break;case"S":c=n.readUInt16LE(a),a+=2;break;case"f":c=n.readFloatLE(a),a+=4;break;case"Z":case"H":for(c="";a<=s;){var h=n[a++];if(0===h)break;c+=String.fromCharCode(h)}break;case"B":c="";var f=n[a++],l=String.fromCharCode(f),d=n.readInt32LE(a);if(a+=4,"i"===l)if("CG"===o)for(var p=0;p<d;p++){var b=n.readInt32LE(a);c+=(b>>4)+y[15&b],a+=4}else for(var v=0;v<d;v++)c+=n.readInt32LE(a),v+1<d&&(c+=","),a+=4;if("I"===l)if("CG"===o)for(var g=0;g<d;g++){var m=n.readUInt32LE(a);c+=(m>>4)+y[15&m],a+=4}else for(var k=0;k<d;k++)c+=n.readUInt32LE(a),k+1<d&&(c+=","),a+=4;if("s"===l)for(var w=0;w<d;w++)c+=n.readInt16LE(a),w+1<d&&(c+=","),a+=2;if("S"===l)for(var x=0;x<d;x++)c+=n.readUInt16LE(a),x+1<d&&(c+=","),a+=2;if("c"===l)for(var _=0;_<d;_++)c+=n.readInt8(a),_+1<d&&(c+=","),a+=1;if("C"===l)for(var O=0;O<d;O++)c+=n.readUInt8(a),O+1<d&&(c+=","),a+=1;if("f"===l)for(var E=0;E<d;E++)c+=n.readFloatLE(a),E+1<d&&(c+=","),a+=4;break;default:console.warn("Unknown BAM tag type '".concat(u,"', tags may be incomplete")),c=void 0,a=s}if(this._tagOffset=a,this._tagList.push(o),t===e)return c;this.data[t]=c}this._allTagsParsed=!0}}},{key:"_parseAllTags",value:function(){this._parseTag("")}},{key:"_parseCigar",value:function(e){return e.match(/\d+\D/g).map((function(e){return[e.match(/\D/)[0].toUpperCase(),parseInt(e,10)]}))}},{key:"isPaired",value:function(){return!!(this.flags&a)}},{key:"isProperlyPaired",value:function(){return!!(this.flags&s)}},{key:"isSegmentUnmapped",value:function(){return!!(this.flags&o)}},{key:"isMateUnmapped",value:function(){return!!(this.flags&u)}},{key:"isReverseComplemented",value:function(){return!!(this.flags&c)}},{key:"isMateReverseComplemented",value:function(){return!!(this.flags&h)}},{key:"isRead1",value:function(){return!!(this.flags&f)}},{key:"isRead2",value:function(){return!!(this.flags&l)}},{key:"isSecondary",value:function(){return!!(this.flags&d)}},{key:"isFailedQc",value:function(){return!!(this.flags&p)}},{key:"isDuplicate",value:function(){return!!(this.flags&b)}},{key:"isSupplementary",value:function(){return!!(this.flags&v)}},{key:"cigar",value:function(){if(!this.isSegmentUnmapped()){var e=this.bytes,t=e.byteArray,r=e.start,n=this.get("_n_cigar_op"),i=r+36+this.get("_l_read_name"),a=this.get("seq_length"),s="",o=0,u=t.readInt32LE(i),c=u>>4,h=y[15&u];if("S"===h&&c===a)return i+=4,c=(u=t.readInt32LE(i))>>4,"N"!==(h=y[15&u])&&console.warn("CG tag with no N tag"),this.data.length_on_ref=c,this.get("CG");for(var f=0;f<n;++f)s+=(c=(u=t.readInt32LE(i))>>4)+(h=y[15&u]),"H"!==h&&"S"!==h&&"I"!==h&&(o+=c),i+=4;return this.data.length_on_ref=o,s}}},{key:"_flags",value:function(){}},{key:"length_on_ref",value:function(){return this.data.length_on_ref||this.get("cigar"),this.data.length_on_ref}},{key:"_n_cigar_op",value:function(){return 65535&this.get("_flag_nc")}},{key:"_l_read_name",value:function(){return 255&this.get("_bin_mq_nl")}},{key:"_seq_bytes",value:function(){return this.get("seq_length")+1>>1}},{key:"getReadBases",value:function(){return this.seq()}},{key:"seq",value:function(){for(var e=this.bytes,t=e.byteArray,r=e.start+36+this.get("_l_read_name")+4*this.get("_n_cigar_op"),n=this.get("_seq_bytes"),i=this.get("seq_length"),a="",s=0,o=0;o<n;++o){var u=t[r+o];a+=g[(240&u)>>4],++s<i&&(a+=g[15&u],s++)}return a}},{key:"getPairOrientation",value:function(){if(!this.isSegmentUnmapped()&&!this.isMateUnmapped()&&this._refID===this._next_refid()){var e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F",r=" ",n=" ";this.isRead1()?(r="1",n="2"):this.isRead2()&&(r="2",n="1");var i=[];return this.template_length()>0?(i[0]=e,i[1]=r,i[2]=t,i[3]=n):(i[2]=e,i[3]=r,i[0]=t,i[1]=n),i.join("")}return null}},{key:"_bin_mq_nl",value:function(){return this.bytes.byteArray.readInt32LE(this.bytes.start+12)}},{key:"_flag_nc",value:function(){return this.bytes.byteArray.readInt32LE(this.bytes.start+16)}},{key:"seq_length",value:function(){return this.bytes.byteArray.readInt32LE(this.bytes.start+20)}},{key:"_next_refid",value:function(){return this.bytes.byteArray.readInt32LE(this.bytes.start+24)}},{key:"_next_pos",value:function(){return this.bytes.byteArray.readInt32LE(this.bytes.start+28)}},{key:"template_length",value:function(){return this.bytes.byteArray.readInt32LE(this.bytes.start+32)}},{key:"toJSON",value:function(){var e=this,t={};return Object.keys(this).forEach((function(r){"_"!==r.charAt(0)&&"bytes"!==r&&(t[r]=e[r])})),t}}]),e}()},1011:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s}));var n=r(12),i=r(11),a=function(){function e(t,r){Object(n.a)(this,e),this.blockPosition=t,this.dataPosition=r}return Object(i.a)(e,[{key:"toString",value:function(){return"".concat(this.blockPosition,":").concat(this.dataPosition)}},{key:"compareTo",value:function(e){return this.blockPosition-e.blockPosition||this.dataPosition-e.dataPosition}}],[{key:"min",value:function(){for(var e,t=0,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];for(;!e;t+=1)e=n[t];for(;t<n.length;t+=1)e.compareTo(n[t])>0&&(e=n[t]);return e}}]),e}();function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r)throw new Error("big-endian virtual file offsets not implemented");return new a(1099511627776*e[t+7]+4294967296*e[t+6]+16777216*e[t+5]+65536*e[t+4]+256*e[t+3]+e[t+2],e[t+1]<<8|e[t])}},1012:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(12),i=r(11),a=function(){function e(t,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;Object(n.a)(this,e),this.minv=t,this.maxv=r,this.bin=i,this._fetchedSize=a}return Object(i.a)(e,[{key:"toUniqueString",value:function(){return"".concat(this.minv,"..").concat(this.maxv," (bin ").concat(this.bin,", fetchedSize ").concat(this.fetchedSize(),")")}},{key:"toString",value:function(){return this.toUniqueString()}},{key:"compareTo",value:function(e){return this.minv.compareTo(e.minv)||this.maxv.compareTo(e.maxv)||this.bin-e.bin}},{key:"fetchedSize",value:function(){return void 0!==this._fetchedSize?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}}]),e}()},1013:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(10),i=r(12),a=r(11),s=r(2),o=r.n(s),u=function(){function e(t){var r=t.filehandle,n=t.renameRefSeq,a=void 0===n?function(e){return e}:n;Object(i.a)(this,e),this.filehandle=r,this.renameRefSeq=a}return Object(a.a)(e,[{key:"_findFirstData",value:function(e,t){var r=e.firstDataLine;e.firstDataLine=r?r.compareTo(t)>0?t:r:t}},{key:"parse",value:function(){var e=Object(n.a)(o.a.mark((function e(){var t,r=this,n=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},this.setupP||(this.setupP=this._parse(t).catch((function(e){throw r.setupP=void 0,e}))),e.abrupt("return",this.setupP);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hasRefSeq",value:function(){var e=Object(n.a)(o.a.mark((function e(t){var r,n=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this.parse(r);case 3:if(e.t1=t,e.t0=e.sent.indices[e.t1],e.t0){e.next=7;break}e.t0={};case 7:return e.abrupt("return",!!e.t0.binIndex);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},1014:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(6),i=r(124);function a(e){var t=e.split(/\r?\n/),r=[];return t.forEach((function(e){var t=e.split(/\t/),a=Object(i.a)(t),s=a[0],o=a.slice(1).map((function(e){var t=e.split(":",2),r=Object(n.a)(t,2);return{tag:r[0],value:r[1]}}));s&&r.push({tag:s.substr(1),data:o})})),r}},1015:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return x}));var n=r(9),i=r(5),a=r(12),s=r(11),o=r(17),u=r(18),c=r(10),h=r(964),f=r(944),l=r(942),d=r(966),p=r(2),b=r.n(p),v=r(977),g=(r(1066),r(120)),y=r(1014),m=["referer"];function k(e,t){return w.apply(this,arguments)}function w(){return w=Object(c.a)(b.a.mark((function t(r,a){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(r.map(function(){var t=Object(c.a)(b.a.mark((function t(r){var s,o,u,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=r.url,o=r.headers,!s.startsWith("data:")){t.next=5;break}return t.abrupt("return",e.from(s.split(",")[1],"base64"));case 5:return o.referer,u=Object(n.a)(o,m),t.next=8,fetch(s,Object(i.a)(Object(i.a)({},a),{},{headers:Object(i.a)(Object(i.a)({},a.headers),u)}));case 8:if((c=t.sent).ok){t.next=11;break}throw new Error("Failed to fetch ".concat(c.statusText));case 11:return t.t0=e,t.next=14,c.arrayBuffer();case 14:return t.t1=t.sent,t.abrupt("return",t.t0.from.call(t.t0,t.t1));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return s=t.sent,t.t0=e,t.next=6,Promise.all(s.map((function(e){return Object(g.unzip)(e)})));case 6:return t.t1=t.sent,t.abrupt("return",t.t0.concat.call(t.t0,t.t1));case 8:case"end":return t.stop()}}),t)}))),w.apply(this,arguments)}var x=function(e){Object(o.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,{bamFilehandle:"?",baiFilehandle:"?"})).baseUrl=e.baseUrl,n.trackId=e.trackId,n}return Object(s.a)(r,[{key:"streamRecordsForRange",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{viewAsPairs:!1,pairAcrossChr:!1,maxInsertSize:2e5};return Object(h.a)(b.a.mark((function s(){var o,u,c,h,p,v,g;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return o="".concat(n.baseUrl,"/").concat(n.trackId),u="".concat(o,"?referenceName=").concat(e,"&start=").concat(t,"&end=").concat(r,"&format=BAM"),c=n.chrToIndex&&n.chrToIndex[e],s.next=5,Object(f.a)(fetch(u,Object(i.a)({},a)));case 5:if((h=s.sent).ok){s.next=8;break}throw new Error(h.statusText);case 8:return s.next=10,Object(f.a)(h.json());case 10:return p=s.sent,s.next=13,Object(f.a)(k(p.htsget.urls.slice(1),a));case 13:return v=s.sent,g={buffer:v,chunk:{minv:{dataPosition:0}},toString:function(){return"".concat(e,"_").concat(t,"_").concat(r)}},s.delegateYield(Object(d.a)(Object(l.a)(n._fetchChunkFeatures([g],c,t,r,a)),f.a),"t0",16);case 16:case"end":return s.stop()}}),s)})))()}},{key:"_readChunk",value:function(){var e=Object(c.a)(b.a.mark((function e(t){var r,n,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.chunk,n=r.buffer,i=r.chunk,e.abrupt("return",{data:n,cpositions:null,dpositions:null,chunk:i});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getHeader",value:function(){var e=Object(c.a)(b.a.mark((function e(){var t,r,n,i,a,s,o,u,c,h,f=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},r="".concat(this.baseUrl,"/").concat(this.trackId,"?referenceName=na&class=header"),e.next=4,fetch(r,t);case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("Failed to fetch ".concat(n.statusText));case 7:return e.next=9,n.json();case 9:return i=e.sent,e.next=12,k(i.htsget.urls,t);case 12:if((a=e.sent).readInt32LE(0)===v.a){e.next=15;break}throw new Error("Not a BAM file");case 15:return s=a.readInt32LE(4),o=a.toString("utf8",8,8+s),u=Object(y.a)(o),c=[],h={},u.filter((function(e){return"SQ"===e.tag})).forEach((function(e,t){e.data.forEach((function(e){if("SN"===e.tag){var r=e.value;h[r]=t,c[t]=r}}))})),this.chrToIndex=h,this.indexToChr=c,e.abrupt("return",u);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(v.b)}).call(this,r(64).Buffer)},1060:function(e,t,r){"use strict";r(974),r(976);var n=r(977);r.d(t,"a",(function(){return n.b}));var i=r(1015);r.d(t,"b",(function(){return i.a}));r(1007)},1065:function(e,t,r){"use strict";var n=r(2),i=r(247).default,a=r(410).default,s=r(111).default,o=r(112).default,u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s(this,t),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}return o(t,[{key:"_set",value:function(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}},{key:"get",value:function(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){var t=this.oldCache.get(e);return this._set(e,t),t}}},{key:"set",value:function(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}},{key:"has",value:function(e){return this.cache.has(e)||this.oldCache.has(e)}},{key:"peek",value:function(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"keys",value:n.mark((function e(){var t,r,s,o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return s=i(r.value,1),o=s[0],e.next=7,o;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:n.mark((function e(){var t,r,s,o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return s=i(r.value,2),o=s[1],e.next=7,o;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:e,value:n.mark((function e(){var t,r,s,o,u,c,h,f;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a(this.cache),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return s=r.value,e.next=7,s;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:o=a(this.oldCache),e.prev=18,o.s();case 20:if((u=o.n()).done){e.next=28;break}if(c=u.value,h=i(c,1),f=h[0],this.cache.has(f)){e.next=26;break}return e.next=26,c;case 26:e.next=20;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(18),o.e(e.t1);case 33:return e.prev=33,o.f(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[1,11,14,17],[18,30,33,36]])}))},{key:"size",get:function(){var e,t=0,r=a(this.oldCache.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;this.cache.has(n)||t++}}catch(i){r.e(i)}finally{r.f()}return this._size+t}}]),t}(Symbol.iterator);e.exports=u},1066:function(e,t){!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in e,s="ArrayBuffer"in e;if(s)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function h(e){return"string"!==typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function b(e){var t=new FileReader,r=p(t);return t.readAsArrayBuffer(e),r}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(b)}),this.text=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=p(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=c(e),t=h(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},l.prototype.delete=function(e){delete this.map[c(e)]},l.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},l.prototype.set=function(e,t){this.map[c(e)]=h(t)},l.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},l.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),f(e)},l.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},l.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),f(e)},n&&(l.prototype[Symbol.iterator]=l.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(e,t){var r=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=function(e){var t=e.toUpperCase();return y.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function k(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function w(e){var t=new l;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t}function x(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},g.call(m.prototype),g.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},x.error=function(){var e=new x(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];x.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new x(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(E){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function O(e,r){return new Promise((function(n,a){var s=new m(e,r);if(s.signal&&s.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var o=new XMLHttpRequest;function u(){o.abort()}o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:w(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new x(t,e))},o.onerror=function(){a(new TypeError("Network request failed"))},o.ontimeout=function(){a(new TypeError("Network request failed"))},o.onabort=function(){a(new t.DOMException("Aborted","AbortError"))},o.open(s.method,s.url,!0),"include"===s.credentials?o.withCredentials=!0:"omit"===s.credentials&&(o.withCredentials=!1),"responseType"in o&&i&&(o.responseType="blob"),s.headers.forEach((function(e,t){o.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",u),o.onreadystatechange=function(){4===o.readyState&&s.signal.removeEventListener("abort",u)}),o.send("undefined"===typeof s._bodyInit?null:s._bodyInit)}))}O.polyfill=!0,e.fetch||(e.fetch=O,e.Headers=l,e.Request=m,e.Response=x),t.Headers=l,t.Request=m,t.Response=x,t.fetch=O,Object.defineProperty(t,"__esModule",{value:!0})}({})}("undefined"!==typeof self?self:this)},1216:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return O}));var n=r(23),i=r(10),a=r(12),s=r(11),o=r(39),u=r(36),c=r(17),h=r(18),f=r(2),l=r.n(f),d=r(1060),p=r(53),b=r(7),v=r(41),g=r(75),y=r(230),m=r(4),k=r(5),w=r(15),x=r(74),_=function(){function e(t,r,n){Object(a.a)(this,e),this.record=t,this.adapter=r,this.ref=n}return Object(s.a)(e,[{key:"_get_name",value:function(){return this.record.get("name")}},{key:"_get_type",value:function(){return"match"}},{key:"_get_score",value:function(){return this.record.get("mq")}},{key:"_get_flags",value:function(){return this.record.flags}},{key:"_get_strand",value:function(){return this.record.isReverseComplemented()?-1:1}},{key:"_get_pair_orientation",value:function(){return this.record.isPaired()?this.record.getPairOrientation():void 0}},{key:"_get_next_seq_id",value:function(){return this.record._next_refid()}},{key:"_get_seq_id",value:function(){return this.record._refID}},{key:"_get_next_refName",value:function(){return this.adapter.refIdToName(this.record._next_refid())}},{key:"_get_next_segment_position",value:function(){var e=this.record,t=this.adapter;return e.isPaired()?"".concat(t.refIdToName(e._next_refid()),":").concat(e._next_pos()+1):void 0}},{key:"_get_seq",value:function(){return this.record.getReadBases()}},{key:"qualRaw",value:function(){return this.record.qualRaw()}},{key:"set",value:function(){}},{key:"tags",value:function(){var t=Object.getOwnPropertyNames(e.prototype);return Object(w.a)(new Set(t.filter((function(e){return e.startsWith("_get_")&&"_get_mismatches"!==e&&"_get_tags"!==e&&"_get_next_seq_id"!==e&&"_get_seq_id"!==e})).map((function(e){return e.replace("_get_","")})).concat(this.record._tags())))}},{key:"id",value:function(){return"".concat(this.adapter.id,"-").concat(this.record.id())}},{key:"get",value:function(e){var t="_get_".concat(e);return this[t]?this[t]():this.record.get(e)}},{key:"_get_refName",value:function(){return this.adapter.refIdToName(this.record.seq_id())}},{key:"parent",value:function(){}},{key:"children",value:function(){}},{key:"pairedFeature",value:function(){return!1}},{key:"toJSON",value:function(){var e=this;return Object(k.a)(Object(k.a)({},Object.fromEntries(this.tags().map((function(t){return[t,e.get(t)]})).filter((function(e){return void 0!==e[1]})))),{},{uniqueId:this.id()})}},{key:"_get_mismatches",value:function(){return Object(x.getMismatches)(this.get("CIGAR"),this.get("MD"),this.get("seq"),this.ref,this.qualRaw())}},{key:"_get_clipPos",value:function(){var e=this.get("CIGAR")||"";return-1===this.get("strand")?+(e.match(/(\d+)[SH]$/)||[])[1]||0:+(e.match(/^(\d+)([SH])/)||[])[1]||0}}]),e}(),O=function(e){Object(c.a)(r,e);var t=Object(h.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).samHeader=void 0,e.setupP=void 0,e.configured=void 0,e}return Object(s.a)(r,[{key:"configure",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t,r,n,i,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.configured||(t=Object(m.readConfObject)(this.config,"bamLocation"),r=Object(m.readConfObject)(this.config,["index","location"]),n=Object(m.readConfObject)(this.config,["index","indexType"]),i=new d.a({bamFilehandle:Object(v.openLocation)(t,this.pluginManager),csiFilehandle:"CSI"===n?Object(v.openLocation)(r,this.pluginManager):void 0,baiFilehandle:"CSI"!==n?Object(v.openLocation)(r,this.pluginManager):void 0,chunkSizeLimit:1/0,fetchSizeLimit:1/0,yieldThreadTime:1/0}),(a=Object(m.readConfObject)(this.config,"sequenceAdapter"))&&this.getSubAdapter?this.configured=this.getSubAdapter(a).then((function(e){var t=e.dataAdapter;return{bam:i,sequenceAdapter:t}})):this.configured=Promise.resolve({bam:i})),e.abrupt("return",this.configured);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeader",value:function(){var e=Object(i.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.configure();case 2:return r=e.sent,n=r.bam,e.abrupt("return",n.getHeaderText(t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupPre",value:function(){var e=Object(i.a)(l.a.mark((function e(t){var r,n,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t||{}).statusCallback,n=void 0===r?function(){}:r,e.next=3,this.configure();case 3:return a=e.sent,s=a.bam,e.next=7,Object(b.updateStatus)("Downloading index",n,Object(i.a)(l.a.mark((function e(){var r,n,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getHeader(t);case 2:return r=e.sent,n=[],i={},r.filter((function(e){return"SQ"===e.tag})).forEach((function(e,t){e.data.forEach((function(e){if("SN"===e.tag){var r=e.value;i[r]=t,n[t]=r}}))})),e.abrupt("return",{idToName:n,nameToId:i});case 7:case"end":return e.stop()}}),e)}))));case 7:return this.samHeader=e.sent,e.abrupt("return",this.samHeader);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setup",value:function(){var e=Object(i.a)(l.a.mark((function e(t){var r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setupP||(this.setupP=this.setupPre(t).catch((function(e){throw r.setupP=void 0,e}))),e.abrupt("return",this.setupP);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRefNames",value:function(){var e=Object(i.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setup(t);case 2:return r=e.sent,n=r.idToName,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"seqFetch",value:function(){var e=Object(i.a)(l.a.mark((function e(t,r,n){var i,a,s,o,u,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.configure();case 2:if(i=e.sent,a=i.sequenceAdapter,s=a){e.next=7;break}return e.abrupt("return",void 0);case 7:if(t){e.next=9;break}return e.abrupt("return",void 0);case 9:return o=s.getFeatures({refName:t,start:r,end:n,assemblyName:""}),e.next=12,o.pipe(Object(y.a)()).toPromise();case 12:if(u=e.sent,c="",u.sort((function(e,t){return e.get("start")-t.get("start")})).forEach((function(e){var t=e.get("start"),i=e.get("end"),a=Math.max(r-t,0),s=Math.min(n-t,i-t)-a,o=e.get("seq")||e.get("residues");c+=o.substr(a,s)})),c.length===n-r){e.next=17;break}throw new Error("sequence fetch failed: fetching ".concat(t,":").concat((r-1).toLocaleString(),"-").concat(n.toLocaleString()," returned ").concat(c.length.toLocaleString()," bases, but should have returned ").concat((n-r).toLocaleString()));case 17:return e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getFeatures",value:function(e,t){var r=this,a=e.refName,s=e.start,o=e.end,u=e.originalRefName,c=t||{},h=c.signal,f=c.statusCallback,d=void 0===f?function(){}:f;return Object(g.ObservableCreate)(function(){var e=Object(i.a)(l.a.mark((function e(i){var c,f,p,v,g,y,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.configure();case 2:return c=e.sent,f=c.bam,e.next=6,r.setup(t);case 6:return d("Downloading alignments"),e.next=9,f.getRecordsForRange(a,s,o,t);case 9:p=e.sent,Object(b.checkAbortSignal)(h),v=Object(n.a)(p),e.prev=12,v.s();case 14:if((g=v.n()).done){e.next=24;break}if(y=g.value,m=void 0,y.get("MD")){e.next=21;break}return e.next=20,r.seqFetch(u||a,y.get("start"),y.get("end"));case 20:m=e.sent;case 21:i.next(new _(y,r,m));case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),v.e(e.t0);case 29:return e.prev=29,v.f(),e.finish(29);case 32:d(""),i.complete();case 34:case"end":return e.stop()}}),e,null,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}(),h)}},{key:"estimateRegionsStats",value:function(){var e=Object(i.a)(l.a.mark((function e(t,n){var i,a,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.configure();case 2:if(i=e.sent,"?"===(a=i.bam).index.filehandle){e.next=12;break}return e.next=7,Object(b.bytesForRegions)(t,a);case 7:return s=e.sent,c=Object(m.readConfObject)(this.config,"fetchSizeLimit"),e.abrupt("return",{bytes:s,fetchSizeLimit:c});case 12:return e.abrupt("return",Object(o.a)(Object(u.a)(r.prototype),"estimateRegionsStats",this).call(this,t,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"freeResources",value:function(){}},{key:"refIdToName",value:function(e){var t;return null===(t=this.samHeader)||void 0===t?void 0:t.idToName[e]}}]),r}(p.BaseFeatureDataAdapter)},1274:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return l}));var n=r(10),i=r(12),a=r(11),s=r(17),o=r(18),u=r(2),c=r.n(u),h=r(1060),f=r(4),l=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"configure",value:function(){var e=Object(n.a)(c.a.mark((function e(){var t,r,n,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.configured||(t=Object(f.readConfObject)(this.config,"htsgetBase"),r=Object(f.readConfObject)(this.config,"htsgetTrackId"),n=new h.b({baseUrl:t,trackId:r}),(i=Object(f.readConfObject)(this.config,"sequenceAdapter"))&&this.getSubAdapter&&(this.configured=this.getSubAdapter(i).then((function(e){var t=e.dataAdapter;return{bam:n,sequenceAdapter:t}}))),this.configured=Promise.resolve({bam:n})),e.abrupt("return",this.configured);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(r(1216).default)},913:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.AbortSignal=t.AbortController=void 0;var n=r(333),i=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof e)return e;throw new Error("unable to locate global object")},a="undefined"===typeof i().AbortController?n.AbortController:i().AbortController;t.AbortController=a;var s="undefined"===typeof i().AbortController?n.AbortSignal:i().AbortSignal;t.AbortSignal=s}).call(this,r(70))},914:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(918));t.default=i.default},915:function(e,t){e.exports=n;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(j){}function n(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function i(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=i;var a={},s={};function o(e,t){var r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=s[e])?n:(r=c(e,(0|e)<0?-1:0,!0),i&&(s[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=a[e])?n:(r=c(e,e<0?-1:0,!1),i&&(a[e]=r),r)}function u(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=p)return _}else{if(e<=-b)return O;if(e+1>=b)return x}return e<0?u(-e,t).neg():c(e%d|0,e/d|0,t)}function c(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=u,n.fromBits=c;var h=Math.pow;function f(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return f(e.substring(1),t,r).neg();for(var i=u(h(r,8)),a=g,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+o),r);if(o<8){var l=u(h(r,o));a=a.mul(l).add(u(c))}else a=(a=a.mul(i)).add(u(c))}return a.unsigned=t,a}function l(e,t){return"number"===typeof e?u(e,t):"string"===typeof e?f(e,t):c(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=f,n.fromValue=l;var d=4294967296,p=d*d,b=p/2,v=o(1<<24),g=o(0);n.ZERO=g;var y=o(0,!0);n.UZERO=y;var m=o(1);n.ONE=m;var k=o(1,!0);n.UONE=k;var w=o(-1);n.NEG_ONE=w;var x=c(-1,2147483647,!1);n.MAX_VALUE=x;var _=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=_;var O=c(0,-2147483648,!1);n.MIN_VALUE=O;var E=n.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},E.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(O)){var t=u(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=u(h(e,6),this.unsigned),a=this,s="";;){var o=a.div(i),c=(a.sub(o.mul(i)).toInt()>>>0).toString(e);if((a=o).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(O)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},E.isZero=function(){return 0===this.high&&0===this.low},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return 1===(1&this.low)},E.isEven=function(){return 0===(1&this.low)},E.equals=function(e){return i(e)||(e=l(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},E.eq=E.equals,E.notEquals=function(e){return!this.eq(e)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(e){return this.comp(e)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(e){return this.comp(e)<=0},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(e){return this.comp(e)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(e){return this.comp(e)>=0},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(e){if(i(e)||(e=l(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(O)?O:this.not().add(m)},E.neg=E.negate,E.add=function(e){i(e)||(e=l(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,a=65535&this.low,s=e.high>>>16,o=65535&e.high,u=e.low>>>16,h=0,f=0,d=0,p=0;return d+=(p+=a+(65535&e.low))>>>16,f+=(d+=n+u)>>>16,h+=(f+=r+o)>>>16,h+=t+s,c((d&=65535)<<16|(p&=65535),(h&=65535)<<16|(f&=65535),this.unsigned)},E.subtract=function(e){return i(e)||(e=l(e)),this.add(e.neg())},E.sub=E.subtract,E.multiply=function(e){if(this.isZero())return g;if(i(e)||(e=l(e)),r)return c(r.mul(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(O))return e.isOdd()?O:g;if(e.eq(O))return this.isOdd()?O:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return u(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,s=65535&this.low,o=e.high>>>16,h=65535&e.high,f=e.low>>>16,d=65535&e.low,p=0,b=0,y=0,m=0;return y+=(m+=s*d)>>>16,b+=(y+=a*d)>>>16,y&=65535,b+=(y+=s*f)>>>16,p+=(b+=n*d)>>>16,b&=65535,p+=(b+=a*f)>>>16,b&=65535,p+=(b+=s*h)>>>16,p+=t*d+n*f+a*h+s*o,c((y&=65535)<<16|(m&=65535),(p&=65535)<<16|(b&=65535),this.unsigned)},E.mul=E.multiply,E.divide=function(e){if(i(e)||(e=l(e)),e.isZero())throw Error("division by zero");var t,n,a;if(r)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?r.div_u:r.div_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return k;a=y}else{if(this.eq(O))return e.eq(m)||e.eq(w)?O:e.eq(O)?m:(t=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?m:w:(n=this.sub(e.mul(t)),a=t.add(n.div(e)));if(e.eq(O))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=g}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),o=s<=48?1:h(2,s-48),f=u(t),d=f.mul(e);d.isNegative()||d.gt(n);)d=(f=u(t-=o,this.unsigned)).mul(e);f.isZero()&&(f=m),a=a.add(f),n=n.sub(d)}return a},E.div=E.divide,E.modulo=function(e){return i(e)||(e=l(e)),r?c((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return c(~this.low,~this.high,this.unsigned)},E.and=function(e){return i(e)||(e=l(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},E.or=function(e){return i(e)||(e=l(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},E.xor=function(e){return i(e)||(e=l(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},E.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(e){return i(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},E.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},E.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},918:function(e,t,r){"use strict";var n=r(111).default,i=r(112).default,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(913),o=a(r(919)),u=a(r(920)),c=function(){function e(t){var r=t.fill,i=t.cache;if(n(this,e),"function"!==typeof r)throw new TypeError("must pass a fill function");if("object"!==typeof i)throw new TypeError("must pass a cache object");if("function"!==typeof i.get||"function"!==typeof i.set||"function"!==typeof i.delete)throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=i,this.fillCallback=r}return i(e,[{key:"evict",value:function(e,t){this.cache.get(e)===t&&this.cache.delete(e)}},{key:"fill",value:function(e,t,r,n){var i=this,a=new o.default,s=new u.default;s.addCallback(n);var c={aborter:a,promise:this.fillCallback(t,a.signal,(function(e){s.callback(e)})),settled:!1,statusReporter:s,get aborted(){return this.aborter.signal.aborted}};c.aborter.addSignal(r),c.aborter.signal.addEventListener("abort",(function(){c.settled||i.evict(e,c)})),c.promise.then((function(){c.settled=!0}),(function(){c.settled=!0,i.evict(e,c)})).catch((function(e){throw console.error(e),e})),this.cache.set(e,c)}},{key:"has",value:function(e){return this.cache.has(e)}},{key:"get",value:function(t,r,n,i){if(!n&&r instanceof s.AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");var a=this.cache.get(t);return a?a.aborted&&!a.settled?(this.evict(t,a),this.get(t,r,n,i)):a.settled?a.promise:(a.aborter.addSignal(n),a.statusReporter.addCallback(i),e.checkSinglePromise(a.promise,n)):(this.fill(t,r,n,i),e.checkSinglePromise(this.cache.get(t).promise,n))}},{key:"delete",value:function(e){var t=this.cache.get(e);t&&(t.settled||t.aborter.abort(),this.cache.delete(e))}},{key:"clear",value:function(){for(var e=this.cache.keys(),t=0,r=e.next();!r.done;r=e.next())this.delete(r.value),t+=1;return t}}],[{key:"isAbortException",value:function(e){return"AbortError"===e.name||"ERR_ABORTED"===e.code||"AbortError: aborted"===e.message||"Error: aborted"===e.message}},{key:"checkSinglePromise",value:function(e,t){function r(){if(t&&t.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return e.then((function(e){return r(),e}),(function(e){throw r(),e}))}}]),e}();t.default=c},919:function(e,t,r){"use strict";var n=r(112).default,i=r(111).default;Object.defineProperty(t,"__esModule",{value:!0});var a=r(913),s=n((function e(){i(this,e)})),o=function(){function e(){i(this,e),this.signals=new Set,this.abortController=new a.AbortController}return n(e,[{key:"addSignal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new s;if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(t),t.aborted?this.handleAborted(t):"function"===typeof t.addEventListener&&t.addEventListener("abort",(function(){e.handleAborted(t)}))}},{key:"handleAborted",value:function(e){this.signals.delete(e),0===this.signals.size&&this.abortController.abort()}},{key:"signal",get:function(){return this.abortController.signal}},{key:"abort",value:function(){this.abortController.abort()}}]),e}();t.default=o},920:function(e,t,r){"use strict";var n=r(111).default,i=r(112).default;Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){n(this,e),this.callbacks=new Set}return i(e,[{key:"addCallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.callbacks.add(e),e(this.currentMessage)}},{key:"callback",value:function(e){this.currentMessage=e,this.callbacks.forEach((function(t){t(e)}))}}]),e}();t.default=a},942:function(e,t,r){"use strict";function n(e){var t,r,n,a=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new i(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function i(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return i=function(e){this.s=e,this.n=e.next},i.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new i(e)}r.d(t,"a",(function(){return n}))},944:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(965);function i(e){return new n.a(e)}},964:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(965);function i(e){var t,r;function i(t,r){try{var s=e[t](r),o=s.value,u=o instanceof n.a;Promise.resolve(u?o.wrapped:o).then((function(e){u?i("return"===t?"return":"next",e):a(s.done?"return":"normal",e)}),(function(e){i("throw",e)}))}catch(c){a("throw",c)}}function a(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?i(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise((function(a,s){var o={key:e,arg:n,resolve:a,reject:s,next:null};r?r=r.next=o:(t=r=o,i(e,n))}))},"function"!==typeof e.return&&(this.return=void 0)}function a(e){return function(){return new i(e.apply(this,arguments))}}i.prototype["function"===typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},i.prototype.next=function(e){return this._invoke("next",e)},i.prototype.throw=function(e){return this._invoke("throw",e)},i.prototype.return=function(e){return this._invoke("return",e)}},965:function(e,t,r){"use strict";function n(e){this.wrapped=e}r.d(t,"a",(function(){return n}))},966:function(e,t,r){"use strict";function n(e,t){var r={},n=!1;function i(r,i){return n=!0,i=new Promise((function(t){t(e[r](i))})),{done:!1,value:t(i)}}return r["undefined"!==typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},r.next=function(e){return n?(n=!1,e):i("next",e)},"function"===typeof e.throw&&(r.throw=function(e){if(n)throw n=!1,e;return i("throw",e)}),"function"===typeof e.return&&(r.return=function(e){return n?(n=!1,e):i("return",e)}),r}r.d(t,"a",(function(){return n}))},974:function(e,t,r){"use strict";r.d(t,"a",(function(){return w}));var n=r(6),i=r(23),a=r(5),s=r(10),o=r(12),u=r(11),c=r(17),h=r(18),f=r(2),l=r.n(f),d=r(915),p=r.n(d),b=r(1011),v=r(1012),g=r(1013),y=r(975);function m(e,t){return e-e%t}function k(e,t){return e-e%t+t}var w=function(e){Object(c.a)(r,e);var t=Object(h.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"parsePseudoBin",value:function(e,t){return{lineCount:Object(y.c)(p.a.fromBytesLE(Array.prototype.slice.call(e,t+16,t+24),!0))}}},{key:"lineCount",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var r,n,i,a,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.parse(r);case 3:if(n=e.sent,i=n.indices[t]){e.next=7;break}return e.abrupt("return",-1);case 7:return a=i.stats||{},e.abrupt("return",void 0===a.lineCount?-1:a.lineCount);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBai",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.baiP||(this.baiP=this.filehandle.readFile(t).catch((function(t){throw e.baiP=void 0,t}))),this.baiP}},{key:"_parse",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,r,n,i,a,s,o,u,c,h,f,d,p,g,y,m,k,w;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={bai:!0,maxBlockSize:65536},e.next=3,this.fetchBai();case 3:if(21578050===(r=e.sent).readUInt32LE(0)){e.next=6;break}throw new Error("Not a BAI file");case 6:t.refCount=r.readInt32LE(4),5,n=37449,t.indices=new Array(t.refCount),i=8,a=0;case 12:if(!(a<t.refCount)){e.next=47;break}s=r.readInt32LE(i),o=void 0,i+=4,u={},c=0;case 18:if(!(c<s)){e.next=39;break}if(h=r.readUInt32LE(i),i+=4,h!==n+1){e.next=27;break}i+=4,o=this.parsePseudoBin(r,i),i+=32,e.next=36;break;case 27:if(!(h>n+1)){e.next=31;break}throw new Error("bai index contains too many bins, please use CSI");case 31:for(f=r.readInt32LE(i),i+=4,d=new Array(f),p=0;p<f;p+=1)g=Object(b.b)(r,i),y=Object(b.b)(r,i+8),i+=16,this._findFirstData(t,g),d[p]=new v.a(g,y,h);u[h]=d;case 36:c+=1,e.next=18;break;case 39:for(m=r.readInt32LE(i),i+=4,k=new Array(m),w=0;w<m;w+=1)k[w]=Object(b.b)(r,i),i+=8,this._findFirstData(t,k[w]);t.indices[a]={binIndex:u,linearIndex:k,stats:o};case 44:a+=1,e.next=12;break;case 47:return e.abrupt("return",t);case 48:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"indexCov",value:function(){var e=Object(s.a)(l.a.mark((function e(t,r,n){var i,s,o,u,c,h,f,d,p,b,v,g,y,w,x,_=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_.length>3&&void 0!==_[3]?_[3]:{},s=16384,o=void 0!==r,e.next=5,this.parse(i);case 5:if(u=e.sent,c=u.indices[t]){e.next=9;break}return e.abrupt("return",[]);case 9:if(h=c.linearIndex,f=void 0===h?[]:h,d=c.stats,f.length){e.next=12;break}return e.abrupt("return",[]);case 12:if(p=void 0!==n?k(n,s):(f.length-1)*s,b=void 0!==r?m(r,s):0,v=new Array(o?(p-b)/s:f.length-1),g=f[f.length-1].blockPosition,!(p>(f.length-1)*s)){e.next=18;break}throw new Error("query outside of range of linear index");case 18:for(y=f[b/s].blockPosition,w=b/s,x=0;w<p/s;w++,x++)v[x]={score:f[w+1].blockPosition-y,start:w*s,end:w*s+s},y=f[w+1].blockPosition;return e.abrupt("return",v.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{score:e.score*d.lineCount/g})})));case 21:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"reg2bins",value:function(e,t){return[[0,0],[1+(e>>26),1+((t-=1)>>26)],[9+(e>>23),9+(t>>23)],[73+(e>>20),73+(t>>20)],[585+(e>>17),585+(t>>17)],[4681+(e>>14),4681+(t>>14)]]}},{key:"blocksForRange",value:function(){var e=Object(s.a)(l.a.mark((function e(t,r,a){var s,o,u,c,h,f,d,p,b,g,m,k,w,x,_,O,E,j,S,I=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=I.length>3&&void 0!==I[3]?I[3]:{},r<0&&(r=0),e.next=4,this.parse(s);case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",[]);case 7:if(u=o.indices[t]){e.next=10;break}return e.abrupt("return",[]);case 10:c=this.reg2bins(r,a),h=[],f=Object(i.a)(c);try{for(f.s();!(d=f.n()).done;)for(p=Object(n.a)(d.value,2),b=p[0],g=p[1],m=b;m<=g;m++)if(u.binIndex[m])for(k=u.binIndex[m],w=0;w<k.length;++w)h.push(new v.a(k[w].minv,k[w].maxv,m))}catch(l){f.e(l)}finally{f.f()}for(x=u.linearIndex.length,_=null,O=Math.min(r>>14,x-1),E=Math.min(a>>14,x-1),j=O;j<=E;++j)(S=u.linearIndex[j])&&(!_||S.compareTo(_)<0)&&(_=S);return e.abrupt("return",Object(y.e)(h,_));case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),r}(g.a)},975:function(e,t,r){"use strict";r.d(t,"f",(function(){return s})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return c})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return l}));var n=r(10),i=r(2),a=r.n(i);function s(e){return new Promise((function(t){return setTimeout(t,e)}))}function o(e){if(e.greaterThan(Number.MAX_SAFE_INTEGER)||e.lessThan(Number.MIN_SAFE_INTEGER))throw new Error("integer overflow");return e.toNumber()}function u(e){if(e&&e.aborted){if("undefined"!==typeof DOMException)throw new DOMException("aborted","AbortError");var t=new Error("aborted");throw t.code="ERR_ABORTED",t}}function c(e){return h.apply(this,arguments)}function h(){return(h=Object(n.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:u(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"aborted"in e?{signal:e}:e}function l(e,t){var r=[],n=null;return 0===e.length?e:(e.sort((function(e,t){var r=e.minv.blockPosition-t.minv.blockPosition;return 0!==r?r:e.minv.dataPosition-t.minv.dataPosition})),e.forEach((function(e){var i,a;(!t||e.maxv.compareTo(t)>0)&&(null===n?(r.push(e),n=e):(i=n,(a=e).minv.blockPosition-i.maxv.blockPosition<65e3&&a.maxv.blockPosition-i.minv.blockPosition<5e6?e.maxv.compareTo(n.maxv)>0&&(n.maxv=e.maxv):(r.push(e),n=e)))})),r)}},976:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var n=r(6),i=r(23),a=r(10),s=r(12),o=r(11),u=r(17),c=r(18),h=r(2),f=r.n(h),l=r(915),d=r.n(l),p=r(120),b=r(1011),v=r(1012),g=r(975),y=r(1013);function m(e,t){return Math.floor(e/Math.pow(2,t))}var k=function(e){Object(u.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).maxBinNumber=0,n.depth=0,n.minShift=0,n}return Object(o.a)(r,[{key:"lineCount",value:function(){var e=Object(a.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.parse();case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",-1);case 5:if(r.indices[t]){e.next=8;break}return e.abrupt("return",-1);case 8:if(!(n=r.indices[t].stats)){e.next=11;break}return e.abrupt("return",n.lineCount);case 11:return e.abrupt("return",-1);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"indexCov",value:function(){var e=Object(a.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"parseAuxData",value:function(e,t,r){if(r<30)return{};var n={};if(n.formatFlags=e.readInt32LE(t),n.coordinateType=65536&n.formatFlags?"zero-based-half-open":"1-based-closed",n.format={0:"generic",1:"SAM",2:"VCF"}[15&n.formatFlags],!n.format)throw new Error("invalid Tabix preset format flags ".concat(n.formatFlags));n.columnNumbers={ref:e.readInt32LE(t+4),start:e.readInt32LE(t+8),end:e.readInt32LE(t+12)},n.metaValue=e.readInt32LE(t+16),n.metaChar=n.metaValue?String.fromCharCode(n.metaValue):"",n.skipLines=e.readInt32LE(t+20);var i=e.readInt32LE(t+24);return Object.assign(n,this._parseNameBytes(e.subarray(t+28,t+28+i))),n}},{key:"_parseNameBytes",value:function(e){for(var t=0,r=0,n=[],i={},a=0;a<e.length;a+=1)if(!e[a]){if(r<a){var s=e.toString("utf8",r,a);s=this.renameRefSeq(s),n[t]=s,i[s]=t}r=a+1,t+=1}return{refNameToId:i,refIdToName:n}}},{key:"_parse",value:function(){var e=Object(a.a)(f.a.mark((function e(t){var r,n,i,a,s,o,u,c,h,l,d,y,m,k,w,x,_;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={csi:!0,maxBlockSize:65536},e.next=3,this.filehandle.readFile(t);case 3:return n=e.sent,e.next=6,Object(p.unzip)(n);case 6:if(21582659!==(i=e.sent).readUInt32LE(0)){e.next=11;break}r.csiVersion=1,e.next=16;break;case 11:if(38359875!==i.readUInt32LE(0)){e.next=15;break}r.csiVersion=2,e.next=16;break;case 15:throw new Error("Not a CSI file");case 16:this.minShift=i.readInt32LE(4),this.depth=i.readInt32LE(8),this.maxBinNumber=((1<<3*(this.depth+1))-1)/7,(a=i.readInt32LE(12))&&Object.assign(r,this.parseAuxData(i,16,a)),r.refCount=i.readInt32LE(16+a),r.indices=new Array(r.refCount),s=16+a+4,o=0;case 25:if(!(o<r.refCount)){e.next=37;break}return e.next=28,Object(g.a)(t.signal);case 28:for(u=i.readInt32LE(s),s+=4,c={},h=void 0,l=0;l<u;l+=1)if((d=i.readUInt32LE(s))>this.maxBinNumber)h=this.parsePseudoBin(i,s+4),s+=48;else{for(y=Object(b.b)(i,s+4),this._findFirstData(r,y),m=i.readInt32LE(s+12),s+=16,k=new Array(m),w=0;w<m;w+=1)x=Object(b.b)(i,s),_=Object(b.b)(i,s+8),s+=16,k[w]=new v.a(x,_,d);c[d]=k}r.indices[o]={binIndex:c,stats:h};case 34:o+=1,e.next=25;break;case 37:return e.abrupt("return",r);case 38:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parsePseudoBin",value:function(e,t){return{lineCount:Object(g.c)(d.a.fromBytesLE(Array.prototype.slice.call(e,t+28,t+36),!0))}}},{key:"blocksForRange",value:function(){var e=Object(a.a)(f.a.mark((function e(t,r,a){var s,o,u,c,h,l,d,p,y,m,k,w,x,_=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=_.length>3&&void 0!==_[3]?_[3]:{},r<0&&(r=0),e.next=4,this.parse(s);case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",[]);case 7:if(u=o.indices[t]){e.next=10;break}return e.abrupt("return",[]);case 10:c=this.reg2bins(r,a),h=[],l=Object(i.a)(c);try{for(l.s();!(d=l.n()).done;)for(p=Object(n.a)(d.value,2),y=p[0],m=p[1],k=y;k<=m;k++)if(u.binIndex[k])for(w=u.binIndex[k],x=0;x<w.length;++x)h.push(new v.a(w[x].minv,w[x].maxv,k))}catch(f){l.e(f)}finally{l.f()}return e.abrupt("return",Object(g.e)(h,new b.a(0,0)));case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"reg2bins",value:function(e,t){(e-=1)<1&&(e=1),t>Math.pow(2,50)&&(t=Math.pow(2,34)),t-=1;for(var r,n=0,i=0,a=this.minShift+3*this.depth,s=[];n<=this.depth;a-=3,i+=(r=3*n,1*Math.pow(2,r)),n+=1){var o=i+m(e,a),u=i+m(t,a);if(u-o+s.length>this.maxBinNumber)throw new Error("query ".concat(e,"-").concat(t," is too large for current binning scheme (shift ").concat(this.minShift,", depth ").concat(this.depth,"), try a smaller query or a coarser index binning scheme"));s.push([o,u])}return s}}]),r}(y.a)},977:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return L})),r.d(t,"b",(function(){return q}));var n=r(6),i=r(5),a=r(12),s=r(11),o=r(10),u=r(15),c=r(964),h=r(944),f=r(966),l=r(942),d=r(2),p=r.n(d),b=r(429),v=r.n(b),g=r(120),y=r(439),m=r.n(y),k=r(113),w=r(914),x=r.n(w),_=r(1065),O=r.n(_),E=r(974),j=r(976),S=r(1007),I=r(1014),A=r(975),L=21840194,T=65536;function C(e){var t;return(t=[]).concat.apply(t,Object(u.a)(e))}function P(e){return R.apply(this,arguments)}function R(){return(R=Object(o.a)(p.a.mark((function e(t){var r,n,i,a,s,o,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=!1,i=!1,e.prev=3,s=Object(l.a)(t);case 5:return e.next=7,s.next();case 7:if(!(n=!(o=e.sent).done)){e.next=13;break}u=o.value,r.push(u);case 10:n=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),i=!0,a=e.t0;case 19:if(e.prev=19,e.prev=20,!n||null==s.return){e.next=24;break}return e.next=24,s.return();case 24:if(e.prev=24,!i){e.next=27;break}throw a;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})))).apply(this,arguments)}var q=function(){function t(e){var r=this,n=e.bamFilehandle,s=e.bamPath,u=e.bamUrl,c=e.baiPath,h=e.baiFilehandle,f=e.baiUrl,l=e.csiPath,d=e.csiFilehandle,b=e.csiUrl,v=e.fetchSizeLimit,g=e.chunkSizeLimit,y=e.yieldThreadTime,m=void 0===y?100:y,w=e.renameRefSeqs,_=void 0===w?function(e){return e}:w;if(Object(a.a)(this,t),this.featureCache=new x.a({cache:new O.a({maxSize:50}),fill:function(){var e=Object(o.a)(p.a.mark((function e(t,n){var a,s,o,u,c,h,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.chunk,s=t.opts,e.next=3,r._readChunk({chunk:a,opts:Object(i.a)(Object(i.a)({},s),{},{signal:n})});case 3:return o=e.sent,u=o.data,c=o.cpositions,h=o.dpositions,e.next=9,r.readBamFeatures(u,c,h,a);case 9:return f=e.sent,e.abrupt("return",f);case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}),this.renameRefSeq=_,n)this.bam=n;else if(s)this.bam=new k.LocalFile(s);else{if(!u)throw new Error("unable to initialize bam");this.bam=new k.RemoteFile(u)}if(d)this.index=new j.a({filehandle:d});else if(l)this.index=new j.a({filehandle:new k.LocalFile(l)});else if(b)this.index=new j.a({filehandle:new k.RemoteFile(b)});else if(h)this.index=new E.a({filehandle:h});else if(c)this.index=new E.a({filehandle:new k.LocalFile(c)});else if(f)this.index=new E.a({filehandle:new k.RemoteFile(f)});else if(s)this.index=new E.a({filehandle:new k.LocalFile("".concat(s,".bai"))});else{if(!u)throw new Error("unable to infer index format");this.index=new E.a({filehandle:new k.RemoteFile("".concat(u,".bai"))})}this.fetchSizeLimit=v||5e8,this.chunkSizeLimit=g||3e8,this.yieldThreadTime=m}return Object(s.a)(t,[{key:"getHeader",value:function(){var t=Object(o.a)(p.a.mark((function t(){var r,n,i,a,s,o,u,c,h,f,l,d,b=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=b.length>0&&void 0!==b[0]?b[0]:{},n=Object(A.d)(r),t.next=4,this.index.parse(n);case 4:if(i=t.sent,!(a=i.firstDataLine?i.firstDataLine.blockPosition+65535:void 0)){t.next=17;break}return t.next=9,this.bam.read(e.alloc(a+T),0,a+T,0,n);case 9:if(o=t.sent,u=o.bytesRead,s=o.buffer,u){t.next=14;break}throw new Error("Error reading header");case 14:s=u<a?s.subarray(0,u):s.subarray(0,a),t.next=20;break;case 17:return t.next=19,this.bam.readFile(n);case 19:s=t.sent;case 20:return t.next=22,Object(g.unzip)(s);case 22:if((c=t.sent).readInt32LE(0)===L){t.next=25;break}throw new Error("Not a BAM file");case 25:return h=c.readInt32LE(4),this.header=c.toString("utf8",8,8+h),t.next=29,this._readRefSeqs(h+8,65535,n);case 29:return f=t.sent,l=f.chrToIndex,d=f.indexToChr,this.chrToIndex=l,this.indexToChr=d,t.abrupt("return",Object(I.a)(this.header));case 35:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getHeaderText",value:function(){var e=Object(o.a)(p.a.mark((function e(){var t,r=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.getHeader(t);case 3:return e.abrupt("return",this.header);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_readRefSeqs",value:function(){var t=Object(o.a)(p.a.mark((function t(r,n){var i,a,s,o,u,c,h,f,l,d,b,v,y,m,k=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=k.length>2&&void 0!==k[2]?k[2]:{},!(r>n)){t.next=3;break}return t.abrupt("return",this._readRefSeqs(r,2*n,i));case 3:return a=n+T,t.next=6,this.bam.read(e.alloc(a),0,n,0,i);case 6:if(s=t.sent,o=s.bytesRead,u=s.buffer,o){t.next=11;break}throw new Error("Error reading refseqs from header");case 11:return t.next=13,Object(g.unzip)(u.subarray(0,Math.min(o,n)));case 13:c=t.sent,h=c.readInt32LE(r),f=r+4,l={},d=[],b=0;case 19:if(!(b<h)){t.next=32;break}if(v=c.readInt32LE(f),y=this.renameRefSeq(c.toString("utf8",f+4,f+4+v-1)),m=c.readInt32LE(f+v+4),l[y]=b,d.push({refName:y,length:m}),!((f=f+8+v)>c.length)){t.next=29;break}return console.warn("BAM header is very big.  Re-fetching ".concat(n," bytes.")),t.abrupt("return",this._readRefSeqs(r,2*n,i));case 29:b+=1,t.next=19;break;case 32:return t.abrupt("return",{chrToIndex:l,indexToChr:d});case 33:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getRecordsForRange",value:function(){var e=Object(o.a)(p.a.mark((function e(t,r,n){var i,a=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>3&&void 0!==a[3]?a[3]:{viewAsPairs:!1,pairAcrossChr:!1,maxInsertSize:2e5},e.t0=C,e.next=4,P(this.streamRecordsForRange(t,r,n,i));case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"streamRecordsForRange",value:function(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(c.a)(p.a.mark((function a(){var s,o,u,c,d,b;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=i.signal,(o=n.chrToIndex&&n.chrToIndex[e])>=0){a.next=6;break}u=[],a.next=11;break;case 6:return a.next=8,Object(h.a)(n.index.blocksForRange(o,t-1,r,i));case 8:if(u=a.sent){a.next=11;break}throw new Error("Error in index fetch");case 11:c=0;case 12:if(!(c<u.length)){a.next=21;break}return a.next=15,Object(h.a)(Object(A.a)(s));case 15:if(!((d=u[c].fetchedSize())>n.chunkSizeLimit)){a.next=18;break}throw new Error("Too many BAM features. BAM chunk size ".concat(d," bytes exceeds chunkSizeLimit of ").concat(n.chunkSizeLimit));case 18:c+=1,a.next=12;break;case 21:if(!((b=u.map((function(e){return e.fetchedSize()})).reduce((function(e,t){return e+t}),0))>n.fetchSizeLimit)){a.next=24;break}throw new Error("data size of ".concat(b.toLocaleString()," bytes exceeded fetch size limit of ").concat(n.fetchSizeLimit.toLocaleString()," bytes"));case 24:return a.delegateYield(Object(f.a)(Object(l.a)(n._fetchChunkFeatures(u,o,t,r,i)),h.a),"t0",25);case 25:case"end":return a.stop()}}),a)})))()}},{key:"_fetchChunkFeatures",value:function(e,t,r,n,i){var a=this;return Object(c.a)(p.a.mark((function s(){var o,u,c,f,l,d,b,v,g,y;return p.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:o=i.viewAsPairs,u=void 0!==o&&o,c=[],f=!1,l=0;case 4:if(!(l<e.length)){s.next=31;break}return d=e[l],s.next=8,Object(h.a)(a.featureCache.get(d.toString(),{chunk:d,opts:i},i.signal));case 8:b=s.sent,v=[],g=0;case 11:if(!(g<b.length)){s.next=23;break}if((y=b[g]).seq_id()!==t){s.next=20;break}if(!(y.get("start")>=n)){s.next=19;break}return f=!0,s.abrupt("break",23);case 19:y.get("end")>=r&&v.push(y);case 20:g+=1,s.next=11;break;case 23:return c.push(v),s.next=26,v;case 26:if(!f){s.next=28;break}return s.abrupt("break",31);case 28:l++,s.next=4;break;case 31:if(Object(A.b)(i.signal),!u){s.next=35;break}return s.next=35,a.fetchPairs(t,c,i);case 35:case"end":return s.stop()}}),s)})))()}},{key:"fetchPairs",value:function(){var e=Object(o.a)(p.a.mark((function e(t,r,i){var a,s,u,c,h,f,l,d,b,v,g=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.pairAcrossChr,s=void 0!==a&&a,u=i.maxInsertSize,c=void 0===u?2e5:u,h={},f={},r.map((function(e){for(var t={},r=0;r<e.length;r++){var i=e[r].name(),a=e[r].id();t[i]||(t[i]=0),t[i]++,f[a]=1}m()(t).forEach((function(e){var t=Object(n.a)(e,2),r=t[0];1===t[1]&&(h[r]=!0)}))})),l=[],r.map((function(e){for(var r=0;r<e.length;r++){var n=e[r],a=n.name(),o=n.get("start"),u=n._next_pos(),f=n._next_refid();h[a]&&(s||f===t&&Math.abs(o-u)<c)&&l.push(g.index.blocksForRange(f,u,u+1,i))}})),e.t0=C,e.next=9,Promise.all(l);case 9:if(e.t1=e.sent,d=(0,e.t0)(e.t1).sort().filter((function(e,t,r){return!t||e.toString()!==r[t-1].toString()})),!((b=d.map((function(e){return e.fetchedSize()})).reduce((function(e,t){return e+t}),0))>this.fetchSizeLimit)){e.next=14;break}throw new Error("data size of ".concat(b.toLocaleString()," bytes exceeded fetch size limit of ").concat(this.fetchSizeLimit.toLocaleString()," bytes"));case 14:return v=d.map(function(){var e=Object(o.a)(p.a.mark((function e(t){var r,n,a,s,o,u,c,l,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g._readChunk({chunk:t,opts:i});case 2:return r=e.sent,n=r.data,a=r.cpositions,s=r.dpositions,o=r.chunk,e.next=9,g.readBamFeatures(n,a,s,o);case 9:for(u=e.sent,c=[],l=0;l<u.length;l+=1)d=u[l],h[d.get("name")]&&!f[d.id()]&&c.push(d);return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.t2=C,e.next=18,Promise.all(v);case 18:return e.t3=e.sent,e.abrupt("return",(0,e.t2)(e.t3));case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_readChunk",value:function(){var t=Object(o.a)(p.a.mark((function t(r){var n,i,a,s,o,u,c,h,f,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.chunk,i=r.opts,a=n.fetchedSize(),t.next=4,this.bam.read(e.alloc(a),0,a,n.minv.blockPosition,i);case 4:return s=t.sent,o=s.buffer,u=s.bytesRead,t.next=9,Object(g.unzipChunkSlice)(o.subarray(0,Math.min(u,a)),n);case 9:return c=t.sent,h=c.buffer,f=c.cpositions,l=c.dpositions,t.abrupt("return",{data:h,cpositions:f,dpositions:l,chunk:n});case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"readBamFeatures",value:function(){var e=Object(o.a)(p.a.mark((function e(t,r,n,i){var a,s,o,u,c,h,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0,s=[],o=0,u=+Date.now();case 4:if(!(a+4<t.length)){e.next=18;break}if(c=t.readInt32LE(a),h=a+4+c-1,n){for(;a+i.minv.dataPosition>=n[o++];);o--}if(!(h<t.length)){e.next=15;break}if(f=new S.a({bytes:{byteArray:t,start:a,end:h},fileOffset:r?256*r[o]+(a-n[o])+i.minv.dataPosition+1:v.a.signed(t.slice(a,h))}),s.push(f),!(this.yieldThreadTime&&+Date.now()-u>this.yieldThreadTime)){e.next=15;break}return e.next=14,Object(A.f)(1);case 14:u=+Date.now();case 15:a=h+1,e.next=4;break;case 18:return e.abrupt("return",s);case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"hasRefSeq",value:function(){var e=Object(o.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.chrToIndex&&this.chrToIndex[t],e.abrupt("return",this.index.hasRefSeq(r));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"lineCount",value:function(){var e=Object(o.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.chrToIndex&&this.chrToIndex[t],e.abrupt("return",this.index.lineCount(r));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"indexCov",value:function(){var e=Object(o.a)(p.a.mark((function e(t,r,n){var i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.index.parse();case 2:return i=this.chrToIndex&&this.chrToIndex[t],e.abrupt("return",this.index.indexCov(i,r,n));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"blocksForRange",value:function(){var e=Object(o.a)(p.a.mark((function e(t,r,n,i){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.index.parse();case 2:return a=this.chrToIndex&&this.chrToIndex[t],e.abrupt("return",this.index.blocksForRange(a,r,n,i));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()}]),t}()}).call(this,r(64).Buffer)}});
//# sourceMappingURL=10.aa3f117980c15500c977.worker.js.map