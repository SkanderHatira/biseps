this.webpackChunk([17],{1006:function(e,t,r){"use strict";r.r(t),r.d(t,"unescape",(function(){return o})),r.d(t,"escape",(function(){return u})),r.d(t,"escapeColumn",(function(){return c})),r.d(t,"parseAttributes",(function(){return l})),r.d(t,"parseFeature",(function(){return h})),r.d(t,"parseDirective",(function(){return f})),r.d(t,"formatAttributes",(function(){return v})),r.d(t,"formatFeature",(function(){return m})),r.d(t,"formatDirective",(function(){return _})),r.d(t,"formatComment",(function(){return y})),r.d(t,"formatSequence",(function(){return k})),r.d(t,"formatItem",(function(){return g}));var n=r(5),i=r(6),a=r(15);function o(e){return e.replace(/%([0-9A-Fa-f]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))}))}function s(e,t){return String(t).replace(e,(function(e){var t=e.charCodeAt(0).toString(16).toUpperCase().padStart(2,"0");return"%".concat(t)}))}function u(e){return s(/[\n;\r\t=%&,\x00-\x1f\x7f-\xff]/g,e)}function c(e){return s(/[\n\r\t%\x00-\x1f\x7f-\xff]/g,e)}function l(e){if(!e||!e.length||"."===e)return{};var t={};return e.replace(/\r?\n$/,"").split(";").forEach((function(e){var r,n=e.split("=",2);if(n[1]&&n[1].length){n[0]=n[0].trim();var i=t[n[0].trim()];i||(i=[],t[n[0]]=i),(r=i).push.apply(r,Object(a.a)(n[1].split(",").map((function(e){return e.trim()})).map(o)))}})),t}function h(e){var t=e.split("\t").map((function(e){return"."===e||""===e?null:e}));return{seq_id:t[0]&&o(t[0]),source:t[1]&&o(t[1]),type:t[2]&&o(t[2]),start:null===t[3]?null:parseInt(t[3],10),end:null===t[4]?null:parseInt(t[4],10),score:null===t[5]?null:parseFloat(t[5]),strand:t[6],phase:t[7],attributes:null===t[8]?null:l(t[8])}}function f(e){var t=/^\s*##\s*(\S+)\s*(.*)/.exec(e);if(!t)return null;var r=Object(i.a)(t,2)[1],a=Object(i.a)(t,3)[2],o={directive:r};if(a.length&&(a=a.replace(/\r?\n$/,""),o.value=a),"sequence-region"===r){var s=a.split(/\s+/,3);return Object(n.a)(Object(n.a)({},o),{},{seq_id:s[0],start:s[1]&&s[1].replace(/\D/g,""),end:s[2]&&s[2].replace(/\D/g,"")})}if("genome-build"===r){var u=a.split(/\s+/,2),c=Object(i.a)(u,2),l=c[0],h=c[1];return Object(n.a)(Object(n.a)({},o),{},{source:l,buildName:h})}return o}function v(e){var t=[];return Object.entries(e).forEach((function(e){var r,n=Object(i.a)(e,2),a=n[0],o=n[1];o&&(r=o.hasOwnProperty("toString")?u(o.toString()):Array.isArray(o)?o.map(u).join(","):u(o),t.push("".concat(u(a),"=").concat(r)))})),t.length?t.join(";"):"."}function d(e,t){var r=null===e.attributes||void 0===e.attributes?".":v(e.attributes),n=[null===e.seq_id?".":c(e.seq_id),null===e.source?".":c(e.source),null===e.type?".":c(e.type),null===e.start?".":c(e.start),null===e.end?".":c(e.end),null===e.score?".":c(e.score),null===e.strand?".":c(e.strand),null===e.phase?".":c(e.phase),r],i="".concat(n.join("\t"),"\n");return t[i]?"":(t[i]=!0,i)}function p(e,t){if(Array.isArray(e))return e.map((function(e){return p(e,t)})).join("");var r,n=[d(e,t)];return void 0!==(r=e).child_features&&void 0!==r.derived_features&&n.push.apply(n,Object(a.a)(e.child_features.map((function(e){return p(e,t)}))).concat(Object(a.a)(e.derived_features.map((function(e){return p(e,t)}))))),n.join("")}function m(e){return p(e,{})}function _(e){var t="##".concat(e.directive);return e.value&&(t+=" ".concat(e.value)),t+="\n"}function y(e){return"# ".concat(e.comment,"\n")}function k(e){return">".concat(e.id).concat(e.description?" ".concat(e.description):"","\n").concat(e.sequence,"\n")}function g(e){function t(e){return"attributes"in e?m(e):"directive"in e?_(e):"sequence"in e?k(e):"comment"in e?y(e):"# (invalid item found during format)\n"}return Array.isArray(e)?e.map(t):t(e)}},1051:function(e,t,r){"use strict";var n=r(12),i=r(11),a=function(){function e(t,r){Object(n.a)(this,e),this.low=t,this.high=r}return Object(i.a)(e,[{key:"clone",value:function(){return new e(this.low,this.high)}},{key:"max",get:function(){return this.clone()}},{key:"less_than",value:function(e){return this.low<e.low||this.low==e.low&&this.high<e.high}},{key:"equal_to",value:function(e){return this.low==e.low&&this.high==e.high}},{key:"intersect",value:function(e){return!this.not_intersect(e)}},{key:"not_intersect",value:function(e){return this.high<e.low||e.high<this.low}},{key:"merge",value:function(t){return new e(void 0===this.low?t.low:Math.min(this.low,t.low),void 0===this.high?t.high:Math.max(this.high,t.high))}},{key:"output",value:function(){return[this.low,this.high]}}],[{key:"comparable_max",value:function(e,t){return e.merge(t)}},{key:"comparable_less_than",value:function(e,t){return e<t}}]),e}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;Object(n.a)(this,e),this.left=i,this.right=o,this.parent=s,this.color=u,this.item={key:t,value:r},t&&t instanceof Array&&2==t.length&&(Number.isNaN(t[0])||Number.isNaN(t[1])||(this.item.key=new a(Math.min(t[0],t[1]),Math.max(t[0],t[1])))),this.max=this.item.key?this.item.key.max:void 0}return Object(i.a)(e,[{key:"isNil",value:function(){return void 0===this.item.key&&void 0===this.item.value&&null===this.left&&null===this.right&&1===this.color}},{key:"less_than",value:function(e){if(this.item.value===this.item.key&&e.item.value===e.item.key)return this.item.key.less_than(e.item.key);var t=this.item.value&&e.item.value&&this.item.value.less_than?this.item.value.less_than(e.item.value):this.item.value<e.item.value;return this.item.key.less_than(e.item.key)||this.item.key.equal_to(e.item.key)&&t}},{key:"equal_to",value:function(e){if(this.item.value===this.item.key&&e.item.value===e.item.key)return this.item.key.equal_to(e.item.key);var t=this.item.value&&e.item.value&&this.item.value.equal_to?this.item.value.equal_to(e.item.value):this.item.value==e.item.value;return this.item.key.equal_to(e.item.key)&&t}},{key:"intersect",value:function(e){return this.item.key.intersect(e.item.key)}},{key:"copy_data",value:function(e){this.item.key=e.item.key,this.item.value=e.item.value}},{key:"update_max",value:function(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){var e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.right.max)}if(this.left&&this.left.max){var t=this.item.key.constructor.comparable_max;this.max=t(this.max,this.left.max)}}},{key:"not_intersect_left_subtree",value:function(e){return(0,this.item.key.constructor.comparable_less_than)(void 0!==this.left.max.high?this.left.max.high:this.left.max,e.item.key.low)}},{key:"not_intersect_right_subtree",value:function(e){var t=this.item.key.constructor.comparable_less_than,r=void 0!==this.right.max.low?this.right.max.low:this.right.item.key.low;return t(e.item.key.high,r)}}]),e}(),s=function(){function e(){Object(n.a)(this,e),this.root=null,this.nil_node=new o}return Object(i.a)(e,[{key:"size",get:function(){var e=0;return this.tree_walk(this.root,(function(){return e++})),e}},{key:"keys",get:function(){var e=[];return this.tree_walk(this.root,(function(t){return e.push(t.item.key.output?t.item.key.output():t.item.key)})),e}},{key:"values",get:function(){var e=[];return this.tree_walk(this.root,(function(t){return e.push(t.item.value)})),e}},{key:"items",get:function(){var e=[];return this.tree_walk(this.root,(function(t){return e.push({key:t.item.key.output?t.item.key.output():t.item.key,value:t.item.value})})),e}},{key:"isEmpty",value:function(){return null==this.root||this.root==this.nil_node}},{key:"insert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(void 0!==e){var r=new o(e,t,this.nil_node,this.nil_node,null,0);return this.tree_insert(r),this.recalc_max(r),r}}},{key:"exist",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=new o(e,t);return!!this.tree_search(this.root,r)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=new o(e,t),n=this.tree_search(this.root,r);return n&&this.tree_delete(n),n}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return e===t?t.output():e},r=new o(e),n=[];return this.tree_search_interval(this.root,r,n),n.map((function(e){return t(e.item.value,e.item.key)}))}},{key:"intersect_any",value:function(e){var t=new o(e);return this.tree_find_any_interval(this.root,t)}},{key:"forEach",value:function(e){this.tree_walk(this.root,(function(t){return e(t.item.key,t.item.value)}))}},{key:"map",value:function(t){var r=new e;return this.tree_walk(this.root,(function(e){return r.insert(e.item.key,t(e.item.value,e.item.key))})),r}},{key:"recalc_max",value:function(e){for(var t=e;null!=t.parent;)t.parent.update_max(),t=t.parent}},{key:"tree_insert",value:function(e){var t=this.root,r=null;if(null==this.root||this.root==this.nil_node)this.root=e;else{for(;t!=this.nil_node;)r=t,t=e.less_than(t)?t.left:t.right;e.parent=r,e.less_than(r)?r.left=e:r.right=e}this.insert_fixup(e)}},{key:"insert_fixup",value:function(e){var t,r;for(t=e;t!=this.root&&0==t.parent.color;)t.parent==t.parent.parent.left?0==(r=t.parent.parent.right).color?(t.parent.color=1,r.color=1,t.parent.parent.color=0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.rotate_left(t)),t.parent.color=1,t.parent.parent.color=0,this.rotate_right(t.parent.parent)):0==(r=t.parent.parent.left).color?(t.parent.color=1,r.color=1,t.parent.parent.color=0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.rotate_right(t)),t.parent.color=1,t.parent.parent.color=0,this.rotate_left(t.parent.parent));this.root.color=1}},{key:"tree_delete",value:function(e){var t,r;(r=(t=e.left==this.nil_node||e.right==this.nil_node?e:this.tree_successor(e)).left!=this.nil_node?t.left:t.right).parent=t.parent,t==this.root?this.root=r:(t==t.parent.left?t.parent.left=r:t.parent.right=r,t.parent.update_max()),this.recalc_max(r),t!=e&&(e.copy_data(t),e.update_max(),this.recalc_max(e)),1==t.color&&this.delete_fixup(r)}},{key:"delete_fixup",value:function(e){for(var t,r=e;r!=this.root&&null!=r.parent&&1==r.color;)r==r.parent.left?(0==(t=r.parent.right).color&&(t.color=1,r.parent.color=0,this.rotate_left(r.parent),t=r.parent.right),1==t.left.color&&1==t.right.color?(t.color=0,r=r.parent):(1==t.right.color&&(t.color=0,t.left.color=1,this.rotate_right(t),t=r.parent.right),t.color=r.parent.color,r.parent.color=1,t.right.color=1,this.rotate_left(r.parent),r=this.root)):(0==(t=r.parent.left).color&&(t.color=1,r.parent.color=0,this.rotate_right(r.parent),t=r.parent.left),1==t.left.color&&1==t.right.color?(t.color=0,r=r.parent):(1==t.left.color&&(t.color=0,t.right.color=1,this.rotate_left(t),t=r.parent.left),t.color=r.parent.color,r.parent.color=1,t.left.color=1,this.rotate_right(r.parent),r=this.root));r.color=1}},{key:"tree_search",value:function(e,t){if(null!=e&&e!=this.nil_node)return t.equal_to(e)?e:t.less_than(e)?this.tree_search(e.left,t):this.tree_search(e.right,t)}},{key:"tree_search_interval",value:function(e,t,r){null!=e&&e!=this.nil_node&&(e.left==this.nil_node||e.not_intersect_left_subtree(t)||this.tree_search_interval(e.left,t,r),e.intersect(t)&&r.push(e),e.right==this.nil_node||e.not_intersect_right_subtree(t)||this.tree_search_interval(e.right,t,r))}},{key:"tree_find_any_interval",value:function(e,t){var r=!1;return null!=e&&e!=this.nil_node&&(e.left==this.nil_node||e.not_intersect_left_subtree(t)||(r=this.tree_find_any_interval(e.left,t)),r||(r=e.intersect(t)),r||e.right==this.nil_node||e.not_intersect_right_subtree(t)||(r=this.tree_find_any_interval(e.right,t))),r}},{key:"local_minimum",value:function(e){for(var t=e;null!=t.left&&t.left!=this.nil_node;)t=t.left;return t}},{key:"local_maximum",value:function(e){for(var t=e;null!=t.right&&t.right!=this.nil_node;)t=t.right;return t}},{key:"tree_successor",value:function(e){var t,r,n;if(e.right!=this.nil_node)t=this.local_minimum(e.right);else{for(r=e,n=e.parent;null!=n&&n.right==r;)r=n,n=n.parent;t=n}return t}},{key:"rotate_left",value:function(e){var t=e.right;e.right=t.left,t.left!=this.nil_node&&(t.left.parent=e),t.parent=e.parent,e==this.root?this.root=t:e==e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,null!=e&&e!=this.nil_node&&e.update_max(),null!=(t=e.parent)&&t!=this.nil_node&&t.update_max()}},{key:"rotate_right",value:function(e){var t=e.left;e.left=t.right,t.right!=this.nil_node&&(t.right.parent=e),t.parent=e.parent,e==this.root?this.root=t:e==e.parent.left?e.parent.left=t:e.parent.right=t,t.right=e,e.parent=t,null!=e&&e!=this.nil_node&&e.update_max(),null!=(t=e.parent)&&t!=this.nil_node&&t.update_max()}},{key:"tree_walk",value:function(e,t){null!=e&&e!=this.nil_node&&(this.tree_walk(e.left,t),t(e),this.tree_walk(e.right,t))}},{key:"testRedBlackProperty",value:function(){var e=!0;return this.tree_walk(this.root,(function(t){0==t.color&&(1==t.left.color&&1==t.right.color||(e=!1))})),e}},{key:"testBlackHeightProperty",value:function(e){var t=0,r=0;if(1==e.color&&t++,(r=e.left!=this.nil_node?this.testBlackHeightProperty(e.left):1)!=(e.right!=this.nil_node?this.testBlackHeightProperty(e.right):1))throw new Error("Red-black height property violated");return t+=r}}]),e}();t.a=s},1052:function(e,t,r){e.exports=i;var n=r(422).EventEmitter;function i(){n.call(this)}r(162)(i,n),i.Readable=r(415),i.Writable=r(1053),i.Duplex=r(1054),i.Transform=r(1055),i.PassThrough=r(1056),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function a(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",u));var o=!1;function s(){o||(o=!0,e.end())}function u(){o||(o=!0,"function"===typeof e.destroy&&e.destroy())}function c(e){if(l(),0===n.listenerCount(this,"error"))throw e}function l(){r.removeListener("data",i),e.removeListener("drain",a),r.removeListener("end",s),r.removeListener("close",u),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),e.removeListener("close",l)}return r.on("error",c),e.on("error",c),r.on("end",l),r.on("close",l),e.on("close",l),e.emit("pipe",r),e}},1053:function(e,t,r){e.exports=r(423)},1054:function(e,t,r){e.exports=r(179)},1055:function(e,t,r){e.exports=r(415).Transform},1056:function(e,t,r){e.exports=r(415).PassThrough},1196:function(e,t,r){"use strict";var n=r(1197),i=r(1006);t.a={parseStream:n.d,parseStringSync:n.e,formatSync:n.c,formatStream:n.b,formatFile:n.a,util:i}},1197:function(e,t,r){"use strict";(function(e){r.d(t,"d",(function(){return m})),r.d(t,"e",(function(){return _})),r.d(t,"c",(function(){return y})),r.d(t,"b",(function(){return g})),r.d(t,"a",(function(){return b}));var n=r(12),i=r(11),a=r(138),o=r(17),s=r(18),u=r(5),c=r(1052),l=r(424),h=r(1198),f=r(1006);function v(t){e&&e.nextTick?e.nextTick(t):t()}function d(e){var t=Object(u.a)({encoding:"utf8",parseFeatures:!0,parseDirectives:!1,parseSequences:!0,parseComments:!1,bufferSize:1e3},e);return e.parseAll&&(t.parseFeatures=!0,t.parseDirectives=!0,t.parseComments=!0,t.parseSequences=!0),t}var p=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,r),(e=t.call(this,{objectMode:!0})).textBuffer="";var o=d(i);e.encoding=i.encoding||"utf8",e.decoder=new l.StringDecoder;var s=e.push.bind(Object(a.a)(e));return e.parser=new h.a({featureCallback:o.parseFeatures?s:void 0,directiveCallback:o.parseDirectives?s:void 0,commentCallback:o.parseComments?s:void 0,sequenceCallback:o.parseSequences?s:void 0,errorCallback:function(t){return e.emit("error",t)},bufferSize:o.bufferSize}),e}return Object(i.a)(r,[{key:"_addLine",value:function(e){e&&this.parser.addLine(e)}},{key:"_nextText",value:function(e){var t=this,r=(this.textBuffer+e).split(/\r?\n/);this.textBuffer=r.pop()||"",r.forEach((function(e){return t._addLine(e)}))}},{key:"_transform",value:function(e,t,r){this._nextText(this.decoder.write(e)),v(r)}},{key:"_flush",value:function(e){this.decoder.end&&this._nextText(this.decoder.end()),null!=this.textBuffer&&this._addLine(this.textBuffer),this.parser.finish(),v(e)}}]),r}(c.Transform);function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new p(e)}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return[];var r=d(t),n=[],i=n.push.bind(n),a=new h.a({featureCallback:r.parseFeatures?i:void 0,directiveCallback:r.parseDirectives?i:void 0,commentCallback:r.parseComments?i:void 0,sequenceCallback:r.parseSequences?i:void 0,bufferSize:1/0,errorCallback:function(e){throw e}});return e.split(/\r?\n/).forEach(a.addLine.bind(a)),a.finish(),n}function y(e){var t=[],r=[];e.forEach((function(e){"sequence"in e?r.push(e):t.push(e)}));var n=t.map(f.formatItem).join("");return r.length&&(n+="##FASTA\n",n+=r.map(f.formatSequence).join("")),n}var k=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)(this,r),(e=t.call(this,Object.assign(i,{objectMode:!0}))).linesSinceLastSyncMark=0,e.haveWeEmittedData=!1,e.fastaMode=!1,e.minLinesBetweenSyncMarks=i.minSyncLines||100,e.insertVersionDirective=i.insertVersionDirective||!1,e}return Object(i.a)(r,[{key:"_transform",value:function(e,t,r){var n;if(!this.haveWeEmittedData&&this.insertVersionDirective){var i=Array.isArray(e)?e[0]:e;"directive"in i&&"gff-version"!==i.directive&&this.push("##gff-version 3\n")}if("sequence"in e&&!this.fastaMode&&(this.push("##FASTA\n"),this.fastaMode=!0),n=Array.isArray(e)?e.map(f.formatItem).join(""):Object(f.formatItem)(e),this.push(n),this.linesSinceLastSyncMark>=this.minLinesBetweenSyncMarks)this.push("###\n"),this.linesSinceLastSyncMark=0;else{for(var a=0,o=0;o<n.length;o+=1)"\n"===n[o]&&(a+=1);this.linesSinceLastSyncMark+=a}this.haveWeEmittedData=!0,v(r)}}]),r}(c.Transform);function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new k(e)}function b(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object(u.a)({insertVersionDirective:!0},r);return new Promise((function(r,i){e.pipe(new k(n)).on("end",(function(){return r(null)})).on("error",i).pipe(t)}))}}).call(this,r(114))},1198:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(15),i=r(5),a=r(6),o=r(12),s=r(11),u=r(1006),c="child_features",l="derived_features",h=function(){function e(t){Object(o.a)(this,e),this.seqCallback=t,this.currentSequence=void 0}return Object(s.a)(e,[{key:"addLine",value:function(e){var t=/^>\s*(\S+)\s*(.*)/.exec(e);t?(this._flush(),this.currentSequence={id:t[1],sequence:""},t[2]&&(this.currentSequence.description=t[2].trim())):this.currentSequence&&/\S/.test(e)&&(this.currentSequence.sequence+=e.replace(/\s/g,""))}},{key:"_flush",value:function(){this.currentSequence&&this.seqCallback(this.currentSequence)}},{key:"finish",value:function(){this._flush()}}]),e}(),f=function(){function e(t){Object(o.a)(this,e),this.fastaParser=void 0,this.eof=!1,this.lineNumber=0,this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={},this._underConstructionOrphans={};var r=function(){};this.featureCallback=t.featureCallback||r,this.endCallback=t.endCallback||r,this.commentCallback=t.commentCallback||r,this.errorCallback=t.errorCallback||r,this.directiveCallback=t.directiveCallback||r,this.sequenceCallback=t.sequenceCallback||r,this.bufferSize=void 0===t.bufferSize?1e3:t.bufferSize}return Object(s.a)(e,[{key:"addLine",value:function(e){if(this.fastaParser)this.fastaParser.addLine(e);else if(!this.eof)if(this.lineNumber+=1,/^\s*[^#\s>]/.test(e))this._bufferLine(e);else{var t=/^\s*(#+)(.*)/.exec(e);if(t){var r=Object(a.a)(t,2)[1],n=Object(a.a)(t,3)[2];if(3===r.length)this._emitAllUnderConstructionFeatures();else if(2===r.length){var i=u.parseDirective(e);i&&("FASTA"===i.directive?(this._emitAllUnderConstructionFeatures(),this.eof=!0,this.fastaParser=new h(this.sequenceCallback)):this._emitItem(i))}else n=n.replace(/\s*/,""),this._emitItem({comment:n})}else if(/^\s*$/.test(e));else{if(!/^\s*>/.test(e)){var o=e.replace(/\r?\n?$/g,"");throw new Error("GFF3 parse error.  Cannot parse '".concat(o,"'."))}this._emitAllUnderConstructionFeatures(),this.eof=!0,this.fastaParser=new h(this.sequenceCallback),this.fastaParser.addLine(e)}}}},{key:"finish",value:function(){this._emitAllUnderConstructionFeatures(),this.fastaParser&&this.fastaParser.finish(),this.endCallback()}},{key:"_emitItem",value:function(e){Array.isArray(e)?this.featureCallback(e):"directive"in e?this.directiveCallback(e):"comment"in e&&this.commentCallback(e)}},{key:"_enforceBufferSizeLimit",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=function t(r){r&&Array.isArray(r)&&r[0].attributes&&r[0].attributes.ID&&r[0].attributes.ID[0]&&(r[0].attributes.ID.forEach((function(t){delete e._underConstructionById[t],delete e._completedReferences[t]})),r.forEach((function(e){e.child_features&&e.child_features.forEach((function(e){return t(e)})),e.derived_features&&e.derived_features.forEach((function(e){return t(e)}))})))};this._underConstructionTopLevel.length+t>this.bufferSize;){var n=this._underConstructionTopLevel.shift();n&&(this._emitItem(n),r(n))}}},{key:"_emitAllUnderConstructionFeatures",value:function(){if(this._underConstructionTopLevel.forEach(this._emitItem.bind(this)),this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={},Array.from(Object.values(this._underConstructionOrphans)).length)throw new Error("some features reference other features that do not exist in the file (or in the same '###' scope). ".concat(JSON.stringify(this._underConstructionOrphans)))}},{key:"_bufferLine",value:function(e){var t,r,n,a=this,o=u.parseFeature(e),s=Object(i.a)(Object(i.a)({},o),{},{child_features:[],derived_features:[]}),c=(null===(t=s.attributes)||void 0===t?void 0:t.ID)||[],l=(null===(r=s.attributes)||void 0===r?void 0:r.Parent)||[],h=(null===(n=s.attributes)||void 0===n?void 0:n.Derives_from)||[];if(c.length||l.length||h.length){var f=void 0;c.forEach((function(e){var t=a._underConstructionById[e];t?(t[t.length-1].type!==s.type&&a._parseError('multi-line feature "'.concat(e,'" has inconsistent types: "').concat(s.type,'", "').concat(t[t.length-1].type,'"')),t.push(s),f=t):(f=[s],a._enforceBufferSizeLimit(1),l.length||h.length||a._underConstructionTopLevel.push(f),a._underConstructionById[e]=f,a._resolveReferencesTo(f,e))})),this._resolveReferencesFrom(f||[s],{Parent:l,Derives_from:h},c)}else this._emitItem([s])}},{key:"_resolveReferencesTo",value:function(e,t){var r=this._underConstructionOrphans[t];r&&(e.forEach((function(e){var t;(t=e.child_features).push.apply(t,Object(n.a)(r.Parent))})),e.forEach((function(e){var t;(t=e.derived_features).push.apply(t,Object(n.a)(r.Derives_from))})),delete this._underConstructionOrphans[t])}},{key:"_parseError",value:function(e){this.eof=!0,this.errorCallback("".concat(this.lineNumber,": ").concat(e))}},{key:"_resolveReferencesFrom",value:function(e,t,r){var n=this;function i(e,t,r){var n=e[t];n||(n={},e[t]=n);var i=n[r]||!1;return n[r]=!0,i}t.Parent.forEach((function(t){var a=n._underConstructionById[t];if(a){var o=c;r.filter((function(e){return i(n._completedReferences,e,"Parent,".concat(t))})).length||a.forEach((function(t){t[o].push(e)}))}else{var s=n._underConstructionOrphans[t];s||(s={Parent:[],Derives_from:[]},n._underConstructionOrphans[t]=s),s.Parent.push(e)}})),t.Derives_from.forEach((function(t){var a=n._underConstructionById[t];if(a){var o=l;r.filter((function(e){return i(n._completedReferences,e,"Derives_from,".concat(t))})).length||a.forEach((function(t){t[o].push(e)}))}else{var s=n._underConstructionOrphans[t];s||(s={Parent:[],Derives_from:[]},n._underConstructionOrphans[t]=s),s.Derives_from.push(e)}}))}}]),e}()},1290:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return b}));var n=r(6),i=r(5),a=r(10),o=r(12),s=r(11),u=r(17),c=r(18),l=r(2),h=r.n(l),f=r(53),v=r(4),d=r(41),p=r(75),m=r(1051),_=r(47),y=r(120),k=r(1196);function g(e){return 31===e[0]&&139===e[1]&&8===e[2]}var b=function(e){Object(u.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(o.a)(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).gffFeatures=void 0,e}return Object(s.a)(r,[{key:"loadDataP",value:function(){var e=Object(a.a)(h.a.mark((function e(){var t,r,n,i,a,o,s,u,c,l=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.openLocation)(Object(v.readConfObject)(this.config,"gffLocation"),this.pluginManager).readFile();case 2:if(!g(t=e.sent)){e.next=9;break}return e.next=6,Object(y.unzip)(t);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=t;case 10:if(!((r=e.t0).length>536870888)){e.next=13;break}throw new Error("Data exceeds maximum string length (512MB)");case 13:for(n=new TextDecoder("utf8",{fatal:!0}).decode(r),i=n.split("\n"),a=[],o=0;o<i.length&&i[o].startsWith("#");o++)a.push(i[o]);return s=a.join("\n"),u=k.a.parseStringSync(n,{parseFeatures:!0,parseComments:!1,parseDirectives:!1,parseSequences:!1}),c=u.flat().map((function(e,t){return new _.a({data:l.featureData(e),id:"".concat(l.id,"-offset-").concat(t)})})).reduce((function(e,t){var r=t.get("refName");return e[r]||(e[r]=new m.a),e[r].insert([t.get("start"),t.get("end")],t),e}),{}),e.abrupt("return",{header:s,intervalTree:c});case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(a.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gffFeatures||(this.gffFeatures=this.loadDataP().catch((function(e){throw t.gffFeatures=void 0,e}))),e.abrupt("return",this.gffFeatures);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRefNames",value:function(){var e=Object(a.a)(h.a.mark((function e(){var t,r,n=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadData();case 3:return t=e.sent,r=t.intervalTree,e.abrupt("return",Object.keys(r));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeader",value:function(){var e=Object(a.a)(h.a.mark((function e(){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadData();case 2:return t=e.sent,r=t.header,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFeatures",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(p.ObservableCreate)(function(){var r=Object(a.a)(h.a.mark((function r(n){var i,a,o,s,u,c;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a=e.start,o=e.end,s=e.refName,r.next=4,t.loadData();case 4:u=r.sent,c=u.intervalTree,null===(i=c[s])||void 0===i||i.search([a,o]).forEach((function(e){return n.next(e)})),n.complete(),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),n.error(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e){return r.apply(this,arguments)}}(),r.signal)}},{key:"featureData",value:function(e){var t=this,r=Object(i.a)({},e);r.start-=1,"+"===e.strand?r.strand=1:"-"===e.strand?r.strand=-1:"."===e.strand?r.strand=0:r.strand=void 0,r.phase=Number(e.phase),r.refName=e.seq_id,null===e.score&&delete r.score,null===e.phase&&delete r.score;var a=["start","end","seq_id","score","type","source","phase","strand"],o=e.attributes||{};return Object.keys(o).forEach((function(e){var t=e.toLowerCase();if(a.includes(t)&&(t+="2"),null!==o[e]){var i=o[e];if(Array.isArray(i)&&1===i.length){var s=i;i=Object(n.a)(s,1)[0]}r[t]=i}})),r.refName=r.seq_id,e.child_features&&e.child_features.length&&(r.subfeatures=e.child_features.map((function(e){return e.map((function(e){return t.featureData(e)}))})).flat()),delete r.child_features,delete r.data,delete r.derived_features,delete r.attributes,delete r.seq_id,r}},{key:"freeResources",value:function(){}}]),r}(f.BaseFeatureDataAdapter)}});
//# sourceMappingURL=17.aa3f117980c15500c977.worker.js.map