/*! For license information please see 8.aa3f117980c15500c977.worker.js.LICENSE.txt */
this.webpackChunk([8],{1009:function(e,t,r){(function(t){var n=r(111).default,a=r(112).default;e.exports=function(){"use strict";function e(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n(this,e),0!=i?(this.buf=t.allocUnsafe(i),this.length=i):(this.buf=r,this.length=r.length),this.pos=a}return a(e,[{key:"EOF",value:function(){return this.pos>=this.length}},{key:"ReadData",value:function(e){var t=this.buf.slice(this.pos,this.pos+e);return this.pos+=e,t}},{key:"ReadByte",value:function(){var e=this.buf[this.pos];return this.pos++,e}},{key:"ReadChar",value:function(){var e=this.buf[this.pos];return this.pos++,String.fromCharCode(e)}},{key:"ReadUint16",value:function(){var e=this.ReadByte();return e|=this.ReadByte()<<8}},{key:"ReadUint32",value:function(){var e=this.buf.readInt32LE(this.pos);return this.pos+=4,e}},{key:"ReadString",value:function(){var e="";do{var t=this.buf[this.pos++];t&&(e+=String.fromCharCode(t))}while(t);return e}},{key:"ReadUint7",value:function(){var e=0;do{var t=this.ReadByte();e=e<<7|127&t}while(128&t);return e}},{key:"ReadITF8",value:function(){var e=this.buf[this.pos];return this.pos++,e>=240?(e=(15&e)<<28,e+=(this.buf[this.pos+0]<<20)+(this.buf[this.pos+1]<<12)+(this.buf[this.pos+2]<<4)+(this.buf[this.pos+3]>>4),this.pos+=4):e>=224?(e=(15&e)<<24,e+=(this.buf[this.pos+0]<<16)+(this.buf[this.pos+1]<<8)+(this.buf[this.pos+2]<<0),this.pos+=3):e>=192?(e=(31&e)<<16,e+=(this.buf[this.pos+0]<<8)+(this.buf[this.pos+1]<<0),this.pos+=2):e>=128&&(e=(63&e)<<8,e+=this.buf[this.pos],this.pos++),e}},{key:"WriteByte",value:function(e){this.buf[this.pos++]=e}},{key:"WriteChar",value:function(e){this.buf[this.pos++]=e.charCodeAt(0)}},{key:"WriteString",value:function(e){for(var t=0;t<e.length;t++)this.buf[this.pos++]=e.charCodeAt(t);this.buf[this.pos++]=0}},{key:"WriteData",value:function(e,t){for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]}},{key:"WriteStream",value:function(e){this.WriteData(e.buf,e.pos)}},{key:"WriteUint16",value:function(e){this.WriteByte(255&e),this.WriteByte(e>>8&255)}},{key:"WriteUint32",value:function(e){this.buf.writeInt32LE(e,this.pos),this.pos+=4}},{key:"WriteUint7",value:function(e){var t=0,r=e;do{t+=7,r>>=7}while(r>0);do{t-=7,this.WriteByte((e>>t&127)+((t>0)<<7))}while(t>0)}},{key:"WriteITF8",value:function(e){e<0&&(e=1+e),e<=127?this.buf[this.pos++]=e:e<=16383?(this.buf[this.pos++]=128|Math.floor(e/256),this.buf[this.pos++]=255&e):e<131071?(this.buf[this.pos++]=192|Math.floor(e/65536),this.buf[this.pos++]=255&Math.floor(e/256),this.buf[this.pos++]=255&e):e<268435455?(this.buf[this.pos++]=224|Math.floor(e/16777216),this.buf[this.pos++]=255&Math.floor(e/65536),this.buf[this.pos++]=255&Math.floor(e/256),this.buf[this.pos++]=255&e):(this.buf[this.pos++]=240|Math.floor(e/268435456),this.buf[this.pos++]=255&Math.floor(e/1048576),this.buf[this.pos++]=255&Math.floor(e/4096),this.buf[this.pos++]=255&Math.floor(e/4),this.buf[this.pos++]=15&e)}},{key:"WriteByteNeg",value:function(e){this.buf[--this.pos]=e}}]),e}()}).call(this,r(64).Buffer)},1010:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"d",(function(){return f}));var n=r(1231),a=r.n(n),i=r(922);function o(e){return-128&e?-16384&e?-2097152&e?-268435456&e?5:4:3:2:1}function s(e,t){var r,n=t,a=e[n];if(a<128?(r=a,n+=1):a<192?(r=16383&(a<<8|e[n+1]),n+=2):a<224?(r=2097151&(a<<16|e[n+1]<<8|e[n+2]),n+=3):a<240?(r=268435455&(a<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),n+=4):(r=(15&a)<<28|e[n+1]<<20|e[n+2]<<12|e[n+3]<<4|15&e[n+4],n+=5),n>e.length)throw new i.b("Attempted to read beyond end of buffer; this file seems truncated.");return[r,n-t]}function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.parse(e),i=a.offset,o=a.result;return o._endPosition=i+n,o._size=i-r,o}function u(e,t){var r=e.prototype[t],n="_memo_".concat(t);e.prototype[t]=function(){var e=this;if(!(n in this)){var t=r.call(this);this[n]=t,Promise.resolve(t).catch((function(){delete e[n]}))}return this[n]}}function f(e){return a()(e.toUpperCase().replace(/[^\x21-\x7e]/g,""))}},1058:function(e,t,r){"use strict";var n=r(11),a=r(12),i=r(922),o=r(1059),s=Object(n.a)((function e(){Object(a.a)(this,e),this.F=void 0,this.C=void 0})),c=Object(n.a)((function e(){Object(a.a)(this,e),this.fc=new Array(256);for(var t=0;t<this.fc.length;t+=1)this.fc[t]=new s;this.R=null}));function u(e,t,r,n){return r*(e>>n)+(e&(1<<n)-1)-t}var f={FC:s,AriDecoder:c,Symbol:Object(n.a)((function e(){Object(a.a)(this,e),this.start=void 0,this.freq=void 0})),symbolInit:function(e,t,r){if(!(t<=65536))throw new i.c("assertion failed: start <= 1<<16");if(!(r<=65536-t))throw new i.c("assertion failed: freq <= 1<<16");e.start=t,e.freq=r},advanceStep:u,advanceSymbolStep:function(e,t,r){return u(e,t.start,t.freq,r)},get:function(e,t){return e&(1<<t)-1},advanceSymbol:function(e,t,r,n){return function(e,t,r,n,a){if((e=n*(e>>a)+(e&(1<<a)-1)-r)<o.a)do{e=e<<8|255&t.get()}while(e<o.a);return e}(e,t,r.start,r.freq,n)},renormalize:function(e,t){if(e<o.a)do{e=e<<8|255&t.get()}while(e<o.a);return e}};t.a=f},1059:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return i}));var n=12,a=1<<n,i=1<<23},1063:function(e,t,r){"use strict";var n=r(2),a=r(247).default,i=r(410).default,o=r(111).default,s=r(112).default,c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,t),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}return s(t,[{key:"_set",value:function(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}},{key:"get",value:function(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){var t=this.oldCache.get(e);return this._set(e,t),t}}},{key:"set",value:function(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}},{key:"has",value:function(e){return this.cache.has(e)||this.oldCache.has(e)}},{key:"peek",value:function(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"keys",value:n.mark((function e(){var t,r,o,s;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return o=a(r.value,1),s=o[0],e.next=7,s;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:n.mark((function e(){var t,r,o,s;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return o=a(r.value,2),s=o[1],e.next=7,s;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:e,value:n.mark((function e(){var t,r,o,s,c,u,f,h;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i(this.cache),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return o=r.value,e.next=7,o;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:s=i(this.oldCache),e.prev=18,s.s();case 20:if((c=s.n()).done){e.next=28;break}if(u=c.value,f=a(u,1),h=f[0],this.cache.has(h)){e.next=26;break}return e.next=26,u;case 26:e.next=20;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(18),s.e(e.t1);case 33:return e.prev=33,s.f(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[1,11,14,17],[18,30,33,36]])}))},{key:"size",get:function(){var e,t=0,r=i(this.oldCache.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;this.cache.has(n)||t++}}catch(a){r.e(a)}finally{r.f()}return this._size+t}}]),t}(Symbol.iterator);e.exports=c},1064:function(e,t,r){"use strict";t.a={CRAM_FLAG_PRESERVE_QUAL_SCORES:1,CRAM_FLAG_DETACHED:2,CRAM_FLAG_MATE_DOWNSTREAM:4,CRAM_FLAG_NO_SEQ:8,CRAM_FLAG_MASK:15,CRAM_M_REVERSE:1,CRAM_M_UNMAP:2,BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048,BAM_CMATCH:0,BAM_CINS:1,BAM_CDEL:2,BAM_CREF_SKIP:3,BAM_CSOFT_CLIP:4,BAM_CHARD_CLIP:5,BAM_CPAD:6,BAM_CEQUAL:7,BAM_CDIFF:8,BAM_CBACK:9,BAM_CIGAR_STR:"MIDNSHP:XB",BAM_CIGAR_SHIFT:4,BAM_CIGAR_MASK:15,BAM_CIGAR_TYPE:246183}},1203:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return a}));var n=r(172);function a(t){return e.from(Object(n.inflate)(t))}}).call(this,r(64).Buffer)},1204:function(e,t,r){(function(t){var n=r(247).default,a=r(1009);function i(e,t){return e&(1<<t)-1}function o(e,t){for(var r=0;t>=e[r+1];)r++;return r}function s(e,t){for(var r=1<<t,n=new Array(r),a=0,i=0;i<r;i++){for(;i>=e[a+1];)a++;n[i]=a}return n}function c(e,t,r,n){return r*(e>>n)+(e&(1<<n)-1)-t}function u(e,t){return t<32768&&(t=(t<<16)+e.ReadUint16()),t}function f(e,t){t.WriteByteNeg(e>>24&255),t.WriteByteNeg(e>>16&255),t.WriteByteNeg(e>>8&255),t.WriteByteNeg(e>>0&255)}function h(e,t,r,n,a){return e=function(e,t,r,n){for(var a=(1<<31-n)*r;e>=a;)t.WriteByteNeg(e>>8&255),t.WriteByteNeg(255&e),e>>=16;return e}(e,t,n,a),e=(Math.floor(e/n)<<a)+e%n+r}function l(e,t,r){0==r&&(r=4);for(var n=new Array(r),i=new Array(r),o=0;o<r;o++)i[o]=Math.floor(t.length/r)+(t.length%r>o),n[o]=new Array(i[o]);for(var s=0,c=0;c<t.length;c+=r,s++)for(var u=0;u<r;u++)s<n[u].length&&(n[u][s]=t[c+u]);var f=new Array(r),h=0;for(o=0;o<r;o++){var l=p(n[o],0),d=p(n[o],1);f[o]=d.length<l.length?d:l,h+=f[o].length}var g=new a("",0,h+5*r+1);g.WriteByte(r);for(o=0;o<r;o++)g.WriteUint7(f[o].length);for(o=0;o<r;o++)g.WriteData(f[o],f[o].length);return g.buf.slice(0,g.buf.pos)}function d(e,r){var f=e.ReadByte(),h=1&f,l=8&f,p=32&f,y=64&f,m=128&f;if(16&f||(r=e.ReadUint7()),l)return function(e,r){for(var n=e.ReadByte(),a=new Array(n),i=new Array(n),o=0;o<n;o++)a[o]=e.ReadUint7();var s=new Array(n);for(o=0;o<n;o++)i[o]=Math.floor(r/n)+(r%n>o),s[o]=d(e,i[o]);var c=new t.allocUnsafe(r);for(o=0;o<n;o++)for(var u=0;u<i[o];u++)c[u*n+o]=s[o][u];return c}(e,r);if(m){var w=r,k=function(e){for(var t=e.ReadByte(),r=new Array(t),n=0;n<t;n++)r[n]=e.ReadByte();return[r,t,e.ReadUint7()]}(e),_=n(k,3),S=_[0],x=_[1];r=_[2]}if(y){var A=r,C=function(e){var t=e.ReadUint7(),r=e.ReadUint7();if(1&t)var n=e.ReadData((t-1)/2);else{var i=e.ReadUint7();n=e.ReadData(i),n=v(new a(n),t/2)}n=new a(n);var o=new Array(256),s=n.ReadByte();0==s&&(s=256);for(var c=0;c<s;c++)o[n.ReadByte()]=1;return[o,n,r]}(e),B=n(C,3),E=B[0],R=B[1];r=B[2]}if(p)var O=e.ReadData(r);else if(0==h)O=v(e,r);else O=function(e,r){var n=(d=e.ReadByte())>>4,f=e;if(1&d){var h=e.ReadUint7(),l=e.ReadUint7(),d=new a(e.ReadData(l));f=new a(v(d,h))}var p=new Array(256),y=new Array(256);!function(e,t,r,n){for(var a=0;a<256;a++){t[a]=new Array(256),r[a]=new Array(256);for(var i=0;i<256;i++)t[a][i]=0}var o=g(e);for(a=0;a<256;a++)if(o[a]){var s=0;for(i=0;i<256;i++)o[i]&&(s>0?s--:(t[a][i]=e.ReadUint7(),0==t[a][i]&&(s=e.ReadByte())));b(t[a],n),r[a][0]=0;for(i=0;i<256;i++)r[a][i+1]=r[a][i]+t[a][i]}}(f,p,y,n);for(var m=new Array(256),w=0;w<256;w++)m[w]=s(y[w],n);for(var k=new Array(4),_=new Array(4),S=0;S<4;S++)k[S]=e.ReadUint32(),_[S]=0;var x=new t.allocUnsafe(r),A=Math.floor(r/4);for(w=0;w<A;w++)for(S=0;S<4;S++){var C=i(k[S],n),B=m[_[S]][C];x[w+S*A]=B,k[S]=c(k[S],y[_[S]][B],p[_[S]][B],n),k[S]=u(e,k[S]),_[S]=B}w*=4;for(;w<r;){C=i(k[3],n),B=o(y[_[3]],C);x[w++]=B,k[3]=c(k[3],y[_[3]][B],p[_[3]][B],n),k[3]=u(e,k[3]),_[3]=B}return x}(e,r);return y&&(O=function(e,r,n,i){new a(e);for(var o=new t.allocUnsafe(i),s=0,c=0;s<i;c++){var u=e[c];if(r[u])for(var f=n.ReadUint7(),h=0;h<=f;h++)o[s++]=u;else o[s++]=u}return o}(O,E,R,A)),m&&(O=function(e,r,n,a){var i=new t.allocUnsafe(a),o=0;if(n<=1)for(var s=0;s<a;s++)i[s]=r[0];else if(n<=2)for(s=0;s<a;s++){if(s%8==0)var c=e[o++];i[s]=r[1&c],c>>=1}else if(n<=4)for(s=0;s<a;s++)s%4==0&&(c=e[o++]),i[s]=r[3&c],c>>=2;else if(n<=16)for(s=0;s<a;s++)s%2==0&&(c=e[o++]),i[s]=r[15&c],c>>=4;return i}(O,S,x,w)),O}function p(e,r){var i=new a("",0,10);i.WriteByte(r);var o=1&r,s=8&r,c=32&r,u=64&r,d=128&r,p=r>>8;if(16&r||i.WriteUint7(e.length),s)return t.concat([i.buf.slice(0,i.pos),l(0,e,p)]);var g=new t.alloc(0);if(d){var v=function(e){for(var r=new Array(256),n=0;n<256;n++)r[n]=0;for(n=0;n<e.length;n++)r[e[n]]++;var i=new Array(256),o=0;for(n=0;n<256;n++)r[n]>0&&(i[n]=o++);if(!(o>16)){if(o<=1)var s=new t.allocUnsafe(0);else if(o<=2){s=new t.allocUnsafe(Math.ceil(e.length/8));var c=-1;for(n=0;n<e.length;n++)n%8==0&&(s[++c]=0),s[c]+=i[e[n]]<<n%8}else if(o<=4)for(s=new t.allocUnsafe(Math.ceil(e.length/4)),c=-1,n=0;n<e.length;n++)n%4==0&&(s[++c]=0),s[c]+=i[e[n]]<<n%4*2;else for(s=new t.allocUnsafe(Math.ceil(e.length/2)),c=-1,n=0;n<e.length;n++)n%2==0&&(s[++c]=0),s[c]+=i[e[n]]<<n%2*4;var u=new a("",0,o+5);for(u.WriteByte(o),c=0,n=0;n<256;n++)r[n]>0&&(r[n]=c++,u.WriteByte(n));return u.WriteUint7(s.length),[u.buf.slice(0,u.pos),s]}}(e),k=n(v,2);g=k[0],e=k[1]}var _=new t.alloc(0);if(u){var S=function(e){for(var r=new Array(256),n=0;n<256;n++)r[n]=0;var i=-1;for(n=0;n<e.length;n++)r[e[n]]+=e[n]==i?1:-1,i=e[n];var o=0;for(n=0;n<256;n++)r[n]>0&&o++;for(o||(o=1,r[0]=1),(f=new a("",0,o+1+e.length)).WriteByte(o),n=0;n<256;n++)r[n]>0&&f.WriteByte(n);var s=new t.allocUnsafe(e.length),c=0;for(n=0;n<e.length;n++)if(s[c++]=e[n],r[e[n]]>0){i=e[n];for(var u=0;n+u+1<e.length&&e[n+u+1]==i;)u++;f.WriteUint7(u),n+=u}var f,h=w(f.buf.slice(0,f.pos)),l=new a("",0,16);return l.WriteUint7(2*f.pos),l.WriteUint7(c),l.WriteUint7(h.length),[f=t.concat([l.buf.slice(0,l.pos),h]),s.slice(0,c)]}(e),x=n(S,2);_=x[0],e=x[1]}if(e.length<4&&1==o&&(o=0,i.buf[0]&=-2),c)var A=e;else if(0==o)A=w(e);else A=function(e){for(var r=e.length,n=new a("",0,198156),i=new Array(256),o=new Array(256),s=new Array(256),c=0;c<256;c++)o[c]=new Array(256),s[c]=new Array(256);var u=12;(function(e,t,r){for(var n=0;n<256;n++){r[n]=0;for(var a=0;a<256;a++)t[n][a]=0}var i=0;for(n=0;n<e.length;n++)r[i]++,t[i][e[n]]++,i=e[n];r[i]++,t[0][e[1*(e.length>>2)]]++,t[0][e[2*(e.length>>2)]]++,t[0][e[3*(e.length>>2)]]++,r[0]+=3})(e,o,i),function(e,t,r){for(var n=0;n<256;n++)if(t[n]){var a=Math.ceil(Math.log2(t[n]));a>r&&(a=r),y(e[n],a)}}(o,i,u);var l=new a("",0,198156);!function(e,t,r){m(e,r);for(var n=0;n<256;n++)if(r[n])for(var a=0,i=0;i<256;i++)if(r[i])if(a)a--;else if(e.WriteUint7(t[n][i]),!t[n][i]){for(var o=i+1;o<256;o++)if(r[o]){if(0!=t[n][o])break;a++}e.WriteByte(a)}}(l,o,i);var d=w(l.buf.slice(0,l.pos));d.length<l.pos?(n.WriteByte(1|u<<4),n.WriteUint7(l.pos),n.WriteUint7(d.length),n.WriteData(d,d.length)):(n.WriteByte(0|u<<4),n.WriteData(l.buf,l.pos));!function(e,t,r){for(var n=0;n<256;n++)t[n]&&b(e[n],r)}(o,i,u);for(c=0;c<256;c++)if(i[c]){s[c][0]=0;for(var p=1;p<256;p++)s[c][p]=s[c][p-1]+o[c][p-1]}var g=new Array(4),v=new Array(4);for(p=0;p<4;p++)g[p]=32768,v[p]=0;var k=new a("",1.05*r+100>>0,1.05*r+100>>0),_=Math.floor(r/4),S=new Array(4),x=new Array(4);for(p=0;p<4;p++)S[p]=(p+1)*_-2,x[p]=e[S[p]+1];x[3]=e[r-1];for(c=r-2;c>4*_-2;c--)g[3]=h(g[3],k,s[e[c]][x[3]],o[e[c]][x[3]],u),x[3]=e[c];for(;S[0]>=0;)for(p=3;p>=0;p--){var A=e[S[p]];g[p]=h(g[p],k,s[A][x[p]],o[A][x[p]],u),x[p]=A,S[p]--}for(p=3;p>=0;p--)g[p]=h(g[p],k,s[0][x[p]],o[0][x[p]],u);for(c=3;c>=0;c--)f(g[c],k);return t.concat([n.buf.slice(0,n.pos),k.buf.slice(k.pos,k.length)],n.pos+k.length-k.pos)}(e);return t.concat([i.buf.slice(0,i.pos),g,_,A])}function g(e){for(var t=new Array(256),r=0;r<256;r++)t[r]=0;var n=0,a=e.ReadByte(),i=a;do{t[a]=1,n>0?(n--,a++):(a=e.ReadByte())==i+1&&(n=e.ReadByte()),i=a}while(0!=a);return t}function v(e,r){var n=new Array(256),a=new Array(256);!function(e,t,r){for(var n=0;n<256;n++)t[n]=0;var a=g(e);for(n=0;n<256;n++)a[n]>0&&(t[n]=e.ReadUint7());for(b(t,12),r[0]=0,n=0;n<=255;n++)r[n+1]=r[n]+t[n]}(e,n,a);for(var o=s(a,12),f=new Array(4),h=0;h<4;h++)f[h]=e.ReadUint32();var l=new t.allocUnsafe(r);for(h=0;h<r;h++){var d=h%4,p=o[i(f[d],12)];l[h]=p,f[d]=c(f[d],a[p],n[p],12),f[d]=u(e,f[d])}return l}function y(e,t){for(var r=0,n=0;n<256;n++)r+=e[n];var a=1<<t,i=a/r;do{var o=0,s=0,c=0;r=0;for(n=0;n<256;n++)0!=e[n]&&(o<e[n]&&(o=e[n],s=n),e[n]=Math.floor(e[n]*i),0==e[n]&&(e[n]=1),r+=e[n]);r<a?e[s]+=a-r:r-a<e[s]/2&&e[s]>2?e[s]-=r-a:r!=a&&(i=a/r,c=1)}while(c)}function b(e,t){for(var r=0,n=0;n<256;n++)r+=e[n];if(0!=r&&r!=1<<t){for(var a=0;r<1<<t;)r*=2,a++;for(n=0;n<256;n++)e[n]<<=a}}function m(e,t){for(var r=0,n=0;n<256;n++)if(t[n])if(r>0)r--;else if(e.WriteByte(n),n>0&&t[n-1]>0){for(r=n+1;r<256&&t[r];r++);r-=n+1,e.WriteByte(r)}e.WriteByte(0)}function w(e){var r=e.length,n=new a("",0,780),i=new Array(256);!function(e,t){for(var r=0;r<256;r++)t[r]=0;for(r=0;r<e.length;r++)t[e[r]]++}(e,i);var o=Math.ceil(Math.log2(r));o>12&&(o=12),y(i,o),function(e,t){m(e,t);for(var r=0;r<256;r++)t[r]&&e.WriteUint7(t[r])}(n,i),y(i,12);var s=new Array(256);s[0]=0;for(var c=1;c<256;c++)s[c]=s[c-1]+i[c-1];var u=new Array(4);for(c=0;c<4;c++)u[c]=32768;var l=new a("",1.05*r+100>>0,1.05*r+100>>0);for(c=r-1;c>=0;c--)u[c%4]=h(u[c%4],l,s[e[c]],i[e[c]],12);for(c=3;c>=0;c--)f(u[c],l);return t.concat([n.buf.slice(0,n.pos),l.buf.slice(l.pos,l.length)],n.pos+l.length-l.pos)}e.exports={decode:function(e){return d(new a(e),0)},encode:p}}).call(this,r(64).Buffer)},1205:function(e,t,r){(function(t){var n=r(247).default,a=r(111).default,i=r(112).default,o=r(1206),s=r(1009),c=r(1207),u=r(1227),f=128;e.exports=function(){"use strict";function e(){a(this,e)}return i(e,[{key:"decode",value:function(e){return this.stream=new s(e),this.decodeStream(this.stream)}},{key:"decodeStream",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.stream.ReadByte();16&r||(t=this.stream.ReadUint7());var a=t,i=1&r;if(8&r)return this.decodeStripe(this.stream,t);if(r&f){var o,s=this.decodePackMeta(this.stream),c=n(s,2);o=c[0],a=c[1]}if(32&r)var u=this.decodeCat(this.stream,a);else if(4&r)u=this.decodeExt(this.stream,a);else if(64&r)u=i?this.decodeRLE1(this.stream,a):this.decodeRLE0(this.stream,a);else u=i?this.decode1(this.stream,a):this.decode0(this.stream,a);return r&f&&(u=this.decodePack(u,o,t)),u}},{key:"encode",value:function(e,r){if(this.stream=new s("",0,1.1*e.length+100),this.stream.WriteByte(r),16&r||this.stream.WriteUint7(e.length),8&r)return t.concat([this.stream.buf.slice(0,this.stream.pos),this.encodeStripe(this.stream,e,r>>8)]);var a,i=1&r,o=e.length;if(r&f){var c=this.encodePack(e),u=n(c,3);a=u[0],e=u[1],o=u[2]}return r&f&&this.stream.WriteStream(a),64&r?i?this.encodeRLE1(e,o,this.stream):this.encodeRLE0(e,o,this.stream):i?this.encode1(e,o,this.stream):this.encode0(e,o,this.stream)}},{key:"decode0",value:function(e,r){var n=new t.allocUnsafe(r),a=e.ReadByte();0==a&&(a=256);var i=new c(a),s=new o(e);s.RangeStartDecode(e);for(var u=0;u<r;u++)n[u]=i.ModelDecode(e,s);return n}},{key:"encode0",value:function(e,t,r){for(var n=0,a=0;a<t;a++)n<e[a]&&(n=e[a]);n++;var i=new c(n);r.WriteByte(n);var s=new o(r);for(a=0;a<t;a++)i.ModelEncode(r,s,e[a]);return s.RangeFinishEncode(r),r.buf.slice(0,r.pos)}},{key:"decode1",value:function(e,r){var n=new t.allocUnsafe(r),a=e.ReadByte();0==a&&(a=256);for(var i=new Array(a),s=0;s<a;s++)i[s]=new c(a);var u=new o(e);u.RangeStartDecode(e);var f=0;for(s=0;s<r;s++)n[s]=i[f].ModelDecode(e,u),f=n[s];return n}},{key:"encode1",value:function(e,t,r){for(var n=0,a=0;a<t;a++)n<e[a]&&(n=e[a]);n++;var i=new Array(n);for(a=0;a<n;a++)i[a]=new c(n);r.WriteByte(n);var s=new o(r),u=0;for(a=0;a<t;a++)i[u].ModelEncode(r,s,e[a]),u=e[a];return s.RangeFinishEncode(r),r.buf.slice(0,r.pos)}},{key:"decodeExt",value:function(e,r){var n=new t.allocUnsafe(r),a=u.array(e.buf.slice(e.pos)),i=u.header(a),o=0;do{var s=u.decompress(a,i);-1!=s&&(t.from(s).copy(n,o),o+=s.length,i-=s.length)}while(-1!=s);return n}},{key:"encodeExt",value:function(e,t){}},{key:"decodeRLE0",value:function(e,r){var n=new t.allocUnsafe(r),a=e.ReadByte();0==a&&(a=256);for(var i=new c(a),s=new Array(258),u=0;u<=257;u++)s[u]=new c(4);var f=new o(e);f.RangeStartDecode(e);for(u=0;u<r;){n[u]=i.ModelDecode(e,f);for(var h=s[n[u]].ModelDecode(e,f),l=h,d=256;3==h;)h=s[d].ModelDecode(e,f),d=257,l+=h;for(var p=1;p<=l;p++)n[u+p]=n[u];u+=l+1}return n}},{key:"encodeRLE0",value:function(e,t,r){for(var n=0,a=0;a<t;a++)n<e[a]&&(n=e[a]);n++;var i=new c(n),s=new Array(258);for(a=0;a<=257;a++)s[a]=new c(4);r.WriteByte(n);var u=new o(r);for(a=0;a<t;){i.ModelEncode(r,u,e[a]);for(var f=1;a+f<t&&e[a+f]==e[a];)f++;f--;var h=e[a];e[a];a+=f+1;var l=f>=3?3:f;for(s[h].ModelEncode(r,u,l),f-=l,h=256;3==l;)l=f>=3?3:f,s[h].ModelEncode(r,u,l),h=257,f-=l}return u.RangeFinishEncode(r),r.buf.slice(0,r.pos)}},{key:"decodeRLE1",value:function(e,r){var n=new t.allocUnsafe(r),a=e.ReadByte();0==a&&(a=256);for(var i=new Array(a),s=0;s<a;s++)i[s]=new c(a);var u=new Array(258);for(s=0;s<=257;s++)u[s]=new c(4);var f=new o(e);f.RangeStartDecode(e);var h=0;for(s=0;s<r;){n[s]=i[h].ModelDecode(e,f),h=n[s];for(var l=u[n[s]].ModelDecode(e,f),d=l,p=256;3==l;)l=u[p].ModelDecode(e,f),p=257,d+=l;for(var g=1;g<=d;g++)n[s+g]=n[s];s+=d+1}return n}},{key:"encodeRLE1",value:function(e,t,r){for(var n=0,a=0;a<t;a++)n<e[a]&&(n=e[a]);n++;var i=new Array(n);for(a=0;a<n;a++)i[a]=new c(n);var s=new Array(258);for(a=0;a<=257;a++)s[a]=new c(4);r.WriteByte(n);for(var u=new o(r),f=(a=0,0);a<t;){i[f].ModelEncode(r,u,e[a]);for(var h=1;a+h<t&&e[a+h]==e[a];)h++;h--;var l=e[a];f=e[a],a+=h+1;var d=h>=3?3:h;for(s[l].ModelEncode(r,u,d),h-=d,l=256;3==d;)d=h>=3?3:h,s[l].ModelEncode(r,u,d),l=257,h-=d}return u.RangeFinishEncode(r),r.buf.slice(0,r.pos)}},{key:"decodePackMeta",value:function(e){this.nsym=e.ReadByte();for(var t=new Array(this.nsym),r=0;r<this.nsym;r++)t[r]=e.ReadByte();return[t,e.ReadUint7()]}},{key:"decodePack",value:function(e,r,n){var a=new t.allocUnsafe(n);if(this.nsym<=1)for(var i=0;i<n;i++)a[i]=r[0];else if(this.nsym<=2){i=0;for(var o=0;i<n;i++){if(i%8==0)var s=e[o++];a[i]=r[1&s],s>>=1}}else if(this.nsym<=4)for(i=0,o=0;i<n;i++){if(i%4==0)s=e[o++];a[i]=r[3&s],s>>=2}else{if(!(this.nsym<=16))return e;for(i=0,o=0;i<n;i++){if(i%2==0)s=e[o++];a[i]=r[15&s],s>>=4}}return a}},{key:"packMeta",value:function(e){for(var t=new s("",0,1024),r=new Array(256),n=0;n<e.length;n++)r[e[n]]=1;var a=0;for(n=0;n<256;n++)r[n]&&(r[n]=++a);t.WriteByte(a);for(n=0;n<256;n++)r[n]&&(t.WriteByte(n),r[n]--);return[t,r,a]}},{key:"encodePack",value:function(e){var r,a,i,o=this.packMeta(e),s=n(o,3);r=s[0],a=s[1],i=s[2];var c=e.length,u=0;if(i<=1)return r.WriteUint7(0),[r,new t.allocUnsafe(0),0];if(i<=2){for(var f=new t.allocUnsafe(Math.floor((c+7)/8)),h=(u=0,0);u<(-8&c);u+=8,h++)f[h]=(a[e[u+0]]<<0)+(a[e[u+1]]<<1)+(a[e[u+2]]<<2)+(a[e[u+3]]<<3)+(a[e[u+4]]<<4)+(a[e[u+5]]<<5)+(a[e[u+6]]<<6)+(a[e[u+7]]<<7);if(u<c){f[h]=0;for(var l=0;u<c;)f[h]|=a[e[u++]]<<l,l++;h++}return r.WriteUint7(h),[r,f,f.length]}if(i<=4){for(f=new t.allocUnsafe(Math.floor((c+3)/4)),u=0,h=0;u<(-4&c);u+=4,h++)f[h]=(a[e[u+0]]<<0)+(a[e[u+1]]<<2)+(a[e[u+2]]<<4)+(a[e[u+3]]<<6);if(u<c){f[h]=0;for(l=0;u<c;)f[h]|=a[e[u++]]<<l,l+=2;h++}return r.WriteUint7(h),[r,f,f.length]}if(i<=16){for(f=new t.allocUnsafe(Math.floor((c+1)/2)),u=0,h=0;u<(-2&c);u+=2,h++)f[h]=(a[e[u+0]]<<0)+(a[e[u+1]]<<4);return u<c&&(f[h++]=a[e[u++]]),r.WriteUint7(h),[r,f,f.length]}return r.WriteUint7(e.length),[r,e,e.length]}},{key:"encodeStripe",value:function(e,t,r){0==r&&(r=4);for(var n=new Array(r),a=new Array(r),i=0;i<r;i++)a[i]=Math.floor(t.length/r)+(t.length%r>i),n[i]=new Array(a[i]);for(var o=0,c=0;c<t.length;c+=r,o++)for(var u=0;u<r;u++)o<n[u].length&&(n[u][o]=t[c+u]);var f=new Array(r),h=0;for(i=0;i<r;i++){var l=this.encode(n[i],0),d=this.encode(n[i],1);f[i]=d.length<l.length?d:l,h+=f[i].length}var p=new s("",0,h+5*r+1);p.WriteByte(r);for(i=0;i<r;i++)p.WriteUint7(f[i].length);for(i=0;i<r;i++)p.WriteData(f[i],f[i].length);return p.buf.slice(0,p.buf.pos)}},{key:"decodeStripe",value:function(e,r){for(var n=e.ReadByte(),a=new Array(n),i=new Array(n),o=0;o<n;o++)a[o]=e.ReadUint7();var s=new Array(n);for(o=0;o<n;o++)i[o]=Math.floor(r/n)+(r%n>o),s[o]=this.decodeStream(e,i[o]);var c=new t.allocUnsafe(r);for(o=0;o<n;o++)for(var u=0;u<i[o];u++)c[u*n+o]=s[o][u];return c}},{key:"decodeCat",value:function(e,r){for(var n=new t.allocUnsafe(r),a=0;a<r;a++)n[a]=e.ReadByte();return n}}]),e}()}).call(this,r(64).Buffer)},1206:function(e,t,r){var n=r(111).default,a=r(112).default;e.exports=function(){"use strict";function e(t){n(this,e),this.low=0,this.range=4294967295,this.code=0,this.FFnum=0,this.carry=0,this.cache=0}return a(e,[{key:"RangeStartDecode",value:function(e){for(var t=0;t<5;t++)this.code=(this.code<<8)+e.ReadByte();this.code&=4294967295,this.code>>>=0}},{key:"RangeGetFrequency",value:function(e){return this.range=Math.floor(this.range/e),Math.floor(this.code/this.range)}},{key:"RangeDecode",value:function(e,t,r,n){for(this.code-=t*this.range,this.range*=r;this.range<1<<24;)this.range*=256,this.code=256*this.code+e.ReadByte()}},{key:"RangeShiftLow",value:function(e){if(this.low<4278190080|this.carry){for(e.WriteByte(this.cache+this.carry);this.FFnum;)e.WriteByte(this.carry-1),this.FFnum--;this.cache=this.low>>>24,this.carry=0}else this.FFnum++;this.low<<=8,this.low>>>=0}},{key:"RangeEncode",value:function(e,t,r,n){var a=this.low;for(this.range=Math.floor(this.range/n),this.low+=t*this.range,this.low>>>=0,this.range*=r,this.low<a&&(0!=this.carry&&console.log("ERROR: Multiple carry"),this.carry=1);this.range<1<<24;)this.range*=256,this.RangeShiftLow(e)}},{key:"RangeFinishEncode",value:function(e){for(var t=0;t<5;t++)this.RangeShiftLow(e)}}]),e}()},1207:function(e,t,r){var n=r(111).default,a=r(112).default;e.exports=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;n(this,e),this.total_freq=t,this.max_sym=t-1,this.S=new Array,this.F=new Array;for(var r=0;r<=this.max_sym;r++)this.S[r]=r,this.F[r]=1}return a(e,[{key:"ModelDecode",value:function(e,t){for(var r=t.RangeGetFrequency(this.total_freq),n=0,a=0;n+this.F[a]<=r;)n+=this.F[a++];t.RangeDecode(e,n,this.F[a],this.total_freq),this.F[a]+=16,this.total_freq+=16,this.total_freq>65519&&this.ModelRenormalise();var i=this.S[a];if(a>0&&this.F[a]>this.F[a-1]){var o=this.F[a];this.F[a]=this.F[a-1],this.F[a-1]=o,o=this.S[a],this.S[a]=this.S[a-1],this.S[a-1]=o}return i}},{key:"ModelRenormalise",value:function(){this.total_freq=0;for(var e=0;e<=this.max_sym;e++)this.F[e]-=Math.floor(this.F[e]/2),this.total_freq+=this.F[e]}},{key:"ModelEncode",value:function(e,t,r){for(var n=0,a=0;this.S[a]!=r;a++)n+=this.F[a];t.RangeEncode(e,n,this.F[a],this.total_freq),this.F[a]+=16,this.total_freq+=16,this.total_freq>65519&&this.ModelRenormalise();r=this.S[a];if(a>0&&this.F[a]>this.F[a-1]){var i=this.F[a];this.F[a]=this.F[a-1],this.F[a-1]=i,i=this.S[a],this.S[a]=this.S[a-1],this.S[a-1]=i}}}]),e}()},1208:function(e,t){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=r},1209:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(661),a=r.n(n),i=r(1210),o=r(1211),s=r.n(o);function c(e,t,r){if(r)return r;if(e)return function(e){var t=a.a.parse(e),r=t.protocol,n=t.pathname;return"file:"===r?new s.a(unescape(n)):new i.a(e)}(e);if(t)return new s.a(t);throw new Error("no url, path, or filehandle provided, cannot open")}},1210:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return h}));var n=r(10),a=r(12),i=r(11),o=r(2),s=r.n(o),c=r(1237),u=r.n(c),f=r(1238),h=function(){function t(e){var r=this;Object(a.a)(this,t),this.position=0,this.url=e,this.cache=new f.a({fetch:function(e,t){return r._fetch(e,t)}})}return Object(i.a)(t,[{key:"_fetch",value:function(){var t=Object(n.a)(s.a.mark((function t(r,n){var a,i,o,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={},n<1/0?a.range="bytes=".concat(r,"-").concat(r+n):n===1/0&&0!==r&&(a.range="bytes=".concat(r,"-")),t.next=4,u()(this.url,{method:"GET",headers:a,redirect:"follow",mode:"cors"});case 4:if((200!==(i=t.sent).status||0!==r)&&206!==i.status){t.next=14;break}return t.t0=e,t.next=9,i.arrayBuffer();case 9:return t.t1=t.sent,o=t.t0.from.call(t.t0,t.t1),(c=/\/(\d+)$/.exec(i.headers.get("content-range")))[1]&&(this._stat={size:parseInt(c[1],10)}),t.abrupt("return",o);case 14:throw new Error("HTTP ".concat(i.status," fetching ").concat(this.url));case 15:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"read",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=n;return null===a&&(a=this.position,this.position+=r),this.cache.get(e,t,r,n)}},{key:"readFile",value:function(){var t=Object(n.a)(s.a.mark((function t(){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u()(this.url,{method:"GET",redirect:"follow",mode:"cors"});case 2:return r=t.sent,t.t0=e,t.next=6,r.arrayBuffer();case 6:return t.t1=t.sent,t.abrupt("return",t.t0.from.call(t.t0,t.t1));case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"stat",value:function(){var t=Object(n.a)(s.a.mark((function t(){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._stat){t.next=6;break}return r=e.allocUnsafe(10),t.next=4,this.read(r,0,10,0);case 4:if(this._stat){t.next=6;break}throw new Error("unable to determine size of file at ".concat(this.url));case 6:return t.abrupt("return",this._stat);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}()}).call(this,r(64).Buffer)},1211:function(e,t){},1219:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return _}));var n=r(10),a=r(12),i=r(11),o=r(2),s=r.n(o),c=r(1203),u=r(429),f=r.n(u),h=r(1063),l=r.n(h),d=r(922),p=r(1220),g=r(1224),v=r(1225),y=r.n(v),b=r(1230),m=r(1209),w=r(1010),k=r(1239),_=function(){function t(e){Object(a.a)(this,t),this.file=Object(m.a)(e.url,e.path,e.filehandle),this.validateChecksums=!0,this.fetchReferenceSequenceCallback=e.seqFetch,this.options={checkSequenceMD5:!1!==e.checkSequenceMD5,cacheSize:void 0!==e.cacheSize?e.cacheSize:2e4},this.featureCache=new l.a({maxSize:this.options.cacheSize})}return Object(i.a)(t,[{key:"toString",value:function(){return this.file.filename?this.file.filename:this.file.url?this.file.url:"(cram file)"}},{key:"read",value:function(e,t,r,n){return this.file.read(e,t,r,n)}},{key:"stat",value:function(){return this.file.stat()}},{key:"getDefinition",value:function(){var t=Object(n.a)(s.a.mark((function t(){var r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.allocUnsafe(g.a.maxLength),t.next=3,this.file.read(r,0,g.a.maxLength,0);case 3:if(2===(n=g.a.parser.parse(r).result).majorVersion||3===n.majorVersion){t.next=6;break}throw new d.e("CRAM version ".concat(n.majorVersion," not supported"));case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getSamHeader",value:function(){var e=Object(n.a)(s.a.mark((function e(){var t,r,n,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContainerById(0);case 2:if(t=e.sent){e.next=5;break}throw new d.c("file contains no containers");case 5:return e.next=7,t.getFirstBlock();case 7:return r=e.sent,n=r.content,a=n.readInt32LE(0),4,i=n.toString("utf8",4,4+a),this.header=i,e.abrupt("return",Object(k.a)(i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeaderText",value:function(){var e=Object(n.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSamHeader();case 2:return e.abrupt("return",this.header);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSectionParsers",value:function(){var e=Object(n.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDefinition();case 2:return t=e.sent,r=t.majorVersion,e.abrupt("return",Object(g.b)(r));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getContainerById",value:function(){var e=Object(n.a)(s.a.mark((function e(t){var r,n,a,i,o,c,u,f,h,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return r=e.sent,n=r.cramFileDefinition.maxLength,e.next=6,this.file.stat();case 6:a=e.sent,i=a.size,o=r.cramContainerHeader1,u=0;case 10:if(!(u<=t)){e.next=36;break}if(!(n+o.maxLength+8>=i)){e.next=13;break}return e.abrupt("return",void 0);case 13:return c=this.getContainerAtPosition(n),e.next=16,c.getHeader();case 16:if(f=e.sent){e.next=19;break}throw new d.c("container ".concat(t," not found in file"));case 19:if(0!==u){e.next=32;break}n=f._endPosition,h=0;case 22:if(!(h<f.numBlocks)){e.next=30;break}return e.next=25,this.readBlock(n);case 25:l=e.sent,n=l._endPosition;case 27:h+=1,e.next=22;break;case 30:e.next=33;break;case 32:n+=f._size+f.length;case 33:u+=1,e.next=10;break;case 36:return e.abrupt("return",c);case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCrc32",value:function(){var t=Object(n.a)(s.a.mark((function t(r,n,a,i){var o,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.allocUnsafe(n),t.next=3,this.file.read(o,0,n,r);case 3:if((c=f.a.unsigned(o))===a){t.next=6;break}throw new d.c("crc mismatch in ".concat(i,": recorded CRC32 = ").concat(a,", but calculated CRC32 = ").concat(c));case 6:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}()},{key:"containerCount",value:function(){var e=Object(n.a)(s.a.mark((function e(){var t,r,n,a,i,o,c,u,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return t=e.sent,e.next=5,this.file.stat();case 5:r=e.sent,n=r.size,a=t.cramContainerHeader1,i=0,o=t.cramFileDefinition.maxLength;case 10:if(!(o+a.maxLength+8<n)){e.next=33;break}return e.next=13,this.getContainerAtPosition(o).getHeader();case 13:if(c=e.sent){e.next=16;break}return e.abrupt("break",33);case 16:if(0!==i){e.next=29;break}o=c._endPosition,u=0;case 19:if(!(u<c.numBlocks)){e.next=27;break}return e.next=22,this.readBlock(o);case 22:f=e.sent,o=f._endPosition;case 24:u+=1,e.next=19;break;case 27:e.next=30;break;case 29:o+=c._size+c.length;case 30:i+=1,e.next=10;break;case 33:return e.abrupt("return",i);case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getContainerAtPosition",value:function(e){return new b.a(this,e)}},{key:"readBlockHeader",value:function(){var t=Object(n.a)(s.a.mark((function t(r){var n,a,i,o,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSectionParsers();case 2:return n=t.sent,a=n.cramBlockHeader,t.next=6,this.file.stat();case 6:if(i=t.sent,o=i.size,!(r+a.maxLength>=o)){t.next=10;break}return t.abrupt("return",void 0);case 10:return c=e.allocUnsafe(a.maxLength),t.next=13,this.file.read(c,0,a.maxLength,r);case 13:return t.abrupt("return",Object(w.b)(c,a.parser,0,r));case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_parseSection",value:function(){var t=Object(n.a)(s.a.mark((function t(r,n){var a,i,o,c,u,f,h=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=h.length>2&&void 0!==h[2]?h[2]:r.maxLength,!(i=h.length>3?h[3]:void 0)){t.next=6;break}o=i,t.next=15;break;case 6:return t.next=8,this.file.stat();case 8:if(c=t.sent,u=c.size,!(n+a>=u)){t.next=12;break}return t.abrupt("return",void 0);case 12:return o=e.allocUnsafe(a),t.next=15,this.file.read(o,0,a,n);case 15:if((f=Object(w.b)(o,r.parser,0,n))._size===a){t.next=18;break}throw new d.c("section read error: requested size ".concat(a," does not equal parsed size ").concat(f._size));case 18:return t.abrupt("return",f);case 19:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"_uncompress",value:function(t,r,n){if("gzip"===t)Object(c.a)(r).copy(n);else if("bzip2"===t){var a=bzip2.array(r),i=bzip2.header(a),o=0;do{var s=bzip2.decompress(a,i);-1!=s&&(e.from(s).copy(n,o),o+=s.length,i-=s.length)}while(-1!=s)}else if("rans"===t)Object(p.a)(r,n);else if("rans4x16"===t)y.a.r4x16_uncompress(r,n);else if("arith"===t)y.a.arith_uncompress(r,n);else if("fqzcomp"===t)y.a.fqzcomp_uncompress(r,n);else{if("tok3"!==t)throw new d.e("".concat(t," decompression not yet implemented"));y.a.tok3_uncompress(r,n)}}},{key:"readBlock",value:function(){var t=Object(n.a)(s.a.mark((function t(r){var n,a,i,o,c,u,f,h;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDefinition();case 2:return n=t.sent,a=n.majorVersion,t.next=6,this.getSectionParsers();case 6:return i=t.sent,t.next=9,this.readBlockHeader(r);case 9:if(o=t.sent,c=o._endPosition,o.contentPosition=o._endPosition,u=e.allocUnsafe(o.uncompressedSize),"raw"===o.compressionMethod){t.next=20;break}return f=e.allocUnsafe(o.compressedSize),t.next=17,this.read(f,0,o.compressedSize,c);case 17:this._uncompress(o.compressionMethod,f,u),t.next=22;break;case 20:return t.next=22,this.read(u,0,o.uncompressedSize,c);case 22:if(o.content=u,!(a>=3)){t.next=35;break}return t.next=26,this._parseSection(i.cramBlockCrc32,c+o.compressedSize);case 26:if(h=t.sent,o.crc32=h.crc32,!this.validateChecksums){t.next=31;break}return t.next=31,this.checkCrc32(r,o._size+o.compressedSize,o.crc32,"block data");case 31:o._endPosition=h._endPosition,o._size=o.compressedSize+i.cramBlockCrc32.maxLength,t.next=37;break;case 35:o._endPosition=c+o.compressedSize,o._size=o.compressedSize;case 37:return t.abrupt("return",o);case 38:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();"getDefinition getSectionParsers getSamHeader".split(" ").forEach((function(e){return Object(w.e)(_,e)}))}).call(this,r(64).Buffer)},1220:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return d}));var n=r(12),a=r(11),i=r(922),o=r(1058),s=r(1221),c=r(1222),u=r(1223);function f(e,t){for(var r=new o.a.AriDecoder,n=new Array(256),a=0;a<n.length;a+=1)n[a]=new o.a.Symbol;return Object(s.a)(e,r,n),Object(c.a)(e,r,n,t),t}function h(e,t){for(var r=new Array(256),n=0;n<r.length;n+=1)r[n]=new o.a.AriDecoder;for(var a=new Array(256),i=0;i<a.length;i+=1){a[i]=new Array(256);for(var c=0;c<a[i].length;c+=1)a[i][c]=new o.a.Symbol}return Object(s.b)(e,r,a),Object(u.a)(e,t,r,a),t}var l=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(n.a)(this,e),this._buffer=t,this._position=r,this.length=t.length}return Object(a.a)(e,[{key:"get",value:function(){var e=this._buffer[this._position];return this._position+=1,e}},{key:"getByte",value:function(){return this.get()}},{key:"getByteAt",value:function(e){return this._buffer[e]}},{key:"position",value:function(){return this._position}},{key:"put",value:function(e){return this._buffer[this._position]=e,this._position+=1,e}},{key:"putAt",value:function(e,t){return this._buffer[e]=t,t}},{key:"setPosition",value:function(e){return this._position=e,e}},{key:"getInt",value:function(){var e=this._buffer.readInt32LE(this._position);return this._position+=4,e}},{key:"remaining",value:function(){return this._buffer.length-this._position}}]),e}();function d(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===t.length)return r.fill(0),r;var a=new l(t,n),o=a.get();if(0!==o&&1!==o)throw new i.c("Invalid rANS order ".concat(o));var s=a.getInt();if(s!==a.remaining()-4)throw new i.c("Incorrect input length.");var c=a.getInt(),u=new l(r||e.allocUnsafe(c));if(u.length<c)throw new i.c("Output buffer too small to fit ".concat(c," bytes."));switch(o){case 0:return f(a,u);case 1:return h(a,u);default:throw new i.c("Invalid rANS order: ".concat(o))}}}).call(this,r(64).Buffer)},1221:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return c}));var n=r(922),a=r(1059),i=r(1058);function o(e){if(!e)throw new n.c("assertion failed")}function s(e,t,r){var n=0,s=0,c=255&e.get();do{null==t.fc[c]&&(t.fc[c]=new i.a.FC),t.fc[c].F=255&e.get(),t.fc[c].F>=128&&(t.fc[c].F&=-129,t.fc[c].F=(127&t.fc[c].F)<<8|255&e.get()),t.fc[c].C=s,i.a.symbolInit(r[c],t.fc[c].C,t.fc[c].F),t.R||(t.R=new Array(a.c)),t.R.fill(c,s,s+t.fc[c].F),s+=t.fc[c].F,0===n&&c+1===(255&e.getByteAt(e.position()))?(c=255&e.get(),n=255&e.get()):0!==n?(n-=1,c+=1):c=255&e.get()}while(0!==c);o(s<a.c)}function c(e,t,r){var n=0,s=255&e.get();do{var c=0,u=0,f=255&e.get();null==t[s]&&(t[s]=new i.a.AriDecoder);do{null==t[s].fc[f]&&(t[s].fc[f]=new i.a.FC),t[s].fc[f].F=255&e.get(),t[s].fc[f].F>=128&&(t[s].fc[f].F&=-129,t[s].fc[f].F=(127&t[s].fc[f].F)<<8|255&e.get()),t[s].fc[f].C=u,0===t[s].fc[f].F&&(t[s].fc[f].F=a.c),null==r[s][f]&&(r[s][f]=new i.a.RansDecSymbol),i.a.symbolInit(r[s][f],t[s].fc[f].C,t[s].fc[f].F),null==t[s].R&&(t[s].R=new Array(a.c)),t[s].R.fill(f,u,u+t[s].fc[f].F),o((u+=t[s].fc[f].F)<=a.c),0===c&&f+1===(255&e.getByteAt(e.position()))?(f=255&e.get(),c=255&e.get()):0!==c?(c-=1,f+=1):f=255&e.get()}while(0!==f);0===n&&s+1===(255&e.getByteAt(e.position()))?(s=255&e.get(),n=255&e.get()):0!==n?(n-=1,s+=1):s=255&e.get()}while(0!==s)}},1222:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(922),a=r(1059),i=r(1058);function o(e,t,r,o){for(var s,c=e.getInt(),u=e.getInt(),f=e.getInt(),h=e.getInt(),l=o.remaining(),d=-4&l,p=0;p<d;p+=4){var g=t.R[i.a.get(c,a.b)],v=t.R[i.a.get(u,a.b)],y=t.R[i.a.get(f,a.b)],b=t.R[i.a.get(h,a.b)];o.putAt(p,g),o.putAt(p+1,v),o.putAt(p+2,y),o.putAt(p+3,b),c=i.a.advanceSymbolStep(c,r[255&g],a.b),u=i.a.advanceSymbolStep(u,r[255&v],a.b),f=i.a.advanceSymbolStep(f,r[255&y],a.b),h=i.a.advanceSymbolStep(h,r[255&b],a.b),c=i.a.renormalize(c,e),u=i.a.renormalize(u,e),f=i.a.renormalize(f,e),h=i.a.renormalize(h,e)}switch(o.setPosition(d),3&l){case 0:break;case 1:s=t.R[i.a.get(c,a.b)],i.a.advanceSymbol(c,e,r[255&s],a.b),o.put(s);break;case 2:s=t.R[i.a.get(c,a.b)],i.a.advanceSymbol(c,e,r[255&s],a.b),o.put(s),s=t.R[i.a.get(u,a.b)],i.a.advanceSymbol(u,e,r[255&s],a.b),o.put(s);break;case 3:s=t.R[i.a.get(c,a.b)],i.a.advanceSymbol(c,e,r[255&s],a.b),o.put(s),s=t.R[i.a.get(u,a.b)],i.a.advanceSymbol(u,e,r[255&s],a.b),o.put(s),s=t.R[i.a.get(f,a.b)],i.a.advanceSymbol(f,e,r[255&s],a.b),o.put(s);break;default:throw new n.c("invalid output size encountered during rANS decoding")}o.setPosition(0)}},1223:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(1059),a=r(1058);function i(e,t,r,i){for(var o=t.remaining(),s=e.getInt(),c=e.getInt(),u=e.getInt(),f=e.getInt(),h=o>>2,l=0,d=h,p=2*h,g=3*h,v=0,y=0,b=0,m=0;l<h;l+=1,d+=1,p+=1,g+=1){var w=255&r[v].R[a.a.get(s,n.b)],k=255&r[y].R[a.a.get(c,n.b)],_=255&r[b].R[a.a.get(u,n.b)],S=255&r[m].R[a.a.get(f,n.b)];t.putAt(l,w),t.putAt(d,k),t.putAt(p,_),t.putAt(g,S),s=a.a.advanceSymbolStep(s,i[v][w],n.b),c=a.a.advanceSymbolStep(c,i[y][k],n.b),u=a.a.advanceSymbolStep(u,i[b][_],n.b),f=a.a.advanceSymbolStep(f,i[m][S],n.b),s=a.a.renormalize(s,e),c=a.a.renormalize(c,e),u=a.a.renormalize(u,e),f=a.a.renormalize(f,e),v=w,y=k,b=_,m=S}for(;g<o;g+=1){var x=255&r[m].R[a.a.get(f,n.b)];t.putAt(g,x),f=a.a.advanceSymbol(f,e,i[m][x],n.b),m=x}}},1224:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return p}));var n=r(932),a=(new n.Parser).itf8(),i={parser:(new n.Parser).string("magic",{length:4}).uint8("majorVersion").uint8("minorVersion").string("fileId",{length:20,stripNull:!0}),maxLength:26},o={parser:(new n.Parser).uint8("compressionMethod",{formatter:function(e){var t=["raw","gzip","bzip2","lzma","rans","rans4x16","arith","fqzcomp","tok3"][e];if(!t)throw new Error("compression method number ".concat(e," not implemented"));return t}}).uint8("contentType",{formatter:function(e){var t=["FILE_HEADER","COMPRESSION_HEADER","MAPPED_SLICE_HEADER","UNMAPPED_SLICE_HEADER","EXTERNAL_DATA","CORE_DATA"][e];if(!t)throw new Error("invalid block content type id ".concat(e));return t}}).itf8("contentId").itf8("compressedSize").itf8("uncompressedSize"),maxLength:17},s={parser:(new n.Parser).uint32("crc32"),maxLength:4},c=(new n.Parser).itf8("size").buffer("ents",{length:"size",formatter:function(e){function t(t,r){for(var n=e.toString("utf8",t,r),a=[],i=0;i<n.length;i+=3)a.push(n.substr(i,3));return a}var r,n=[],a=0;for(r=0;r<e.length;r+=1)e[r]||(n.push(t(a,r)),a=r+1);return r>a&&n.push(t(a,r)),n}}),u=(new n.Parser).uint8(null,{formatter:function(e){return!!e}}),f=(new n.Parser).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new n.Parser).string("key",{length:2,stripNull:!1}).choice("value",{tag:"key",choices:{MI:u,UI:u,PI:u,RN:u,AP:u,RR:u,SM:(new n.Parser).array(null,{type:"uint8",length:5}),TD:(new n.Parser).nest(null,{type:c,formatter:function(e){return e.ents}})}})});function h(e){for(var t={},r=0;r<e.ents.length;r+=1){var n=e.ents[r],a=n.key,i=n.value;t[a]&&console.warn("duplicate key ".concat(a," in map")),t[a]=i}return t}var l={cramFileDefinition:i,cramBlockHeader:o,cramBlockCrc32:s},d={cramUnmappedSliceHeader:function(e){var t=0,r=(new n.Parser).itf8("numRecords");t+=5,e>=3?(r=r.ltf8("recordCounter"),t+=9):2===e&&(r=r.itf8("recordCounter"),t+=5),r=r.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:a,length:"numContentIds"}),t+=10,e>=2&&(r=r.array("md5",{type:"uint8",length:16}),t+=16);return{parser:r,maxLength:function(e){return t+5*e}}},cramMappedSliceHeader:function(e){var t=(new n.Parser).itf8("refSeqId").itf8("refSeqStart").itf8("refSeqSpan").itf8("numRecords"),r=20;e>=3?(t=t.ltf8("recordCounter"),r+=9):2===e&&(t=t.itf8("recordCounter"),r+=5),t=t.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:a,length:"numContentIds"}).itf8("refBaseBlockId"),r+=15,e>=2&&(t=t.array("md5",{type:"uint8",length:16}),r+=16);return{parser:t,maxLength:function(e){return r+5*e}}},cramEncoding:function(e){return{parser:(new n.Parser).namely("cramEncoding").itf8("codecId").itf8("parametersBytes").choice("parameters",{tag:"codecId",choices:{0:new n.Parser,1:(new n.Parser).itf8("blockContentId"),2:(new n.Parser).itf8("offset").itf8("M"),3:n.Parser.start().itf8("numCodes").array("symbols",{length:"numCodes",type:a}).itf8("numLengths").array("bitLengths",{length:"numLengths",type:a}),4:n.Parser.start().nest("lengthsEncoding",{type:"cramEncoding"}).nest("valuesEncoding",{type:"cramEncoding"}),5:(new n.Parser).uint8("stopByte")[e>1?"itf8":"int"]("blockContentId"),6:(new n.Parser).itf8("offset").itf8("length"),7:(new n.Parser).itf8("offset").itf8("K"),8:(new n.Parser).itf8("offset").itf8("log2m"),9:(new n.Parser).itf8("offset")}})}},cramDataSeriesEncodingMap:function(e){return(new n.Parser).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new n.Parser).string("key",{length:2,stripNull:!1}).nest("value",{type:this.cramEncoding(e).parser})})},cramTagEncodingMap:function(e){return(new n.Parser).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new n.Parser).itf8("key",{formatter:function(e){return String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)}}).nest("value",{type:this.cramEncoding(e).parser})})},cramCompressionHeader:function(e){var t=new n.Parser;return{parser:t=t.nest("preservation",{type:f,formatter:h}).nest("dataSeriesEncoding",{type:this.cramDataSeriesEncodingMap(e),formatter:h}).nest("tagEncoding",{type:this.cramTagEncodingMap(e),formatter:h})}},cramContainerHeader1:function(e){var t=(new n.Parser).int32("length").itf8("refSeqId").itf8("refSeqStart").itf8("alignmentSpan").itf8("numRecords"),r=24;return e>=3?(t=t.ltf8("recordCounter"),r+=9):2===e&&(t=t.itf8("recordCounter"),r+=5),e>1&&(t=t.ltf8("numBases"),r+=9),{parser:t=t.itf8("numBlocks").itf8("numLandmarks"),maxLength:r+=10}},cramContainerHeader2:function(e){var t=(new n.Parser).itf8("numLandmarks").array("landmarks",{type:(new n.Parser).itf8(),length:"numLandmarks"}),r=0;return e>=3&&(t=t.uint32("crc32"),r=4),{parser:t,maxLength:function(e){return 5+5*e+r}}}};function p(e){var t=Object.assign({},l);return Object.keys(d).forEach((function(r){t[r]=d[r](e)})),t}},1225:function(e,t,r){"use strict";(function(t){var n=r(1226),a=r(1204),i=r(1205),o=r(1228),s=r(1229);e.exports={r4x8_uncompress:function(e,t){n.decode(e).copy(t,0,0)},r4x16_uncompress:function(e,t){a.decode(e).copy(t,0,0)},arith_uncompress:function(e,t){i.decode(e).copy(t,0,0)},fqzcomp_uncompress:function(e,t){var r=new Array;o.decode(e,r).copy(t,0,0)},tok3_uncompress:function(e,r){var n=s.decode(e,0,"\0");t.from(n,"binary").copy(r,0,0)}}}).call(this,r(64).Buffer)},1226:function(e,t,r){(function(t){var n=r(1009);function a(e){return 4095&e}function i(e,t){for(var r=0;t>=e[r+1];)r++;return r}function o(e){for(var t=new Array(4096),r=0,n=0;n<4096;n++){for(;n>=e[r+1];)r++;t[n]=r}return t}function s(e,t,r){return r*(e>>12)+(4095&e)-t}function c(e,t){for(;t<1<<23;)t=(t<<8)+e.ReadByte();return t}function u(e,t){t.WriteByteNeg(e>>24&255),t.WriteByteNeg(e>>16&255),t.WriteByteNeg(e>>8&255),t.WriteByteNeg(e>>0&255)}function f(e,t,r,n,a){return e=function(e,t,r,n){for(var a=(1<<23>>n<<8)*r;e>=a;)t.WriteByteNeg(255&e),e>>=8;return e}(e,t,n,a),e=(Math.floor(e/n)<<a)+e%n+r}function h(e,t,r){for(var n=0;n<256;n++)t[n]=0;var a=e.ReadByte(),i=a,o=0;do{var s=e.ReadITF8();t[a]=s,o>0?(o--,a++):(a=e.ReadByte())==i+1&&(o=e.ReadByte()),i=a}while(0!=a);r[0]=0;for(n=0;n<=255;n++)r[n+1]=r[n]+t[n]}function l(e){for(var t=0,r=0;r<256;r++)t+=e[r];var n=4096,a=n/t;do{var i=0,o=0,s=0;t=0;for(r=0;r<256;r++)0!=e[r]&&(i<e[r]&&(i=e[r],o=r),e[r]=Math.floor(e[r]*a),0==e[r]&&(e[r]=1),t+=e[r]);t<n?e[o]+=n-t:t-n<e[o]/2&&e[o]>2?e[o]-=t-n:t!=n&&(a*=.99,s=1)}while(s)}function d(e,t){for(var r=0,n=0;n<256;n++)if(t[n]){if(r>0)r--;else if(e.WriteByte(n),n>0&&t[n-1]>0){for(r=n+1;r<256&&t[r];r++);r-=n+1,e.WriteByte(r)}e.WriteITF8(t[n])}e.WriteByte(0)}e.exports={decode:function(e){var r=new n(e),u=r.ReadByte(),f=(r.ReadUint32(),r.ReadUint32());return 0==u?function(e,r){var n=new Array(256),i=new Array(256);h(e,n,i);for(var u=o(i),f=new Array(4),l=0;l<4;l++)f[l]=e.ReadUint32();var d=new t.allocUnsafe(r);for(l=0;l<r;l++){var p=l%4,g=u[a(f[p])];d[l]=g,f[p]=s(f[p],i[g],n[g]),f[p]=c(e,f[p])}return d}(r,f):function(e,r){var n=new Array(256),u=new Array(256);!function(e,t,r){for(var n=0;n<256;n++){t[n]=new Array(256),r[n]=new Array(256);for(var a=0;a<256;a++)t[n][a]=0}var i=e.ReadByte(),o=i,s=0;do{h(e,t[i],r[i]),s>0?(s--,i++):(i=e.ReadByte())==o+1&&(s=e.ReadByte()),o=i}while(0!=i)}(e,n,u);for(var f=new Array(256),l=0;l<256;l++)f[l]=o(u[l]);for(var d=new Array(4),p=new Array(4),g=0;g<4;g++)d[g]=e.ReadUint32(),p[g]=0;var v=new t.allocUnsafe(r),y=Math.floor(r/4);for(l=0;l<y;l++)for(g=0;g<4;g++){var b=a(d[g]),m=f[p[g]][b];v[l+g*y]=m,d[g]=s(d[g],u[p[g]][m],n[p[g]][m]),d[g]=c(e,d[g]),p[g]=m}l*=4;for(;l<r;){b=a(d[3]),m=i(u[p[3]],b);v[l++]=m,d[3]=s(d[3],u[p[3]][m],n[p[3]][m]),d[3]=c(e,d[3]),p[3]=m}return v}(r,f)},encode:function(e,r){return 0==r?function(e){var r=e.length,a=new n("",0,780);a.WriteByte(0),a.WriteUint32(0),a.WriteUint32(0);var i=new Array(256);(function(e,t){for(var r=0;r<256;r++)t[r]=0;for(r=0;r<e.length;r++)t[e[r]]++})(e,i),l(i),d(a,i);var o=new Array(256);o[0]=0;for(var s=1;s<256;s++)o[s]=o[s-1]+i[s-1];var c=new Array(4);for(s=0;s<4;s++)c[s]=1<<23;var h=Math.floor(1.05*r+100),p=new n("",h,h);for(s=r-1;s>=0;s--)c[s%4]=f(c[s%4],p,o[e[s]],i[e[s]],12);for(s=3;s>=0;s--)u(c[s],p);var g=a.pos;return a.buf.writeInt32LE(g-9+(p.length-p.pos),1),a.buf.writeInt32LE(r,5),t.concat([a.buf.slice(0,a.pos),p.buf.slice(p.pos,p.length)],a.pos+p.length-p.pos)}(e):function(e){var r=e.length,a=new n("",0,198156);a.WriteByte(1),a.WriteUint32(0),a.WriteUint32(0);for(var i=new Array(256),o=new Array(256),s=new Array(256),c=0;c<256;c++)o[c]=new Array(256),s[c]=new Array(256);(function(e,t,r){for(var n=0;n<256;n++){r[n]=0;for(var a=0;a<256;a++)t[n][a]=0}var i=0;for(n=0;n<e.length;n++)r[e[n]]++,t[i][e[n]]++,i=e[n];t[0][e[1*(e.length>>2)]]++,t[0][e[2*(e.length>>2)]]++,t[0][e[3*(e.length>>2)]]++,r[0]+=3})(e,o,i),function(e,t){for(var r=0;r<256;r++)t[r]&&l(e[r])}(o,i),function(e,t,r){for(var n=0,a=0;a<256;a++)if(r[a]){if(n>0)n--;else if(e.WriteByte(a),a>0&&r[a-1]>0){for(n=a+1;n<256&&r[n];n++);n-=a+1,e.WriteByte(n)}d(e,t[a])}e.WriteByte(0)}(a,o,i);for(c=0;c<256;c++)if(i[c]){s[c][0]=0;for(var h=1;h<256;h++)s[c][h]=s[c][h-1]+o[c][h-1]}var p=new Array(4),g=new Array(4);for(h=0;h<4;h++)p[h]=1<<23,g[h]=0;var v=new n("",r,r),y=Math.floor(r/4),b=new Array(4),m=new Array(4);for(h=0;h<4;h++)b[h]=(h+1)*y-2,m[h]=e[b[h]+1];m[3]=e[r-1];for(c=r-2;c>4*y-2;c--)p[3]=f(p[3],v,s[e[c]][m[3]],o[e[c]][m[3]],12),m[3]=e[c];for(;b[0]>=0;)for(h=3;h>=0;h--){var w=e[b[h]];p[h]=f(p[h],v,s[w][m[h]],o[w][m[h]],12),m[h]=w,b[h]--}for(h=3;h>=0;h--)p[h]=f(p[h],v,s[0][m[h]],o[0][m[h]],12);for(c=3;c>=0;c--)u(p[c],v);var k=a.pos;return a.buf.writeInt32LE(k-9+(v.length-v.pos),1),a.buf.writeInt32LE(r,5),t.concat([a.buf.slice(0,a.pos),v.buf.slice(v.pos,v.length)],a.pos+v.length-v.pos)}(e)}}}).call(this,r(64).Buffer)},1227:function(e,t){var r={array:function(e){var t=0,r=0,n=[0,1,3,7,15,31,63,127,255];return function(a){for(var i=0;a>0;){var o=8-t;a>=o?(i<<=o,i|=n[o]&e[r++],t=0,a-=o):(i<<=a,i|=(e[r]&n[a]<<8-a-t)>>8-a-t,t+=a,a=0)}return i}},simple:function(e){var t,n,a=r.header(e),i=[],o=0;do{-1!=(n=r.decompress(e,a))&&(i.push(n),o+=n.byteLength)}while(-1!=n);t=new Uint8Array(o),o=0;for(var s=0;s<i.length;++s)n=i[s],t.set(n,o),o+=n.byteLength;return t},header:function(e){if(4348520!=e(24))throw"No magic number found";var t=e(8)-48;if(t<1||t>9)throw"Not a BZIP archive";return t},decompress:function(e,t,r){for(var n=9e5,a="",i=0;i<6;i++)a+=e(8).toString(16);if("177245385090"==a)return-1;if("314159265359"!=a)throw"eek not valid bzip data";if(e(32),e(1))throw"unsupported obsolete version";var o=e(24);if(o>n)throw"Initial position larger than buffer size";var s=e(16),c=new Uint8Array(256),u=0;for(i=0;i<16;i++)if(s&1<<15-i){var f=e(16);for(g=0;g<16;g++)f&1<<15-g&&(c[u++]=16*i+g)}var h=e(3);if(h<2||h>6)throw"another error";var l=e(15);if(0==l)throw"meh";var d=[];for(i=0;i<h;i++)d[i]=i;var p=new Uint8Array(32768);for(i=0;i<l;i++){for(var g=0;e(1);g++)if(g>=h)throw"whoops another error";var v=d[g];d.splice(g,1),d.splice(0,0,v),p[i]=v}var y=u+2,b=[];for(g=0;g<h;g++){var m,w,k,_=new Uint8Array(258),S=new Uint8Array(21);s=e(5);for(i=0;i<y;i++){for(;;){if(s<1||s>20)throw"I gave up a while ago on writing error messages";if(!e(1))break;e(1)?s--:s++}_[i]=s}m=w=_[0];for(i=1;i<y;i++)_[i]>w?w=_[i]:_[i]<m&&(m=_[i]);(k=b[g]={}).permute=new Uint32Array(258),k.limit=new Uint32Array(21),k.base=new Uint32Array(21),k.minLen=m,k.maxLen=w;var x=k.base.subarray(1),A=k.limit.subarray(1),C=0;for(i=m;i<=w;i++)for(s=0;s<y;s++)_[s]==i&&(k.permute[C++]=s);for(i=m;i<=w;i++)S[i]=A[i]=0;for(i=0;i<y;i++)S[_[i]]++;for(C=s=0,i=m;i<w;i++)C+=S[i],A[i]=C-1,C<<=1,x[i+1]=C-(s+=S[i]);A[w]=C+S[w]-1,x[m]=0}var B,E,R,O=new Uint32Array(256);for(i=0;i<256;i++)d[i]=i;B=E=y=R=0;for(var M=new Uint32Array(n);;){if(!y--){if(y=49,R>=l)throw"meow i'm a kitty, that's an error";x=(k=b[p[R++]]).base.subarray(1),A=k.limit.subarray(1)}for(g=e(i=k.minLen);;){if(i>k.maxLen)throw"rawr i'm a dinosaur";if(g<=A[i])break;i++,g=g<<1|e(1)}if((g-=x[i])<0||g>=258)throw"moo i'm a cow";var I=k.permute[g];if(0!=I&&1!=I){if(B){if(B=0,E+s>=n)throw"Boom.";for(O[v=c[d[0]]]+=s;s--;)M[E++]=v}if(I>u)break;if(E>=n)throw"I can't think of anything. Error";v=d[i=I-1],d.splice(i,1),d.splice(0,0,v),O[v=c[v]]++,M[E++]=v}else B||(B=1,s=0),s+=0==I?B:2*B,B<<=1}if(o<0||o>=E)throw"I'm a monkey and I'm throwing something at someone, namely you";for(g=0,i=0;i<256;i++)f=g+O[i],O[i]=g,g=f;for(i=0;i<E;i++)M[O[v=255&M[i]]]|=i<<8,O[v]++;var N=0,j=0,P=0;E&&(j=255&(N=M[o]),N>>=8,P=-1),E=E;var q,F,L,U=new Uint8Array(n),T=0;for(r||(r=1/0);E;){for(E--,F=j,j=255&(N=M[N]),N>>=8,3==P++?(q=j,L=F,j=-1):(q=1,L=j);q--;)if(U[T++]=L,!--r)return U;j!=F&&(P=0)}return U.subarray(0,T)}};e.exports=r},1228:function(e,t,r){(function(t,n){var a=r(419).default,i=r(1009),o=r(1207),s=r(1206);function c(e,t,r){for(var n=0,a=0,i=-1,o=new Array(1024);a<r;){var s=e.ReadByte();if(o[n++]=s,a+=s,s==i){var c=e.ReadByte();for(a+=s*c;c--;)o[n++]=s}i=s}var u=0;for(n=0,a=0;a<r;){var f=0;do{var h=o[n++];f+=h}while(255==h);for(;f--;)t[a++]=u;u++}}function u(e,t,r){var n=e.context;return t.qctx=(t.qctx<<e.qshift)+e.qtab[r],n+=(t.qctx&(1<<e.qbits)-1)<<e.qloc,e.do_pos&&(n+=e.ptab[Math.min(t.p,1023)]<<e.ploc),e.do_delta&&(n+=e.dtab[Math.min(t.delta,255)]<<e.dloc,t.delta+=t.prevq!=r?1:0,t.prevq=r),e.do_sel&&(n+=t.s<<e.sloc),t.p--,65535&n}function f(e){var t={};t.context=e.ReadUint16(),t.pflags=e.ReadByte(),t.do_dedup=2&t.pflags,t.fixed_len=4&t.pflags,t.do_sel=8&t.pflags,t.do_qmap=16&t.pflags,t.do_pos=32&t.pflags,t.do_delta=64&t.pflags,t.do_qtab=128&t.pflags,t.max_sym=e.ReadByte();var r=e.ReadByte();if(t.qbits=r>>4,t.qshift=15&r,r=e.ReadByte(),t.qloc=r>>4,t.sloc=15&r,r=e.ReadByte(),t.ploc=r>>4,t.dloc=15&r,t.qmap=new Array(256),16&t.pflags)for(var n=0;n<t.max_sym;n++)t.qmap[n]=e.ReadByte();else for(n=0;n<256;n++)t.qmap[n]=n;if(t.qtab=new Array(1024),t.qbits>0&&128&t.pflags)c(e,t.qtab,256);else for(n=0;n<256;n++)t.qtab[n]=n;return t.ptab=new Array(1024),32&t.pflags&&c(e,t.ptab,1024),t.dtab=new Array(256),64&t.pflags&&c(e,t.dtab,256),t}function h(e,t,r,n,a,i){r.max_sel>0?a.s=n.sel.ModelDecode(e,t):a.s=0,a.x=r.stab[a.s];var o=r.params[a.x];if(o.fixed_len>=0){var s=n.len[0].ModelDecode(e,t);s|=n.len[1].ModelDecode(e,t)<<8,s|=n.len[2].ModelDecode(e,t)<<16,s|=n.len[3].ModelDecode(e,t)<<24,o.fixed_len>0&&(o.fixed_len=-s)}else s=-o.fixed_len;a.len=s,r.do_rev&&(i[a.rec]=n.rev.ModelDecode(e,t)),a.is_dup=0,2&o.pflags&&n.dup.ModelDecode(e,t)&&(a.is_dup=1),a.p=s,a.delta=0,a.qctx=0,a.prevq=0,a.rec++}function l(e,r){var n=e.ReadUint7(),a=function(e){var t={max_sym:0};if(5==e.ReadByte()){var r=e.ReadByte(),n=1&r?e.ReadByte():1,a=r.nparam>1?r.nparam-1:0,i=new Array(256);if(2&r)a=e.ReadByte(),c(e,i,256);else{for(var o=0;o<n;o++)i[o]=o;for(;o<256;o++)i[o]=n-1}t.do_rev=4&r,t.stab=i,t.max_sel=a,t.params=new Array(t.nparam);for(var s=0;s<n;s++)t.params[s]=f(e),t.max_sym<t.params[s].max_sym&&(t.max_sym=t.params[s].max_sym);return t}console.error("Invalid FQZComp version number")}(e);if(a){var i=a.params,l=new Array(r.length),d=function(e){var t={};t.qual=new Array(65536);for(var r=0;r<65536;r++)t.qual[r]=new o(e.max_sym+1);for(t.len=new Array(4),r=0;r<4;r++)t.len[r]=new o(256);return t.rev=new o(2),t.dup=new o(2),e.max_sel>0&&(t.sel=new o(e.max_sel+1)),t}(a),p=new s(e);p.RangeStartDecode(e);for(var g=new t.allocUnsafe(n),v={qctx:0,prevq:0,delta:0,p:0,s:0,x:0,len:0,is_dup:0,rec:0},y=0;y<n;){if(0==v.p){if(h(e,p,a,d,v,l),v.is_dup>0&&d.dup.ModelDecode(e,p)){for(var b=0;b<len;b++)g[y+b]=g[y+b-v.len];y+=v.len,v.p=0;continue}r.push(v.len);var m=(i=a.params[v.x]).context}var w=d.qual[m].ModelDecode(e,p);g[y++]=i.qmap[w],m=u(i,v,w)}return a.do_rev&&function(e,t,r,n){var a=0,i=0;for(;i<t;){if(r[a])for(var o=0,s=n[a]-1;o<s;){var c=e[i+o];e[i+o]=e[i+s],e[i+s]=c,o++,s--}i+=n[a++]}}(g,n,l,r),g}}function d(e,t,r){for(var n=0,a=0,i=new Array(2*r),o=0;n<r;){for(var s=n;n<r&&t[n]==a;)n++;var c=n-s;do{var u=Math.min(255,c);i[o++]=u,c-=u}while(255==u);a++}var f=-1,h=new Array(2*r),l=0;for(n=0;n<o;){var d=i[n++];if(h[l++]=d,d==f){for(s=n;n<o&&i[n]==f&&n-s<255;)n++;h[l++]=n-s}else f=d}e.WriteData(h,l)}e.exports={decode:function(e,t){return l(new i(e),t)},encode:function(e,t,r){for(var c=new Array(2),u=new Array(2),f=new Array(2),h=new Array(2),l=new Array(256),p=0;p<2;p++)c[p]=new Array(256),u[p]=new Array(256),f[p]=new Array(1024),h[p]=new Array(256);(v=new i("",0,1.1*e.length+100)).WriteUint7(e.length);var g=function(e,t,r,n){for(var i,o=r[0],s=0;s<r.length&&r[s]==o;s++);var c=s==r.length?1:0,u=0,f=0;for(s=0;s<256;s++)n[0][s]=0;var h=0,l=0;for(s=0;s<e.length;s++)0==l&&(l=t[h<t.length-1?h++:h]),n[0][e[s]]++,l--;for(s=0;s<256;s++)n[0][s]&&(f<s&&(f=s),u++);var d=5,p=0;return u<=16&&(p=1,d=u<=2?1:u<=4?2:u<=8?3:4),[(i={qbits:8+(d>4),qshift:d,qloc:7,pbits:7,pshift:t[0]>128?1:0,ploc:0,dbits:d>4?0:1,dshift:3,dloc:15,sbits:0,sloc:15,do_stab:0,context:0,max_sym:f,nsym:u,do_qmap:p,do_dedup:0,fixed_len:1==t.length?1:0,do_sel:0,do_rev:0,do_pos:1,do_delta:d<=4?1:0,do_qtab:0},a(i,"qbits",8+(d>4)-(0==c)),a(i,"sbits",1),a(i,"sloc",15-(d<=4)),a(i,"do_stab",1),a(i,"do_sel",1),i)]}(e,t,r,c),v=function(e,t,r,n,a,i,o){for(var s=[0,1,1,1,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],c=0;c<t.length;c++)o[c]=c;for(;c<256;c++)o[c]=t.length-1;e.WriteByte(5);var u=(t.length>1?1:0)|(t[0].do_stab?2:0);if(e.WriteByte(u),1&u&&e.WriteByte(t.length),2&u){var f=1<<t[0].sbits;f>0&&f--,e.WriteByte(f),d(e,o,256)}for(var h=0;h<t.length;h++){if(e.WriteUint16(t[h].context),e.WriteByte((t[h].do_qtab?128:0)|(t[h].do_delta?64:0)|(t[h].do_pos?32:0)|(t[h].do_qmap?16:0)|(t[h].do_sel?8:0)|(t[h].fixed_len?4:0)|(t[h].do_dedup?2:0)),t[h].do_qmap?e.WriteByte(t[h].nsym):e.WriteByte(t[h].max_sym),e.WriteByte(t[h].qbits<<4|t[h].qshift),e.WriteByte(t[h].qloc<<4|t[h].sloc),e.WriteByte(t[h].ploc<<4|t[h].dloc),t[h].do_qmap){t[h].max_sym=t[h].nsym;var l=0;for(c=0;c<256;c++)r[h][c]&&(e.WriteByte(c),r[h][c]=l++);for(;l<t[h].nsym;l++)e.WriteByte(0)}else for(c=0;c<256;c++)r[h][c]=c;if(t[h].qbits>0){for(c=0;c<256;c++)n[h][c]=c;t[h].do_qtab&&d(e,n[h],256)}if(t[h].pbits>0){for(c=0;c<1024;c++)a[h][c]=Math.min((1<<t[h].pbits)-1,c>>t[h].pshift);d(e,a[h],1024)}if(t[h].dbits>0){for(c=0;c<256;c++)s[c]>(1<<t[h].dbits)-1&&(s[c]=(1<<t[h].dbits)-1);for(c=0;c<256;c++)i[h][c]=s[Math.min(s.length-1,c>>t[h].dshift)];d(e,i[h],256)}}return e}(v,g,c,u,f,h,l);return function(e,t,r,a,i,c,u,f,h,l){var d=1<<i[0].sbits;d>0&&d--;for(var p=t.length,g=0,v=0;v<i.length;v++)g<i[v].max_sym&&(g=i[v].max_sym);for(var y=new Array(65536),b=0;b<65536;b++)y[b]=new o(g+1);var m=new Array(4);for(b=0;b<4;b++)m[b]=new o(256);new o(2),new o(2);for(var w=new o(d+1),k=new s(t),_=(v=0,b=0,0);b<p;){if(0==v){var S=a[_];i[0].sbits>0&&w.ModelEncode(e,k,S);var x=l[S],A=r[Math.min(r.length-1,_++)];i[x].fixed_len?i[x].fixed_len>0&&(m[0].ModelEncode(e,k,255&A),m[1].ModelEncode(e,k,A>>8&255),m[2].ModelEncode(e,k,A>>16&255),m[3].ModelEncode(e,k,A>>24&255),i[x].fixed_len=-1):(m[0].ModelEncode(e,k,255&A),m[1].ModelEncode(e,k,A>>8&255),m[2].ModelEncode(e,k,A>>16&255),m[3].ModelEncode(e,k,A>>24&255)),i[x].do_dedup&&n.exit(1),v=A;var C=0,B=i[x].context,E=0,R=0}var O=t[b++],M=c[x][O];y[B].ModelEncode(e,k,M),E=(E<<i[x].qshift)+u[x][M],B=i[x].context,B+=(E&(1<<i[x].qbits)-1)<<i[x].qloc,i[x].pbits>0&&(B+=f[x][Math.min(v,1023)]<<i[x].ploc),i[x].dbits>0&&(B+=h[x][Math.min(C,255)]<<i[x].dloc,C+=R!=M?1:0,R=M),i[x].do_sel&&(B+=S<<i[x].sloc),B&=65535,v--}return k.RangeFinishEncode(e),e.buf.slice(0,e.pos)}(v,e,t,r,g,c,u,f,h,l)}}}).call(this,r(64).Buffer,r(114))},1229:function(e,t,r){(function(t){var n=r(247).default,a=r(1009),i=r(1204),o=new(r(1205));function s(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r}function c(e,t,r,n){var a=e[0][0].ReadByte(),i=n-e[0][a].ReadUint32();if(5==a)return t[n]=t[i],r[n]=r[i],t[n];var o=1;t[n]="",r[n]=new Array(256);do{switch(a=e[o][0].ReadByte()){case 2:r[n][o]=e[o][2].ReadChar();break;case 1:r[n][o]=e[o][1].ReadString();break;case 7:r[n][o]=e[o][7].ReadUint32();break;case 3:var c=e[o][3].ReadUint32(),u=e[o][4].ReadByte();r[n][o]=s(c,u);break;case 8:r[n][o]=(r[i][o]>>0)+e[o][8].ReadByte();break;case 9:c=(r[i][o]>>0)+e[o][9].ReadByte(),u=r[i][o].length;r[n][o]=s(c,u);break;case 10:r[n][o]=r[i][o];break;default:r[n][o]=""}t[n]+=r[n][o++]}while(12!=a);return t[n]}function u(e,t,r,n,a,i){for(var o=0;o<n.length;o++)if(!(r>0&&5==t[o][0].type)&&t[o][r])switch(e[0].WriteByte(t[o][r].type),t[o][r].type){case 6:e[6].WriteUint32(t[o][r].val);break;case 5:e[5].WriteUint32(t[o][r].val);break;case 1:e[1].WriteString(t[o][r].val);break;case 2:e[2].WriteChar(t[o][r].val);break;case 7:e[7].WriteUint32(t[o][r].val);break;case 3:e[3].WriteUint32(t[o][r].val),e[4].WriteByte(t[o][r].val.length);break;case 8:case 9:e[t[o][r].type].WriteByte(t[o][r].val)}}function f(e,t,r,n){for(var a=0;a<=12;a++)if(!(e[a].pos<=0)){n.WriteByte(a+(0==a?128:0)),e[a]=e[a].buf.slice(0,e[a].pos);var i=h(e[a],r);n.WriteUint7(i.length),n.WriteData(i,i.length)}}function h(e,t){var r,n=1<<30,a=[0,1,64,65,128,129,201];for(var s in a){var c=a[s];if(!(1&c&&e.length<100)&&!(8&c&&e.length%4!=0)){try{var u=t?o.encode(e,c):i.encode(e,c)}catch(f){u=0}u&&n>u.length&&(n=u.length,r=u)}}return r}function l(e,t,r,n,a){var i=0,o=a-1;e[a]=new Array(256),t[n]?e[a][0]={type:5,val:a-t[n]}:e[a][0]={type:6,val:0==a?0:1},t[n]=a;for(var s=n.match(/([a-zA-Z0-9]{1,9})|([^a-zA-Z0-9]+)/g),c=0;c<s.length;c++){var u=c+1,f=1,h=s[c];if(s[c].match(/^0+[0-9]*$/g)?f=3:s[c].match(/^[0-9]+$/g)?f=7:1==s[c].length&&(f=2),o>=0&&e[o][u])if(e[o][u].str==s[c])f=10,h="";else if(7==e[o][u].type||8==e[o][u].type){var l=h-e[o][u].str;r[u]++,l>=0&&l<256&&r[u]>a/2&&(f=8,h=l)}else if((3==e[o][u].type||9==e[o][u].type)&&e[o][u].str.length==h.length){l=h-e[o][u].str;r[u]++,l>=0&&l<256&&r[u]>a/2&&(f=9,h=l)}e[a][u]={str:s[c],val:h,type:f},i<e[a][u].val.length+3&&(i=e[a][u].val.length+3)}return e[a][++u]={type:12},[u+1,i]}e.exports={encode:function(e,t){var r=e.toString();"\n"==r[r.length-1]&&(r=r.substring(0,r.length-1));var i=r.split("\n"),o=new a("",0,2*r.length+1e4);o.WriteUint32(r.length),o.WriteUint32(i.length),o.WriteByte(t);for(var s=new Array(i.length),c={},h=new Array(256).fill(0),d=0,p=0,g=0;g<i.length;g++){var v=l(s,c,h,i[g],g),y=n(v,2),b=y[0],m=y[1];d<b&&(d=b),p<m&&(p=m)}for(var w=0;w<d;w++){for(var k=new Array(13),_=0;_<=12;_++)k[_]=new a("",0,i.length*p);u(k,s,w,i,d,p),f(k,w,t,o)}return o.buf.slice(0,o.pos)},decode:function(e,r,n){(e=new a(e)).ReadUint32();var s=e.ReadUint32(),u=e.ReadByte(),f=function(e,r,n,s){for(var c=-1,u=new Array(256);!e.EOF();){var f=e.ReadByte(),h=128&f,l=64&f,d=63&f;if(h&&(u[++c]=new Array(13)),0!=d&&h){var p=new Array(s-1).fill(10);u[c][0]=new a(t.from([d].concat(p)))}if(l){var g=e.ReadByte(),v=e.ReadByte();u[c][d]=new a(u[g][v].buf)}else{var y=e.ReadUint7(),b=e.ReadData(y);u[c][d]=n?o.decode(b):i.decode(b),u[c][d]=new a(u[c][d])}}return u}(e,0,u,s),h=new Array(s),l=new Array(s),d="";"undefined"===typeof n&&(n="\n");for(var p=0;p<s;p++)d+=c(f,h,l,p)+n;return d}}}).call(this,r(64).Buffer)},1230:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return l}));var n=r(10),a=r(12),i=r(11),o=r(2),s=r.n(o),c=r(922),u=r(1010),f=r(1234),h=r(1272),l=function(){function t(e,r){Object(a.a)(this,t),this.file=e,this.filePosition=r}return Object(i.a)(t,[{key:"getHeader",value:function(){return this._readContainerHeader(this.filePosition)}},{key:"getCompressionHeaderBlock",value:function(){var e=Object(n.a)(s.a.mark((function e(){var t,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:if(e.sent.numRecords){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.file.getSectionParsers();case 7:return t=e.sent,e.next=10,this.getFirstBlock();case 10:if("COMPRESSION_HEADER"===(r=e.sent).contentType){e.next=13;break}throw new c.c("invalid content type ".concat(r.contentType," in what is supposed to be the compression header block"));case 13:return n=Object(u.b)(r.content,t.cramCompressionHeader.parser,0,r.contentPosition),r.content=n,e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFirstBlock",value:function(){var e=Object(n.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:return t=e.sent,e.abrupt("return",this.file.readBlock(t._endPosition));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCompressionScheme",value:function(){var e=Object(n.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompressionHeaderBlock();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.abrupt("return",new h.a(t.content));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSlice",value:function(e,t){return new f.a(this,e,t)}},{key:"_readContainerHeader",value:function(){var t=Object(n.a)(s.a.mark((function t(r){var n,a,i,o,c,f,h,l,d,p,g;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.file.getSectionParsers();case 2:return n=t.sent,a=n.cramContainerHeader1,i=n.cramContainerHeader2,t.next=6,this.file.stat();case 6:if(o=t.sent,c=o.size,!(r>=c)){t.next=10;break}return t.abrupt("return",void 0);case 10:return f=e.allocUnsafe(a.maxLength),t.next=13,this.file.read(f,0,a.maxLength,r);case 13:if(h=Object(u.b)(f,a.parser),l=Object(u.a)(h.numLandmarks),!(r+h.length>=c)){t.next=18;break}return console.warn("".concat(this.file,": container header at ").concat(r," indicates that the container has length ").concat(h.length,", which extends beyond the length of the file. Skipping this container.")),t.abrupt("return",void 0);case 18:return d=e.allocUnsafe(i.maxLength(h.numLandmarks)),t.next=21,this.file.read(d,0,i.maxLength(h.numLandmarks),r+h._size-l);case 21:if(p=Object(u.b)(d,i.parser),!this.file.validateChecksums||void 0===p.crc32){t.next=25;break}return t.next=25,this.file.checkCrc32(r,h._size+p._size-l-4,p.crc32,"container header beginning at position ".concat(r));case 25:return g=Object.assign(h,p,{_size:h._size+p._size-l,_endPosition:h._size+p._size-l+r}),t.abrupt("return",g);case 27:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();"getHeader getCompressionHeaderBlock getCompressionScheme".split(" ").forEach((function(e){return Object(u.e)(l,e)}))}).call(this,r(64).Buffer)},1231:function(e,t,r){!function(){var t=r(1232),n=r(1208).utf8,a=r(1233),i=r(1208).bin,o=function e(r,o){r.constructor==String?r=o&&"binary"===o.encoding?i.stringToBytes(r):n.stringToBytes(r):a(r)?r=Array.prototype.slice.call(r,0):Array.isArray(r)||r.constructor===Uint8Array||(r=r.toString());for(var s=t.bytesToWords(r),c=8*r.length,u=1732584193,f=-271733879,h=-1732584194,l=271733878,d=0;d<s.length;d++)s[d]=16711935&(s[d]<<8|s[d]>>>24)|4278255360&(s[d]<<24|s[d]>>>8);s[c>>>5]|=128<<c%32,s[14+(c+64>>>9<<4)]=c;var p=e._ff,g=e._gg,v=e._hh,y=e._ii;for(d=0;d<s.length;d+=16){var b=u,m=f,w=h,k=l;u=p(u,f,h,l,s[d+0],7,-680876936),l=p(l,u,f,h,s[d+1],12,-389564586),h=p(h,l,u,f,s[d+2],17,606105819),f=p(f,h,l,u,s[d+3],22,-1044525330),u=p(u,f,h,l,s[d+4],7,-176418897),l=p(l,u,f,h,s[d+5],12,1200080426),h=p(h,l,u,f,s[d+6],17,-1473231341),f=p(f,h,l,u,s[d+7],22,-45705983),u=p(u,f,h,l,s[d+8],7,1770035416),l=p(l,u,f,h,s[d+9],12,-1958414417),h=p(h,l,u,f,s[d+10],17,-42063),f=p(f,h,l,u,s[d+11],22,-1990404162),u=p(u,f,h,l,s[d+12],7,1804603682),l=p(l,u,f,h,s[d+13],12,-40341101),h=p(h,l,u,f,s[d+14],17,-1502002290),u=g(u,f=p(f,h,l,u,s[d+15],22,1236535329),h,l,s[d+1],5,-165796510),l=g(l,u,f,h,s[d+6],9,-1069501632),h=g(h,l,u,f,s[d+11],14,643717713),f=g(f,h,l,u,s[d+0],20,-373897302),u=g(u,f,h,l,s[d+5],5,-701558691),l=g(l,u,f,h,s[d+10],9,38016083),h=g(h,l,u,f,s[d+15],14,-660478335),f=g(f,h,l,u,s[d+4],20,-405537848),u=g(u,f,h,l,s[d+9],5,568446438),l=g(l,u,f,h,s[d+14],9,-1019803690),h=g(h,l,u,f,s[d+3],14,-187363961),f=g(f,h,l,u,s[d+8],20,1163531501),u=g(u,f,h,l,s[d+13],5,-1444681467),l=g(l,u,f,h,s[d+2],9,-51403784),h=g(h,l,u,f,s[d+7],14,1735328473),u=v(u,f=g(f,h,l,u,s[d+12],20,-1926607734),h,l,s[d+5],4,-378558),l=v(l,u,f,h,s[d+8],11,-2022574463),h=v(h,l,u,f,s[d+11],16,1839030562),f=v(f,h,l,u,s[d+14],23,-35309556),u=v(u,f,h,l,s[d+1],4,-1530992060),l=v(l,u,f,h,s[d+4],11,1272893353),h=v(h,l,u,f,s[d+7],16,-155497632),f=v(f,h,l,u,s[d+10],23,-1094730640),u=v(u,f,h,l,s[d+13],4,681279174),l=v(l,u,f,h,s[d+0],11,-358537222),h=v(h,l,u,f,s[d+3],16,-722521979),f=v(f,h,l,u,s[d+6],23,76029189),u=v(u,f,h,l,s[d+9],4,-640364487),l=v(l,u,f,h,s[d+12],11,-421815835),h=v(h,l,u,f,s[d+15],16,530742520),u=y(u,f=v(f,h,l,u,s[d+2],23,-995338651),h,l,s[d+0],6,-198630844),l=y(l,u,f,h,s[d+7],10,1126891415),h=y(h,l,u,f,s[d+14],15,-1416354905),f=y(f,h,l,u,s[d+5],21,-57434055),u=y(u,f,h,l,s[d+12],6,1700485571),l=y(l,u,f,h,s[d+3],10,-1894986606),h=y(h,l,u,f,s[d+10],15,-1051523),f=y(f,h,l,u,s[d+1],21,-2054922799),u=y(u,f,h,l,s[d+8],6,1873313359),l=y(l,u,f,h,s[d+15],10,-30611744),h=y(h,l,u,f,s[d+6],15,-1560198380),f=y(f,h,l,u,s[d+13],21,1309151649),u=y(u,f,h,l,s[d+4],6,-145523070),l=y(l,u,f,h,s[d+11],10,-1120210379),h=y(h,l,u,f,s[d+2],15,718787259),f=y(f,h,l,u,s[d+9],21,-343485551),u=u+b>>>0,f=f+m>>>0,h=h+w>>>0,l=l+k>>>0}return t.endian([u,f,h,l])};o._ff=function(e,t,r,n,a,i,o){var s=e+(t&r|~t&n)+(a>>>0)+o;return(s<<i|s>>>32-i)+t},o._gg=function(e,t,r,n,a,i,o){var s=e+(t&n|r&~n)+(a>>>0)+o;return(s<<i|s>>>32-i)+t},o._hh=function(e,t,r,n,a,i,o){var s=e+(t^r^n)+(a>>>0)+o;return(s<<i|s>>>32-i)+t},o._ii=function(e,t,r,n,a,i,o){var s=e+(r^(t|~n))+(a>>>0)+o;return(s<<i|s>>>32-i)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,r){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var n=t.wordsToBytes(o(e,r));return r&&r.asBytes?n:r&&r.asString?i.bytesToString(n):t.bytesToHex(n)}}()},1232:function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var a=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?r.push(t.charAt(a>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,a=0;n<e.length;a=++n%4)0!=a&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*a+8)-1)<<2*a|t.indexOf(e.charAt(n))>>>6-2*a);return r}};e.exports=r}()},1233:function(e,t){function r(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},1234:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(10),a=r(12),i=r(11),o=r(15),s=r(2),c=r.n(s),u=r(922),f=r(1010),h=r(1064),l=r(1235);function d(e,t,r,n){if(!n)throw new u.c("could not resolve intra-slice mate pairs, file seems truncated or malformed");var a=!!(n.mate||void 0!==n.mateRecordNumber&&n.mateRecordNumber!==t);r.readName||(r.readName=String(r.uniqueId),n.readName=r.readName),r.mate={sequenceId:n.sequenceId,alignmentStart:n.alignmentStart,uniqueId:n.uniqueId},n.readName&&(r.mate.readName=n.readName),n.mate||void 0!==n.mateRecordNumber||(n.mate={sequenceId:r.sequenceId,alignmentStart:r.alignmentStart,uniqueId:r.uniqueId},r.readName&&(n.mate.readName=r.readName)),r.flags|=h.a.BAM_FPAIRED,n.flags&h.a.BAM_FUNMAP&&(r.flags|=h.a.BAM_FMUNMAP),r.flags&h.a.BAM_FUNMAP&&(n.flags|=h.a.BAM_FMUNMAP),n.flags&h.a.BAM_FREVERSE&&(r.flags|=h.a.BAM_FMREVERSE),r.flags&h.a.BAM_FREVERSE&&(n.flags|=h.a.BAM_FMREVERSE),void 0===r.templateLength&&(a?function(e,t,r){var n=function t(r){var n=[r];if(r.mateRecordNumber>=0){var a=e[r.mateRecordNumber];if(!a)throw new u.c("intra-slice mate record not found, this file seems malformed");n.push.apply(n,Object(o.a)(t(a)))}return n}(r),a=n.map((function(e){return e.alignmentStart})),i=n.map((function(e){return e.alignmentStart+e.readLength-1})),s=Math.max.apply(Math,Object(o.a)(i))-Math.min.apply(Math,Object(o.a)(a))+1;s>=0&&n.forEach((function(e){if(void 0!==e.templateLength)throw new u.c("mate pair group has some members that have template lengths already, this file seems malformed");e.templateLength=s}))}(e,0,r):function(e,t){var r=Math.min(e.alignmentStart,t.alignmentStart),n=Math.max(e.alignmentStart+e.readLength-1,t.alignmentStart+t.readLength-1)-r+1;e.templateLength=n,t.templateLength=n}(r,n)),delete r.mateRecordNumber}var p=function(){function e(t,r){Object(a.a)(this,e),this.container=t,this.file=t.file,this.containerPosition=r}return Object(i.a)(e,[{key:"getHeader",value:function(){var e=Object(n.a)(c.a.mark((function e(){var t,r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getSectionParsers();case 2:return t=e.sent,e.next=5,this.container.getHeader();case 5:return r=e.sent,e.next=8,this.file.readBlock(r._endPosition+this.containerPosition);case 8:if("MAPPED_SLICE_HEADER"!==(n=e.sent).contentType){e.next=13;break}n.content=Object(f.b)(n.content,t.cramMappedSliceHeader.parser,0,r._endPosition),e.next=18;break;case 13:if("UNMAPPED_SLICE_HEADER"!==n.contentType){e.next=17;break}n.content=Object(f.b)(n.content,t.cramUnmappedSliceHeader.parser,0,r._endPosition),e.next=18;break;case 17:throw new u.c("error reading slice header block, invalid content type ".concat(n._contentType));case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBlocks",value:function(){var e=Object(n.a)(c.a.mark((function e(){var t,r,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:t=e.sent,r=t._endPosition,n=new Array(t.content.numBlocks),a=0;case 6:if(!(a<n.length)){e.next=14;break}return e.next=9,this.file.readBlock(r);case 9:n[a]=e.sent,r=n[a]._endPosition;case 11:a+=1,e.next=6;break;case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCoreDataBlock",value:function(){var e=Object(n.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlocks();case 2:return t=e.sent,e.abrupt("return",t[0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getBlocksContentIdIndex",value:function(){var e=Object(n.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlocks();case 2:return t=e.sent,r={},t.forEach((function(e){"EXTERNAL_DATA"===e.contentType&&(r[e.contentId]=e)})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBlockByContentId",value:function(){var e=Object(n.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBlocksContentIdIndex();case 2:return r=e.sent,e.abrupt("return",r[t]);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReferenceRegion",value:function(){var e=Object(n.a)(c.a.mark((function e(){var t,r,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:if(!((t=e.sent.content).refSeqId<0)){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.next=7,this.container.getCompressionScheme();case 7:if(r=e.sent,!(t.refBaseBlockId>=0)){e.next=15;break}if(n=this.getBlockByContentId(t.refBaseBlockId)){e.next=12;break}throw new u.c("embedded reference specified, but reference block does not exist");case 12:if(!(t.span>n.uncompressedSize)){e.next=14;break}throw new u.c("Embedded reference is too small");case 14:return e.abrupt("return",{seq:n.data.toString("utf8"),start:t.refSeqStart,end:t.refSeqStart+t.refSeqSpan-1,span:t.refSeqSpan});case 15:if(!r.referenceRequired&&!this.file.fetchReferenceSequenceCallback){e.next=24;break}if(this.file.fetchReferenceSequenceCallback){e.next=18;break}throw new Error("reference sequence not embedded, and seqFetch callback not provided, cannot fetch reference sequence");case 18:return e.next=20,this.file.fetchReferenceSequenceCallback(t.refSeqId,t.refSeqStart,t.refSeqStart+t.refSeqSpan-1);case 20:if((a=e.sent).length===t.refSeqSpan){e.next=23;break}throw new u.a("seqFetch callback returned a reference sequence of the wrong length");case 23:return e.abrupt("return",{seq:a,start:t.refSeqStart,end:t.refSeqStart+t.refSeqSpan-1,span:t.refSeqSpan});case 24:return e.abrupt("return",void 0);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllRecords",value:function(){return this.getRecords((function(){return!0}))}},{key:"_fetchRecords",value:function(){var e=Object(n.a)(c.a.mark((function e(){var t,r,n,a,i,o,s,h,p,g,v,y,b,m,w,k,_,S,x=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getDefinition();case 2:return t=e.sent,r=t.majorVersion,e.next=6,this.container.getCompressionScheme();case 6:return n=e.sent,e.next=9,this.getHeader();case 9:return a=e.sent,e.next=12,this._getBlocksContentIdIndex();case 12:if(i=e.sent,!(r>1&&this.file.options.checkSequenceMD5&&a.content.refSeqId>=0&&"0000000000000000"!==a.content.md5.join(""))){e.next=23;break}return e.next=16,this.getReferenceRegion();case 16:if(!(o=e.sent)){e.next=23;break}if(s=o.seq,h=o.start,p=o.end,g=Object(f.d)(s),v=a.content.md5.map((function(e){return(e<16?"0":"")+e.toString(16)})).join(""),g===v){e.next=23;break}throw new u.c("MD5 checksum reference mismatch for ref ".concat(a.content.refSeqId," pos ").concat(h,"..").concat(p,". recorded MD5: ").concat(v,", calculated MD5: ").concat(g));case 23:return e.next=25,this.getCoreDataBlock();case 25:y=e.sent,b={lastAlignmentStart:a.content.refSeqStart||0,coreBlock:{bitPosition:7,bytePosition:0},externalBlocks:{getCursor:function(e){return this[e]||(this[e]={bitPosition:7,bytePosition:0}),this[e]}}},m=function(e){var t=n.getCodecForDataSeries(e);if(!t)throw new u.c("no codec defined for ".concat(e," data series"));return t.decode(x,y,i,b)},w=new Array(a.content.numRecords),k=0;case 30:if(!(k<w.length)){e.next=48;break}e.prev=31,w[k]=Object(l.a)(this,m,n,a,y,i,b,r,k),w[k].uniqueId=a.contentPosition+a.content.recordCounter+k+1,e.next=45;break;case 36:if(e.prev=36,e.t0=e.catch(31),!(e.t0 instanceof u.b)){e.next=44;break}return console.warn("read attempted beyond end of buffer, file seems truncated."),w=w.filter((function(e){return!!e})),e.abrupt("break",48);case 44:throw e.t0;case 45:k+=1,e.next=30;break;case 48:for(_=0;_<w.length;_+=1)(S=w[_].mateRecordNumber)>=0&&d(w,_,w[_],w[S]);return e.abrupt("return",w);case 50:case"end":return e.stop()}}),e,this,[[31,36]])})));return function(){return e.apply(this,arguments)}}()},{key:"getRecords",value:function(){var e=Object(n.a)(c.a.mark((function e(t){var r,a,i,o,s,u,f,h,l,d,p,g,v,y,b=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.container.filePosition+this.containerPosition,(a=this.file.featureCache.get(r))||(a=this._fetchRecords(),this.file.featureCache.set(r,a)),e.next=5,a;case 5:if(!(i=e.sent.filter(t)).length||!this.file.fetchReferenceSequenceCallback){e.next=20;break}return e.next=9,this.getHeader();case 9:if(!((o=e.sent).content.refSeqId>=0||-2===o.content.refSeqId)){e.next=20;break}return s=o.content.refSeqId>=0?o.content.refSeqId:void 0,e.next=14,this.container.getCompressionScheme();case 14:for(u=e.sent,f={},h=0;h<i.length;h+=1)l=void 0!==s?s:i[h].sequenceId,(d=f[l])||(d={id:l,start:i[h].alignmentStart,end:-1/0},f[l]=d),(p=i[h].alignmentStart+(i[h].lengthOnRef||i[h].readLength)-1)>d.end&&(d.end=p),i[h].alignmentStart<d.start&&(d.start=i[h].alignmentStart);return e.next=19,Promise.all(Object.values(f).map(function(){var e=Object(n.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(-1!==t.id&&t.start<=t.end)){e.next=4;break}return e.next=3,b.file.fetchReferenceSequenceCallback(t.id,t.start,t.end);case 3:t.seq=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:for(g=0;g<i.length;g+=1)v=void 0!==s?s:i[g].sequenceId,(y=f[v])&&y.seq&&i[g].addReferenceSequence(y,u);case 20:return e.abrupt("return",i);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();"getHeader getBlocks _getBlocksContentIdIndex".split(" ").forEach((function(e){return Object(f.e)(p,e)}))},1235:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return d}));var n=r(15),a=r(6),i=r(915),o=r.n(i),s=r(922),c=r(1236),u=r(1064);function f(e){var t=e.indexOf(0);return-1===t?e.toString("utf8"):e.toString("utf8",0,t)}function h(t,r){if(r.readInt32LE||(r=e.from(r)),"Z"===t)return f(r);if("A"===t)return String.fromCharCode(r[0]);if("I"===t){var n=o.a.fromBytesLE(r);if(n.greaterThan(Number.MAX_SAFE_INTEGER)||n.lessThan(Number.MIN_SAFE_INTEGER))throw new s.e("integer overflow");return n.toNumber()}if("i"===t)return r.readInt32LE(0);if("s"===t)return r.readInt16LE(0);if("S"===t)return r.readUInt16LE(0);if("c"===t)return r.readInt8(0);if("C"===t)return r.readUInt8(0);if("f"===t)return r.readFloatLE(0);if("H"===t){var i=f(r);return Number.parseInt(i.replace(/^0x/,""),16)}if("B"===t)return function(e){var t=String.fromCharCode(e[0]),r=e.readInt32LE(1),n={c:["readInt8",1],C:["readUInt8",1],s:["readInt16LE",2],S:["readUInt16LE",2],i:["readInt32LE",4],I:["readUInt32LE",4],f:["readFloatLE",4]}[t];if(!n)throw new s.c("invalid tag value array type '".concat(t,"'"));for(var i=Object(a.a)(n,2),o=i[0],c=i[1],u=new Array(r),f=5,h=0;h<r;h+=1)u[h]=e[o](f),f+=c;return u}(r);throw new s.c("Unrecognized tag type ".concat(t))}function l(t){if(t instanceof e)return f(t);if(t.length&&t.indexOf){if(!t[t.length-1]){var r=t.indexOf(0);return String.fromCharCode.apply(String,Object(n.a)(t.slice(0,r)))}return String.fromCharCode.apply(String,Object(n.a)(t))}return String(t)}function d(e,t,r,n,i,o,f,d,p){var g=new c.a;if(g.flags=t("BF"),g.cramFlags=t("CF"),d>1&&-2===n.content.refSeqId?g.sequenceId=t("RI"):g.sequenceId=n.content.refSeqId,g.readLength=t("RL"),g.alignmentStart=t("AP"),r.APdelta&&(g.alignmentStart+=f.lastAlignmentStart),f.lastAlignmentStart=g.alignmentStart,g.readGroupId=t("RG"),r.readNamesIncluded&&(g.readName=l(t("RN"))),g.isDetached()){var v={};v.flags=t("MF"),r.readNamesIncluded||(v.readName=l(t("RN")),g.readName=v.readName),v.sequenceId=t("NS"),v.alignmentStart=t("NP"),(v.flags||v.sequenceId>-1)&&(g.mate=v),g.templateSize=t("TS"),v.flags&u.a.CRAM_M_UNMAP&&(g.flags|=u.a.BAM_FMUNMAP),v.flags&u.a.CRAM_M_REVERSE&&(g.flags|=u.a.BAM_FMREVERSE)}else g.hasMateDownStream()&&(g.mateRecordNumber=t("NF")+p+1);var y=t("TL");if(y<0)throw new s.c("invalid TL index");for(var b=r.getTagNames(y),m=b.length,w=0;w<m;w+=1){var k=b[w],_=k.substr(0,2),S=k.substr(2,1),x=r.getCodecForTag(k);if(!x)throw new s.c("no codec defined for auxiliary tag ".concat(k));var A=x.decode(e,i,o,f);g.tags[_]=h(S,A)}if(g.isSegmentUnmapped())if(g.isUnknownBases())g.readBases=null,g.qualityScores=null;else{for(var C=new Array(g.readLength),B=0;B<C.length;B+=1)C[B]=t("BA");if(g.readBases=String.fromCharCode.apply(String,C),g.isPreservingQualityScores()){for(var E=0;E<C.length;E+=1)C[E]=t("QS");g.qualityScores=C}}else{var R=t("FN");R&&(g.readFeatures=function(e,t,r,n,i){var o=0,c=e.alignmentStart-1,u=new Array(t);function f(e){var t=Object(a.a)(e,2),n=t[0],i=t[1],o=r(i);return"character"===n?String.fromCharCode(o):"string"===n?o.toString("utf8"):"numArray"===n?o.toArray():o}for(var h=0;h<t;h+=1){var l=String.fromCharCode(r("FC")),d=r("FP"),p={code:l},g={B:["character","BA"],S:["string",i>1?"SC":"IN"],X:["number","BS"],D:["number","DL"],I:["string","IN"],i:["character","BA"],b:["string","BB"],q:["numArray","QQ"],Q:["number","QS"],H:["number","HC"],P:["number","PD"],N:["number","RS"]}[l];if(!g)throw new s.c('invalid read feature code "'.concat(l,'"'));p.data=f(g);var v={B:["number","QS"]}[l];v&&(p.data=[p.data,f(v)]),o+=d,p.pos=o,c+=d,p.refPos=c,"D"===l||"N"===l?c+=p.data:"I"===l||"S"===l?c-=p.data.length:"i"===l&&(c-=1),u[h]=p}return u}(g,R,t,0,d));var O=g.readLength;if(g.readFeatures&&g.readFeatures.forEach((function(e){var t=e.code,r=e.data;"D"===t||"N"===t?O+=r:"I"===t||"S"===t?O-=r.length:"i"===t&&(O-=1)})),Number.isNaN(O)&&(console.warn("".concat(g.readName||"".concat(g.sequenceId,":").concat(g.alignmentStart)," record has invalid read features")),O=g.readLength),g.lengthOnRef=O,g.mappingQuality=t("MQ"),g.isPreservingQualityScores()){for(var M=new Array(g.readLength),I=0;I<M.length;I+=1)M[I]=t("QS");g.qualityScores=M}}return g}}).call(this,r(64).Buffer)},1236:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(12),a=r(11),i=r(15),o=r(1064);var s={a:0,A:0,c:1,C:1,g:2,G:2,t:3,T:3,n:4,N:4};var c=function(){function e(){Object(n.a)(this,e),this.tags={}}return Object(a.a)(e,[{key:"isPaired",value:function(){return!!(this.flags&o.a.BAM_FPAIRED)}},{key:"isProperlyPaired",value:function(){return!!(this.flags&o.a.BAM_FPROPER_PAIR)}},{key:"isSegmentUnmapped",value:function(){return!!(this.flags&o.a.BAM_FUNMAP)}},{key:"isMateUnmapped",value:function(){return!!(this.flags&o.a.BAM_FMUNMAP)}},{key:"isReverseComplemented",value:function(){return!!(this.flags&o.a.BAM_FREVERSE)}},{key:"isMateReverseComplemented",value:function(){return!!(this.flags&o.a.BAM_FMREVERSE)}},{key:"isRead1",value:function(){return!!(this.flags&o.a.BAM_FREAD1)}},{key:"isRead2",value:function(){return!!(this.flags&o.a.BAM_FREAD2)}},{key:"isSecondary",value:function(){return!!(this.flags&o.a.BAM_FSECONDARY)}},{key:"isFailedQc",value:function(){return!!(this.flags&o.a.BAM_FQCFAIL)}},{key:"isDuplicate",value:function(){return!!(this.flags&o.a.BAM_FDUP)}},{key:"isSupplementary",value:function(){return!!(this.flags&o.a.BAM_FSUPPLEMENTARY)}},{key:"isDetached",value:function(){return!!(this.cramFlags&o.a.CRAM_FLAG_DETACHED)}},{key:"hasMateDownStream",value:function(){return!!(this.cramFlags&o.a.CRAM_FLAG_MATE_DOWNSTREAM)}},{key:"isPreservingQualityScores",value:function(){return!!(this.cramFlags&o.a.CRAM_FLAG_PRESERVE_QUAL_SCORES)}},{key:"isUnknownBases",value:function(){return!!(this.cramFlags&o.a.CRAM_FLAG_NO_SEQ)}},{key:"getReadBases",value:function(){return!this.readBases&&this._refRegion&&(this.readBases=function(e,t){if((e.lengthOnRef||e.readLength)&&!e.isUnknownBases()){var r=e.alignmentStart-t.start;if(!e.readFeatures)return t.seq.substr(r,e.lengthOnRef).toUpperCase();for(var n="",a=r,o=0;n.length<e.readLength;)if(o<e.readFeatures.length){var s=e.readFeatures[o];if("Q"===s.code||"q"===s.code)o+=1;else if(s.pos===n.length+1)if(o+=1,"b"===s.code){var c=s.data.split(","),u=String.fromCharCode.apply(String,Object(i.a)(c));n+=u,a+=u.length}else"B"===s.code?(n+=s.data[0],a+=1):"X"===s.code?(n+=s.sub,a+=1):"I"===s.code?n+=s.data:"D"===s.code?a+=s.data:"i"===s.code?n+=s.data:"N"===s.code?a+=s.data:"S"===s.code?n+=s.data:"P"===s.code||s.code;else if(o<e.readFeatures.length){var f=t.seq.substr(a,e.readFeatures[o].pos-n.length-1);n+=f,a+=f.length}}else{var h=t.seq.substr(a,e.readLength-n.length);n+=h,a+=h.length}return n.toUpperCase()}}(this,this._refRegion)),this.readBases}},{key:"getPairOrientation",value:function(){if(!this.isSegmentUnmapped()&&this.isPaired()&&!this.isMateUnmapped()&&this.mate&&this.sequenceId===this.mate.sequenceId){var e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F",r=" ",n=" ";this.isRead1()?(r="1",n="2"):this.isRead2()&&(r="2",n="1");var a=[],i=this.templateLength||this.templateSize;return this.alignmentStart>this.mate.alignmentStart&&i>0&&(i=-i),i>0?(a[0]=e,a[1]=r,a[2]=t,a[3]=n):(a[2]=e,a[3]=r,a[0]=t,a[1]=n),a.join("")}return null}},{key:"addReferenceSequence",value:function(e,t){this.readFeatures&&this.readFeatures.forEach((function(r){"X"===r.code&&function(e,t,r,n){if(t){var a=n.refPos-t.start,i=t.seq.charAt(a);i&&(n.ref=i);var o=s[i];void 0===o&&(o=4);var c=r.substitutionMatrix[o][n.data];c&&(n.sub=c)}}(0,e,t,r)})),!this.readBases&&e.start<=this.alignmentStart&&e.end>=this.alignmentStart+(this.lengthOnRef||this.readLength)-1&&(this._refRegion=e)}},{key:"toJSON",value:function(){var e=this,t={};return Object.keys(this).forEach((function(r){"_"!==r.charAt(0)&&(t[r]=e[r])})),t.readBases=this.getReadBases(),t}}]),e}()},1237:function(e,t){var r="undefined"!==typeof self?self:this,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,a="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,o="ArrayBuffer"in e;if(o)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!==typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function g(e){var t=new FileReader,r=p(t);return t.readAsArrayBuffer(e),r}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&a&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=p(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=u(e),t=f(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},l.prototype.delete=function(e){delete this.map[u(e)]},l.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},l.prototype.set=function(e,t){this.map[u(e)]=f(t)},l.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},l.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),h(e)},l.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},l.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),h(e)},n&&(l.prototype[Symbol.iterator]=l.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(e,t){var r=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=function(e){var t=e.toUpperCase();return b.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),a=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(a))}})),t}function k(e){var t=new l;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var a=r.join(":").trim();t.append(n,a)}})),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},y.call(m.prototype),y.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];_.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(A){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function x(e,r){return new Promise((function(n,i){var o=new m(e,r);if(o.signal&&o.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:k(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;n(new _(t,e))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.onabort=function(){i(new t.DOMException("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&a&&(s.responseType="blob"),o.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",c)}),s.send("undefined"===typeof o._bodyInit?null:o._bodyInit)}))}x.polyfill=!0,e.fetch||(e.fetch=x,e.Headers=l,e.Request=m,e.Response=_),t.Headers=l,t.Request=m,t.Response=_,t.fetch=x,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var a=n;(t=a.fetch).default=a.fetch,t.fetch=a.fetch,t.Headers=a.Headers,t.Request=a.Request,t.Response=a.Response,e.exports=t},1238:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(10),a=r(12),i=r(11),o=r(2),s=r.n(o),c=r(1063),u=r.n(c),f=function(){function e(t){var r=t.fetch,n=t.size,i=void 0===n?1e7:n,o=t.chunkSize,s=void 0===o?32768:o;if(Object(a.a)(this,e),!r)throw new Error("fetch function required");this.fetch=r,this.chunkSize=s,this.lruCache=new u.a({maxSize:Math.floor(i/s)})}return Object(i.a)(e,[{key:"get",value:function(){var e=Object(n.a)(s.a.mark((function e(t,r,n,a){var i,o,c,u,f,h,l,d=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<r+n)){e.next=2;break}throw new Error("output buffer not big enough for request");case 2:for(i=Math.floor(a/this.chunkSize),o=Math.floor((a+n)/this.chunkSize),c=new Array(o-i+1),u=function(e){c[e-i]=d._getChunk(e).then((function(t){return{data:t,chunkNumber:e}}))},f=i;f<=o;f+=1)u(f);return e.next=9,Promise.all(c);case 9:h=e.sent,l=a-h[0].chunkNumber*this.chunkSize,h.forEach((function(e){var s=e.data,c=e.chunkNumber,u=c*d.chunkSize,f=0,h=d.chunkSize,p=r+(c-i)*d.chunkSize-l;c===i&&(p=r,f=l),c===o&&(h=a+n-u),s.copy(t,p,f,h)}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"_getChunk",value:function(e){var t=this.lruCache.get(e);if(t)return t;var r=this.fetch(e*this.chunkSize,this.chunkSize);return this.lruCache.set(e,r),r}}]),e}()},1239:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(6),a=r(124);function i(e){var t=e.split(/\r?\n/),r=[];return t.forEach((function(e){var t=e.split(/\t/),i=Object(a.a)(t),o=i[0],s=i.slice(1).map((function(e){var t=e.split(":",2),r=Object(n.a)(t,2);return{tag:r[0],value:r[1]}}));o&&r.push({tag:o.substr(1),data:s})})),r}},1272:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var n=r(12),a=r(11),i=r(922),o=r(15),s=r(6),c=r(17),u=r(18),f={int:!0,byte:!0,long:!0,byteArray:!0,byteArrayBlock:!0},h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(Object(n.a)(this,e),this.parameters=t,this.dataType=r,!r)throw new TypeError("must provide a data type to codec constructor");if(!f[r])throw new TypeError("invalid data type ".concat(r))}return Object(a.a)(e,[{key:"_getBits",value:function(e,t,r){var n=0;if(t.bytePosition+(7-t.bitPosition+r)/8>e.length)throw new i.b("read error during decoding. the file seems to be truncated.");for(var a=r;a;a-=1)n<<=1,n|=e[t.bytePosition]>>t.bitPosition&1,t.bitPosition-=1,t.bitPosition<0&&(t.bytePosition+=1),t.bitPosition&=7;return n}}]),e}();var l=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(Object(n.a)(this,r),e=t.call(this,a,i),!["byte","int"].includes(e.dataType))throw new TypeError("".concat(e.dataType," decoding not yet implemented by HUFFMAN_INT codec"));return e.buildCodeBook(),e.buildCodes(),e.buildCaches(),0===e.sortedCodes[0].bitLength&&(e._decode=e._decodeZeroLengthCode),e}return Object(a.a)(r,[{key:"buildCodeBook",value:function(){for(var e=this,t=new Array(this.parameters.numCodes),r=0;r<this.parameters.numCodes;r+=1)t[r]={symbol:this.parameters.symbols[r],bitLength:this.parameters.bitLengths[r]};t=t.sort((function(e,t){return e.bitLength-t.bitLength||e.symbol-t.symbol})),this.codeBook={},t.forEach((function(t){e.codeBook[t.bitLength]||(e.codeBook[t.bitLength]=[]),e.codeBook[t.bitLength].push(t.symbol)}))}},{key:"buildCodes",value:function(){var e=this;this.codes={};var t=0,r=-1;Object.entries(this.codeBook).forEach((function(n){var a=Object(s.a)(n,2),o=a[0],c=a[1];o=parseInt(o,10),c.forEach((function(n){var a={bitLength:o,value:n};r+=1;var s=o-t;if(r<<=s,a.bitCode=r,t+=s,function(e){var t=e-(e>>1)&1431655765;return 16843009*((t=(858993459&t)+(t>>2&858993459))+(t>>4)&252645135)>>24}(r)>o)throw new i.c("Symbol out of range");e.codes[n]=a}))}))}},{key:"buildCaches",value:function(){this.sortedCodes=Object.values(this.codes).sort((function(e,t){return e.bitLength-t.bitLength||e.bitCode-t.bitCode})),this.sortedByValue=Object.values(this.codes).sort((function(e,t){return e.value-t.value})),this.sortedValuesByBitCode=this.sortedCodes.map((function(e){return e.value})),this.sortedBitCodes=this.sortedCodes.map((function(e){return e.bitCode})),this.sortedBitLengthsByBitCode=this.sortedCodes.map((function(e){return e.bitLength}));var e=Math.max.apply(Math,Object(o.a)(this.sortedBitCodes));this.bitCodeToValue=new Array(e+1).fill(-1);for(var t=0;t<this.sortedBitCodes.length;t+=1)this.bitCodeToValue[this.sortedCodes[t].bitCode]=t}},{key:"decode",value:function(e,t,r,n){return this._decode(e,t,n.coreBlock)}},{key:"_decodeZeroLengthCode",value:function(){return this.sortedCodes[0].value}},{key:"_decode",value:function(e,t,r){for(var n=t.content,a=0,o=0,s=0;s<this.sortedCodes.length;s+=1){var c=this.sortedCodes[s].bitLength;o<<=c-a,o|=this._getBits(n,r,c-a),a=c;var u=this.bitCodeToValue[o];if(u>-1&&this.sortedBitLengthsByBitCode[u]===c)return this.sortedValuesByBitCode[u];for(var f=s;this.sortedCodes[f+1].bitLength===c&&f<this.sortedCodes.length;f+=1)s+=1}throw new i.c("Huffman symbol not found.")}}]),r}(h),d=r(1010),p=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(Object(n.a)(this,r),"int"===(e=t.call(this,a,o)).dataType)e._decodeData=e._decodeInt;else{if("byte"!==e.dataType)throw new i.e("".concat(e.dataType," decoding not yet implemented by EXTERNAL codec"));e._decodeData=e._decodeByte}return e}return Object(a.a)(r,[{key:"decode",value:function(e,t,r,n){var a=this.parameters.blockContentId,o=r[a];if(!o)throw new i.c("no block found with content ID ".concat(a));var s=n.externalBlocks.getCursor(a);return this._decodeData(o,s)}},{key:"_decodeInt",value:function(e,t){var r=Object(d.c)(e.content,t.bytePosition),n=Object(s.a)(r,2),a=n[0],i=n[1];return t.bytePosition+=i,a}},{key:"_decodeByte",value:function(e,t){if(t.bytePosition>=e.content.length)throw new i.b("attempted to read beyond end of block. this file seems truncated.");var r=e.content[t.bytePosition];return t.bytePosition+=1,r}}]),r}(h),g=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(Object(n.a)(this,r),e=t.call(this,a,i),"byteArray"!==i)throw new TypeError("byteArrayStop codec does not support data type ".concat(i));return e._decode=e._decodeByteArray,e}return Object(a.a)(r,[{key:"decode",value:function(e,t,r,n){var a=this.parameters.blockContentId,o=r[a];if(!o)throw new i.c("no block found with content ID ".concat(a));var s=n.externalBlocks.getCursor(a);return this._decode(o,s)}},{key:"_decodeByteArray",value:function(e,t){for(var r=e.content,n=this.parameters.stopByte,a=t.bytePosition,o=t.bytePosition;r[o]!==n&&o<r.length;){if(o===r.length)throw new i.b("byteArrayStop reading beyond length of data buffer?");o+=1}return t.bytePosition=o+1,r.slice(a,o)}}]),r}(h),v=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;if(Object(n.a)(this,r),(e=t.call(this,a,i)).instantiateCodec=o,"byteArray"!==i)throw new TypeError("byteArrayLength does not support data type ".concat(i));return e}return Object(a.a)(r,[{key:"decode",value:function(e,t,r,n){for(var a=this._getLengthCodec().decode(e,t,r,n),i=this._getDataCodec(),o=new Array(a),s=0;s<a;s+=1)o[s]=i.decode(e,t,r,n);return o}},{key:"_getLengthCodec",value:function(){var e=this.parameters.lengthsEncoding;return this.instantiateCodec(e,"int")}},{key:"_getDataCodec",value:function(){var e=this.parameters.valuesEncoding;return this.instantiateCodec(e,"byte")}}]),r}(h);"_getLengthCodec _getDataCodec".split(" ").forEach((function(e){return Object(d.e)(v,e)}));var y=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(Object(n.a)(this,r),"int"!==(e=t.call(this,a,o)).dataType)throw new i.e("".concat(e.dataType," decoding not yet implemented by BETA codec"));return e}return Object(a.a)(r,[{key:"decode",value:function(e,t,r,n){return this._getBits(t.content,n.coreBlock,this.parameters.length)-this.parameters.offset}}]),r}(h),b=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(Object(n.a)(this,r),"int"!==(e=t.call(this,a,o)).dataType)throw new i.e("".concat(e.dataType," decoding not yet implemented by GAMMA codec"));return e}return Object(a.a)(r,[{key:"decode",value:function(e,t,r,n){for(var a=1;0===this._getBits(t.content,n.coreBlock,1);)a+=1;return(this._getBits(t.content,n.coreBlock,a-1)|1<<a-1)-this.parameters.offset}}]),r}(h),m=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(Object(n.a)(this,r),"int"!==(e=t.call(this,a,o)).dataType)throw new i.e("".concat(e.dataType," decoding not yet implemented by SUBEXP codec"));return e}return Object(a.a)(r,[{key:"decode",value:function(e,t,r,n){for(var a,i,o=0;this._getBits(t.content,n.coreBlock,1);)o+=1;return 0===o?(a=this.parameters.K,i=this._getBits(t.content,n.coreBlock,a)):i=1<<(a=o+this.parameters.K-1)|this._getBits(t.content,n.coreBlock,a),i-this.parameters.offset}}]),r}(h),w={1:p,3:l,4:v,5:g,6:y,7:m,9:b};function k(e,t){var r,n=(r="ignore"===t?0:e.codecId,w[r]);if(!n)throw new i.e("no codec implemented for codec ID ".concat(e.codecId));return new n(e.parameters,t,k)}var _={BF:"int",CF:"int",RI:"int",RL:"int",AP:"int",RG:"int",MF:"int",NS:"int",NP:"int",TS:"int",NF:"int",TC:"byte",TN:"int",FN:"int",FC:"byte",FP:"int",BS:"byte",IN:"byteArray",SC:"byteArray",DL:"int",BA:"byte",BB:"byteArray",RS:"int",PD:"int",HC:"int",MQ:"int",RN:"byteArray",QS:"byte",QQ:"byteArray",TL:"int",TM:"ignore",TV:"ignore"};var S=function(){function e(t){Object(n.a)(this,e),Object.assign(this,t),this.readNamesIncluded=t.preservation.RN,this.APdelta=t.preservation.AP,this.referenceRequired=!!t.preservation.RR,this.tagIdsDictionary=t.preservation.TD,this.substitutionMatrix=function(e){for(var t=new Array(5),r=0;r<5;r+=1)t[r]=new Array(4);return t[0][e[0]>>6&3]="C",t[0][e[0]>>4&3]="G",t[0][e[0]>>2&3]="T",t[0][e[0]>>0&3]="N",t[1][e[1]>>6&3]="A",t[1][e[1]>>4&3]="G",t[1][e[1]>>2&3]="T",t[1][e[1]>>0&3]="N",t[2][e[2]>>6&3]="A",t[2][e[2]>>4&3]="C",t[2][e[2]>>2&3]="T",t[2][e[2]>>0&3]="N",t[3][e[3]>>6&3]="A",t[3][e[3]>>4&3]="C",t[3][e[3]>>2&3]="G",t[3][e[3]>>0&3]="N",t[4][e[4]>>6&3]="A",t[4][e[4]>>4&3]="C",t[4][e[4]>>2&3]="G",t[4][e[4]>>0&3]="T",t}(t.preservation.SM),this.dataSeriesCodecCache={},this.tagCodecCache={}}return Object(a.a)(e,[{key:"getCodecForTag",value:function(e){if(!this.tagCodecCache[e]){var t=this.tagEncoding[e];t&&(this.tagCodecCache[e]=k(t,"byteArray"))}return this.tagCodecCache[e]}},{key:"getTagNames",value:function(e){return this.tagIdsDictionary[e]}},{key:"getCodecForDataSeries",value:function(e){if(!this.dataSeriesCodecCache[e]){var t=this.dataSeriesEncoding[e];if(t){var r=_[e];if(!r)throw new i.c("data series name ".concat(e," not defined in file compression header"));this.dataSeriesCodecCache[e]=k(t,r)}}return this.dataSeriesCodecCache[e]}},{key:"toJSON",value:function(){var e=this,t={};return Object.keys(this).forEach((function(r){/Cache$/.test(r)||(t[r]=e[r])})),t}}]),e}()},1312:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return I}));var n=r(5),a=r(10),i=r(12),o=r(11),s=r(17),c=r(18),u=r(2),f=r.n(u),h=r(1219).a,l=r(6),d=r(15),p=r(922),g=function(){function e(t){if(Object(i.a)(this,e),t.cram?this.cram=t.cram:this.cram=new h({url:t.cramUrl,path:t.cramPath,filehandle:t.cramFilehandle,seqFetch:t.seqFetch,checkSequenceMD5:t.checkSequenceMD5,cacheSize:t.cacheSize}),!(this.cram instanceof h))throw new Error("invalid arguments: no cramfile");if(this.index=t.index,!this.index.getEntriesForRange)throw new Error("invalid arguments: not an index");this.fetchSizeLimit=t.fetchSizeLimit||3e6}return Object(o.a)(e,[{key:"getRecordsForRange",value:function(){var e=Object(a.a)(f.a.mark((function e(t,r,n){var a,i,o,s,c,u,h,g,v,y,b,m,w,k,_,S,x,A,C,B,E,R,O,M,I,N,j,P=this,q=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=q.length>3&&void 0!==q[3]?q[3]:{}).viewAsPairs=i.viewAsPairs||!1,i.pairAcrossChr=i.pairAcrossChr||!1,i.maxInsertSize=i.maxInsertSize||2e5,"string"!==typeof t){e.next=6;break}throw new p.e("string sequence names not yet supported");case 6:return o=t,e.next=9,this.index.getEntriesForRange(o,r,n);case 9:if(s=e.sent,!((c=s.map((function(e){return e.sliceBytes})).reduce((function(e,t){return e+t}),0))>this.fetchSizeLimit)){e.next=13;break}throw new p.d("data size of ".concat(c.toLocaleString()," bytes exceeded fetch size limit of ").concat(this.fetchSizeLimit.toLocaleString()," bytes"));case 13:return u=function(e){return e.sequenceId===t&&e.alignmentStart<=n&&e.alignmentStart+e.lengthOnRef-1>=r},e.next=16,Promise.all(s.map((function(e){return P.getRecordsInSlice(e,u)})));case 16:if(h=e.sent,g=(a=Array.prototype).concat.apply(a,Object(d.a)(h)),!i.viewAsPairs){e.next=42;break}for(v={},y={},b=0;b<g.length;b+=1)m=g[b].readName,w=g[b].uniqueId,v[m]||(v[m]=0),v[m]+=1,y[w]=1;for(k={},Object.entries(v).forEach((function(e){var t=Object(l.a)(e,2),r=t[0];1===t[1]&&(k[r]=!0)})),_=[],S=0;S<g.length;S+=1)x=g[S].readName,k[x]&&g[S].mate&&(g[S].mate.sequenceId===o||i.pairAcrossChr)&&Math.abs(g[S].alignmentStart-g[S].mate.alignmentStart)<i.maxInsertSize&&(A=this.index.getEntriesForRange(g[S].mate.sequenceId,g[S].mate.alignmentStart,g[S].mate.alignmentStart+1),_.push(A));return e.next=28,Promise.all(_);case 28:for(C=e.sent,B=[],E=0;E<C.length;E+=1)(R=B).push.apply(R,Object(d.a)(C[E]));if(B=B.sort((function(e,t){return e.toString().localeCompare(t.toString())})).filter((function(e,t,r){return!t||e.toString()!==r[t-1].toString()})),O=[],M=[],!((I=B.map((function(e){return e.sliceBytes})).reduce((function(e,t){return e+t}),0))>this.fetchSizeLimit)){e.next=37;break}throw new Error("mate data size of ".concat(I.toLocaleString()," bytes exceeded fetch size limit of ").concat(this.fetchSizeLimit.toLocaleString()," bytes"));case 37:return B.forEach((function(e){var t=P.cram.featureCache.get(e.toString());t||(t=P.getRecordsInSlice(e,(function(){return!0})),P.cram.featureCache.set(e.toString(),t)),O.push(t);var r=t.then((function(e){for(var t=[],r=0;r<e.length;r+=1){var n=e[r];k[n.readName]&&!y[n.uniqueId]&&t.push(n)}return t}));M.push(r)})),e.next=40,Promise.all(M);case 40:(N=e.sent).length&&(j=N.reduce((function(e,t){return e.concat(t)})),g=g.concat(j));case 42:return e.abrupt("return",g);case 43:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getRecordsInSlice",value:function(e,t){var r=e.containerStart,n=e.sliceStart,a=e.sliceBytes;return this.cram.getContainerAtPosition(r).getSlice(n,a).getRecords(t)}},{key:"hasDataForReferenceSequence",value:function(e){return this.index.hasDataForReferenceSequence(e)}}]),e}(),v=r(914),y=r.n(v),b=r(1063),m=r.n(b),w=r(1203),k=r(1209),_=function(){function e(t){Object(i.a)(this,e),Object.assign(this,t)}return Object(o.a)(e,[{key:"toString",value:function(){return"".concat(this.start,":").concat(this.span,":").concat(this.containerStart,":").concat(this.sliceStart,":").concat(this.sliceBytes)}}]),e}();function S(e,t){if(t.some((function(e){return void 0===e})))throw new p.c("invalid .crai index file");var r=Object(l.a)(t,6),n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],c=r[5];e[n]||(e[n]=[]),e[n].push(new _({start:a,span:i,containerStart:o,sliceStart:s,sliceBytes:c}))}var x=function(){function e(t){var r=this;Object(i.a)(this,e);var n=Object(k.a)(t.url,t.path,t.filehandle);this._parseCache=new y.a({cache:new m.a({maxSize:1}),fill:function(e,t){return r.parseIndex({signal:t})}}),this.readFile=n.readFile.bind(n)}return Object(o.a)(e,[{key:"parseIndex",value:function(){var e={};return this.readFile().then((function(e){return 31===e[0]&&139===e[1]?Object(w.a)(e):e})).then((function(t){if(t.length>4&&21578050===t.readUInt32LE(0))throw new p.c("invalid .crai index file. note: file appears to be a .bai index. this is technically legal but please open a github issue if you need support");for(var r=[],n="",a=0;a<t.length;a+=1){var i=t[a];if(i>=48&&i<=57||!n&&45===i)n+=String.fromCharCode(i);else if(9===i)r.push(Number.parseInt(n,10)),n="";else if(10===i)r.push(Number.parseInt(n,10)),n="",S(e,r),r=[];else if(13!==i&&32!==i)throw new p.c("invalid .crai index file")}return n&&r.push(Number.parseInt(n,10)),6===r.length&&S(e,r),Object.entries(e).forEach((function(t){var r=Object(l.a)(t,2),n=r[0],a=r[1];e[n]=a.sort((function(e,t){return e.start-t.start||e.span-t.span}))})),e}))}},{key:"getIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._parseCache.get("index",null,e.signal)}},{key:"hasDataForReferenceSequence",value:function(){var e=Object(a.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIndex();case 2:return e.t0=t,e.abrupt("return",!!e.sent[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEntriesForRange",value:function(){var e=Object(a.a)(f.a.mark((function e(t,r,n){var a,i,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIndex();case 2:if(e.t0=t,a=e.sent[e.t0]){e.next=6;break}return e.abrupt("return",[]);case 6:for(i=function(e){var t=e.start,a=e.start+e.span;return t>=n?-1:a<=r?1:0},o=[],s=0;s<a.length;s+=1)0===i(a[s])&&o.push(a[s]);return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}(),A=r(53),C=r(7),B=r(41),E=r(4),R=r(75),O=r(230),M=function(){function e(t,r){Object(i.a)(this,e),this.record=t,this._store=r}return Object(o.a)(e,[{key:"_get_name",value:function(){return this.record.readName}},{key:"_get_start",value:function(){return this.record.alignmentStart-1}},{key:"_get_end",value:function(){return this.record.alignmentStart+this.record.lengthOnRef-1}},{key:"_get_cram_read_features",value:function(){return this.record.readFeatures}},{key:"_get_type",value:function(){return"match"}},{key:"_get_score",value:function(){return this.record.mappingQuality}},{key:"_get_flags",value:function(){return this.record.flags}},{key:"_get_strand",value:function(){return this.record.isReverseComplemented()?-1:1}},{key:"_read_group_id",value:function(){var e=this._store.samHeader.readGroups;return e?e[this.record.readGroupId]:void 0}},{key:"_get_qual",value:function(){return(this.record.qualityScores||[]).join(" ")}},{key:"qualRaw",value:function(){return this.record.qualityScores}},{key:"_get_seq_id",value:function(){return this._store.refIdToName(this.record.sequenceId)}},{key:"_get_refName",value:function(){return this._get_seq_id()}},{key:"_get_is_paired",value:function(){return!!this.record.mate}},{key:"_get_pair_orientation",value:function(){return this.record.isPaired()?this.record.getPairOrientation():void 0}},{key:"_get_template_length",value:function(){return this.record.templateLength||this.record.templateSize}},{key:"_get_next_seq_id",value:function(){return this.record.mate?this._store.refIdToName(this.record.mate.sequenceId):void 0}},{key:"_get_next_pos",value:function(){return this.record.mate?this.record.mate.alignmentStart:void 0}},{key:"_get_next_segment_position",value:function(){return this.record.mate?"".concat(this._store.refIdToName(this.record.mate.sequenceId),":").concat(this.record.mate.alignmentStart):void 0}},{key:"_get_tags",value:function(){var e=this._read_group_id(),t=this.record.tags;return void 0!==e?Object(n.a)(Object(n.a)({},t),{},{RG:e}):t}},{key:"_get_seq",value:function(){return this.record.getReadBases()}},{key:"_get_CIGAR",value:function(){var e="",t="",r="M",n=0,a=this.record._refRegion.seq,i=this.record._refRegion.start,o=this.record.alignmentStart,s=0;return"undefined"!==typeof this.record.readFeatures?this.record.readFeatures.forEach((function(c){var u=c.code,f=c.refPos,h=c.sub,l=c.data;if(s=f-o,e+=a.substring(o-i,f-i),o=f,n&&"M"!==r&&(t+=n+r,n=0),s&&(r="M",n+=s),"b"===u){var p=l.split(","),g=String.fromCharCode.apply(String,Object(d.a)(p));e+=g,o+=g.length,n+=g.length}else"B"===u||"X"===u?(e+=h,o++,n++):"D"===u||"N"===u?(o+=l,n&&(t+=n+r),t+=l+u,n=0):"I"===u||"S"===u?(e+=l,n&&(t+=n+r),t+=l.length+u,n=0):"i"===u?(e+=l,n&&(t+=n+r),t+="".concat(1,"I"),n=0):"P"===u?(n&&(t+=n+r),t+="".concat(l,"P")):"H"===u&&(n&&(t+=n+r),t+="".concat(l,"H"),n=0)})):s=this.record.readLength-e.length,e.length!==this.record.readLength&&(s=this.record.readLength-e.length,e+=a.substring(o-i,o-i+s),n&&"M"!==r&&(t+=n+r,n=0),r="M",n+=s),n&&(t+=n+r),t}},{key:"tags",value:function(){return Object.getOwnPropertyNames(e.prototype).filter((function(e){return e.startsWith("_get_")&&"_get_mismatches"!==e&&"_get_cram_read_features"!==e})).map((function(e){return e.replace("_get_","")}))}},{key:"id",value:function(){return"".concat(this._store.id,"-").concat(this.record.uniqueId)}},{key:"get",value:function(e){var t="_get_".concat(e);if(this[t])return this[t]()}},{key:"parent",value:function(){}},{key:"children",value:function(){}},{key:"set",value:function(){}},{key:"pairedFeature",value:function(){return!1}},{key:"_get_clipPos",value:function(){var e=this.get("mismatches");if(e.length){var t=-1===this.get("strand")?e[e.length-1]:e[0],r=t.type,n=t.cliplen;if("softclip"===r||"hardclip"===r)return n}return 0}},{key:"toJSON",value:function(){var e=this,t={};return this.tags().forEach((function(r){var n=e.get(r);void 0!==n&&(t[r]=n)})),Object(n.a)(Object(n.a)({},t),{},{name:this.get("name"),type:this.get("type"),uniqueId:this.id()})}},{key:"_get_mismatches",value:function(){var e=this.get("cram_read_features"),t=this.qualRaw();if(!e)return[];var r=this.get("start"),n=[];return e.forEach((function(e){var a=e.code,i=e.pos,o=e.data,s=e.sub,c=e.ref,u=e.refPos-1-r;if("X"===a)n.push({start:u,length:1,base:s,qual:null===t||void 0===t?void 0:t[i],altbase:c,type:"mismatch"});else if("I"===a)n.push({start:u,type:"insertion",base:"".concat(o.length),length:0});else if("N"===a)n.push({type:"skip",length:o,start:u,base:"N"});else if("S"===a){var f=o.length;n.push({start:u,type:"softclip",base:"S".concat(f),cliplen:f,length:1})}else if("P"===a);else if("H"===a){var h=o;n.push({start:u,type:"hardclip",base:"H".concat(h),cliplen:h,length:1})}else"D"===a?n.push({type:"deletion",length:o,start:u,base:"*"}):"b"===a||"q"===a||"B"===a||"i"===a&&n.push({start:u,type:"insertion",base:o,length:1})})),n}}]),e}(),I=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).samHeader={},e.setupP=void 0,e.seqIdToRefName=void 0,e.seqIdToOriginalRefName=[],e}return Object(o.a)(r,[{key:"configure",value:function(){var e=Object(a.a)(f.a.mark((function e(){var t,r,n,a,i,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(E.readConfObject)(this.config,"cramLocation"),r=Object(E.readConfObject)(this.config,"craiLocation"),t){e.next=4;break}throw new Error("missing cramLocation argument");case 4:if(r){e.next=6;break}throw new Error("missing craiLocation argument");case 6:if(n=new g({cramFilehandle:Object(B.openLocation)(t,this.pluginManager),index:new x({filehandle:Object(B.openLocation)(r,this.pluginManager)}),seqFetch:this.seqFetch.bind(this),checkSequenceMD5:!1,fetchSizeLimit:2e8}),a=Object(E.readConfObject)(this.config,["sequenceAdapter","type"]),this.getSubAdapter){e.next=10;break}throw new Error("Error getting subadapter");case 10:return i=Object(E.readConfObject)(this.config,"sequenceAdapter"),e.next=13,this.getSubAdapter(i);case 13:if(o=e.sent,(s=o.dataAdapter)instanceof A.BaseFeatureDataAdapter){e.next=17;break}throw new Error("CRAM feature adapters cannot use sequence adapters of type '".concat(a,"'"));case 17:return e.abrupt("return",{cram:n,sequenceAdapter:s});case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeader",value:function(){var e=Object(a.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.configure();case 2:return r=e.sent,n=r.cram,e.abrupt("return",n.cram.getHeaderText(t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"seqFetch",value:function(){var e=Object(a.a)(f.a.mark((function e(t,r,n){var a,i,o,s,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r-=1,e.next=3,this.configure();case 3:if(a=e.sent,i=a.sequenceAdapter,o=this.refIdToOriginalName(t)||this.refIdToName(t)){e.next=8;break}return e.abrupt("return",void 0);case 8:return e.next=10,i.getFeatures({refName:o,start:r,end:n,assemblyName:""}).pipe(Object(O.a)()).toPromise();case 10:if(s=e.sent,(c=s.sort((function(e,t){return e.get("start")-t.get("start")})).map((function(e){var t=e.get("start"),a=e.get("end"),i=Math.max(r-t,0),o=Math.min(n-t,a-t)-i;return(e.get("seq")||e.get("residues")).substr(i,o)})).join("")).length===n-r){e.next=14;break}throw new Error("sequence fetch failed: fetching ".concat(o,":").concat((r-1).toLocaleString(),"-").concat(n.toLocaleString()," returned ").concat(c.length.toLocaleString()," bases, but should have returned ").concat((n-r).toLocaleString()));case 14:return e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"setupPre",value:function(){var e=Object(a.a)(f.a.mark((function e(t){var r,a,i,o,s,c,u,h,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t||{}).statusCallback,a=void 0===r?function(){}:r,e.next=3,this.configure();case 3:return i=e.sent,a("Downloading index"),o=i.cram,e.next=8,o.cram.getSamHeader(null===t||void 0===t?void 0:t.signal);case 8:return s=e.sent,c=[],u={},s.filter((function(e){return"SQ"===e.tag})).forEach((function(e,t){e.data.forEach((function(e){if("SN"===e.tag){var r=e.value;u[r]=t,c[t]=r}}))})),h=s.filter((function(e){return"RG"===e.tag})).map((function(e){var t;return null===(t=e.data.find((function(e){return"ID"===e.tag})))||void 0===t?void 0:t.value})),l={idToName:c,nameToId:u,readGroups:h},a(""),this.samHeader=l,e.abrupt("return",Object(n.a)({samHeader:l},i));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setup",value:function(){var e=Object(a.a)(f.a.mark((function e(t){var r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setupP||(this.setupP=this.setupPre(t).catch((function(e){throw r.setupP=void 0,e}))),e.abrupt("return",this.setupP);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRefNames",value:function(){var e=Object(a.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setup(t);case 2:if(r=e.sent,(n=r.samHeader).idToName){e.next=6;break}throw new Error("CRAM file has no header lines");case 6:return e.abrupt("return",n.idToName);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refNameToId",value:function(e){return this.samHeader.nameToId?this.samHeader.nameToId[e]:this.seqIdToRefName?this.seqIdToRefName.indexOf(e):void 0}},{key:"refIdToName",value:function(e){return this.samHeader.idToName?this.samHeader.idToName[e]:this.seqIdToRefName?this.seqIdToRefName[e]:void 0}},{key:"refIdToOriginalName",value:function(e){return this.seqIdToOriginalRefName[e]}},{key:"getFeatures",value:function(e,t){var r=this,n=t||{},i=n.signal,o=n.statusCallback,s=void 0===o?function(){}:o,c=e.refName,u=e.start,h=e.end,l=e.originalRefName;return Object(R.ObservableCreate)(function(){var e=Object(a.a)(f.a.mark((function e(n){var a,o,d,p,g;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setup(t);case 2:if(a=e.sent,o=a.cram,d=a.sequenceAdapter,s("Downloading alignments"),r.seqIdToRefName){e.next=10;break}return e.next=9,d.getRefNames(t);case 9:r.seqIdToRefName=e.sent;case 10:if(void 0===(p=r.refNameToId(c))){e.next=20;break}return l&&(r.seqIdToOriginalRefName[p]=l),e.next=15,o.getRecordsForRange(p,u,h,t);case 15:g=e.sent,Object(C.checkAbortSignal)(i),g.forEach((function(e){n.next(r.cramRecordToFeature(e))})),e.next=21;break;case 20:console.warn("Unknown refName",c);case 21:s(""),n.complete();case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i)}},{key:"freeResources",value:function(){}},{key:"cramRecordToFeature",value:function(e){return new M(e,this)}},{key:"estimateRegionsStats",value:function(){var e=Object(a.a)(f.a.mark((function e(t,r){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bytesForRegions(t,r);case 2:return n=e.sent,a=Object(E.readConfObject)(this.config,"fetchSizeLimit"),e.abrupt("return",{bytes:n,fetchSizeLimit:a});case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"bytesForRegions",value:function(){var e=Object(a.a)(f.a.mark((function e(t,r){var n,a,i,o=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.configure();case 2:return n=e.sent,a=n.cram,e.next=6,Promise.all(t.map((function(e){var t=e.refName,r=e.start,n=e.end,i=o.refNameToId(t);return a.index.getEntriesForRange(i,r,n)})));case 6:return i=e.sent,e.abrupt("return",i.flat().reduce((function(e,t){return e+t.sliceBytes}),0));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(A.BaseFeatureDataAdapter)},913:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.AbortSignal=t.AbortController=void 0;var n=r(333),a=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof e)return e;throw new Error("unable to locate global object")},i="undefined"===typeof a().AbortController?n.AbortController:a().AbortController;t.AbortController=i;var o="undefined"===typeof a().AbortController?n.AbortSignal:a().AbortSignal;t.AbortSignal=o}).call(this,r(70))},914:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(918));t.default=a.default},915:function(e,t){e.exports=n;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(C){}function n(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function a(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=a;var i={},o={};function s(e,t){var r,n,a;return t?(a=0<=(e>>>=0)&&e<256)&&(n=o[e])?n:(r=u(e,(0|e)<0?-1:0,!0),a&&(o[e]=r),r):(a=-128<=(e|=0)&&e<128)&&(n=i[e])?n:(r=u(e,e<0?-1:0,!1),a&&(i[e]=r),r)}function c(e,t){if(isNaN(e))return t?b:y;if(t){if(e<0)return b;if(e>=p)return S}else{if(e<=-g)return x;if(e+1>=g)return _}return e<0?c(-e,t).neg():u(e%d|0,e/d|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=s,n.fromNumber=c,n.fromBits=u;var f=Math.pow;function h(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if("number"===typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return h(e.substring(1),t,r).neg();for(var a=c(f(r,8)),i=y,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+s),r);if(s<8){var l=c(f(r,s));i=i.mul(l).add(c(u))}else i=(i=i.mul(a)).add(c(u))}return i.unsigned=t,i}function l(e,t){return"number"===typeof e?c(e,t):"string"===typeof e?h(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=h,n.fromValue=l;var d=4294967296,p=d*d,g=p/2,v=s(1<<24),y=s(0);n.ZERO=y;var b=s(0,!0);n.UZERO=b;var m=s(1);n.ONE=m;var w=s(1,!0);n.UONE=w;var k=s(-1);n.NEG_ONE=k;var _=u(-1,2147483647,!1);n.MAX_VALUE=_;var S=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=S;var x=u(0,-2147483648,!1);n.MIN_VALUE=x;var A=n.prototype;A.toInt=function(){return this.unsigned?this.low>>>0:this.low},A.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},A.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(x)){var t=c(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=c(f(e,6),this.unsigned),i=this,o="";;){var s=i.div(a),u=(i.sub(s.mul(a)).toInt()>>>0).toString(e);if((i=s).isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},A.getHighBits=function(){return this.high},A.getHighBitsUnsigned=function(){return this.high>>>0},A.getLowBits=function(){return this.low},A.getLowBitsUnsigned=function(){return this.low>>>0},A.getNumBitsAbs=function(){if(this.isNegative())return this.eq(x)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},A.isZero=function(){return 0===this.high&&0===this.low},A.eqz=A.isZero,A.isNegative=function(){return!this.unsigned&&this.high<0},A.isPositive=function(){return this.unsigned||this.high>=0},A.isOdd=function(){return 1===(1&this.low)},A.isEven=function(){return 0===(1&this.low)},A.equals=function(e){return a(e)||(e=l(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},A.eq=A.equals,A.notEquals=function(e){return!this.eq(e)},A.neq=A.notEquals,A.ne=A.notEquals,A.lessThan=function(e){return this.comp(e)<0},A.lt=A.lessThan,A.lessThanOrEqual=function(e){return this.comp(e)<=0},A.lte=A.lessThanOrEqual,A.le=A.lessThanOrEqual,A.greaterThan=function(e){return this.comp(e)>0},A.gt=A.greaterThan,A.greaterThanOrEqual=function(e){return this.comp(e)>=0},A.gte=A.greaterThanOrEqual,A.ge=A.greaterThanOrEqual,A.compare=function(e){if(a(e)||(e=l(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},A.comp=A.compare,A.negate=function(){return!this.unsigned&&this.eq(x)?x:this.not().add(m)},A.neg=A.negate,A.add=function(e){a(e)||(e=l(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,c=e.low>>>16,f=0,h=0,d=0,p=0;return d+=(p+=i+(65535&e.low))>>>16,h+=(d+=n+c)>>>16,f+=(h+=r+s)>>>16,f+=t+o,u((d&=65535)<<16|(p&=65535),(f&=65535)<<16|(h&=65535),this.unsigned)},A.subtract=function(e){return a(e)||(e=l(e)),this.add(e.neg())},A.sub=A.subtract,A.multiply=function(e){if(this.isZero())return y;if(a(e)||(e=l(e)),r)return u(r.mul(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned);if(e.isZero())return y;if(this.eq(x))return e.isOdd()?x:y;if(e.eq(x))return this.isOdd()?x:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,f=65535&e.high,h=e.low>>>16,d=65535&e.low,p=0,g=0,b=0,m=0;return b+=(m+=o*d)>>>16,g+=(b+=i*d)>>>16,b&=65535,g+=(b+=o*h)>>>16,p+=(g+=n*d)>>>16,g&=65535,p+=(g+=i*h)>>>16,g&=65535,p+=(g+=o*f)>>>16,p+=t*d+n*h+i*f+o*s,u((b&=65535)<<16|(m&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},A.mul=A.multiply,A.divide=function(e){if(a(e)||(e=l(e)),e.isZero())throw Error("division by zero");var t,n,i;if(r)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?r.div_u:r.div_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return w;i=b}else{if(this.eq(x))return e.eq(m)||e.eq(k)?x:e.eq(x)?m:(t=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?m:k:(n=this.sub(e.mul(t)),i=t.add(n.div(e)));if(e.eq(x))return this.unsigned?b:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=y}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),s=o<=48?1:f(2,o-48),h=c(t),d=h.mul(e);d.isNegative()||d.gt(n);)d=(h=c(t-=s,this.unsigned)).mul(e);h.isZero()&&(h=m),i=i.add(h),n=n.sub(d)}return i},A.div=A.divide,A.modulo=function(e){return a(e)||(e=l(e)),r?u((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},A.mod=A.modulo,A.rem=A.modulo,A.not=function(){return u(~this.low,~this.high,this.unsigned)},A.and=function(e){return a(e)||(e=l(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},A.or=function(e){return a(e)||(e=l(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},A.xor=function(e){return a(e)||(e=l(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},A.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},A.shl=A.shiftLeft,A.shiftRight=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},A.shr=A.shiftRight,A.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},A.shru=A.shiftRightUnsigned,A.shr_u=A.shiftRightUnsigned,A.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},A.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},A.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},A.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},A.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},918:function(e,t,r){"use strict";var n=r(111).default,a=r(112).default,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(913),s=i(r(919)),c=i(r(920)),u=function(){function e(t){var r=t.fill,a=t.cache;if(n(this,e),"function"!==typeof r)throw new TypeError("must pass a fill function");if("object"!==typeof a)throw new TypeError("must pass a cache object");if("function"!==typeof a.get||"function"!==typeof a.set||"function"!==typeof a.delete)throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=a,this.fillCallback=r}return a(e,[{key:"evict",value:function(e,t){this.cache.get(e)===t&&this.cache.delete(e)}},{key:"fill",value:function(e,t,r,n){var a=this,i=new s.default,o=new c.default;o.addCallback(n);var u={aborter:i,promise:this.fillCallback(t,i.signal,(function(e){o.callback(e)})),settled:!1,statusReporter:o,get aborted(){return this.aborter.signal.aborted}};u.aborter.addSignal(r),u.aborter.signal.addEventListener("abort",(function(){u.settled||a.evict(e,u)})),u.promise.then((function(){u.settled=!0}),(function(){u.settled=!0,a.evict(e,u)})).catch((function(e){throw console.error(e),e})),this.cache.set(e,u)}},{key:"has",value:function(e){return this.cache.has(e)}},{key:"get",value:function(t,r,n,a){if(!n&&r instanceof o.AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");var i=this.cache.get(t);return i?i.aborted&&!i.settled?(this.evict(t,i),this.get(t,r,n,a)):i.settled?i.promise:(i.aborter.addSignal(n),i.statusReporter.addCallback(a),e.checkSinglePromise(i.promise,n)):(this.fill(t,r,n,a),e.checkSinglePromise(this.cache.get(t).promise,n))}},{key:"delete",value:function(e){var t=this.cache.get(e);t&&(t.settled||t.aborter.abort(),this.cache.delete(e))}},{key:"clear",value:function(){for(var e=this.cache.keys(),t=0,r=e.next();!r.done;r=e.next())this.delete(r.value),t+=1;return t}}],[{key:"isAbortException",value:function(e){return"AbortError"===e.name||"ERR_ABORTED"===e.code||"AbortError: aborted"===e.message||"Error: aborted"===e.message}},{key:"checkSinglePromise",value:function(e,t){function r(){if(t&&t.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return e.then((function(e){return r(),e}),(function(e){throw r(),e}))}}]),e}();t.default=u},919:function(e,t,r){"use strict";var n=r(112).default,a=r(111).default;Object.defineProperty(t,"__esModule",{value:!0});var i=r(913),o=n((function e(){a(this,e)})),s=function(){function e(){a(this,e),this.signals=new Set,this.abortController=new i.AbortController}return n(e,[{key:"addSignal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o;if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(t),t.aborted?this.handleAborted(t):"function"===typeof t.addEventListener&&t.addEventListener("abort",(function(){e.handleAborted(t)}))}},{key:"handleAborted",value:function(e){this.signals.delete(e),0===this.signals.size&&this.abortController.abort()}},{key:"signal",get:function(){return this.abortController.signal}},{key:"abort",value:function(){this.abortController.abort()}}]),e}();t.default=s},920:function(e,t,r){"use strict";var n=r(111).default,a=r(112).default;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){n(this,e),this.callbacks=new Set}return a(e,[{key:"addCallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.callbacks.add(e),e(this.currentMessage)}},{key:"callback",value:function(e){this.currentMessage=e,this.callbacks.forEach((function(t){t(e)}))}}]),e}();t.default=i},922:function(e,t,r){"use strict";r.d(t,"e",(function(){return u})),r.d(t,"c",(function(){return f})),r.d(t,"b",(function(){return h})),r.d(t,"d",(function(){return l})),r.d(t,"a",(function(){return d}));var n=r(11),a=r(12),i=r(17),o=r(18),s=r(234),c=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r)}(Object(s.a)(Error)),u=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r)}(Object(s.a)(Error)),f=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r)}(c),h=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r)}(f),l=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r)}(c),d=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r)}(c)},932:function(e,t,r){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var a=r(64).Buffer,i=r(972),o=r(973).Context,s=r(915);"undefined"!==typeof window&&(window.Buffer=a),"undefined"!==typeof self&&(self.Buffer=a);var c={UInt8:1,UInt16LE:2,UInt16BE:2,UInt32LE:4,UInt32BE:4,Int8:1,Int16LE:2,Int16BE:2,Int32LE:4,Int32BE:4,FloatLE:4,FloatBE:4,DoubleLE:8,DoubleBE:8,UInt64:8,Int64:8},u={},f="___parser_",h=[];!function(){var e;for(e=1;e<=32;e++)h.push(e)}();var l={};Object.keys(c).concat(Object.keys({String:null,Buffer:null,Array:null,Skip:null,Choice:null,Nest:null,Bit:null,Itf8:null,Ltf8:null})).forEach((function(e){l[e.toLowerCase()]=e}));var d=function(){this.varName="",this.type="",this.options={},this.next=null,this.head=null,this.compiled=null,this.endian="le",this.constructorFn=null,this.alias=null};d.start=function(){return new d},Object.keys(c).forEach((function(e){d.prototype[e.toLowerCase()]=function(t,r){return this.setNextParser(e.toLowerCase(),t,r)};var t=e.replace(/BE|LE/,"").toLowerCase();t in d.prototype||(d.prototype[t]=function(e,r){return this[t+this.endian](e,r)})})),h.forEach((function(e){d.prototype["bit".concat(e.toString())]=function(t,r){return r||(r={}),r.length=e,this.setNextParser("bit",t,r)}})),d.prototype.namely=function(e){return u[e]=this,this.alias=e,this},d.prototype.skip=function(e,t){if(t&&t.assert)throw new Error("assert option on skip is not allowed.");return this.setNextParser("skip","",{length:e})},d.prototype.string=function(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("Neither length, zeroTerminated, nor greedy is defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!t.length&&!t.greedy)throw new Error("Length or greedy must be defined if stripNull is defined.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)},d.prototype.buffer=function(e,t){if(!t.length&&!t.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");return this.setNextParser("buffer",e,t)},d.prototype.array=function(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("Length option of array is not defined.");if(!t.type)throw new Error("Type option of array is not defined.");if("string"===typeof t.type&&!u[t.type]&&Object.keys(c).indexOf(l[t.type])<0)throw new Error('Specified primitive type "'.concat(t.type,'" is not supported.'));return this.setNextParser("array",e,t)},d.prototype.choice=function(e,t){if(1===arguments.length&&"object"===n(e)&&(t=e,e=null),!t.tag)throw new Error("Tag option of array is not defined.");if(!t.choices)throw new Error("Choices option of array is not defined.");return Object.keys(t.choices).forEach((function(r){if(!t.choices[r])throw new Error("Choice Case ".concat(r," of ").concat(e," is not valid."));if("string"===typeof t.choices[r]&&!u[t.choices[r]]&&Object.keys(c).indexOf(l[t.choices[r]])<0)throw new Error('Specified primitive type "'.concat(t.choices[r],'" is not supported.'))}),this),this.setNextParser("choice",e,t)},d.prototype.nest=function(e,t){if(1===arguments.length&&"object"===n(e)&&(t=e,e=null),!t.type)throw new Error("Type option of nest is not defined.");if(!(t.type instanceof d)&&!u[t.type])throw new Error("Type option of nest must be a Parser object.");if(!(t.type instanceof d)&&!e)throw new Error("options.type must be a object if variable name is omitted.");return this.setNextParser("nest",e,t)},d.prototype.endianess=function(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error("Invalid endianess: ".concat(e))}return this},d.prototype.create=function(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this},d.prototype.getCode=function(){var e=new o;return e.pushCode("if (!Buffer.isBuffer(buffer)) {"),e.generateError('"argument buffer is not a Buffer object"'),e.pushCode("}"),this.alias?this.addAliasedCode(e):this.addRawCode(e),this.alias?e.pushCode("return {0}(0)",f+this.alias):e.pushCode("return { offset: offset, result: vars };"),e.code},d.prototype.addRawCode=function(e){e.pushCode("var offset = 0;"),this.constructorFn?e.pushCode("var vars = new constructorFn();"):e.pushCode("var vars = {};"),this.generate(e),this.resolveReferences(e),e.pushCode("return { offset: offset, result: vars };")},d.prototype.addAliasedCode=function(e){return e.pushCode("function {0}(offset) {",f+this.alias),this.constructorFn?e.pushCode("var vars = new constructorFn();"):e.pushCode("var vars = {};"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e},d.prototype.resolveReferences=function(e){var t=e.getUnresolvedReferences();e.markRequested(t),t.forEach((function(t){u[t].addAliasedCode(e)}))},d.prototype.compile=function(){var e="(function(buffer, constructorFn, Long) { ".concat(this.getCode()," })");this.compiled=i.runInThisContext(e)},d.prototype.sizeOf=function(){var e=NaN;if(Object.keys(c).indexOf(this.type)>=0)e=c[this.type];else if("String"===this.type&&"number"===typeof this.options.length)e=this.options.length;else if("Buffer"===this.type&&"number"===typeof this.options.length)e=this.options.length;else if("Array"===this.type&&"number"===typeof this.options.length){var t=NaN;"string"===typeof this.options.type?t=c[l[this.options.type]]:this.options.type instanceof d&&(t=this.options.type.sizeOf()),e=this.options.length*t}else"Skip"===this.type?e=this.options.length:"Nest"===this.type?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e},d.prototype.parse=function(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn,s)},d.prototype.setNextParser=function(e,t,r){var n=new d;return n.type=l[e],n.varName=t,n.options=r||n.options,n.endian=this.endian,this.head?this.head.next=n:this.next=n,this.head=n,this},d.prototype.generate=function(e){this.type&&(this["generate".concat(this.type)](e),this.generateAssert(e));var t=e.generateVariable(this.varName);return this.options.formatter&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)},d.prototype.generateAssert=function(e){if(this.options.assert){var t=e.generateVariable(this.varName);switch(n(this.options.assert)){case"function":e.pushCode("if (!({0}).call(vars, {1})) {",this.options.assert,t);break;case"number":e.pushCode("if ({0} !== {1}) {",this.options.assert,t);break;case"string":e.pushCode('if ("{0}" !== {1}) {',this.options.assert,t);break;default:throw new Error("Assert option supports only strings, numbers and assert functions.")}e.generateError('"Assert error: {0} is " + {0}',t),e.pushCode("}")}},d.prototype.generateNext=function(e){return this.next&&(e=this.next.generate(e)),e},Object.keys(c).forEach((function(e){d.prototype["generate".concat(e)]=function(t){"UInt64"===e?t.pushCode("{0} = Long.fromBytes(buffer.slice(offset,offset+8), true, this.endian === 'le').toNumber();",t.generateVariable(this.varName),e):"Int64"===e?t.pushCode("{0} = Long.fromBytes(buffer.slice(offset,offset+8), false, this.endian === 'le').toNumber();",t.generateVariable(this.varName),e):t.pushCode("{0} = buffer.read{1}(offset);",t.generateVariable(this.varName),e),t.pushCode("offset += {0};",c[e])}})),d.prototype.generateBit=function(e){var t=JSON.parse(JSON.stringify(this));if(t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["Bit","Nest"].indexOf(this.next.type)<0){var r=0;e.bitFields.forEach((function(e){r+=e.options.length}));var n=e.generateTmpVariable();if(r<=8)e.pushCode("var {0} = buffer.readUInt8(offset);",n),r=8;else if(r<=16)e.pushCode("var {0} = buffer.readUInt16BE(offset);",n),r=16;else if(r<=24){var a=e.generateTmpVariable(),i=e.generateTmpVariable();e.pushCode("var {0} = buffer.readUInt16BE(offset);",a),e.pushCode("var {0} = buffer.readUInt8(offset + 2);",i),e.pushCode("var {2} = ({0} << 8) | {1};",a,i,n),r=24}else{if(!(r<=32))throw new Error("Currently, bit field sequence longer than 4-bytes is not supported.");e.pushCode("var {0} = buffer.readUInt32BE(offset);",n),r=32}e.pushCode("offset += {0};",r/8);var o=0,s="be"===this.endian;e.bitFields.forEach((function(t){e.pushCode("{0} = {1} >> {2} & {3};",t.varName,n,s?r-o-t.options.length:o,(1<<t.options.length)-1),o+=t.options.length})),e.bitFields=[]}},d.prototype.generateSkip=function(e){var t=e.generateOption(this.options.length);e.pushCode("offset += {0};",t)},d.prototype.generateString=function(e){var t=e.generateVariable(this.varName),r=e.generateTmpVariable();this.options.length&&this.options.zeroTerminated?(e.pushCode("var {0} = offset;",r),e.pushCode("while(buffer.readUInt8(offset++) !== 0 && offset - {0}  < {1});",r,this.options.length),e.pushCode("{0} = buffer.toString('{1}', {2}, offset - {2} < {3} ? offset - 1 : offset);",t,this.options.encoding,r,this.options.length)):this.options.length?(e.pushCode("{0} = buffer.toString('{1}', offset, offset + {2});",t,this.options.encoding,e.generateOption(this.options.length)),e.pushCode("offset += {0};",e.generateOption(this.options.length))):this.options.zeroTerminated?(e.pushCode("var {0} = offset;",r),e.pushCode("while(buffer.readUInt8(offset++) !== 0);"),e.pushCode("{0} = buffer.toString('{1}', {2}, offset - 1);",t,this.options.encoding,r)):this.options.greedy&&(e.pushCode("var {0} = offset;",r),e.pushCode("while(buffer.length > offset++);"),e.pushCode("{0} = buffer.toString('{1}', {2}, offset);",t,this.options.encoding,r)),this.options.stripNull&&e.pushCode("{0} = {0}.replace(/\\x00+$/g, '')",t)},d.prototype.generateBuffer=function(e){"eof"===this.options.readUntil?e.pushCode("{0} = buffer.slice(offset);",e.generateVariable(this.varName)):(e.pushCode("{0} = buffer.slice(offset, offset + {1});",e.generateVariable(this.varName),e.generateOption(this.options.length)),e.pushCode("offset += {0};",e.generateOption(this.options.length))),this.options.clone&&e.pushCode("{0} = Buffer.from({0});",e.generateVariable(this.varName))},d.prototype.generateArray=function(e){var t=e.generateOption(this.options.length),r=e.generateOption(this.options.lengthInBytes),n=this.options.type,a=e.generateTmpVariable(),i=e.generateVariable(this.varName),o=e.generateTmpVariable(),s=this.options.key,h="string"===typeof s;if(h?e.pushCode("{0} = {};",i):e.pushCode("{0} = [];",i),"function"===typeof this.options.readUntil?e.pushCode("do {"):"eof"===this.options.readUntil?e.pushCode("for (var {0} = 0; offset < buffer.length; {0}++) {",a):void 0!==r?e.pushCode("for (var {0} = offset; offset - {0} < {1}; ) {",a,r):e.pushCode("for (var {0} = 0; {0} < {1}; {0}++) {",a,t),"string"===typeof n)if(u[n]){var p=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",p,f+n),e.pushCode("var {0} = {1}.result; offset = {1}.offset;",o,p),n!==this.alias&&e.addReference(n)}else e.pushCode("var {0} = buffer.read{1}(offset);",o,l[n]),e.pushCode("offset += {0};",c[l[n]]);else n instanceof d&&(e.pushCode("var {0} = {};",o),e.pushScope(o),n.generate(e),e.popScope());h?e.pushCode("{0}[{2}.{1}] = {2};",i,s,o):e.pushCode("{0}.push({1});",i,o),e.pushCode("}"),"function"===typeof this.options.readUntil&&e.pushCode(" while (!({0}).call(this, {1}, buffer.slice(offset)));",this.options.readUntil,o)},d.prototype.generateChoiceCase=function(e,t,r){if("string"===typeof r)if(u[r]){var n=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",n,f+r),e.pushCode("{0} = {1}.result; offset = {1}.offset;",e.generateVariable(this.varName),n),r!==this.alias&&e.addReference(r)}else e.pushCode("{0} = buffer.read{1}(offset);",e.generateVariable(this.varName),l[r]),e.pushCode("offset += {0};",c[l[r]]);else r instanceof d&&(e.pushPath(t),r.generate(e),e.popPath(t))},d.prototype.generateChoice=function(e){var t=e.generateOption(this.options.tag);this.varName&&e.pushCode("{0} = {};",e.generateVariable(this.varName)),e.pushCode("switch({0}) {",t),Object.keys(this.options.choices).forEach((function(t){var r=this.options.choices[t];Number.isNaN(parseInt(t,10))?e.pushCode("case '{0}':",t):e.pushCode("case {0}:",t),this.generateChoiceCase(e,this.varName,r),e.pushCode("break;")}),this),e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError('"Met undefined tag value " + {0} + " at choice"',t),e.pushCode("}")},d.prototype.generateNest=function(e){var t=e.generateVariable(this.varName);if(this.options.type instanceof d)this.varName&&e.pushCode("{0} = {};",t),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(u[this.options.type]){var r=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",r,f+this.options.type),e.pushCode("{0} = {1}.result; offset = {1}.offset;",t,r),this.options.type!==this.alias&&e.addReference(this.options.type)}},d.prototype.generateFormatter=function(e,t,r){"function"===typeof r&&e.pushCode("{0} = ({1}).call(this, {0});",t,r)},d.prototype.isInteger=function(){return!!this.type.match(/U?Int[8|16|32][BE|LE]?|Bit\d+/)},d.prototype.itf8=function(e,t){return this.setNextParser("itf8",e,t)},d.prototype.itf8=function(e,t){return this.setNextParser("itf8",e,t)},d.prototype.generateItf8=function(e){var t=e.generateVariable(this.varName),r=e.generateTmpVariable();e.pushCode("\n    var ".concat(r," = buffer[offset];\n    if (").concat(r," < 0x80) {\n      ").concat(t," = ").concat(r,";\n      offset += 1;\n    } else if (").concat(r," < 0xc0) {\n      ").concat(t," = ((").concat(r,"<<8) | buffer[offset+1]) & 0x3fff;\n      offset += 2;\n    } else if (").concat(r," < 0xe0) {\n      ").concat(t," = ((").concat(r,"<<16) | (buffer[offset+1]<< 8) |  buffer[offset+2]) & 0x1fffff;\n      offset += 3;\n    } else if (").concat(r," < 0xf0) {\n      ").concat(t," = ((").concat(r,"<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n      offset += 4\n    } else {\n      ").concat(t," = ((").concat(r," & 0x0f)<<28) | (buffer[offset+1]<<20) | (buffer[offset+2]<<12) | (buffer[offset+3]<<4) | (buffer[offset+4] & 0x0f);\n      // x=((0xff & 0x0f)<<28) | (0xff<<20) | (0xff<<12) | (0xff<<4) | (0x0f & 0x0f);\n      // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n      offset += 5\n    }\n  "))},d.prototype.ltf8=function(e,t){return this.setNextParser("ltf8",e,t)},d.prototype.generateLtf8=function(e){var t=e.generateVariable(this.varName),r=e.generateTmpVariable();e.pushCode("\n  var ".concat(r," = buffer[offset];\n  if (").concat(r," < 0x80) {\n    ").concat(t," = ").concat(r,";\n    offset += 1;\n  } else if (").concat(r," < 0xc0) {\n    ").concat(t," = ((buffer[offset]<<8) | buffer[offset+1]) & 0x3fff;\n    offset += 2;\n  } else if (").concat(r," < 0xe0) {\n    ").concat(t," = ((buffer[offset]<<16) | (buffer[offset+1]<<8) | buffer[offset+2]) & 0x1fffff;\n    ").concat(t," = (((").concat(r," & 63) << 16) | buffer.readUInt16LE(offset + 1));\n    offset += 3;\n  } else if (").concat(r," < 0xf0) {\n    ").concat(t," = ((buffer[offset]<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n    offset += 4;\n  } else if (").concat(r," < 0xf8) {\n    ").concat(t," = (((buffer[offset] & 15) * Math.pow(2,32))) +\n      (buffer[offset+1]<<24) | (buffer[offset+2]<<16 | buffer[offset+3]<<8 | buffer[offset+4])\n    // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n    offset += 5;\n  } else if (").concat(r," < 0xfc) {\n    ").concat(t," = ((((buffer[offset] & 7) << 8) | buffer[offset+1] )) * Math.pow(2,32) +\n      (buffer[offset+2]<<24) | (buffer[offset+3]<<16 | buffer[offset+4]<<8 | buffer[offset+5])\n    offset += 6;\n  } else if (").concat(r," < 0xfe) {\n    ").concat(t," = ((((buffer[offset] & 3) << 16) | buffer[offset+1]<<8 | buffer[offset+2])) * Math.pow(2,32) +\n      (buffer[offset+3]<<24) | (buffer[offset+4]<<16 | buffer[offset+5]<<8 | buffer[offset+6])\n    offset += 7;\n  } else if (").concat(r," < 0xff) {\n    ").concat(t," = Long.fromBytesBE(buffer.slice(offset+1,offset+8));\n    if (").concat(t,".greaterThan(Number.MAX_SAFE_INTEGER) || ").concat(t,".lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ").concat(t," = ").concat(t,".toNumber()\n    offset += 8;\n  } else {\n    ").concat(t," = Long.fromBytesBE(buffer.slice(offset+1,offset+9));\n    if (").concat(t,".greaterThan(Number.MAX_SAFE_INTEGER) || ").concat(t,".lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ").concat(t," = ").concat(t,".toNumber()\n    offset += 9;\n  }\n  "))},t.Parser=d},972:function(e,t){e.exports.runInThisContext=function(e){return new Function("code","return eval(code);").call(globalThis,e)}},973:function(e,t,r){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var a=function(){this.code="",this.scopes=[["vars"]],this.isAsync=!1,this.bitFields=[],this.tmpVariableCount=0,this.references={}};a.prototype.generateVariable=function(e){var t=[];for(Array.prototype.push.apply(t,this.scopes[this.scopes.length-1]);/^\$parent\./.test(e);)t.pop(),e=e.replace(/^\$parent\./,"");return e&&t.push(e),t.join(".")},a.prototype.generateOption=function(e){switch(n(e)){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return"(".concat(e,").call(").concat(this.generateVariable(),", vars)");default:return}},a.prototype.generateError=function(){var e=Array.prototype.slice.call(arguments),t=a.interpolate.apply(this,e);this.isAsync?this.pushCode("return process.nextTick(function() { callback(new Error(".concat(t,"), vars); });")):this.pushCode("throw new Error(".concat(t,");"))},a.prototype.generateTmpVariable=function(){return"$tmp".concat(this.tmpVariableCount++)},a.prototype.pushCode=function(){var e=Array.prototype.slice.call(arguments);this.code+="".concat(a.interpolate.apply(this,e),"\n")},a.prototype.pushPath=function(e){e&&this.scopes[this.scopes.length-1].push(e)},a.prototype.popPath=function(e){e&&this.scopes[this.scopes.length-1].pop()},a.prototype.pushScope=function(e){this.scopes.push([e])},a.prototype.popScope=function(){this.scopes.pop()},a.prototype.addReference=function(e){this.references[e]||(this.references[e]={resolved:!1,requested:!1})},a.prototype.markResolved=function(e){this.references[e].resolved=!0},a.prototype.markRequested=function(e){e.forEach(function(e){this.references[e].requested=!0}.bind(this))},a.prototype.getUnresolvedReferences=function(){var e=this.references;return Object.keys(this.references).filter((function(t){return!e[t].resolved&&!e[t].requested}))},a.interpolate=function(e){var t=/{\d+}/g,r=e.match(t),n=Array.prototype.slice.call(arguments,1);return r&&r.forEach((function(t){var r=parseInt(t.substr(1,t.length-2),10);e=e.replace(t,n[r].toString())})),e},t.Context=a}});
//# sourceMappingURL=8.aa3f117980c15500c977.worker.js.map