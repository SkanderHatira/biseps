{"version":3,"sources":["../../../node_modules/@jkbonfield/htscodecs/iostream.js","../../../src/cramFile/util.js","../../../src/rans/decoding.js","../../../src/rans/constants.js","../../../node_modules/@gmod/cram/node_modules/quick-lru/index.js","../../../src/cramFile/constants.js","../../src/unzip-pako.ts","../../../node_modules/@jkbonfield/htscodecs/rans4x16.js","../../../node_modules/@jkbonfield/htscodecs/arith_gen.js","../../../node_modules/@jkbonfield/htscodecs/arith_sh.js","../../../node_modules/@jkbonfield/htscodecs/byte_model.js","../../../node_modules/charenc/charenc.js","../../../src/io/index.js","../../../src/io/remoteFile.js","../../../src/cramFile/file.js","../../../src/rans/index.js","../../../src/rans/frequencies.js","../../../src/rans/d04.js","../../../src/rans/d14.js","../../../src/cramFile/sectionParsers.js","../../../node_modules/@jkbonfield/htscodecs/index.js","../../../node_modules/@jkbonfield/htscodecs/rans.js","../../../node_modules/bzip2/bzip2.js","../../../node_modules/@jkbonfield/htscodecs/fqzcomp.js","../../../node_modules/@jkbonfield/htscodecs/tok3.js","../../../../src/cramFile/container/index.js","../../../node_modules/md5/md5.js","../../../node_modules/crypt/crypt.js","../../../node_modules/is-buffer/index.js","../../../../src/cramFile/slice/index.js","../../../../src/cramFile/slice/decodeRecord.js","../../../src/cramFile/record.js","../../../node_modules/cross-fetch/dist/browser-ponyfill.js","../../../src/io/bufferCache.js","../../src/sam.js","../../../../src/cramFile/codecs/_base.js","../../../../src/cramFile/codecs/huffman.js","../../../../src/cramFile/codecs/external.js","../../../../src/cramFile/codecs/byteArrayStop.js","../../../../src/cramFile/codecs/byteArrayLength.js","../../../../src/cramFile/codecs/beta.js","../../../../src/cramFile/codecs/gamma.js","../../../../src/cramFile/codecs/subexp.js","../../../../src/cramFile/codecs/index.js","../../../../src/cramFile/container/compressionScheme.js","../../../src/cramFile/index.js","../../src/indexedCramFile.js","../../src/craiIndex.js","../../../plugins/alignments/src/CramAdapter/CramSlightlyLazyFeature.ts","../../../plugins/alignments/src/CramAdapter/CramAdapter.ts","../../../node_modules/abortable-promise-cache/esm/abortcontroller-ponyfill.js","../../../node_modules/abortable-promise-cache/esm/index.js","../../../node_modules/long/src/long.js","../../../node_modules/abortable-promise-cache/esm/AbortablePromiseCache.js","../../../node_modules/abortable-promise-cache/esm/AggregateAbortController.js","../../../node_modules/abortable-promise-cache/esm/AggregateStatusReporter.js","../../src/errors.js","../../../node_modules/@gmod/binary-parser/dist/binary_parser.js","../../../node_modules/@gmod/binary-parser/vm-browser.js","../../../node_modules/@gmod/binary-parser/dist/context.js"],"names":["module","exports","buf","start_pos","size","this","Buffer","allocUnsafe","length","pos","len","A","slice","b","String","fromCharCode","i","ReadByte","readInt32LE","s","c","charCodeAt","str","stream","WriteData","u","WriteByte","writeInt32LE","X","Math","floor","itf8Size","v","parseItf8","buffer","initialOffset","result","offset","countFlags","CramBufferOverrunError","parseItem","parser","startBufferPosition","startFilePosition","parse","_endPosition","_size","tinyMemoize","_class","methodName","method","prototype","memoAttrName","res","call","Promise","resolve","catch","sequenceMD5","seq","md5","toUpperCase","replace","FC","F","undefined","C","AriDecoder","fc","Array","R","advanceStep","r","start","freq","scaleBits","Decode","Symbol","symbolInit","sym","CramMalformedError","advanceSymbolStep","get","advanceSymbol","pptr","RANS_BYTE_L","advance","renormalize","TF_SHIFT","TOTFREQ","QuickLRU","options","maxSize","TypeError","cache","Map","oldCache","key","value","set","has","_set","deleted","delete","clear","item","oldCacheSize","keys","iterator","Constants","CRAM_FLAG_PRESERVE_QUAL_SCORES","CRAM_FLAG_DETACHED","CRAM_FLAG_MATE_DOWNSTREAM","CRAM_FLAG_NO_SEQ","CRAM_FLAG_MASK","CRAM_M_REVERSE","CRAM_M_UNMAP","BAM_FPAIRED","BAM_FPROPER_PAIR","BAM_FUNMAP","BAM_FMUNMAP","BAM_FREVERSE","BAM_FMREVERSE","BAM_FREAD1","BAM_FREAD2","BAM_FSECONDARY","BAM_FQCFAIL","BAM_FDUP","BAM_FSUPPLEMENTARY","BAM_CMATCH","BAM_CINS","BAM_CDEL","BAM_CREF_SKIP","BAM_CSOFT_CLIP","BAM_CHARD_CLIP","BAM_CPAD","BAM_CEQUAL","BAM_CDIFF","BAM_CBACK","BAM_CIGAR_STR","BAM_CIGAR_SHIFT","BAM_CIGAR_MASK","BAM_CIGAR_TYPE","unzip","input","from","inflate","IOStream","require","RansGetCumulativeFreq","bits","RansGetSymbolFromFreq","f","RansBuildC2S","max","C2S","RansAdvanceStep","RansRenorm","src","ReadUint16","RansEncFlush","dst","WriteByteNeg","RansEncPut","scale_bits","R_max","RansEncRenorm","RansEncodeStripe","hdr","N","part","ulen","x","j","comp","total","comp0","encode","comp1","out","WriteUint7","RansDecodeStream","n_out","format","order","stripe","cat","rle","pack","ReadUint7","clen","T","RansDecodeStripe","pack_len","nsym","P","DecodePackMeta","rle_len","u_meta_len","rle_meta","ReadData","comp_meta_len","RansDecode0","L","n","DecodeRLEMeta","nbytes","shift","freq_src","ReadAlphabet","run","NormaliseFrequencies0_Shift","ReadFrequencies1","ReadUint32","output","nbytes4","RansDecode1","DecodeRLE","data","DecodePack","concat","pack_meta","alloc","ceil","meta","EncodePack","last","nrle","dpos","cmeta","RansEncode0","EncodeRLE","F0","BuildFrequencies1","bit_size","log2","NormaliseFrequencies0","NormaliseFrequencies1","WriteAlphabet","k","WriteFrequencies1","cfreq","NormaliseFrequencies1_Shift","rans_out","idx","RansEncode1","last_sym","ReadFrequencies0","i4","tot","scale","max_val","max_idx","renorm","BuildFrequencies0","WriteFrequencies0","decode","RangeCoder","ByteModel","bzip2","ARITH_PACK","decodeStream","flags","e_len","decodeStripe","decodePackMeta","decodeCat","decodeExt","decodeRLE1","decodeRLE0","decode1","decode0","decodePack","encodeStripe","encodePack","WriteStream","encodeRLE1","encodeRLE0","encode1","encode0","max_sym","byte_model","rc","RangeStartDecode","ModelDecode","n_in","ModelEncode","RangeFinishEncode","array","header","chunk","decompress","copy","model_lit","model_run","rctx","M","packMeta","low","range","code","FFnum","carry","tot_freq","sym_low","sym_freq","old_low","console","log","RangeShiftLow","total_freq","S","RangeGetFrequency","acc","RangeDecode","ModelRenormalise","tmp","RangeEncode","charenc","utf8","stringToBytes","bin","unescape","encodeURIComponent","bytesToString","bytes","decodeURIComponent","escape","push","join","open","maybeUrl","maybePath","maybeFilehandle","source","url","protocol","pathname","LocalFile","RemoteFile","fromUrl","Error","position","BufferCache","fetch","_fetch","headers","Infinity","redirect","mode","response","status","arrayBuffer","nodeBuffer","sizeMatch","exec","_stat","parseInt","readPosition","read","CramFile","args","file","path","filehandle","validateChecksums","fetchReferenceSequenceCallback","seqFetch","checkSequenceMD5","cacheSize","featureCache","LRU","filename","stat","headbytes","cramFileDefinitionParser","maxLength","definition","majorVersion","CramUnimplementedError","getContainerById","firstContainer","getFirstBlock","content","headerLength","text","toString","parseHeaderText","getSamHeader","getDefinition","getSectionParsers","containerNumber","sectionParsers","cramFileDefinition","fileSize","cramContainerHeader1","currentContainer","getContainerAtPosition","getHeader","currentHeader","numBlocks","readBlock","block","recordedCrc32","description","calculatedCrc32","crc32","unsigned","containerCount","CramContainer","cramBlockHeader","section","preReadBuffer","compressionMethod","inputBuffer","outputBuffer","ransuncompress","htscodecs","r4x16_uncompress","arith_uncompress","fqzcomp_uncompress","tok3_uncompress","readBlockHeader","blockContentPosition","contentPosition","uncompressedData","uncompressedSize","compressedData","compressedSize","_uncompress","_parseSection","cramBlockCrc32","crc","checkCrc32","split","forEach","uncompressOrder0Way4","D","Decoding","syms","readStatsO0","D04","uncompressOrder1Way4","readStatsO1","D14","ByteBuffer","initialInputPosition","_buffer","_position","val","uncompress","fill","inputSize","getInt","remaining","outputSize","assert","cp","decoder","getByteAt","rlei","rlej","RansDecSymbol","rans0","rans1","rans2","rans3","outputEnd","c0","c1","c2","c3","putAt","setPosition","put","rans7","isz4","i0","i1","i2","i7","l0","l1","l2","l7","c7","singleItf8","Parser","itf8","string","uint8","stripNull","formatter","type","uint32","cramTagDictionary","makeTagSet","stringStart","stringEnd","tags","substr","tagSets","parseByteAsBool","cramPreservationMap","choice","tag","choices","MI","UI","PI","RN","AP","RR","SM","TD","nest","ents","formatMap","map","warn","unversionedParsers","versionedParsers","cramUnmappedSliceHeader","ltf8","numContentIds","cramMappedSliceHeader","cramEncoding","namely","cramDataSeriesEncodingMap","cramTagEncodingMap","integerRepresentation","cramCompressionHeader","int32","cramContainerHeader2","crcLength","numLandmarks","parsers","Object","assign","parserName","r4x8","r4x16","arith","fqzcomp","tok3","r4x8_uncompress","q_lens","ReadITF8","WriteITF8","WriteUint32","freq_tab","bit","byte","BITMASK","left","all","chunks","index","byteLength","Uint8Array","bufsize","h","origPtr","t","symToByte","symTotal","groupCount","nSelectors","mtfSymbol","selectors","uc","splice","symCount","groups","minLen","maxLen","hufGroup","temp","MAX_HUFCODE_BITS","permute","Uint32Array","limit","base","subarray","pp","runPos","count","selector","byteCount","GROUP_SIZE","nextSym","current","copies","previous","outbyte","read_array","tab","z","run_len","fqz_update_ctx","params","state","q","context","qctx","qshift","qtab","qbits","qloc","do_pos","ptab","min","p","ploc","do_delta","dtab","delta","dloc","prevq","do_sel","sloc","decode_fqz_single_param","pflags","do_dedup","fixed_len","do_qmap","do_qtab","qmap","decode_fqz_new_record","gparams","model","rev","max_sel","sel","stab","do_rev","rec","is_dup","dup","decode_fqz","gflags","nparam","error","decode_fqz_params","qual","fqz_create_models","Q","qual_len","reverse_qualities","store_array","tmp1","sz1","i_start","tmp2","sz2","curr","q_dirs","qhist","qd_last","qd_fixed","pbits","pshift","dbits","dshift","sbits","do_stab","pick_fqz_params","dsqr","WriteUint16","encode_fqz_params","model_qual","model_len","model_sel","process","exit","qlast","q1","encode_fqz","rans","LeftPadNumber","DecodeSingleName","B","m","ReadChar","ReadString","d","l","FillByteStreams","tnum","names","max_tok","max_len","WriteString","WriteChar","SerialiseByteStreams","use_arith","try_compress","best","methods","lvl","e","TokeniseName","H","name","tok","match","substring","ntok","TOK_END","separator","nnames","in_size","EOF","ttype","tok_new","tok_dup","dup_pos","dup_type","DecodeTokenByteStreams","cramFile","filePosition","_readContainerHeader","numRecords","contentType","containerHeader","getCompressionHeaderBlock","CramContainerCompressionScheme","slicePosition","sliceSize","CramSlice","bytes1","header1","numLandmarksSize","bytes2","header2","completeHeader","crypt","isBuffer","message","constructor","encoding","isArray","bytesToWords","a","FF","_ff","GG","_gg","HH","_hh","II","_ii","aa","bb","cc","dd","endian","_blocksize","_digestsize","digestbytes","wordsToBytes","asBytes","asString","bytesToHex","base64map","rotl","rotr","Number","randomBytes","random","words","hex","hexToBytes","bytesToBase64","base64","triplet","charAt","base64ToBytes","imod4","indexOf","pow","obj","readFloatLE","isSlowBuffer","_isBuffer","associateIntraSliceMate","allRecords","currentRecordNumber","thisRecord","mateRecord","complicatedMultiSegment","mate","mateRecordNumber","readName","uniqueId","sequenceId","alignmentStart","templateLength","matedRecords","getAllMatedRecords","startRecord","records","starts","ends","readLength","estimatedTemplateLength","calculateMultiSegmentMatedTemplateLength","lengthEstimate","calculateIntraSliceMatePairTemplateLength","container","containerPosition","_contentType","blockPosition","blocks","getBlocks","blocksByContentId","contentId","id","_getBlocksContentIdIndex","sliceHeader","refSeqId","getCompressionScheme","compressionScheme","refBaseBlockId","refBlock","getBlockByContentId","span","refSeqStart","end","refSeqSpan","referenceRequired","CramArgumentError","getRecords","getReferenceRegion","refRegion","seqMd5","storedMd5","getCoreDataBlock","coreDataBlock","cursors","lastAlignmentStart","coreBlock","bitPosition","bytePosition","externalBlocks","getCursor","decodeDataSeries","codec","getCodecForDataSeries","dataSeriesName","decodeRecord","recordCounter","filter","filterFunction","cacheKey","recordsPromise","_fetchRecords","singleRefId","refRegions","seqId","lengthOnRef","values","addReferenceSequence","readNullTerminatedStringFromBuffer","zeroOffset","parseTagData","tagType","Long","fromBytesLE","greaterThan","MAX_SAFE_INTEGER","lessThan","MIN_SAFE_INTEGER","toNumber","readInt16LE","readUInt16LE","readInt8","readUInt8","arrayType","schema","I","getMethod","itemSize","parseTagValueArray","thingToString","thing","termIndex","recordNumber","cramRecord","CramRecord","cramFlags","APdelta","readGroupId","readNamesIncluded","isDetached","templateSize","hasMateDownStream","TLindex","TN","getTagNames","ntags","tagId","tagName","tagCodec","getCodecForTag","tagData","isSegmentUnmapped","isUnknownBases","readBases","qualityScores","bases","isPreservingQualityScores","readFeatureCount","readFeatures","currentReadPos","currentRefPos","decodeRFData","toArray","readPosDelta","readFeature","data1Schema","data2Schema","refPos","decodeReadFeatures","isNaN","mappingQuality","baseNumbers","g","G","_refRegion","regionSeqOffset","regionPos","currentReadFeature","feature","ret","added","sub","decodeReadSequence","isPaired","isMateUnmapped","s1","isReverseComplemented","s2","isMateReverseComplemented","o1","o2","isRead1","isRead2","isize","refCoord","refBase","ref","baseNumber","substitutionMatrix","decodeBaseSubstitution","getReadBases","global","self","__self__","DOMException","support","Blob","viewClasses","isArrayBufferView","ArrayBuffer","isView","normalizeName","test","toLowerCase","normalizeValue","iteratorFor","items","next","done","Headers","append","getOwnPropertyNames","consumed","body","bodyUsed","reject","fileReaderReady","reader","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","bufferClone","view","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","rejected","then","readAsText","readBlobAsText","chars","readArrayBufferAsText","formData","json","JSON","oldValue","hasOwnProperty","callback","thisArg","entries","Request","credentials","signal","upcased","normalizeMethod","referrer","form","trim","parseHeaders","rawHeaders","line","parts","Response","bodyInit","ok","statusText","clone","redirectStatuses","RangeError","location","err","stack","create","init","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","getAllResponseHeaders","responseURL","responseText","ontimeout","onabort","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","defineProperty","ponyfill","ctx","default","chunkSize","lruCache","firstChunk","lastChunk","fetches","_getChunk","chunkNumber","chunksOffset","chunkPositionStart","copyStart","copyEnd","copyOffset","cachedPromise","freshPromise","lines","parsedFields","validDataTypes","int","long","byteArray","byteArrayBlock","CramCodec","parameters","dataType","cursor","numBits","dlen","HuffmanIntCodec","includes","buildCodeBook","buildCodes","buildCaches","sortedCodes","bitLength","_decode","_decodeZeroLengthCode","codes","numCodes","symbol","symbols","bitLengths","sort","codeBook","codeLength","codeValue","bitCode","ii","numberOfSetBits","sortedByValue","sortedValuesByBitCode","sortedBitCodes","sortedBitLengthsByBitCode","maxBitCode","bitCodeToValue","coreCursor","prevLen","_getBits","ExternalCodec","_decodeData","_decodeInt","_decodeByte","blockContentId","contentBlock","bytesRead","ByteArrayStopCodec","_decodeByteArray","dataBuffer","stopByte","startPosition","stopPosition","instantiateCodec","arrayLength","_getLengthCodec","dataCodec","_getDataCodec","encodingParams","lengthsEncoding","valuesEncoding","BetaCodec","GammaCodec","SubexpCodec","numLeadingOnes","K","codecClasses","ByteArrayLengthCodec","encodingData","CodecClass","codecId","dataSeriesTypes","BF","CF","RI","RL","RG","MF","NS","NP","TS","NF","TC","FN","FP","BS","IN","SC","DL","BA","BB","RS","PD","HC","MQ","QS","QQ","TL","TM","TV","preservation","tagIdsDictionary","matrix","parseSubstitutionMatrix","dataSeriesCodecCache","tagCodecCache","tagEncoding","tagListId","dataSeriesEncoding","IndexedCramFile","cram","cramUrl","cramPath","cramFilehandle","getEntriesForRange","fetchSizeLimit","opts","viewAsPairs","pairAcrossChr","maxInsertSize","slices","totalSize","sliceBytes","reduce","CramSizeLimitError","toLocaleString","getRecordsInSlice","sliceResults","readNames","readIds","unmatedPairs","matePromises","abs","mateSlices","mateBlocks","mateChunks","localeCompare","ary","mateRecordPromises","mateFeatPromises","mateTotalSize","recordPromise","featPromise","mateRecs","feats","newMateFeats","newMates","containerStart","sliceStart","getSlice","hasDataForReferenceSequence","Slice","addRecordToIndex","record","some","el","CraiIndex","_parseCache","AbortablePromiseCache","parseIndex","readFile","bind","uncompressedBuffer","readUInt32LE","currentRecord","currentString","charCode","ent","getIndex","queryStart","queryEnd","seqEntries","compare","entryStart","entry","entryEnd","bins","CramSlightlyLazyFeature","_store","rg","samHeader","readGroups","refIdToName","_get_seq_id","getPairOrientation","_read_group_id","cigar","op","oplen","refStart","last_pos","sublen","prop","startsWith","field","mismatches","cliplen","qualRaw","altbase","CramAdapter","setupP","seqIdToRefName","seqIdToOriginalRefName","cramLocation","readConfObject","config","craiLocation","openLocation","pluginManager","sequenceAdapterType","getSubAdapter","seqConf","sequenceAdapter","dataAdapter","BaseFeatureDataAdapter","configure","getHeaderText","refName","refIdToOriginalName","getFeatures","assemblyName","pipe","toPromise","seqChunks","sequence","chunkStart","chunkEnd","trimStart","trimLength","statusCallback","configured","idToName","nameToId","sqLine","refId","rgLine","find","setupPre","setup","region","originalRefName","ObservableCreate","observer","getRefNames","refNameToId","getRecordsForRange","checkAbortSignal","cramRecordToFeature","complete","regions","bytesForRegions","_opts","chrId","blockResults","flat","AbortSignal","AbortController","cjs_ponyfill_1","getGlobal","window","__importDefault","mod","__esModule","AbortablePromiseCache_1","wasm","WebAssembly","Instance","Module","high","isLong","__isLong__","INT_CACHE","UINT_CACHE","fromInt","cachedObj","fromBits","fromNumber","UZERO","ZERO","TWO_PWR_64_DBL","MAX_UNSIGNED_VALUE","TWO_PWR_63_DBL","MIN_VALUE","MAX_VALUE","neg","TWO_PWR_32_DBL","lowBits","highBits","pow_dbl","fromString","radix","radixToPower","power","mul","add","fromValue","TWO_PWR_16_DBL","TWO_PWR_24","ONE","UONE","NEG_ONE","LongPrototype","toInt","isZero","isNegative","eq","radixLong","div","rem1","rem","remDiv","digits","getHighBits","getHighBitsUnsigned","getLowBits","getLowBitsUnsigned","getNumBitsAbs","eqz","isPositive","isOdd","isEven","equals","other","notEquals","neq","ne","lt","lessThanOrEqual","lte","le","gt","greaterThanOrEqual","gte","ge","thisNeg","otherNeg","negate","not","addend","a48","a32","a16","a00","b48","b32","b16","c48","c32","c16","c00","subtract","subtrahend","multiply","multiplier","get_high","b00","divide","divisor","approx","div_u","div_s","toUnsigned","shru","shr","shl","LN2","approxRes","approxRem","modulo","rem_u","rem_s","and","or","xor","shiftLeft","shiftRight","shiftRightUnsigned","shr_u","toSigned","toBytes","toBytesLE","toBytesBE","hi","lo","fromBytes","fromBytesBE","abortcontroller_ponyfill_1","AggregateAbortController_1","AggregateStatusReporter_1","fillCallback","aborter","statusReporter","addCallback","newEntry","settled","addSignal","evict","cacheEntry","checkSinglePromise","cachedEntry","keyIter","deleteCount","exception","checkForSingleAbort","NullSignal","AggregateAbortController","signals","Set","abortController","handleAborted","AggregateStatusReporter","callbacks","currentMessage","elt","CramError","_typeof","vm","Context","PRIMITIVE_TYPES","UInt8","UInt16LE","UInt16BE","UInt32LE","UInt32BE","Int8","Int16LE","Int16BE","Int32LE","Int32BE","FloatLE","FloatBE","DoubleLE","DoubleBE","UInt64","Int64","aliasRegistry","FUNCTION_PREFIX","BIT_RANGE","NAME_MAP","Skip","Choice","Nest","Bit","Itf8","Ltf8","varName","head","compiled","constructorFn","alias","setNextParser","typeWithoutEndian","skip","zeroTerminated","greedy","readUntil","lengthInBytes","arguments","endianess","Function","getCode","pushCode","generateError","addAliasedCode","addRawCode","generate","resolveReferences","markResolved","references","getUnresolvedReferences","markRequested","compile","runInThisContext","sizeOf","NaN","elementSize","generateAssert","generateVariable","generateFormatter","generateNext","generateBit","stringify","bitFields","sum","generateTmpVariable","val1","val2","bitOffset","isBigEndian","generateSkip","generateOption","generateString","generateBuffer","generateArray","counter","lhs","isHash","tempVar","addReference","pushScope","popScope","generateChoiceCase","pushPath","popPath","generateChoice","defaultChoice","generateNest","nestVar","isInteger","generateItf8","generateLtf8","globalThis","scopes","isAsync","tmpVariableCount","arr","apply","pop","interpolate","resolved","requested","aliasList","re","matches"],"mappings":";+FAmCAA,EAAOC,QAAP,wBACI,WAAYC,GAA8B,IAAzBC,EAAyB,uDAAb,EAAGC,EAAU,uDAAH,EAAG,UACjC,GAARA,GACAC,KAAKH,IAAMI,EAAOC,YAAYH,GAC9BC,KAAKG,OAASJ,IAEdC,KAAKH,IAAMA,EACXG,KAAKG,OAASN,EAAIM,QAEtBH,KAAKI,IAAMN,EATZ,6BAcI,WACH,OAAOE,KAAKI,KAAOJ,KAAKG,SAfzB,sBAkBI,SAASE,GACZ,IAAIC,EAAIN,KAAKH,IAAIU,MAAMP,KAAKI,IAAKJ,KAAKI,IAAIC,GAE1C,OADAL,KAAKI,KAAOC,EACLC,IArBR,sBAwBI,WACH,IAAME,EAAIR,KAAKH,IAAIG,KAAKI,KAExB,OADAJ,KAAKI,MACEI,IA3BR,sBA8BI,WACH,IAAMA,EAAIR,KAAKH,IAAIG,KAAKI,KAExB,OADAJ,KAAKI,MACEK,OAAOC,aAAaF,KAjC5B,wBAoCI,WACH,IAAIG,EAAIX,KAAKY,WAEb,OADAD,GAAKX,KAAKY,YAAY,IAtCvB,wBA0CI,WACH,IAAMD,EAAIX,KAAKH,IAAIgB,YAAYb,KAAKI,KAEpC,OADAJ,KAAKI,KAAO,EACLO,IA7CR,wBAiDI,WACH,IAAIG,EAAI,GACR,EAAG,CACC,IAAIN,EAAIR,KAAKH,IAAIG,KAAKI,OAClBI,IACPM,GAAKL,OAAOC,aAAaF,UACjBA,GACT,OAAOM,IAxDR,uBAwEI,WAEH,IAAIH,EAAI,EACR,EAAG,CACC,IAAII,EAAIf,KAAKY,WACbD,EAAKA,GAAG,EAAU,IAAJI,QACJ,IAAJA,GAEV,OAAOJ,IAhFR,sBAmFI,WACH,IAAIA,EAAIX,KAAKH,IAAIG,KAAKI,KAuCtB,OAtCAJ,KAAKI,MAIDO,GAAK,KAELA,GAAS,GAAJA,IAAa,GAClBA,IAAMX,KAAKH,IAAIG,KAAKI,IAAI,IAAM,KACxBJ,KAAKH,IAAIG,KAAKI,IAAI,IAAM,KACxBJ,KAAKH,IAAIG,KAAKI,IAAI,IAAO,IACzBJ,KAAKH,IAAIG,KAAKI,IAAI,IAAO,GAC/BJ,KAAKI,KAAO,GAELO,GAAK,KAEZA,GAAS,GAAJA,IAAa,GAClBA,IAAMX,KAAKH,IAAIG,KAAKI,IAAI,IAAM,KACxBJ,KAAKH,IAAIG,KAAKI,IAAI,IAAO,IACzBJ,KAAKH,IAAIG,KAAKI,IAAI,IAAO,GAC/BJ,KAAKI,KAAO,GAELO,GAAK,KAEZA,GAAS,GAAJA,IAAa,GAClBA,IAAMX,KAAKH,IAAIG,KAAKI,IAAI,IAAM,IACxBJ,KAAKH,IAAIG,KAAKI,IAAI,IAAM,GAC9BJ,KAAKI,KAAO,GAELO,GAAK,MAEZA,GAAS,GAAJA,IAAa,EAClBA,GAAKX,KAAKH,IAAIG,KAAKI,KACnBJ,KAAKI,OAMFO,IA3HR,uBAgII,SAAUH,GACbR,KAAKH,IAAIG,KAAKI,OAASI,IAjIxB,uBAoII,SAAUA,GACbR,KAAKH,IAAIG,KAAKI,OAASI,EAAEQ,WAAW,KArIrC,yBAwII,SAAYC,GACf,IAAK,IAAIN,EAAI,EAAGA,EAAIM,EAAId,OAAQQ,IAC5BX,KAAKH,IAAIG,KAAKI,OAASa,EAAID,WAAWL,GAC1CX,KAAKH,IAAIG,KAAKI,OAAS,IA3IxB,uBA8II,SAAUP,EAAKQ,GAClB,IAAK,IAAIM,EAAI,EAAGA,EAAIN,EAAKM,IACrBX,KAAKH,IAAIG,KAAKI,OAASP,EAAIc,KAhJhC,yBAmJI,SAAYO,GACflB,KAAKmB,UAAUD,EAAOrB,IAAKqB,EAAOd,OApJnC,yBAuJI,SAAYgB,GAEfpB,KAAKqB,UAAY,IAAFD,GACfpB,KAAKqB,UAAWD,GAAG,EAAG,OA1JvB,yBA6JI,SAAYA,GACfpB,KAAKH,IAAIyB,aAAaF,EAAGpB,KAAKI,KAC9BJ,KAAKI,KAAO,IA/Jb,wBAyKI,SAAWO,GACd,IAAIG,EAAI,EACJS,EAAIZ,EACR,GACIG,GAAK,EACLS,IAAM,QACDA,EAAI,GAEb,GACIT,GAAK,EACLd,KAAKqB,WAAYV,GAAKG,EAAK,OAAUA,EAAI,IAAM,UAC1CA,EAAI,KApLd,uBAuLI,SAAUH,GAETA,EAAI,IACJA,EAAI,EAAUA,GAEdA,GAAK,IAELX,KAAKH,IAAIG,KAAKI,OAASO,EAChBA,GAAK,OAEZX,KAAKH,IAAIG,KAAKI,OAAS,IAAOoB,KAAKC,MAAMd,EAAI,KAC7CX,KAAKH,IAAIG,KAAKI,OAAa,IAAJO,GAChBA,EAAI,QAEXX,KAAKH,IAAIG,KAAKI,OAAS,IAAOoB,KAAKC,MAAMd,EAAI,OAC7CX,KAAKH,IAAIG,KAAKI,OAA+B,IAAtBoB,KAAKC,MAAMd,EAAI,KACtCX,KAAKH,IAAIG,KAAKI,OAAa,IAAJO,GAChBA,EAAI,WAEXX,KAAKH,IAAIG,KAAKI,OAAS,IAAOoB,KAAKC,MAAMd,EAAI,UAC7CX,KAAKH,IAAIG,KAAKI,OAAiC,IAAxBoB,KAAKC,MAAMd,EAAI,OACtCX,KAAKH,IAAIG,KAAKI,OAAiC,IAAxBoB,KAAKC,MAAMd,EAAM,KACxCX,KAAKH,IAAIG,KAAKI,OAAa,IAAJO,IAGvBX,KAAKH,IAAIG,KAAKI,OAAS,IAAOoB,KAAKC,MAAMd,EAAI,WAC7CX,KAAKH,IAAIG,KAAKI,OAAmC,IAA1BoB,KAAKC,MAAMd,EAAI,SACtCX,KAAKH,IAAIG,KAAKI,OAAmC,IAA1BoB,KAAKC,MAAMd,EAAO,MACzCX,KAAKH,IAAIG,KAAKI,OAAmC,IAA1BoB,KAAKC,MAAMd,EAAU,GAC5CX,KAAKH,IAAIG,KAAKI,OAAa,GAAJO,KApN5B,0BA2NI,SAAaH,GAChBR,KAAKH,MAAMG,KAAKI,KAAOI,MA5NxB,O,2DCnCA,0MAGM,SAAUkB,EAASC,GACvB,OAAU,IAAJA,GAGI,MAAJA,GAGI,QAAJA,GAGI,UAAJA,EAGC,EAFE,EAHA,EAHA,EAHA,EAcL,SAAUC,EAAUC,EAAQC,GAChC,IAEIC,EAFAC,EAASF,EACPG,EAAaJ,EAAOG,GAgC1B,GA9BIC,EAAa,KACfF,EAASE,EACTD,GAAU,GACDC,EAAa,KACtBF,EAAoD,OAAzCE,GAAc,EAAKJ,EAAOG,EAAS,IAC9CA,GAAU,GACDC,EAAa,KACtBF,EAEE,SADEE,GAAc,GAAOJ,EAAOG,EAAS,IAAM,EAAKH,EAAOG,EAAS,IAEpEA,GAAU,GACDC,EAAa,KACtBF,EAKE,WAJEE,GAAc,GACbJ,EAAOG,EAAS,IAAM,GACtBH,EAAOG,EAAS,IAAM,EACvBH,EAAOG,EAAS,IAEpBA,GAAU,IAEVD,GACiB,GAAbE,IAAsB,GACvBJ,EAAOG,EAAS,IAAM,GACtBH,EAAOG,EAAS,IAAM,GACtBH,EAAOG,EAAS,IAAM,EACD,GAArBH,EAAOG,EAAS,GAGnBA,GAAU,GAERA,EAASH,EAAO1B,OAClB,MAAM,IAAI+B,IACR,sEAGJ,MAAO,CAACH,EAAQC,EAASF,GA6ErB,SAAUK,EACdN,EACAO,GAEqB,IADrBC,EACqB,uDADC,EACtBC,EAAqB,uDAAD,EAEpB,EAA2BF,EAAOG,MAAMV,GAAhCG,EAAR,EAAQA,OAAQD,EAAhB,EAAgBA,OAGhB,OAFAA,EAAOS,aAAeR,EAASM,EAC/BP,EAAOU,MAAQT,EAASK,EACjBN,EAOH,SAAUW,EAAYC,EAAQC,GAClC,IAAMC,EAASF,EAAOG,UAAUF,GAC1BG,EAAY,gBAAYH,GAC9BD,EAAOG,UAAUF,GAAc,WAAsB,WACnD,KAAMG,KAAgB,MAAO,CAC3B,IAAMC,EAAMH,EAAOI,KAAK,MACxB,KAAKF,GAAgBC,EACrBE,QAAQC,QAAQH,GAAKI,OAAM,kBAClB,EAAKL,MAGhB,OAAO,KAAKA,IAIV,SAAUM,EAAYC,GAC1B,OAAOC,IAAID,EAAIE,cAAcC,QAAQ,gBAAiB,O,yECnKlDC,E,aAEJ,iCACE,KAAKC,OAAIC,EACT,KAAKC,OAAID,KAIPE,E,aAIJ,iCACE,KAAKC,GAAK,IAAIC,MAAM,KACpB,IAAK,IAAIrD,EAAI,EAAGA,EAAI,KAAKoD,GAAG5D,OAAQQ,GAAK,EACvC,KAAKoD,GAAGpD,GAAK,IAAI+C,EAEnB,KAAKO,EAAI,QA6BY,SAASC,EAChBC,EACAC,EACAC,EACAC,GAKhB,OAAOD,GAAQF,GAAKG,IAAcH,GAHJ,GAAKG,GAAa,GAGFF,EAqEhD,IAAMG,EAAS,CACbb,KACAI,aACAU,O,aAvGA,iCACE,KAAKJ,WAAQR,EACb,KAAKS,UAAOT,KAsGda,WAjGF,SAAoBC,EAAKN,EAAOC,GAC9B,KAAMD,GAAS,OACb,MAAM,IAAIO,IAAJ,oCAER,KAAMN,GAAQ,MAAYD,GACxB,MAAM,IAAIO,IAAJ,mCAERD,EAAIN,MAAQA,EACZM,EAAIL,KAAOA,GA0FXH,cACAU,kBAvEgB,SACAT,EACUO,EACVJ,GAEhB,OAAOJ,EAAYC,EAAGO,EAAIN,MAAOM,EAAIL,KAAMC,IAmE3CO,IA/De,SAA6BV,EAAmBG,GAC/D,OAAOH,GAAM,GAAKG,GAAa,GA+D/BQ,cAhCgB,SACAX,EACOY,EACGL,EACVJ,GAEhB,OA9BuB,SACbH,EACaY,EACPX,EACAC,EACAC,GAQhB,IAHAH,EAAIE,GAAQF,GAAKG,IAAcH,GAHD,GAAKG,GAAa,GAGLF,GAGnCY,IACN,GAEEb,EAAKA,GAAK,EADgB,IAAOY,EAAKF,YAE/BV,EAAIa,KAGf,OAAOb,EAUAc,CAAQd,EAAGY,EAAML,EAAIN,MAAOM,EAAIL,KAAMC,IA2B7CY,YAvBgB,SACNf,EACaY,GAGvB,GAAIZ,EAAIa,IACN,GACEb,EAAKA,GAAK,EAAM,IAAOY,EAAKF,YACrBV,EAAIa,KAGf,OAAOb,IAeMI,O,kCC5If,0GAAMY,EAAW,GACXC,EAAU,GAAKD,EACfH,EAAc,GAAK,I,iHCAnBK,E,YACL,aAA0B,IAAdC,EAAc,uDAAJ,GACrB,GADyB,YACnBA,EAAQC,SAAWD,EAAQC,QAAU,GAC1C,MAAM,IAAIC,UAAU,6CAGrBxF,KAAKuF,QAAUD,EAAQC,QACvBvF,KAAKyF,MAAQ,IAAIC,IACjB1F,KAAK2F,SAAW,IAAID,IACpB1F,KAAKyC,MAAQ,E,8BAGd,SAAKmD,EAAKC,GACT7F,KAAKyF,MAAMK,IAAIF,EAAKC,GACpB7F,KAAKyC,QAEDzC,KAAKyC,OAASzC,KAAKuF,UACtBvF,KAAKyC,MAAQ,EACbzC,KAAK2F,SAAW3F,KAAKyF,MACrBzF,KAAKyF,MAAQ,IAAIC,O,iBAInB,SAAIE,GACH,GAAI5F,KAAKyF,MAAMM,IAAIH,GAClB,OAAO5F,KAAKyF,MAAMZ,IAAIe,GAGvB,GAAI5F,KAAK2F,SAASI,IAAIH,GAAM,CAC3B,IAAMC,EAAQ7F,KAAK2F,SAASd,IAAIe,GAEhC,OADA5F,KAAKgG,KAAKJ,EAAKC,GACRA,K,iBAIT,SAAID,EAAKC,GAOR,OANI7F,KAAKyF,MAAMM,IAAIH,GAClB5F,KAAKyF,MAAMK,IAAIF,EAAKC,GAEpB7F,KAAKgG,KAAKJ,EAAKC,GAGT7F,O,iBAGR,SAAI4F,GACH,OAAO5F,KAAKyF,MAAMM,IAAIH,IAAQ5F,KAAK2F,SAASI,IAAIH,K,kBAGjD,SAAKA,GACJ,OAAI5F,KAAKyF,MAAMM,IAAIH,GACX5F,KAAKyF,MAAMZ,IAAIe,GAGnB5F,KAAK2F,SAASI,IAAIH,GACd5F,KAAK2F,SAASd,IAAIe,QAD1B,I,oBAKD,SAAOA,GACN,IAAMK,EAAUjG,KAAKyF,MAAMS,OAAON,GAKlC,OAJIK,GACHjG,KAAKyC,QAGCzC,KAAK2F,SAASO,OAAON,IAAQK,I,mBAGrC,WACCjG,KAAKyF,MAAMU,QACXnG,KAAK2F,SAASQ,QACdnG,KAAKyC,MAAQ,I,0BAGd,4FACqBzC,MADrB,wDAEE,OAFF,eACa4F,EADb,cAEQA,EAFR,qM,4BAMA,4FACyB5F,MADzB,wDAEE,OAFF,eACe6F,EADf,cAEQA,EAFR,qM,qBAMA,oGACoB7F,KAAKyF,OADzB,wDAEE,OADUW,EADZ,iBAEQA,EAFR,iJAKoBpG,KAAK2F,UALzB,8DAKYS,EALZ,YAMgBA,EANhB,GAMSR,EANT,KAOO5F,KAAKyF,MAAMM,IAAIH,GAPtB,iBAQG,OARH,UAQSQ,EART,uN,gBAaA,WACC,IADU,EACNC,EAAe,EADT,IAEQrG,KAAK2F,SAASW,QAFtB,IAEV,2BAAwC,KAA7BV,EAA6B,QAClC5F,KAAKyF,MAAMM,IAAIH,IACnBS,KAJQ,8BAQV,OAAOrG,KAAKyC,MAAQ4D,M,GArBlB7B,OAAO+B,UAyBX5G,EAAOC,QAAUyF,G,kCC3DFmB,IAtDG,CAChBC,+BAAgC,EAChCC,mBAAoB,EACpBC,0BAA2B,EAC3BC,iBAAkB,EAClBC,eAAgB,GAGhBC,eAAgB,EAEhBC,aAAc,EAGdC,YAAa,EAEbC,iBAAkB,EAElBC,WAAY,EAEZC,YAAa,EAEbC,aAAc,GAEdC,cAAe,GAEfC,WAAY,GAEZC,WAAY,IAEZC,eAAgB,IAEhBC,YAAa,IAEbC,SAAU,KAEVC,mBAAoB,KAEpBC,WAAY,EACZC,SAAU,EACVC,SAAU,EACVC,cAAe,EACfC,eAAgB,EAChBC,eAAgB,EAChBC,SAAU,EACVC,WAAY,EACZC,UAAW,EACXC,UAAW,EAEXC,cAAe,aACfC,gBAAiB,EACjBC,eAAgB,GAChBC,eAAgB,S,mCCnDlB,2DAEM,SAAUC,EAAMC,GACpB,OAAO1I,EAAO2I,KAAKC,kBAAQF,O,gFC8BvBG,EAAWC,EAAQ,MAOzB,SAASC,EAAsB/E,EAAGgF,GAC9B,OAAOhF,GAAM,GAAGgF,GAAM,EAG1B,SAASC,EAAsBrF,EAAGsF,GAK9B,IADA,IAAIrI,EAAI,EACDqI,GAAKtF,EAAE/C,EAAE,IACnBA,IAIG,OAAOA,EAGX,SAASsI,EAAavF,EAAGoF,GAIrB,IAHA,IAAII,EAAM,GAAGJ,EACTK,EAAM,IAAItF,MAAMqF,GAChBvI,EAAI,EACCqI,EAAI,EAAGA,EAAIE,EAAKF,IAAK,CACjC,KAAOA,GAAKtF,EAAE/C,EAAE,IACZA,IACJwI,EAAIH,GAAKrI,EAEN,OAAOwI,EAGX,SAASC,EAAgBtF,EAAGlD,EAAGoI,EAAGF,GAC9B,OAAOE,GAAKlF,GAAKgF,IAAShF,GAAM,GAAGgF,GAAM,GAAMlI,EAGnD,SAASyI,EAAWC,EAAKxF,GAIrB,OAHIA,EAAK,QACZA,GAAKA,GAAK,IAAMwF,EAAIC,cAEVzF,EASX,SAAS0F,EAAa1F,EAAG2F,GACrBA,EAAIC,aAAc5F,GAAK,GAAM,KAC7B2F,EAAIC,aAAc5F,GAAK,GAAM,KAC7B2F,EAAIC,aAAc5F,GAAM,EAAK,KAC7B2F,EAAIC,aAAc5F,GAAM,EAAK,KAoBjC,SAAS6F,EAAW7F,EAAG2F,EAAKxF,EAAOC,EAAM0F,GAIrC,OAFA9F,EAnBJ,SAAuBA,EAAG2F,EAAKvF,EAAM0F,GAIjC,IAFA,IAAIC,GAAS,GAAM,GAAGD,GAAe1F,EAE9BJ,GAAK+F,GACfJ,EAAIC,aAAc5F,GAAG,EAAK,KAC1B2F,EAAIC,aAAiB,IAAJ5F,GACjBA,IAAM,GAEH,OAAOA,EAUHgG,CAAchG,EAAG2F,EAAKvF,EAAM0F,GAChC9F,GAAKzC,KAAKC,MAAMwC,EAAII,IAAS0F,GAAe9F,EAAII,EAAQD,EAsQ5D,SAAS8F,EAAiBC,EAAKV,EAAKW,GACvB,GAALA,IACPA,EAAI,GAKD,IAFA,IAAIC,EAAO,IAAIrG,MAAMoG,GACjBE,EAAO,IAAItG,MAAMoG,GACZtJ,EAAI,EAAGA,EAAIsJ,EAAGtJ,IAC1BwJ,EAAKxJ,GAAKU,KAAKC,MAAMgI,EAAItJ,OAASiK,IAAOX,EAAItJ,OAASiK,EAAKtJ,GAC3DuJ,EAAKvJ,GAAK,IAAIkD,MAAMsG,EAAKxJ,IAGtB,IAAK,IAAIyJ,EAAI,EAAG5J,EAAI,EAAGA,EAAI8I,EAAItJ,OAAQQ,GAAGyJ,EAAGG,IAChD,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAGI,IACfD,EAAIF,EAAKG,GAAGrK,SACnBkK,EAAKG,GAAGD,GAAKd,EAAI9I,EAAE6J,IAIjB,IAAIC,EAAO,IAAIzG,MAAMoG,GACjBM,EAAQ,EACZ,IAAS5J,EAAI,EAAGA,EAAIsJ,EAAGtJ,IAAK,CAE/B,IAAI6J,EAAQC,EAAOP,EAAKvJ,GAAI,GACxB+J,EAAQD,EAAOP,EAAKvJ,GAAI,GAC5B2J,EAAK3J,GAAM+J,EAAM1K,OAASwK,EAAMxK,OAAU0K,EAAQF,EAClDD,GAASD,EAAK3J,GAAGX,OAId,IAAI2K,EAAM,IAAIhC,EAAS,GAAI,EAAG4B,EAAM,EAAEN,EAAE,GACxCU,EAAIzJ,UAAU+I,GACd,IAAStJ,EAAI,EAAGA,EAAIsJ,EAAGtJ,IAC1BgK,EAAIC,WAAWN,EAAK3J,GAAGX,QAEpB,IAASW,EAAI,EAAGA,EAAIsJ,EAAGtJ,IAC1BgK,EAAI3J,UAAUsJ,EAAK3J,GAAI2J,EAAK3J,GAAGX,QAE5B,OAAO2K,EAAIjL,IAAIU,MAAM,EAAGuK,EAAIjL,IAAIO,KAuCpC,SAAS4K,EAAiB9J,EAAQ+J,GAC9B,IAAIC,EAAShK,EAAON,WAChBuK,EAAkB,EAATD,EACTE,EAAkB,EAATF,EAETG,EAAkB,GAATH,EACTI,EAAkB,GAATJ,EACTK,EAAkB,IAATL,EAMb,GATsB,GAATA,IAMhBD,EAAQ/J,EAAOsK,aAGRJ,EACP,OAlDD,SAA0B3B,EAAKpJ,GAM3B,IALA,IAAI+J,EAAIX,EAAI7I,WAGR6K,EAAO,IAAIzH,MAAMoG,GACjBE,EAAO,IAAItG,MAAMoG,GACZI,EAAI,EAAGA,EAAIJ,EAAGI,IAC1BiB,EAAKjB,GAAKf,EAAI+B,YAGX,IAAIE,EAAI,IAAI1H,MAAMoG,GAClB,IAASI,EAAI,EAAGA,EAAIJ,EAAGI,IAC1BF,EAAKE,GAAKhJ,KAAKC,MAAMpB,EAAM+J,IAAO/J,EAAM+J,EAAKI,GAC7CkB,EAAElB,GAAKQ,EAAiBvB,EAAKa,EAAKE,IAI/B,IAAIM,EAAM,IAAI7K,EAAOC,YAAYG,GACjC,IAASmK,EAAI,EAAGA,EAAIJ,EAAGI,IAC1B,IAAK,IAAI7J,EAAI,EAAGA,EAAI2J,EAAKE,GAAI7J,IACzBmK,EAAInK,EAAEyJ,EAAII,GAAKkB,EAAElB,GAAG7J,GAIrB,OAAOmK,EA0BHa,CAAiBzK,EAAQ+J,GAG7B,GAAIM,EACP,KAAIK,EAAWX,EACf,EAvKD,SAAwBxB,GAIpB,IAHA,IAAIoC,EAAOpC,EAAI7I,WACXkL,EAAI,IAAI9H,MAAM6H,GAETlL,EAAI,EAAGA,EAAIkL,EAAMlL,IAC7BmL,EAAEnL,GAAK8I,EAAI7I,WAIR,MAAO,CAACkL,EAAGD,EAFDpC,EAAI+B,aAgKMO,CAAe7K,GAAtC,SAAK4K,EAAL,KAAQD,EAAR,KAAcZ,EAAd,KAIG,GAAIK,EACP,KAAIU,EAAUf,EACd,EA7SD,SAAuBxB,GACnB,IAAIwC,EAAaxC,EAAI+B,YACjBQ,EAAUvC,EAAI+B,YAGlB,GAAiB,EAAbS,EACP,IAAIC,EAAWzC,EAAI0C,UAAUF,EAAW,GAAG,OACjC,CACV,IAAIG,EAAgB3C,EAAI+B,YACpBU,EAAWzC,EAAI0C,SAASC,GAC5BF,EAAWG,EAAY,IAAIvD,EAASoD,GAAWD,EAAW,GAInDC,EAAW,IAAIpD,EAASoD,GAA5B,IACII,EAAI,IAAItI,MAAM,KACduI,EAAIL,EAAStL,WACR,GAAL2L,IACPA,EAAI,KACD,IAAK,IAAI5L,EAAI,EAAGA,EAAI4L,EAAG5L,IAC1B2L,EAAEJ,EAAStL,YAAc,EAEtB,MAAO,CAAC0L,EAAGJ,EAAUF,GAuRGQ,CAActL,GAAzC,SAAKoL,EAAL,KAAQJ,EAAR,KAAkBjB,EAAlB,KAIG,GAAII,EACP,IAAIxL,EAAMqB,EAAOiL,SAASlB,QAClB,GAAa,GAATE,EACRtL,EAAMwM,EAAYnL,EAAQ+J,QAE1BpL,EA+UL,SAAqB4J,EAAKgD,GAGtB,IACIC,GADAjC,EAAOhB,EAAI7I,aACK,EAEhB+L,EAAWlD,EACf,GAAW,EAAPgB,EACP,KAAIH,EAAOb,EAAI+B,YACXC,EAAOhC,EAAI+B,YACXf,EAAO,IAAI3B,EAASW,EAAI0C,SAASV,IACjCkB,EAAW,IAAI7D,EAASuD,EAAY5B,EAAMH,IAI3C,IAAI3G,EAAI,IAAIK,MAAM,KACdH,EAAI,IAAIG,MAAM,MAxDtB,SAA0ByF,EAAK9F,EAAGE,EAAG6I,GAEjC,IAAK,IAAI/L,EAAI,EAAGA,EAAI,IAAKA,IAAK,CACjCgD,EAAEhD,GAAK,IAAIqD,MAAM,KACjBH,EAAElD,GAAK,IAAIqD,MAAM,KACjB,IAAK,IAAIwG,EAAI,EAAGA,EAAI,IAAKA,IACrB7G,EAAEhD,GAAG6J,GAAK,EAIX,IAAIlK,EAAIsM,EAAanD,GAGrB,IAAS9I,EAAI,EAAGA,EAAI,IAAKA,IAC5B,GAAKL,EAAEK,GAAP,CAGA,IAAIkM,EAAM,EACV,IAASrC,EAAI,EAAGA,EAAI,IAAKA,IAChBlK,EAAEkK,KAGHqC,EAAM,EACbA,KAEAlJ,EAAEhD,GAAG6J,GAAKf,EAAI+B,YACC,GAAX7H,EAAEhD,GAAG6J,KACLqC,EAAMpD,EAAI7I,cAIfkM,EAA4BnJ,EAAEhD,GAAI+L,GAGlC7I,EAAElD,GAAG,GAAK,EACV,IAAS6J,EAAI,EAAGA,EAAI,IAAKA,IACrB3G,EAAElD,GAAG6J,EAAE,GAAK3G,EAAElD,GAAG6J,GAAK7G,EAAEhD,GAAG6J,IAqB5BuC,CAAiBJ,EAAUhJ,EAAGE,EAAG6I,GAIjC,IADA,IAAIpD,EAAM,IAAItF,MAAM,KACXrD,EAAI,EAAGA,EAAI,IAAKA,IAE5B2I,EAAI3I,GAAKyI,EAAavF,EAAElD,GAAI+L,GAKzB,IAFA,IAAIzI,EAAI,IAAID,MAAM,GACdsI,EAAI,IAAItI,MAAM,GACTwG,EAAI,EAAGA,EAAI,EAAGA,IAC1BvG,EAAEuG,GAAKf,EAAIuD,aACXV,EAAE9B,GAAK,EAIJ,IAAIyC,EAAS,IAAIhN,EAAOC,YAAYuM,GAChCS,EAAU1L,KAAKC,MAAMgL,EAAO,GAChC,IAAS9L,EAAI,EAAGA,EAAIuM,EAASvM,IAChC,IAAS6J,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,IAAIrB,EAAIH,EAAsB/E,EAAEuG,GAAIkC,GAGhC5L,EAAIwI,EAAIgD,EAAE9B,IAAIrB,GAElB8D,EAAOtM,EAAE6J,EAAE0C,GAAWpM,EACtBmD,EAAEuG,GAAKjB,EAAgBtF,EAAEuG,GAAI3G,EAAEyI,EAAE9B,IAAI1J,GAAI6C,EAAE2I,EAAE9B,IAAI1J,GAAI4L,GACrDzI,EAAEuG,GAAKhB,EAAWC,EAAKxF,EAAEuG,IACzB8B,EAAE9B,GAAK1J,EAORH,GAAI,EACJ,KAAOA,EAAI8L,GAAQ,CAClBtD,EAAIH,EAAsB/E,EAAE,GAAIyI,GAChC5L,EAAIoI,EAAsBrF,EAAEyI,EAAE,IAAKnD,GACvC8D,EAAOtM,KAAOG,EACdmD,EAAE,GAAKsF,EAAgBtF,EAAE,GAAIJ,EAAEyI,EAAE,IAAIxL,GAAI6C,EAAE2I,EAAE,IAAIxL,GAAI4L,GACrDzI,EAAE,GAAKuF,EAAWC,EAAKxF,EAAE,IACzBqI,EAAE,GAAKxL,EAGJ,OAAOmM,EA9YAE,CAAYjM,EAAQ+J,GAS3B,OANIK,IACPzL,EAjSD,SAAmBA,EAAKyM,EAAGJ,EAAU7L,GACvB,IAAIyI,EAASjJ,GAMvB,IANA,IAEIiL,EAAM,IAAI7K,EAAOC,YAAYG,GAG7BmK,EAAI,EACC7J,EAAI,EAAG6J,EAAInK,EAAKM,IAAK,CACjC,IAAI+D,EAAM7E,EAAIc,GACd,GAAI2L,EAAE5H,GAEF,IADA,IAAImI,EAAMX,EAASV,YACVrH,EAAI,EAAGA,GAAK0I,EAAK1I,IAC7B2G,EAAIN,KAAO9F,OAERoG,EAAIN,KAAO9F,EAIZ,OAAOoG,EA+QJsC,CAAUvN,EAAKyM,EAAGJ,EAAUF,IAE3BT,IACP1L,EA/KD,SAAoBwN,EAAMvB,EAAGD,EAAMxL,GAC/B,IAAIyK,EAAM,IAAI7K,EAAOC,YAAYG,GAC7BmK,EAAI,EAGR,GAAIqB,GAAQ,EACf,IAAK,IAAIlL,EAAI,EAAGA,EAAIN,EAAKM,IACrBmK,EAAInK,GAAKmL,EAAE,QAIP,GAAID,GAAQ,EACpB,IAAKlL,EAAI,EAAGA,EAAIN,EAAKM,IAAK,CACtB,GAAIA,EAAI,GAAK,EAChB,IAAIgB,EAAI0L,EAAK7C,KAEVM,EAAInK,GAAKmL,EAAM,EAAJnK,GACXA,IAAM,OAKF,GAAIkK,GAAQ,EACpB,IAAKlL,EAAI,EAAGA,EAAIN,EAAKM,IACbA,EAAI,GAAK,IACZgB,EAAI0L,EAAK7C,MAEVM,EAAInK,GAAKmL,EAAM,EAAJnK,GACXA,IAAM,OAKF,GAAIkK,GAAQ,GACpB,IAAKlL,EAAI,EAAGA,EAAIN,EAAKM,IACbA,EAAI,GAAK,IACZgB,EAAI0L,EAAK7C,MAEVM,EAAInK,GAAKmL,EAAM,GAAJnK,GACXA,IAAM,EAIP,OAAOmJ,EAoIJwC,CAAWzN,EAAKiM,EAAGD,EAAMD,IAErB/L,EAGX,SAAS+K,EAAOnB,EAAKyB,GACjB,IAAIf,EAAM,IAAIrB,EAAS,GAAI,EAAG,IAC9BqB,EAAI9I,UAAU6J,GAEd,IAAIC,EAAiB,EAATD,EACRE,EAAiB,EAATF,EAERG,EAAiB,GAATH,EACRI,EAAiB,GAATJ,EACRK,EAAiB,IAATL,EAERd,EAAQc,GAAQ,EAKpB,GAVqB,GAATA,GAQff,EAAIY,WAAWtB,EAAItJ,QAEZiL,EACP,OAAOnL,EAAOsN,OAAO,CAACpD,EAAItK,IAAIU,MAAM,EAAG4J,EAAI/J,KAAM8J,EAAiBC,EAAKV,EAAKW,KAEzE,IAAIoD,EAAY,IAAIvN,EAAOwN,MAAM,GACjC,GAAIlC,EAAJ,OArSJ,SAAoB9B,GAGhB,IADA,IAAI9F,EAAI,IAAIK,MAAM,KACTrD,EAAI,EAAGA,EAAI,IAAKA,IAC5BgD,EAAEhD,GAAK,EAEJ,IAASA,EAAI,EAAGA,EAAI8I,EAAItJ,OAAQQ,IACnCgD,EAAE8F,EAAI9I,MAEH,IAAImL,EAAI,IAAI9H,MAAM,KACd6H,EAAO,EACX,IAASlL,EAAI,EAAGA,EAAI,IAAKA,IACxBgD,EAAEhD,GAAK,IACPmL,EAAEnL,GAAKkL,KAER,KAAIA,EAAO,IAAX,CAOA,GAAIA,GAAQ,EAEf,IAAIwB,EAAO,IAAIpN,EAAOC,YAAY,QAG1B,GAAI2L,GAAQ,EAAG,CAEnBwB,EAAO,IAAIpN,EAAOC,YAAYsB,KAAKkM,KAAKjE,EAAItJ,OAAO,IAAvD,IACIqK,GAAK,EACT,IAAK7J,EAAI,EAAGA,EAAI8I,EAAItJ,OAAQQ,IACpBA,EAAI,GAAK,IAChB0M,IAAO7C,GAAK,GACT6C,EAAK7C,IAAMsB,EAAErC,EAAI9I,KAAQA,EAAI,OAIzB,GAAIkL,GAAQ,EAIpB,IAFIwB,EAAO,IAAIpN,EAAOC,YAAYsB,KAAKkM,KAAKjE,EAAItJ,OAAO,IACnDqK,GAAK,EACJ7J,EAAI,EAAGA,EAAI8I,EAAItJ,OAAQQ,IACpBA,EAAI,GAAK,IAChB0M,IAAO7C,GAAK,GACT6C,EAAK7C,IAAMsB,EAAErC,EAAI9I,KAASA,EAAI,EAAK,OAQvC,IAFI0M,EAAO,IAAIpN,EAAOC,YAAYsB,KAAKkM,KAAKjE,EAAItJ,OAAO,IACnDqK,GAAK,EACJ7J,EAAI,EAAGA,EAAI8I,EAAItJ,OAAQQ,IACpBA,EAAI,GAAK,IAChB0M,IAAO7C,GAAK,GACT6C,EAAK7C,IAAMsB,EAAErC,EAAI9I,KAASA,EAAI,EAAK,EAMpC,IAAIgN,EAAO,IAAI7E,EAAS,GAAI,EAAG+C,EAAK,GAGpC,IAFA8B,EAAKtM,UAAUwK,GACXrB,EAAI,EACC7J,EAAI,EAAGA,EAAI,IAAKA,IACxBgD,EAAEhD,GAAK,IACPgD,EAAEhD,GAAK6J,IACPmD,EAAKtM,UAAUV,IAKhB,OAFAgN,EAAK5C,WAAWsC,EAAKlN,QAEd,CAACwN,EAAK9N,IAAIU,MAAM,EAAGoN,EAAKvN,KAAMiN,IA6NrBO,CAAWnE,GAD3B,SACF+D,EADE,KACS/D,EADT,KAGA,IAAIyC,EAAW,IAAIjM,EAAOwN,MAAM,GAChC,GAAInC,EAAJ,OAlZJ,SAAmB7B,GAGf,IADA,IAAI6C,EAAI,IAAItI,MAAM,KACTrD,EAAI,EAAGA,EAAI,IAAKA,IAC5B2L,EAAE3L,GAAK,EAEJ,IAAIkN,GAAQ,EACZ,IAASlN,EAAI,EAAGA,EAAI8I,EAAItJ,OAAQQ,IACnC2L,EAAE7C,EAAI9I,KAAO8I,EAAI9I,IAAMkN,EAAO,GAAK,EACnCA,EAAOpE,EAAI9I,GAGR,IAAImN,EAAO,EACX,IAASnN,EAAI,EAAGA,EAAI,IAAKA,IACxB2L,EAAE3L,GAAK,GACPmN,IAWD,IATKA,IAERA,EAAO,EACPxB,EAAE,GAAK,IAIAqB,EAAO,IAAI7E,EAAS,GAAI,EAAGgF,EAAK,EAAIrE,EAAItJ,SACvCkB,UAAUyM,GACNnN,EAAI,EAAGA,EAAI,IAAKA,IACxB2L,EAAE3L,GAAK,GACPgN,EAAKtM,UAAUV,GAGhB,IAAI0M,EAAO,IAAIpN,EAAOC,YAAYuJ,EAAItJ,QAClC4N,EAAO,EACX,IAASpN,EAAI,EAAGA,EAAI8I,EAAItJ,OAAQQ,IAEnC,GADA0M,EAAKU,KAAUtE,EAAI9I,GACf2L,EAAE7C,EAAI9I,IAAM,EAAG,CACfkN,EAAOpE,EAAI9I,GAEX,IADA,IAAIkM,EAAM,EACHlM,EAAEkM,EAAI,EAAIpD,EAAItJ,QAAUsJ,EAAI9I,EAAEkM,EAAI,IAAMgB,GAClDhB,IACGc,EAAK5C,WAAW8B,GAChBlM,GAAKkM,EAKN,IAKIc,EALAK,EAAQC,EAAYN,EAAK9N,IAAIU,MAAM,EAAGoN,EAAKvN,MAC3C+J,EAAM,IAAIrB,EAAS,GAAI,EAAG,IAM9B,OALAqB,EAAIY,WAAoB,EAAT4C,EAAKvN,KACpB+J,EAAIY,WAAWgD,GACf5D,EAAIY,WAAWiD,EAAM7N,QAGd,CAFHwN,EAAO1N,EAAOsN,OAAO,CAACpD,EAAItK,IAAIU,MAAM,EAAE4J,EAAI/J,KAAM4N,IAEtCX,EAAK9M,MAAM,EAAGwN,IA8VbG,CAAUzE,GADzB,SACFyC,EADE,KACQzC,EADR,KASA,GANIA,EAAItJ,OAAS,GAAc,GAATgL,IAEzBA,EAAQ,EACRhB,EAAItK,IAAI,KAAM,GAGPwL,EACP,IAAIZ,EAAOhB,OACH,GAAa,GAAT0B,EACRV,EAAOwD,EAAYxE,QAEnBgB,EA+aL,SAAqBhB,GAQjB,IAPA,IAAMgD,EAAShD,EAAItJ,OACf8M,EAAS,IAAInE,EAAS,GAAI,EAAG,QAG7BqF,EAAK,IAAInK,MAAM,KACfL,EAAI,IAAIK,MAAM,KACdH,EAAI,IAAIG,MAAM,KACTrD,EAAI,EAAGA,EAAI,IAAKA,IAC5BgD,EAAEhD,GAAK,IAAIqD,MAAM,KACjBH,EAAElD,GAAK,IAAIqD,MAAM,KAId,IAAI0I,EAAQ,IA3FhB,SAA2BjD,EAAK9F,EAAGwK,GAC/B,IAAK,IAAIxN,EAAI,EAAGA,EAAI,IAAKA,IAAK,CACjCwN,EAAGxN,GAAK,EACR,IAAK,IAAI6J,EAAI,EAAGA,EAAI,IAAKA,IACrB7G,EAAEhD,GAAG6J,GAAK,EAGX,IAAIqD,EAAO,EACX,IAASlN,EAAI,EAAGA,EAAI8I,EAAItJ,OAAQQ,IACnCwN,EAAGN,KACHlK,EAAEkK,GAAMpE,EAAI9I,MACZkN,EAAOpE,EAAI9I,GAERwN,EAAGN,KAGHlK,EAAE,GAAG8F,EAAI,GAAGA,EAAItJ,QAAU,OAC1BwD,EAAE,GAAG8F,EAAI,GAAGA,EAAItJ,QAAU,OAC1BwD,EAAE,GAAG8F,EAAI,GAAGA,EAAItJ,QAAU,OAC1BgO,EAAG,IAAM,GA0ETC,CAAkB3E,EAAK9F,EAAGwK,GAvE9B,SAA+BxK,EAAGwK,EAAIzB,GAElC,IAAK,IAAI/L,EAAI,EAAGA,EAAI,IAAKA,IAC5B,GAAKwN,EAAGxN,GAAR,CAGA,IAAI0N,EAAW7M,KAAKkM,KAAKlM,KAAK8M,KAAKH,EAAGxN,KAClC0N,EAAW3B,IACX2B,EAAW3B,GAEf6B,EAAsB5K,EAAEhD,GAAI0N,IA8DzBG,CAAsB7K,EAAGwK,EAAIzB,GAG7B,IAAIrI,EAAO,IAAIyE,EAAS,GAAI,EAAG,SAvDnC,SAA2BgC,EAAKnH,EAAGwK,GAC/BM,EAAc3D,EAAKqD,GAEnB,IAAK,IAAIxN,EAAI,EAAGA,EAAI,IAAKA,IAC5B,GAAKwN,EAAGxN,GAIR,IADA,IAAIkM,EAAM,EACDrC,EAAI,EAAGA,EAAI,IAAKA,IACrB,GAAK2D,EAAG3D,GAGR,GAAIqC,EACPA,SAIA,GAFA/B,EAAIC,WAAWpH,EAAEhD,GAAG6J,KAEf7G,EAAEhD,GAAG6J,GAAI,CAEV,IAAK,IAAIkE,EAAIlE,EAAE,EAAGkE,EAAI,IAAKA,IAC9B,GAAKP,EAAGO,GAAR,CAGA,GAAe,GAAX/K,EAAEhD,GAAG+N,GAGL,MAFA7B,IAID/B,EAAIzJ,UAAUwL,IA6BhB8B,CAAkBtK,EAAMV,EAAGwK,GAE3B,IAAIS,EAAQX,EAAY5J,EAAKxE,IAAIU,MAAM,EAAG8D,EAAKjE,MAC3CwO,EAAMzO,OAASkE,EAAKjE,KAC3B6M,EAAO5L,UAAU,EAAKqL,GAAO,GAC7BO,EAAOlC,WAAW1G,EAAKjE,KACvB6M,EAAOlC,WAAW6D,EAAMzO,QACxB8M,EAAO9L,UAAUyN,EAAOA,EAAMzO,UAE9B8M,EAAO5L,UAAU,EAAKqL,GAAO,GAC7BO,EAAO9L,UAAUkD,EAAKxE,IAAKwE,EAAKjE,OAzEjC,SAAqCuD,EAAGwK,EAAIzB,GACxC,IAAK,IAAI/L,EAAI,EAAGA,EAAI,IAAKA,IACxBwN,EAAGxN,IACHmM,EAA4BnJ,EAAEhD,GAAI+L,GA0EnCmC,CAA4BlL,EAAGwK,EAAIzB,GACnC,IAAS/L,EAAI,EAAGA,EAAI,IAAKA,IAC5B,GAAKwN,EAAGxN,GAAR,CAGAkD,EAAElD,GAAG,GAAK,EACV,IAAK,IAAI6J,EAAI,EAAGA,EAAI,IAAKA,IACrB3G,EAAElD,GAAG6J,GAAK3G,EAAElD,GAAG6J,EAAE,GAAK7G,EAAEhD,GAAG6J,EAAE,GAI9B,IAAIvG,EAAI,IAAID,MAAM,GACdsI,EAAI,IAAItI,MAAM,GAClB,IAASwG,EAAI,EAAGA,EAAI,EAAGA,IAC1BvG,EAAEuG,GAt6BQ,MAu6BV8B,EAAE9B,GAAK,EAEJ,IAAIsE,EAAW,IAAIhG,EAAS,GAAY,KAAP2D,EAAY,KAAM,EAAW,KAAPA,EAAY,KAAM,GAGrES,EAAU1L,KAAKC,MAAMgL,EAAO,GAC5BsC,EAAM,IAAI/K,MAAM,GAChB6J,EAAO,IAAI7J,MAAM,GACrB,IAASwG,EAAI,EAAGA,EAAI,EAAGA,IAC1BuE,EAAIvE,IAAMA,EAAE,GAAG0C,EAAU,EACzBW,EAAKrD,GAAKf,EAAIsF,EAAIvE,GAAG,GAIlBqD,EAAK,GAAKpE,EAAIgD,EAAO,GACrB,IAAS9L,EAAI8L,EAAO,EAAG9L,EAAI,EAAEuM,EAAQ,EAAGvM,IAC3CsD,EAAE,GAAK6F,EAAW7F,EAAE,GAAI6K,EAAUjL,EAAE4F,EAAI9I,IAAIkN,EAAK,IAAKlK,EAAE8F,EAAI9I,IAAIkN,EAAK,IAAKnB,GAC1EmB,EAAK,GAAKpE,EAAI9I,GAIX,KAAOoO,EAAI,IAAM,GACpB,IAASvE,EAAI,EAAGA,GAAK,EAAGA,IAAK,CACzB,IAAI1J,EAAI2I,EAAIsF,EAAIvE,IAChBvG,EAAEuG,GAAKV,EAAW7F,EAAEuG,GAAIsE,EAAUjL,EAAE/C,GAAG+M,EAAKrD,IAAK7G,EAAE7C,GAAG+M,EAAKrD,IAAKkC,GAChEmB,EAAKrD,GAAK1J,EACViO,EAAIvE,KAIL,IAASA,EAAI,EAAGA,GAAK,EAAGA,IACpBvG,EAAEuG,GAAKV,EAAW7F,EAAEuG,GAAIsE,EAAUjL,EAAE,GAAGgK,EAAKrD,IAAK7G,EAAE,GAAGkK,EAAKrD,IAAKkC,GAGpE,IAAS/L,EAAI,EAAGA,GAAK,EAAGA,IAC3BgJ,EAAa1F,EAAEtD,GAAImO,GAGhB,OAAO7O,EAAOsN,OAAO,CAACN,EAAOpN,IAAIU,MAAM,EAAG0M,EAAO7M,KAChD0O,EAASjP,IAAIU,MAAMuO,EAAS1O,IAAK0O,EAAS3O,SAC3C8M,EAAO7M,IAAM0O,EAAS3O,OAAS2O,EAAS1O,KA1gBhC4O,CAAYvF,GAEpB,OAAOxJ,EAAOsN,OAAO,CAACpD,EAAItK,IAAIU,MAAM,EAAE4J,EAAI/J,KAAMoN,EAAWtB,EAAUzB,IAMzE,SAASmC,EAAanD,GAElB,IADA,IAAInJ,EAAI,IAAI0D,MAAM,KACTrD,EAAI,EAAGA,EAAI,IAAKA,IAC5BL,EAAEK,GAAK,EAEJ,IAAI2K,EAAM,EACN5G,EAAM+E,EAAI7I,WACVqO,EAAWvK,EAEf,GACHpE,EAAEoE,GAAO,EACL4G,EAAM,GACNA,IACA5G,MAEAA,EAAM+E,EAAI7I,aACCqO,EAAS,IACvB3D,EAAM7B,EAAI7I,YAEXqO,EAAWvK,QACQ,GAAPA,GAET,OAAOpE,EA2BX,SAAS+L,EAAY5C,EAAKgD,GAEtB,IAAI9I,EAAI,IAAIK,MAAM,KACdH,EAAI,IAAIG,MAAM,MAzBtB,SAA0ByF,EAAK9F,EAAGE,GAE9B,IAAK,IAAIlD,EAAI,EAAGA,EAAI,IAAKA,IAC5BgD,EAAEhD,GAAK,EAGJ,IAAIL,EAAIsM,EAAanD,GAGrB,IAAS9I,EAAI,EAAGA,EAAI,IAAKA,IACxBL,EAAEK,GAAK,IACPgD,EAAEhD,GAAK8I,EAAI+B,aAOZ,IAJAsB,EAA4BnJ,EAAG,IAG/BE,EAAE,GAAK,EACElD,EAAI,EAAGA,GAAK,IAAKA,IAC7BkD,EAAElD,EAAE,GAAKkD,EAAElD,GAAKgD,EAAEhD,GAOfuO,CAAiBzF,EAAK9F,EAAGE,GAOzB,IAJA,IAAIyF,EAAMF,EAAavF,EAAG,IAGtBI,EAAI,IAAID,MAAM,GACTrD,EAAI,EAAGA,EAAI,EAAGA,IAC1BsD,EAAEtD,GAAK8I,EAAIuD,aAGR,IAAIC,EAAS,IAAIhN,EAAOC,YAAYuM,GACpC,IAAS9L,EAAI,EAAGA,EAAI8L,EAAQ9L,IAAK,CACpC,IAAIwO,EAAKxO,EAAE,EAEPG,EAAIwI,EADAN,EAAsB/E,EAAEkL,GAAK,KAGrClC,EAAOtM,GAAKG,EACZmD,EAAEkL,GAAM5F,EAAgBtF,EAAEkL,GAAKtL,EAAE/C,GAAI6C,EAAE7C,GAAI,IAC3CmD,EAAEkL,GAAM3F,EAAWC,EAAKxF,EAAEkL,IAGvB,OAAOlC,EAcX,SAASsB,EAAsB5K,EAAGsF,GAG9B,IADA,IAAImG,EAAM,EACDzO,EAAI,EAAGA,EAAI,IAAKA,IAC5ByO,GAAOzL,EAAEhD,GAGN,IAAM0I,EAAO,GAAGJ,EACZoG,EAAQhG,EAAM+F,EAClB,EAAG,CACN,IAAIE,EAAU,EACVC,EAAU,EACVC,EAAS,EACbJ,EAAM,EACN,IAASzO,EAAI,EAAGA,EAAI,IAAKA,IACT,GAARgD,EAAEhD,KAGF2O,EAAU3L,EAAEhD,KACnB2O,EAAU3L,EAAEhD,GACZ4O,EAAU5O,GAGPgD,EAAEhD,GAAKa,KAAKC,MAAMkC,EAAEhD,GAAK0O,GACb,GAAR1L,EAAEhD,KACTgD,EAAEhD,GAAK,GAEJyO,GAAOzL,EAAEhD,IAITyO,EAAM/F,EAEN1F,EAAE4L,IAAYlG,EAAI+F,EACXA,EAAI/F,EAAM1F,EAAE4L,GAAS,GAAK5L,EAAE4L,GAAW,EAE9C5L,EAAE4L,IAAYH,EAAI/F,EACX+F,GAAO/F,IAEdgG,EAAQhG,EAAM+F,EACdI,EAAS,SAEDA,GAGb,SAAS1C,EAA4BnJ,EAAGsF,GAGpC,IADA,IAAImG,EAAM,EACDzO,EAAI,EAAGA,EAAI,IAAKA,IAC5ByO,GAAOzL,EAAEhD,GAEN,GAAW,GAAPyO,GAAYA,GAAQ,GAAGnG,EAA3B,CAIA,IADA,IAAIyD,EAAQ,EACL0C,EAAO,GAAGnG,GACpBmG,GAAO,EACP1C,IAIG,IAAS/L,EAAI,EAAGA,EAAI,IAAKA,IAC5BgD,EAAEhD,KAAO+L,GAGV,SAAS+B,EAAc3D,EAAKnH,GAExB,IADA,IAAI2H,EAAM,EACD3K,EAAI,EAAGA,EAAI,IAAKA,IAC5B,GAAKgD,EAAEhD,GAGP,GAAI2K,EAAM,EACNA,SAIA,GAFAR,EAAIzJ,UAAUV,GAEVA,EAAI,GAAKgD,EAAEhD,EAAE,GAAK,EAAG,CAI5B,IAAK2K,EAAM3K,EAAE,EAAG2K,EAAI,KAAO3H,EAAE2H,GAAMA,KAEnCA,GAAO3K,EAAE,EAETmK,EAAIzJ,UAAUiK,GAIZR,EAAIzJ,UAAU,GAYlB,SAAS4M,EAAYxE,GACjB,IAAMgD,EAAShD,EAAItJ,OACf8M,EAAS,IAAInE,EAAS,GAAI,EAAG,KAG7BnF,EAAI,IAAIK,MAAM,MAjHtB,SAA2ByF,EAAK9F,GAC5B,IAAK,IAAIhD,EAAI,EAAGA,EAAI,IAAKA,IAC5BgD,EAAEhD,GAAK,EAEJ,IAASA,EAAI,EAAGA,EAAI8I,EAAItJ,OAAQQ,IACnCgD,EAAE8F,EAAI9I,MA6GH8O,CAAkBhG,EAAK9F,GACvB,IAAI0K,EAAW7M,KAAKkM,KAAKlM,KAAK8M,KAAK7B,IAC/B4B,EAAW,KAClBA,EAAW,IACRE,EAAsB5K,EAAG0K,GAnB7B,SAA2BvD,EAAKnH,GAC5B8K,EAAc3D,EAAKnH,GAEnB,IAAK,IAAIhD,EAAI,EAAGA,EAAI,IAAKA,IACxBgD,EAAEhD,IACFmK,EAAIC,WAAWpH,EAAEhD,IAelB+O,CAAkBzC,EAAQtJ,GAC1B4K,EAAsB5K,EAAG,IAGzB,IAAIE,EAAI,IAAIG,MAAM,KAClBH,EAAE,GAAK,EACP,IAAK,IAAIlD,EAAI,EAAGA,EAAI,IAAKA,IAC5BkD,EAAElD,GAAKkD,EAAElD,EAAE,GAAKgD,EAAEhD,EAAE,GAGjB,IAAIsD,EAAI,IAAID,MAAM,GAClB,IAASrD,EAAI,EAAGA,EAAI,EAAGA,IAC1BsD,EAAEtD,GAjqBQ,MAoqBP,IAAImO,EAAW,IAAIhG,EAAS,GAAY,KAAP2D,EAAY,KAAM,EAAW,KAAPA,EAAY,KAAM,GAGzE,IAAS9L,EAAI8L,EAAO,EAAG9L,GAAK,EAAGA,IAClCsD,EAAEtD,EAAE,GAAKmJ,EAAW7F,EAAEtD,EAAE,GAAImO,EAAUjL,EAAE4F,EAAI9I,IAAKgD,EAAE8F,EAAI9I,IAAK,IAEzD,IAASA,EAAI,EAAGA,GAAK,EAAGA,IAC3BgJ,EAAa1F,EAAEtD,GAAImO,GAKhB,OAAO7O,EAAOsN,OAAO,CAACN,EAAOpN,IAAIU,MAAM,EAAG0M,EAAO7M,KAChD0O,EAASjP,IAAIU,MAAMuO,EAAS1O,IAAK0O,EAAS3O,SAC3C8M,EAAO7M,IAAM0O,EAAS3O,OAAS2O,EAAS1O,KAgS5CT,EAAOC,QAAU,CAAE+P,OAtmBnB,SAAgBlG,GAEZ,OAAOuB,EADM,IAAIlC,EAASW,GACM,IAomBTmB,Y,kHCpgCrBgF,EAAa7G,EAAQ,MACrBD,EAAWC,EAAQ,MACnB8G,EAAY9G,EAAQ,MACpB+G,EAAQ/G,EAAQ,MAQhBgH,EAAe,IAErBpQ,EAAOC,QAAP,+EACI,SAAO6J,GAEV,OADAzJ,KAAKkB,OAAS,IAAI4H,EAASW,GACpBzJ,KAAKgQ,aAAahQ,KAAKkB,UAH/B,0BAMI,SAAaA,GAAiB,IAAT+J,EAAS,uDAAH,EAC1BgF,EAAQjQ,KAAKkB,OAAON,WAZJ,GAadqP,IACFhF,EAAQjL,KAAKkB,OAAOsK,aACxB,IAAI0E,EAAQjF,EAERE,EApBgB,EAoBR8E,EAGZ,GArBoB,EAqBhBA,EACA,OAAOjQ,KAAKmQ,aAAanQ,KAAKkB,OAAQ+J,GAG1C,GAAIgF,EAAQF,EAAY,CACpB,IAAIjE,EADgB,EAEP9L,KAAKoQ,eAAepQ,KAAKkB,QAFlB,SAEnB4K,EAFmB,KAEhBoE,EAFgB,KAMxB,GA7BoB,GA6BhBD,EACA,IAAI5C,EAAOrN,KAAKqQ,UAAUrQ,KAAKkB,OAAQgP,QAGtC,GApCe,EAoCXD,EACD5C,EAAOrN,KAAKsQ,UAAUtQ,KAAKkB,OAAQgP,QACpC,GAlCa,GAkCTD,EACH5C,EAAOlC,EACZnL,KAAKuQ,WAAWvQ,KAAKkB,OAAQgP,GAC7BlQ,KAAKwQ,WAAWxQ,KAAKkB,OAAQgP,QAExB7C,EAAOlC,EACZnL,KAAKyQ,QAAQzQ,KAAKkB,OAAQgP,GAC1BlQ,KAAK0Q,QAAQ1Q,KAAKkB,OAAQgP,GAO7B,OAHID,EAAQF,IACR1C,EAAOrN,KAAK2Q,WAAWtD,EAAMvB,EAAGb,IAE7BoC,IA7CR,oBAgDI,SAAO5D,EAAKwG,GAOf,GANAjQ,KAAKkB,OAAS,IAAI4H,EAAS,GAAI,EAAc,IAAXW,EAAItJ,OAAa,KAEnDH,KAAKkB,OAAOG,UAAU4O,GAxDF,GAyDdA,GACFjQ,KAAKkB,OAAO6J,WAAWtB,EAAItJ,QA3DX,EA6DhB8P,EACA,OAAOhQ,EAAOsN,OAAO,CAACvN,KAAKkB,OAAOrB,IAAIU,MAAM,EAAGP,KAAKkB,OAAOd,KAC1DJ,KAAK4Q,aAAa5Q,KAAKkB,OAAQuI,EAAKwG,GAAO,KAEhD,IAIIzC,EAJArC,EAnEgB,EAmER8E,EACRC,EAAQzG,EAAItJ,OAIhB,GAAI8P,EAAQF,EAAZ,OAC8B/P,KAAK6Q,WAAWpH,GAD9C,SACK+D,EADL,KACgB/D,EADhB,KACqByG,EADrB,KAQA,OAJID,EAAQF,GACR/P,KAAKkB,OAAO4P,YAAYtD,GAxER,GA2EhByC,EACO9E,EACRnL,KAAK+Q,WAAWtH,EAAKyG,EAAOlQ,KAAKkB,QACjClB,KAAKgR,WAAWvH,EAAKyG,EAAOlQ,KAAKkB,QAEzBiK,EACRnL,KAAKiR,QAAQxH,EAAKyG,EAAOlQ,KAAKkB,QAC9BlB,KAAKkR,QAAQzH,EAAKyG,EAAOlQ,KAAKkB,UA/ElC,qBAqFI,SAAQA,EAAQ+J,GACnB,IAAIgC,EAAS,IAAIhN,EAAOC,YAAY+K,GAEhCkG,EAAUjQ,EAAON,WACN,GAAXuQ,IACAA,EAAU,KAEd,IAAIC,EAAa,IAAIvB,EAAUsB,GAE3BE,EAAK,IAAIzB,EAAW1O,GACxBmQ,EAAGC,iBAAiBpQ,GAEpB,IAAK,IAAIP,EAAI,EAAGA,EAAIsK,EAAOtK,IACvBsM,EAAOtM,GAAKyQ,EAAWG,YAAYrQ,EAAQmQ,GAE/C,OAAOpE,IApGR,qBAuGI,SAAQxD,EAAK+H,EAAM1G,GAGtB,IADA,IAAIqG,EAAU,EACLxQ,EAAI,EAAGA,EAAI6Q,EAAM7Q,IAClBwQ,EAAU1H,EAAI9I,KACrBwQ,EAAU1H,EAAI9I,IACfwQ,IAEA,IAAIC,EAAa,IAAIvB,EAAUsB,GAC/BrG,EAAIzJ,UAAU8P,GACd,IAAIE,EAAK,IAAIzB,EAAW9E,GAExB,IAASnK,EAAI,EAAGA,EAAI6Q,EAAM7Q,IACtByQ,EAAWK,YAAY3G,EAAKuG,EAAI5H,EAAI9I,IAGxC,OAFA0Q,EAAGK,kBAAkB5G,GAEdA,EAAIjL,IAAIU,MAAM,EAAGuK,EAAI1K,OAvH7B,qBA6HI,SAAQc,EAAQ+J,GACnB,IAAIgC,EAAS,IAAIhN,EAAOC,YAAY+K,GAEhCkG,EAAUjQ,EAAON,WACN,GAAXuQ,IACAA,EAAU,KAGd,IADA,IAAIC,EAAa,IAAIpN,MAAMmN,GAClBxQ,EAAI,EAAGA,EAAIwQ,EAASxQ,IACzByQ,EAAWzQ,GAAK,IAAIkP,EAAUsB,GAElC,IAAIE,EAAK,IAAIzB,EAAW1O,GACxBmQ,EAAGC,iBAAiBpQ,GAEpB,IAAI2M,EAAO,EACX,IAASlN,EAAI,EAAGA,EAAIsK,EAAOtK,IACvBsM,EAAOtM,GAAKyQ,EAAWvD,GAAM0D,YAAYrQ,EAAQmQ,GACjDxD,EAAOZ,EAAOtM,GAGlB,OAAOsM,IAjJR,qBAoJI,SAAQxD,EAAK+H,EAAM1G,GAGtB,IADA,IAAIqG,EAAU,EACLxQ,EAAI,EAAGA,EAAI6Q,EAAM7Q,IAClBwQ,EAAU1H,EAAI9I,KACrBwQ,EAAU1H,EAAI9I,IACfwQ,IAEA,IAAIC,EAAa,IAAIpN,MAAMmN,GAC3B,IAASxQ,EAAI,EAAGA,EAAIwQ,EAASxQ,IACzByQ,EAAWzQ,GAAK,IAAIkP,EAAUsB,GAClCrG,EAAIzJ,UAAU8P,GACd,IAAIE,EAAK,IAAIzB,EAAW9E,GAEpB+C,EAAO,EACX,IAASlN,EAAI,EAAGA,EAAI6Q,EAAM7Q,IACtByQ,EAAWvD,GAAM4D,YAAY3G,EAAKuG,EAAI5H,EAAI9I,IAC1CkN,EAAOpE,EAAI9I,GAIf,OAFA0Q,EAAGK,kBAAkB5G,GAEdA,EAAIjL,IAAIU,MAAM,EAAGuK,EAAI1K,OAzK7B,uBA8KI,SAAUc,EAAQ+J,GAErB,IAAIgC,EAAS,IAAIhN,EAAOC,YAAY+K,GAChChC,EAAO6G,EAAM6B,MAAMzQ,EAAOrB,IAAIU,MAAMW,EAAOd,MAC3CL,EAAO+P,EAAM8B,OAAO3I,GACpBuB,EAAI,EACR,EAAG,CACC,IAAIqH,EAAQ/B,EAAMgC,WAAW7I,EAAMlJ,IACrB,GAAV8R,IACA5R,EAAO2I,KAAKiJ,GAAOE,KAAK9E,EAAQzC,GAChCA,GAAKqH,EAAM1R,OAClBJ,GAAQ8R,EAAM1R,eAEG,GAAV0R,GAER,OAAO5E,IA7LR,uBAgMI,SAAU/L,EAAQ+J,MAhMtB,wBAwMI,SAAW/J,EAAQ+J,GACtB,IAAIgC,EAAS,IAAIhN,EAAOC,YAAY+K,GAEhCkG,EAAUjQ,EAAON,WACN,GAAXuQ,IACAA,EAAU,KAId,IAFA,IAAIa,EAAY,IAAInC,EAAUsB,GAC1Bc,EAAY,IAAIjO,MAAM,KACjBrD,EAAI,EAAGA,GAAK,IAAKA,IACtBsR,EAAUtR,GAAK,IAAIkP,EAAU,GAEjC,IAAIwB,EAAK,IAAIzB,EAAW1O,GACxBmQ,EAAGC,iBAAiBpQ,GAGpB,IADIP,EAAI,EACDA,EAAIsK,GAAO,CACdgC,EAAOtM,GAAKqR,EAAUT,YAAYrQ,EAAQmQ,GAI1C,IAHA,IAAIhH,EAAO4H,EAAUhF,EAAOtM,IAAI4Q,YAAYrQ,EAAQmQ,GAChDxE,EAAMxC,EACN6H,EAAO,IACI,GAAR7H,GACVA,EAAO4H,EAAUC,GAAMX,YAAYrQ,EAAQmQ,GAC3Ca,EAAO,IACPrF,GAAOxC,EAEJ,IAAK,IAAIG,EAAI,EAAGA,GAAKqC,EAAKrC,IAC7ByC,EAAOtM,EAAE6J,GAAKyC,EAAOtM,GAClBA,GAAKkM,EAAI,EAGb,OAAOI,IAvOR,wBA0OI,SAAWxD,EAAK+H,EAAM1G,GAGzB,IADA,IAAIqG,EAAU,EACLxQ,EAAI,EAAGA,EAAI6Q,EAAM7Q,IAClBwQ,EAAU1H,EAAI9I,KACrBwQ,EAAU1H,EAAI9I,IACfwQ,IAEA,IAAIa,EAAY,IAAInC,EAAUsB,GAC1Bc,EAAY,IAAIjO,MAAM,KAC1B,IAASrD,EAAI,EAAGA,GAAK,IAAKA,IACtBsR,EAAUtR,GAAK,IAAIkP,EAAU,GAEjC/E,EAAIzJ,UAAU8P,GACd,IAAIE,EAAK,IAAIzB,EAAW9E,GAGxB,IADInK,EAAI,EACDA,EAAI6Q,GAAM,CACbQ,EAAUP,YAAY3G,EAAKuG,EAAI5H,EAAI9I,IAEnC,IADA,IAAIkM,EAAM,EACHlM,EAAEkM,EAAM2E,GAAQ/H,EAAI9I,EAAEkM,IAAQpD,EAAI9I,IAC5CkM,IACGA,IAEA,IAAIqF,EAAOzI,EAAI9I,GACJ8I,EAAI9I,GACfA,GAAKkM,EAAI,EAET,IAAIxC,EAAOwC,GAAO,EAAI,EAAIA,EAI1B,IAHAoF,EAAUC,GAAMT,YAAY3G,EAAKuG,EAAIhH,GACrCwC,GAAOxC,EACP6H,EAAO,IACQ,GAAR7H,GACVA,EAAOwC,GAAO,EAAI,EAAIA,EACtBoF,EAAUC,GAAMT,YAAY3G,EAAKuG,EAAIhH,GACrC6H,EAAO,IACPrF,GAAOxC,EAKR,OAFAgH,EAAGK,kBAAkB5G,GAEdA,EAAIjL,IAAIU,MAAM,EAAGuK,EAAI1K,OAnR7B,wBAyRI,SAAWc,EAAQ+J,GACtB,IAAIgC,EAAS,IAAIhN,EAAOC,YAAY+K,GAEhCkG,EAAUjQ,EAAON,WACN,GAAXuQ,IACAA,EAAU,KAGd,IADA,IAAIa,EAAY,IAAIhO,MAAMmN,GACjBxQ,EAAI,EAAGA,EAAIwQ,EAASxQ,IACzBqR,EAAUrR,GAAK,IAAIkP,EAAUsB,GAEjC,IAAIc,EAAY,IAAIjO,MAAM,KAC1B,IAASrD,EAAI,EAAGA,GAAK,IAAKA,IACtBsR,EAAUtR,GAAK,IAAIkP,EAAU,GAEjC,IAAIwB,EAAK,IAAIzB,EAAW1O,GACxBmQ,EAAGC,iBAAiBpQ,GAEpB,IAAI2M,EAAO,EAEX,IADIlN,EAAI,EACDA,EAAIsK,GAAO,CACdgC,EAAOtM,GAAKqR,EAAUnE,GAAM0D,YAAYrQ,EAAQmQ,GAChDxD,EAAOZ,EAAOtM,GAId,IAHA,IAAI0J,EAAO4H,EAAUhF,EAAOtM,IAAI4Q,YAAYrQ,EAAQmQ,GAChDxE,EAAMxC,EACN6H,EAAO,IACI,GAAR7H,GACVA,EAAO4H,EAAUC,GAAMX,YAAYrQ,EAAQmQ,GAC3Ca,EAAO,IACPrF,GAAOxC,EAEJ,IAAK,IAAIG,EAAI,EAAGA,GAAKqC,EAAKrC,IAC7ByC,EAAOtM,EAAE6J,GAAKyC,EAAOtM,GAClBA,GAAKkM,EAAI,EAGb,OAAOI,IA7TR,wBAgUI,SAAWxD,EAAK+H,EAAM1G,GAGzB,IADA,IAAIqG,EAAU,EACLxQ,EAAI,EAAGA,EAAI6Q,EAAM7Q,IAClBwQ,EAAU1H,EAAI9I,KACrBwQ,EAAU1H,EAAI9I,IACfwQ,IAEA,IAAIa,EAAY,IAAIhO,MAAMmN,GAC1B,IAASxQ,EAAI,EAAGA,EAAIwQ,EAASxQ,IACzBqR,EAAUrR,GAAK,IAAIkP,EAAUsB,GACjC,IAAIc,EAAY,IAAIjO,MAAM,KAC1B,IAASrD,EAAI,EAAGA,GAAK,IAAKA,IACtBsR,EAAUtR,GAAK,IAAIkP,EAAU,GAEjC/E,EAAIzJ,UAAU8P,GAKd,IAJA,IAAIE,EAAK,IAAIzB,EAAW9E,GAGpB+C,GADAlN,EAAI,EACG,GACJA,EAAI6Q,GAAM,CACbQ,EAAUnE,GAAM4D,YAAY3G,EAAKuG,EAAI5H,EAAI9I,IAEzC,IADA,IAAIkM,EAAM,EACHlM,EAAEkM,EAAM2E,GAAQ/H,EAAI9I,EAAEkM,IAAQpD,EAAI9I,IAC5CkM,IACGA,IAEA,IAAIqF,EAAOzI,EAAI9I,GACfkN,EAAOpE,EAAI9I,GACXA,GAAKkM,EAAI,EAET,IAAIxC,EAAOwC,GAAO,EAAI,EAAIA,EAI1B,IAHAoF,EAAUC,GAAMT,YAAY3G,EAAKuG,EAAIhH,GACrCwC,GAAOxC,EACP6H,EAAO,IACQ,GAAR7H,GACVA,EAAOwC,GAAO,EAAI,EAAIA,EACtBoF,EAAUC,GAAMT,YAAY3G,EAAKuG,EAAIhH,GACrC6H,EAAO,IACPrF,GAAOxC,EAKR,OAFAgH,EAAGK,kBAAkB5G,GAEdA,EAAIjL,IAAIU,MAAM,EAAGuK,EAAI1K,OA5W7B,4BAiXI,SAAec,GAClBlB,KAAK6L,KAAQ3K,EAAON,WAGpB,IADA,IAAIuR,EAAI,IAAInO,MAAMhE,KAAK6L,MACdlL,EAAI,EAAGA,EAAIX,KAAK6L,KAAMlL,IAC3BwR,EAAExR,GAAKO,EAAON,WAIlB,MAAO,CAACuR,EAFIjR,EAAOsK,eAxXpB,wBA6XI,SAAW6B,EAAM8E,EAAG9R,GACvB,IAAIyK,EAAM,IAAI7K,EAAOC,YAAYG,GAEjC,GAAIL,KAAK6L,MAAQ,EAEb,IAAK,IAAIlL,EAAI,EAAGA,EAAIN,EAAKM,IAC5BmK,EAAInK,GAAKwR,EAAE,QAEL,GAAInS,KAAK6L,MAAQ,EAEf,CAAIlL,EAAI,EAAb,IAAK,IAAW6J,EAAI,EAAG7J,EAAIN,EAAKM,IAAK,CACxC,GAAIA,EAAI,GAAK,EACT,IAAIgB,EAAI0L,EAAK7C,KACjBM,EAAInK,GAAKwR,EAAM,EAAJxQ,GACXA,IAAM,QAGA,GAAI3B,KAAK6L,MAAQ,EAEpB,IAASlL,EAAI,EAAG6J,EAAI,EAAG7J,EAAIN,EAAKM,IAAK,CACxC,GAAIA,EAAI,GAAK,EACLgB,EAAI0L,EAAK7C,KACjBM,EAAInK,GAAKwR,EAAM,EAAJxQ,GACXA,IAAM,MAGA,MAAI3B,KAAK6L,MAAQ,IAWpB,OAAOwB,EATP,IAAS1M,EAAI,EAAG6J,EAAI,EAAG7J,EAAIN,EAAKM,IAAK,CACxC,GAAIA,EAAI,GAAK,EACLgB,EAAI0L,EAAK7C,KACjBM,EAAInK,GAAKwR,EAAM,GAAJxQ,GACXA,IAAM,GAQP,OAAOmJ,IAraR,sBAyaI,SAASrB,GAKZ,IAJA,IAAIvI,EAAS,IAAI4H,EAAS,GAAI,EAAG,MAG7BqJ,EAAI,IAAInO,MAAM,KACTrD,EAAI,EAAGA,EAAI8I,EAAItJ,OAAQQ,IAC5BwR,EAAE1I,EAAI9I,IAAM,EAGX,IAAIkL,EAAO,EAAhB,IAAmBlL,EAAI,EAAGA,EAAI,IAAKA,IAC3BwR,EAAExR,KACTwR,EAAExR,KAAOkL,GACV3K,EAAOG,UAAUwK,GAIjB,IAASlL,EAAI,EAAGA,EAAI,IAAKA,IACjBwR,EAAExR,KACTO,EAAOG,UAAUV,GACjBwR,EAAExR,MAIH,MAAO,CAACO,EAAQiR,EAAGtG,KAhcpB,wBAmcI,SAAWwB,GACd,IAAIM,EAAMwE,EAAGtG,EADO,EAEF7L,KAAKoS,SAAS/E,GAFZ,SAEnBM,EAFmB,KAEbwE,EAFa,KAEVtG,EAFU,KAIpB,IAAIxL,EAAMgN,EAAKlN,OACXQ,EAAI,EACR,GAAIkL,GAAQ,EAGR,OADA8B,EAAK5C,WAAW,GACT,CAAC4C,EAAM,IAAI1N,EAAOC,YAAY,GAAI,GAG7C,GAAI2L,GAAQ,EAAG,CAGX,IADA,IAAIf,EAAM,IAAI7K,EAAOC,YAAYsB,KAAKC,OAAOpB,EAAI,GAAG,IACpCmK,GAAP7J,EAAI,EAAO,GAAGA,IAAW,EAANN,GAAWM,GAAG,EAAG6J,IAChDM,EAAIN,IAAM2H,EAAE9E,EAAK1M,EAAE,KAAK,IACdwR,EAAE9E,EAAK1M,EAAE,KAAK,IACdwR,EAAE9E,EAAK1M,EAAE,KAAK,IACdwR,EAAE9E,EAAK1M,EAAE,KAAK,IACdwR,EAAE9E,EAAK1M,EAAE,KAAK,IACdwR,EAAE9E,EAAK1M,EAAE,KAAK,IACdwR,EAAE9E,EAAK1M,EAAE,KAAK,IACdwR,EAAE9E,EAAK1M,EAAE,KAAK,GACrB,GAAIA,EAAIN,EAAK,CAChByK,EAAIN,GAAK,EAET,IADA,IAAI7I,EAAI,EACDhB,EAAIN,GACPyK,EAAIN,IAAM2H,EAAE9E,EAAK1M,OAAOgB,EACxBA,IAEJ6I,IAIG,OADAmD,EAAK5C,WAAWP,GACT,CAACmD,EAAM7C,EAAKA,EAAI3K,QAG3B,GAAI0L,GAAQ,EAAG,CAGX,IADIf,EAAM,IAAI7K,EAAOC,YAAYsB,KAAKC,OAAOpB,EAAI,GAAG,IAC3CM,EAAI,EAAG6J,EAAI,EAAG7J,IAAW,EAANN,GAAWM,GAAG,EAAG6J,IAChDM,EAAIN,IAAM2H,EAAE9E,EAAK1M,EAAE,KAAK,IACdwR,EAAE9E,EAAK1M,EAAE,KAAK,IACdwR,EAAE9E,EAAK1M,EAAE,KAAK,IACdwR,EAAE9E,EAAK1M,EAAE,KAAK,GAErB,GAAIA,EAAIN,EAAK,CAChByK,EAAIN,GAAK,EAET,IADI7I,EAAI,EACDhB,EAAIN,GACPyK,EAAIN,IAAM2H,EAAE9E,EAAK1M,OAAOgB,EACxBA,GAAG,EAEP6I,IAIG,OADAmD,EAAK5C,WAAWP,GACT,CAACmD,EAAM7C,EAAKA,EAAI3K,QAG3B,GAAI0L,GAAQ,GAAI,CAGZ,IADIf,EAAM,IAAI7K,EAAOC,YAAYsB,KAAKC,OAAOpB,EAAI,GAAG,IAC3CM,EAAI,EAAG6J,EAAI,EAAG7J,IAAW,EAANN,GAAWM,GAAG,EAAG6J,IAChDM,EAAIN,IAAM2H,EAAE9E,EAAK1M,EAAE,KAAK,IACdwR,EAAE9E,EAAK1M,EAAE,KAAK,GAKrB,OAJIA,EAAIN,IACXyK,EAAIN,KAAO2H,EAAE9E,EAAK1M,OAEfgN,EAAK5C,WAAWP,GACT,CAACmD,EAAM7C,EAAKA,EAAI3K,QAK3B,OADAwN,EAAK5C,WAAWsC,EAAKlN,QACd,CAACwN,EAAMN,EAAMA,EAAKlN,UA/gB1B,0BAohBI,SAAagK,EAAKV,EAAKW,GACd,GAALA,IACPA,EAAI,GAKJ,IAFA,IAAIC,EAAO,IAAIrG,MAAMoG,GACjBE,EAAO,IAAItG,MAAMoG,GACZtJ,EAAI,EAAGA,EAAIsJ,EAAGtJ,IACnBwJ,EAAKxJ,GAAKU,KAAKC,MAAMgI,EAAItJ,OAASiK,IAAOX,EAAItJ,OAASiK,EAAKtJ,GAC3DuJ,EAAKvJ,GAAK,IAAIkD,MAAMsG,EAAKxJ,IAG7B,IAAK,IAAIyJ,EAAI,EAAG5J,EAAI,EAAGA,EAAI8I,EAAItJ,OAAQQ,GAAGyJ,EAAGG,IACzC,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAGI,IACtBD,EAAIF,EAAKG,GAAGrK,SACZkK,EAAKG,GAAGD,GAAKd,EAAI9I,EAAE6J,IAIxB,IAAIC,EAAO,IAAIzG,MAAMoG,GACjBM,EAAQ,EACZ,IAAS5J,EAAI,EAAGA,EAAIsJ,EAAGtJ,IAAK,CAExB,IAAI6J,EAAQ3K,KAAK4K,OAAOP,EAAKvJ,GAAI,GAC7B+J,EAAQ7K,KAAK4K,OAAOP,EAAKvJ,GAAI,GACjC2J,EAAK3J,GAAM+J,EAAM1K,OAASwK,EAAMxK,OAAU0K,EAAQF,EAClDD,GAASD,EAAK3J,GAAGX,OAIrB,IAAI2K,EAAM,IAAIhC,EAAS,GAAI,EAAG4B,EAAM,EAAEN,EAAI,GAC1CU,EAAIzJ,UAAU+I,GACd,IAAStJ,EAAI,EAAGA,EAAIsJ,EAAGtJ,IACnBgK,EAAIC,WAAWN,EAAK3J,GAAGX,QAE3B,IAASW,EAAI,EAAGA,EAAIsJ,EAAGtJ,IACnBgK,EAAI3J,UAAUsJ,EAAK3J,GAAI2J,EAAK3J,GAAGX,QAEnC,OAAO2K,EAAIjL,IAAIU,MAAM,EAAGuK,EAAIjL,IAAIO,OA1jBjC,0BA6jBI,SAAac,EAAQb,GAMxB,IALA,IAAI+J,EAAIlJ,EAAON,WAGX6K,EAAO,IAAIzH,MAAMoG,GACjBE,EAAO,IAAItG,MAAMoG,GACZI,EAAI,EAAGA,EAAIJ,EAAGI,IACnBiB,EAAKjB,GAAKtJ,EAAOsK,YAGrB,IAAIE,EAAI,IAAI1H,MAAMoG,GAClB,IAASI,EAAI,EAAGA,EAAIJ,EAAGI,IACnBF,EAAKE,GAAKhJ,KAAKC,MAAMpB,EAAM+J,IAAO/J,EAAM+J,EAAKI,GAC7CkB,EAAElB,GAAKxK,KAAKgQ,aAAa9O,EAAQoJ,EAAKE,IAI1C,IAAIM,EAAM,IAAI7K,EAAOC,YAAYG,GACjC,IAASmK,EAAI,EAAGA,EAAIJ,EAAGI,IACnB,IAAK,IAAI7J,EAAI,EAAGA,EAAI2J,EAAKE,GAAI7J,IAChCmK,EAAInK,EAAEyJ,EAAII,GAAKkB,EAAElB,GAAG7J,GAIrB,OAAOmK,IArlBR,uBA0lBI,SAAU5J,EAAQb,GAErB,IADA,IAAIyK,EAAM,IAAI7K,EAAOC,YAAYG,GACxBM,EAAI,EAAGA,EAAIN,EAAKM,IACrBmK,EAAInK,GAAKO,EAAON,WAEpB,OAAOkK,MA/lBR,O,oFCHAnL,EAAOC,QAAP,wBACI,WAAY6J,GAAK,UACpBzJ,KAAKqS,IAAQ,EACbrS,KAAKsS,MAAQ,WACbtS,KAAKuS,KAAQ,EACbvS,KAAKwS,MAAQ,EACbxS,KAAKyS,MAAQ,EACbzS,KAAKyF,MAAQ,EAPd,0CAUI,SAAiBgE,GACpB,IAAK,IAAI9I,EAAI,EAAGA,EAAI,EAAGA,IACnBX,KAAKuS,MAAQvS,KAAKuS,MAAQ,GAAK9I,EAAI7I,WACvCZ,KAAKuS,MAAQ,WACbvS,KAAKuS,QAAU,IAdhB,+BAiBI,SAAkBG,GAGrB,OAFA1S,KAAKsS,MAAQ9Q,KAAKC,MAAMzB,KAAKsS,MAAQI,GAE9BlR,KAAKC,MAAMzB,KAAKuS,KAAOvS,KAAKsS,SApBpC,yBA0BI,SAAY7I,EAAKkJ,EAASC,EAAUF,GAOvC,IAHA1S,KAAKuS,MAASI,EAAU3S,KAAKsS,MAC7BtS,KAAKsS,OAASM,EAEP5S,KAAKsS,MAAS,GAAG,IACpBtS,KAAKsS,OAAS,IACdtS,KAAKuS,KAAkB,IAAVvS,KAAKuS,KAAW9I,EAAI7I,aAnCtC,2BAuCI,SAAcgJ,GAWjB,GAAI5J,KAAKqS,IAAM,WAAarS,KAAKyS,MAAO,CAKpC,IAHA7I,EAAIvI,UAAUrB,KAAKyF,MAAQzF,KAAKyS,OAGzBzS,KAAKwS,OACf5I,EAAIvI,UAAUrB,KAAKyS,MAAM,GACzBzS,KAAKwS,QAIFxS,KAAKyF,MAAQzF,KAAKqS,MAAQ,GAC1BrS,KAAKyS,MAAQ,OAEbzS,KAAKwS,QAETxS,KAAKqS,MAAQ,EACbrS,KAAKqS,OAAS,IAnEf,yBAsEI,SAAYzI,EAAK+I,EAASC,EAAUF,GACvC,IAAIG,EAAU7S,KAAKqS,IAenB,IAdArS,KAAKsS,MAAS9Q,KAAKC,MAAMzB,KAAKsS,MAAQI,GACtC1S,KAAKqS,KAASM,EAAU3S,KAAKsS,MAC7BtS,KAAKqS,OAAS,EACdrS,KAAKsS,OAASM,EAKV5S,KAAKqS,IAAMQ,IACO,GAAd7S,KAAKyS,OAAYK,QAAQC,IAAI,yBACjC/S,KAAKyS,MAAQ,GAIVzS,KAAKsS,MAAS,GAAG,IACpBtS,KAAKsS,OAAS,IACdtS,KAAKgT,cAAcpJ,KAxFxB,+BA4FI,SAAkBA,GACrB,IAAK,IAAIjJ,EAAI,EAAGA,EAAI,EAAGA,IACnBX,KAAKgT,cAAcpJ,OA9FxB,M,2DCHAjK,EAAOC,QAAP,wBACI,aAA2B,IAAfuR,EAAe,uDAAL,IAAK,UAC9BnR,KAAKiT,WAAa9B,EAClBnR,KAAKmR,QAAUA,EAAQ,EACvBnR,KAAKkT,EAAI,IAAIlP,MACbhE,KAAK2D,EAAI,IAAIK,MAEb,IAAK,IAAIrD,EAAI,EAAGA,GAAKX,KAAKmR,QAASxQ,IAC/BX,KAAKkT,EAAEvS,GAAKA,EACZX,KAAK2D,EAAEhD,GAAK,EATjB,qCAaI,SAAY8I,EAAK4H,GAOpB,IALA,IAAIhN,EAAOgN,EAAG8B,kBAAkBnT,KAAKiT,YAGjCG,EAAM,EACN7I,EAAI,EACD6I,EAAMpT,KAAK2D,EAAE4G,IAAMlG,GACtB+O,GAAOpT,KAAK2D,EAAE4G,KAOlB8G,EAAGgC,YAAY5J,EAAK2J,EAAKpT,KAAK2D,EAAE4G,GAAIvK,KAAKiT,YAGzCjT,KAAK2D,EAAE4G,IAjCS,GAkChBvK,KAAKiT,YAlCW,GAmCZjT,KAAKiT,WApCQ,OAqCbjT,KAAKsT,mBAIT,IAAI5O,EAAM1E,KAAKkT,EAAE3I,GACjB,GAAIA,EAAI,GAAKvK,KAAK2D,EAAE4G,GAAKvK,KAAK2D,EAAE4G,EAAE,GAAI,CAClC,IAAIgJ,EAAMvT,KAAK2D,EAAE4G,GACjBvK,KAAK2D,EAAE4G,GAAKvK,KAAK2D,EAAE4G,EAAE,GACrBvK,KAAK2D,EAAE4G,EAAE,GAAKgJ,EAEdA,EAAMvT,KAAKkT,EAAE3I,GACbvK,KAAKkT,EAAE3I,GAAKvK,KAAKkT,EAAE3I,EAAE,GACrBvK,KAAKkT,EAAE3I,EAAE,GAAKgJ,EAGlB,OAAO7O,IAjDR,8BAoDI,WAEH1E,KAAKiT,WAAa,EAClB,IAAK,IAAItS,EAAI,EAAGA,GAAKX,KAAKmR,QAASxQ,IAC/BX,KAAK2D,EAAEhD,IAAMa,KAAKC,MAAMzB,KAAK2D,EAAEhD,GAAK,GACpCX,KAAKiT,YAAcjT,KAAK2D,EAAEhD,KAzD/B,yBA6DI,SAAYiJ,EAAKyH,EAAI3M,GAGxB,IADA,IAAI0O,EAAM,EACD7I,EAAI,EAAGvK,KAAKkT,EAAE3I,IAAM7F,EAAK6F,IAC9B6I,GAAOpT,KAAK2D,EAAE4G,GAGlB8G,EAAGmC,YAAY5J,EAAKwJ,EAAKpT,KAAK2D,EAAE4G,GAAIvK,KAAKiT,YAGzCjT,KAAK2D,EAAE4G,IAzES,GA0EhBvK,KAAKiT,YA1EW,GA2EZjT,KAAKiT,WA5EQ,OA6EbjT,KAAKsT,mBAGL5O,EAAM1E,KAAKkT,EAAE3I,GACjB,GAAIA,EAAI,GAAKvK,KAAK2D,EAAE4G,GAAKvK,KAAK2D,EAAE4G,EAAE,GAAI,CAClC,IAAIgJ,EAAMvT,KAAK2D,EAAE4G,GACjBvK,KAAK2D,EAAE4G,GAAKvK,KAAK2D,EAAE4G,EAAE,GACrBvK,KAAK2D,EAAE4G,EAAE,GAAKgJ,EAEdA,EAAMvT,KAAKkT,EAAE3I,GACbvK,KAAKkT,EAAE3I,GAAKvK,KAAKkT,EAAE3I,EAAE,GACrBvK,KAAKkT,EAAE3I,EAAE,GAAKgJ,OArFnB,M,mBCxCA,IAAIE,EAAU,CAEZC,KAAM,CAEJC,cAAe,SAAS1S,GACtB,OAAOwS,EAAQG,IAAID,cAAcE,SAASC,mBAAmB7S,MAI/D8S,cAAe,SAASC,GACtB,OAAOC,mBAAmBC,OAAOT,EAAQG,IAAIG,cAAcC,OAK/DJ,IAAK,CAEHD,cAAe,SAAS1S,GACtB,IAAK,IAAI+S,EAAQ,GAAIrT,EAAI,EAAGA,EAAIM,EAAId,OAAQQ,IAC1CqT,EAAMG,KAAyB,IAApBlT,EAAID,WAAWL,IAC5B,OAAOqT,GAITD,cAAe,SAASC,GACtB,IAAK,IAAI/S,EAAM,GAAIN,EAAI,EAAGA,EAAIqT,EAAM7T,OAAQQ,IAC1CM,EAAIkT,KAAK1T,OAAOC,aAAasT,EAAMrT,KACrC,OAAOM,EAAImT,KAAK,OAKtBzU,EAAOC,QAAU6T,G,kCChCjB,qFAYA,SAASY,EAAKC,EAAUC,EAAWC,GACjC,GAAIA,EACF,OAAOA,EAET,GAAIF,EACF,OAbJ,SAAiBG,GACf,MAA+BC,IAAInS,MAAMkS,GAAjCE,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,SAClB,MAAiB,UAAbD,EACK,IAAIE,IAAUhB,SAASe,IAEzB,IAAIE,IAAWL,GAQbM,CAAQT,GAEjB,GAAIC,EACF,OAAO,IAAIM,IAAUN,GAEvB,MAAM,IAAIS,MAAM,uD,0JCnBGF,E,WACnB,WAAYL,GAAM,+BAChB,KAAKQ,SAAW,EAChB,KAAKP,IAAMD,EACX,KAAKhP,MAAQ,IAAIyP,IAAY,CAC3BC,MAAO,SAAC/Q,EAAOjE,GAAR,OAAmB,EAAKiV,OAAOhR,EAAOjE,M,iFAIjD,WAAa8U,EAAU9U,GAAvB,oFACQkV,EAAU,GACZlV,EAASmV,IACXD,EAAQ/C,MAAR,gBAAyB2C,EAAzB,YAAqCA,EAAW9U,GACvCA,IAAWmV,KAAyB,IAAbL,IAChCI,EAAQ/C,MAAR,gBAAyB2C,EAAzB,MALJ,SAOyBE,IAAM,KAAKT,IAAK,CACrC7R,OAAQ,MACRwS,UACAE,SAAU,SACVC,KAAM,SAXV,WAcyB,OAPjBC,EAPR,QAccC,QAA+B,IAAbT,IACR,MAApBQ,EAASC,OAfb,6BAiBuBzV,EAjBvB,SAiByCwV,EAASE,cAjBlD,0BAiBUC,EAjBV,KAiB8BhN,KAjB9B,iBAoBUiN,EAAY,WAAWC,KAAKL,EAASJ,QAAQxQ,IAAI,mBACzC,KACZ,KAAKkR,MAAQ,CAAEhW,KAAMiW,SAASH,EAAU,GAAI,MAtBlD,kBAyBWD,GAzBX,cA2BQ,IAAIZ,MAAJ,eAAkBS,EAASC,OAA3B,qBAA8C,KAAKhB,MA3B3D,iD,2EA8BA,SAAK7S,GAAmD,IAA3CG,EAA2C,uDAAlC,EAAG7B,EAA+B,uDAAtBmV,IAAUL,EAAY,uDAAD,EACjDgB,EAAehB,EAKnB,OAJqB,OAAjBgB,IACFA,EAAe,KAAKhB,SACpB,KAAKA,UAAY9U,GAEZ,KAAKsF,MAAMZ,IAAIhD,EAAQG,EAAQ7B,EAAQ8U,K,6DAGhD,oGACyBE,IAAM,KAAKT,IAAK,CACrC7R,OAAQ,MACR0S,SAAU,SACVC,KAAM,SAJV,cACQC,EADR,YAMSxV,EANT,SAM2BwV,EAASE,cANpC,iDAMgB/M,KANhB,iE,+GASA,uFACO,KAAKmN,MADZ,uBAEUlW,EAAMI,EAAOC,YAAY,IAFnC,SAGU,KAAKgW,KAAKrW,EAAK,EAAG,GAAI,GAHhC,UAIS,KAAKkW,MAJd,sBAKY,IAAIf,MAAJ,8CAAiD,KAAKN,MALlE,gCAQS,KAAKqB,OARd,gD,iXC3CmBI,E,WAanB,WAAYC,GAAI,oBACd,KAAKC,KAAOhC,YAAK+B,EAAK1B,IAAK0B,EAAKE,KAAMF,EAAKG,YAC3C,KAAKC,mBAAoB,EACzB,KAAKC,+BAAiCL,EAAKM,SAC3C,KAAKpR,QAAU,CACbqR,kBAA4C,IAA1BP,EAAKO,iBACvBC,eAA8BhT,IAAnBwS,EAAKQ,UAA0BR,EAAKQ,UAAY,KAO7D,KAAKC,aAAe,IAAIC,IAAI,CAC1BvR,QAAS,KAAKD,QAAQsR,Y,4CAI1B,WACE,OAAI,KAAKP,KAAKU,SACL,KAAKV,KAAKU,SAEf,KAAKV,KAAK3B,IACL,KAAK2B,KAAK3B,IAGZ,gB,kBAIT,SAAK7S,EAAQG,EAAQ7B,EAAQ8U,GAC3B,OAAO,KAAKoB,KAAKH,KAAKrU,EAAQG,EAAQ7B,EAAQ8U,K,kBAIhD,WACE,OAAO,KAAKoB,KAAKW,S,kEAInB,6FACQC,EAAYhX,EAAOC,YAAYgX,IAAyBC,WADhE,SAEQ,KAAKd,KAAKH,KAAKe,EAAW,EAAGC,IAAyBC,UAAW,GAFzE,UAIkC,KAD1BC,EAAaF,IAAyB9U,OAAOG,MAAM0U,GAAWlV,QACrDsV,cAAkD,IAA5BD,EAAWC,aAJlD,sBAKU,IAAIC,IAAJ,uBACYF,EAAWC,aADvB,mBALV,gCASSD,GATT,gD,uHAaA,4GAC+B,KAAKG,iBAAiB,GADrD,UACQC,EADR,6BAGU,IAAI7S,IAAmB,+BAHjC,uBAM4B6S,EAAeC,gBAN3C,uBAMUC,EANV,EAMUA,QAEFC,EAAeD,EAAQ7W,YAAY,GACvB,EAIZ+W,EAAOF,EAAQG,SAAS,OAJZ,IAI2CF,GAC7D,KAAK/F,OAASgG,EAdhB,kBAeSE,YAAgBF,IAfzB,iD,wHAkBA,8FACQ,KAAKG,eADb,gCAES,KAAKnG,QAFd,gD,4HAMA,sGACiC,KAAKoG,gBADtC,uBACUX,EADV,EACUA,aADV,kBAESY,YAAkBZ,IAF3B,gD,2HAKA,WAAuBa,GAAvB,yGAC+B,KAAKD,oBADpC,cACQE,EADR,OAEMlD,EAAWkD,EAAeC,mBAAmBjB,UAFnD,SAGmC,KAAKd,KAAKW,OAH7C,gBAGgBqB,EAHhB,EAGUtY,KACAuY,EAAyBH,EAAzBG,qBAIC3X,EAAI,EARf,aAQkBA,GAAKuX,GARvB,sBAWQjD,EAAWqD,EAAqBnB,UAAY,GAAKkB,GAXzD,+CAYazU,GAZb,eAeI2U,EAAmB,KAAKC,uBAAuBvD,GAfnD,UAgBgCsD,EAAiBE,YAhBjD,WAgBUC,EAhBV,8BAkBY,IAAI/T,IAAJ,oBACSuT,EADT,uBAlBZ,WA0Bc,IAANvX,EA1BR,iBA2BMsU,EAAWyD,EAAclW,aAChBgI,EAAI,EA5BnB,aA4BsBA,EAAIkO,EAAcC,WA5BxC,kCA6B4B,KAAKC,UAAU3D,GA7B3C,QA6Bc4D,EA7Bd,OA8BQ5D,EAAW4D,EAAMrW,aA9BzB,QA4BmDgI,GAAK,EA5BxD,gDAkCMyK,GAAYyD,EAAcjW,MAAQiW,EAAcvY,OAlCtD,QAQwCQ,GAAK,EAR7C,iDAsCS4X,GAtCT,iD,sHAyCA,WAAiBtD,EAAU9U,EAAQ2Y,EAAeC,GAAlD,gFACQvY,EAAIP,EAAOC,YAAYC,GAD/B,SAEQ,KAAKkW,KAAKH,KAAK1V,EAAG,EAAGL,EAAQ8U,GAFrC,WAGQ+D,EAAkBC,IAAMC,SAAS1Y,MACfsY,EAJ1B,sBAKU,IAAInU,IAAJ,0BACeoU,EADf,8BACgDD,EADhD,oCACyFE,IANnG,gD,gIAcA,oHAC+B,KAAKf,oBADpC,cACQE,EADR,gBAEmC,KAAK9B,KAAKW,OAF7C,gBAEgBqB,EAFhB,EAEUtY,KACAuY,EAAyBH,EAAzBG,qBAEJa,EAAiB,EACjBlE,EAAWkD,EAAeC,mBAAmBjB,UANnD,aAOSlC,EAAWqD,EAAqBnB,UAAY,EAAIkB,GAPzD,kCAQgC,KAAKG,uBAC/BvD,GACAwD,YAVN,WAQUC,EARV,+DAiB2B,IAAnBS,EAjBR,iBAkBMlE,EAAWyD,EAAclW,aAChBgI,EAAI,EAnBnB,aAmBsBA,EAAIkO,EAAcC,WAnBxC,kCAoB4B,KAAKC,UAAU3D,GApB3C,QAoBc4D,EApBd,OAqBQ5D,EAAW4D,EAAMrW,aArBzB,QAmBmDgI,GAAK,EAnBxD,gDAyBMyK,GAAYyD,EAAcjW,MAAQiW,EAAcvY,OAzBtD,QA2BIgZ,GAAkB,EA3BtB,iDA8BSA,GA9BT,iD,0FAiCA,SAAuBlE,GACrB,OAAO,IAAImE,IAAc,KAAMnE,K,oEAGjC,WAAsBA,GAAtB,+FAC+B,KAAKgD,oBADpC,cACQE,EADR,OAEUkB,EAAoBlB,EAApBkB,gBAFV,SAGmC,KAAKhD,KAAKW,OAH7C,mBAGgBqB,EAHhB,EAGUtY,OAEJkV,EAAWoE,EAAgBlC,WAAakB,GAL9C,+CAMWzU,GANX,eASQ/B,EAAS5B,EAAOC,YAAYmZ,EAAgBlC,WATpD,UAUQ,KAAKd,KAAKH,KAAKrU,EAAQ,EAAGwX,EAAgBlC,UAAWlC,GAV7D,iCAWS9S,YAAUN,EAAQwX,EAAgBjX,OAAQ,EAAG6S,IAXtD,iD,yHAcA,WACEqE,EACArE,GAFF,gGAGElV,EAHF,+BAGSuZ,EAAQnC,YACfoC,EAJF,wCAQI1X,EAAS0X,EARb,uCAUqC,KAAKlD,KAAKW,OAV/C,mBAUkBqB,EAVlB,EAUYtY,OACJkV,EAAWlV,GAAQsY,GAX3B,+CAYazU,GAZb,eAcI/B,EAAS5B,EAAOC,YAAYH,GAdhC,UAeU,KAAKsW,KAAKH,KAAKrU,EAAQ,EAAG9B,EAAMkV,GAf1C,YAiBQ5H,EAAOlL,YAAUN,EAAQyX,EAAQlX,OAAQ,EAAG6S,IACzCxS,QAAU1C,EAlBrB,uBAmBU,IAAI4E,IAAJ,6CACkC5E,EADlC,uCACqEsN,EAAK5K,QApBpF,iCAuBS4K,GAvBT,iD,kFA0BA,SAAYmM,EAAmBC,EAAaC,GAC1C,GAA0B,SAAtBF,EACa9Q,YAAM+Q,GACd1H,KAAK2H,QACP,GAA0B,UAAtBF,EAA+B,CACxC,IAAIvQ,EAAO6G,MAAM6B,MAAM8H,GACnB1Z,EAAO+P,MAAM8B,OAAO3I,GACpBuB,EAAI,EACR,EAAG,CACD,IAAIqH,EAAQ/B,MAAMgC,WAAW7I,EAAMlJ,IACrB,GAAV8R,IACF5R,EAAO2I,KAAKiJ,GAAOE,KAAK2H,EAAclP,GACtCA,GAAKqH,EAAM1R,OACXJ,GAAQ8R,EAAM1R,eAEC,GAAV0R,QACJ,GAA0B,SAAtB2H,EACTG,YAAeF,EAAaC,QAGvB,GAA0B,aAAtBF,EACTI,IAAUC,iBAAiBJ,EAAaC,QACnC,GAA0B,UAAtBF,EACTI,IAAUE,iBAAiBL,EAAaC,QACnC,GAA0B,YAAtBF,EACTI,IAAUG,mBAAmBN,EAAaC,OACrC,IAA0B,SAAtBF,EAGT,MAAM,IAAIlC,IAAJ,UACDkC,EADC,uCAFNI,IAAUI,gBAAgBP,EAAaC,M,8DAQ3C,WAAgBzE,GAAhB,qGACiC,KAAK+C,gBADtC,uBACUX,EADV,EACUA,aADV,SAE+B,KAAKY,oBAFpC,cAEQE,EAFR,gBAGsB,KAAK8B,gBAAgBhF,GAH3C,UAGQ4D,EAHR,OAIQqB,EAAuBrB,EAAMrW,aACnCqW,EAAMsB,gBAAkBtB,EAAMrW,aAExB4X,EAAmBna,EAAOC,YAAY2Y,EAAMwB,kBAElB,QAA5BxB,EAAMW,kBATZ,wBAUUc,EAAiBra,EAAOC,YAAY2Y,EAAM0B,gBAVpD,UAWU,KAAKrE,KACToE,EACA,EACAzB,EAAM0B,eACNL,GAfN,QAkBI,KAAKM,YACH3B,EAAMW,kBACNc,EACAF,GArBN,yCAwBU,KAAKlE,KACTkE,EACA,EACAvB,EAAMwB,iBACNH,GA5BN,WAgCErB,EAAMnB,QAAU0C,IAEZ/C,GAAgB,GAlCtB,kCAoCsB,KAAKoD,cACrBtC,EAAeuC,eACfR,EAAuBrB,EAAM0B,gBAtCnC,WAoCUI,EApCV,OAwCI9B,EAAMI,MAAQ0B,EAAI1B,OAGd,KAAKzC,kBA3Cb,kCA4CY,KAAKoE,WACT3F,EACA4D,EAAMpW,MAAQoW,EAAM0B,eACpB1B,EAAMI,MACN,cAhDR,QAqDIJ,EAAMrW,aAAemY,EAAInY,aACzBqW,EAAMpW,MACJoW,EAAM0B,eAAiBpC,EAAeuC,eAAevD,UAvD3D,wBAyDI0B,EAAMrW,aAAe0X,EAAuBrB,EAAM0B,eAClD1B,EAAMpW,MAAQoW,EAAM0B,eA1DxB,iCA6DS1B,GA7DT,iD,8DAiEF,+CACGgC,MAAM,KACNC,SAAQ,YAAM,OAAIpY,YAAYyT,EAAUtT,Q,+KC3O3C,SAAiCkY,EACPpS,EACAmC,GAKxB,IAFA,IAAMkQ,EAAI,IAAIC,IAASnX,WACjBoX,EAAO,IAAIlX,MAAM,KACdrD,EAAI,EAAGA,EAAIua,EAAK/a,OAAQQ,GAAK,EACpCua,EAAKva,GAAK,IAAIsa,IAASzW,OAOzB,OAJA2W,YAAYxS,EAAOqS,EAAGE,GAEtBE,YAAIzS,EAAOqS,EAAGE,EAAMpQ,GAEbA,EAGT,SAAiCuQ,EACR1S,EACAsE,GAGvB,IADA,IAAM+N,EAAI,IAAIhX,MAAM,KACXrD,EAAI,EAAGA,EAAIqa,EAAE7a,OAAQQ,GAAK,EACjCqa,EAAEra,GAAK,IAAIsa,IAASnX,WAGtB,IADA,IAAwCoX,EAAO,IAAIlX,MAAM,KAChDrD,EAAI,EAAGA,EAAIua,EAAK/a,OAAQQ,GAAK,EAAG,CACvCua,EAAKva,GAAK,IAAIqD,MAAM,KACpB,IAAK,IAAIwG,EAAI,EAAGA,EAAI0Q,EAAKva,GAAGR,OAAQqK,GAAK,EACvC0Q,EAAKva,GAAG6J,GAAK,IAAIyQ,IAASzW,OAO9B,OAJA8W,YAAY3S,EAAOqS,EAAGE,GAEtBK,YAAI5S,EAAOsE,EAAQ+N,EAAGE,GAEfjO,E,IAIHuO,E,WACJ,WAAY5F,GAAoC,IAAxB6F,EAAwB,uDAAD,EAAC,oBAC9C,KAAKC,QAAU9F,EACf,KAAK+F,UAAYF,EACjB,KAAKtb,OAASyV,EAAWzV,O,uCAG3B,WACE,IAAMK,EAAI,KAAKkb,QAAQ,KAAKC,WAE5B,OADA,KAAKA,WAAa,EACXnb,I,qBAGT,WACE,OAAO,KAAKqE,Q,uBAGd,SAAUoQ,GACR,OAAO,KAAKyG,QAAQzG,K,sBAGtB,WACE,OAAO,KAAK0G,Y,iBAGd,SAAIC,GAGF,OAFA,KAAKF,QAAQ,KAAKC,WAAaC,EAC/B,KAAKD,WAAa,EACXC,I,mBAGT,SAAM3G,EAAU2G,GAEd,OADA,KAAKF,QAAQzG,GAAY2G,EAClBA,I,yBAGT,SAAYxb,GAEV,OADA,KAAKub,UAAYvb,EACVA,I,oBAGT,WACE,IAAMO,EAAI,KAAK+a,QAAQ7a,YAAY,KAAK8a,WAExC,OADA,KAAKA,WAAa,EACXhb,I,uBAGT,WACE,OAAO,KAAK+a,QAAQvb,OAAS,KAAKwb,c,KAKxB,SAAUE,EACtBpC,EACAC,GACwB,IAAxB+B,EAAwB,uDAAD,EAEvB,GAA2B,IAAvBhC,EAAYtZ,OAEd,OADAuZ,EAAaoC,KAAK,GACXpC,EAGT,IAAM/Q,EAAQ,IAAI6S,EAAW/B,EAAagC,GAGpCtQ,EAAQxC,EAAM9D,MACpB,GAAc,IAAVsG,GAAyB,IAAVA,EACjB,MAAM,IAAIxG,IAAJ,6BAA6CwG,IAGrD,IAAgB4Q,EAAYpT,EAAMqT,SAClC,GAAID,IAAcpT,EAAMsT,YAtNQ,EAuN9B,MAAM,IAAItX,IAAmB,2BAG/B,IAAgBuX,EAAavT,EAAMqT,SAC7B/O,EAAS,IAAIuO,EAAW9B,GAAgBzZ,EAAOC,YAAYgc,IAGjE,GAAIjP,EAAO9M,OAAS+b,EAClB,MAAM,IAAIvX,IAAJ,yCAC8BuX,EAD9B,YAKR,OAAQ/Q,GACN,KAAK,EACH,OAAO4P,EAAqBpS,EAAOsE,GAErC,KAAK,EACH,OAAOoO,EAAqB1S,EAAOsE,GAErC,QACE,MAAM,IAAItI,IAAJ,8BAA8CwG,Q,2DCtP1D,qGAKA,SAASgR,EAAOpa,GACd,IAAKA,EACH,MAAM,IAAI4C,IAAmB,oBAI3B,SAAUwW,EACGiB,EACSC,EACKnB,GAG/B,IAAI5P,EAAM,EACNf,EAAI,EACJC,EAAe,IAAX4R,EAAGvX,MACX,GACuB,MAAjBwX,EAAQtY,GAAGyG,KACb6R,EAAQtY,GAAGyG,GAAK,IAAIyQ,IAASvX,IAE/B2Y,EAAQtY,GAAGyG,GAAG7G,EAAe,IAAXyY,EAAGvX,MACjBwX,EAAQtY,GAAGyG,GAAG7G,GAAK,MACrB0Y,EAAQtY,GAAGyG,GAAG7G,IAAK,IACnB0Y,EAAQtY,GAAGyG,GAAG7G,GAAwB,IAAlB0Y,EAAQtY,GAAGyG,GAAG7G,IAAY,EAAiB,IAAXyY,EAAGvX,OAEzDwX,EAAQtY,GAAGyG,GAAG3G,EAAI0G,EAElB0Q,IAASxW,WAAWyW,EAAK1Q,GAAI6R,EAAQtY,GAAGyG,GAAG3G,EAAGwY,EAAQtY,GAAGyG,GAAG7G,GAGvD0Y,EAAQpY,IACXoY,EAAQpY,EAAI,IAAID,MAAMoB,MAExBiX,EAAQpY,EAAE6X,KAAKtR,EAAGD,EAAGA,EAAI8R,EAAQtY,GAAGyG,GAAG7G,GAEvC4G,GAAK8R,EAAQtY,GAAGyG,GAAG7G,EAEP,IAAR2H,GAAad,EAAI,KAAO,IAAO4R,EAAGE,UAAUF,EAAGnH,cACjDzK,EAAe,IAAX4R,EAAGvX,MACPyG,EAAiB,IAAX8Q,EAAGvX,OACQ,IAARyG,GACTA,GAAO,EACPd,GAAK,GAELA,EAAe,IAAX4R,EAAGvX,YAEI,IAAN2F,GAET2R,EAAO5R,EAAInF,KAGP,SAAUkW,EACGc,EACYpB,EACIE,GAEjC,IAAIqB,EAAO,EACP5b,EAAI,IAAOyb,EAAGvX,MAClB,EAAG,CACD,IAAI2X,EAAO,EACPjS,EAAI,EACJC,EAAI,IAAO4R,EAAGvX,MACN,MAARmW,EAAEra,KACJqa,EAAEra,GAAK,IAAIsa,IAASnX,YAEtB,GACoB,MAAdkX,EAAEra,GAAGoD,GAAGyG,KACVwQ,EAAEra,GAAGoD,GAAGyG,GAAK,IAAIyQ,IAASvX,IAE5BsX,EAAEra,GAAGoD,GAAGyG,GAAG7G,EAAI,IAAOyY,EAAGvX,MACrBmW,EAAEra,GAAGoD,GAAGyG,GAAG7G,GAAK,MAClBqX,EAAEra,GAAGoD,GAAGyG,GAAG7G,IAAK,IAChBqX,EAAEra,GAAGoD,GAAGyG,GAAG7G,GAAqB,IAAfqX,EAAEra,GAAGoD,GAAGyG,GAAG7G,IAAY,EAAM,IAAOyY,EAAGvX,OAE1DmW,EAAEra,GAAGoD,GAAGyG,GAAG3G,EAAI0G,EAEM,IAAjByQ,EAAEra,GAAGoD,GAAGyG,GAAG7G,IACbqX,EAAEra,GAAGoD,GAAGyG,GAAG7G,EAAIyB,KAGC,MAAd8V,EAAKva,GAAG6J,KACV0Q,EAAKva,GAAG6J,GAAK,IAAIyQ,IAASwB,eAG5BxB,IAASxW,WAAWyW,EAAKva,GAAG6J,GAAIwQ,EAAEra,GAAGoD,GAAGyG,GAAG3G,EAAGmX,EAAEra,GAAGoD,GAAGyG,GAAG7G,GAG3C,MAAVqX,EAAEra,GAAGsD,IACP+W,EAAEra,GAAGsD,EAAI,IAAID,MAAMoB,MAErB4V,EAAEra,GAAGsD,EAAE6X,KAAKtR,EAAGD,EAAGA,EAAIyQ,EAAEra,GAAGoD,GAAGyG,GAAG7G,GAGjCwY,GADA5R,GAAKyQ,EAAEra,GAAGoD,GAAGyG,GAAG7G,IACJyB,KAEC,IAAToX,GAAchS,EAAI,KAAO,IAAO4R,EAAGE,UAAUF,EAAGnH,cAClDzK,EAAI,IAAO4R,EAAGvX,MACd2X,EAAO,IAAOJ,EAAGvX,OACC,IAAT2X,GACTA,GAAQ,EACRhS,GAAK,GAELA,EAAI,IAAO4R,EAAGvX,YAEH,IAAN2F,GAEI,IAAT+R,GAAc5b,EAAI,KAAO,IAAOyb,EAAGE,UAAUF,EAAGnH,cAClDtU,EAAI,IAAOyb,EAAGvX,MACd0X,EAAO,IAAOH,EAAGvX,OACC,IAAT0X,GACTA,GAAQ,EACR5b,GAAK,GAELA,EAAI,IAAOyb,EAAGvX,YAEH,IAANlE,K,kCCvHX,mEAKc,SAAUkb,EACLlT,EACSqS,EACFE,EACPpQ,GASjB,IAPA,IA8Be/J,EA9BX2b,EAAQ/T,EAAMqT,SACdW,EAAQhU,EAAMqT,SACdY,EAAQjU,EAAMqT,SACda,EAAQlU,EAAMqT,SAEFE,EAAapR,EAAImR,YACjBa,GAAyB,EAAbZ,EACnBvb,EAAI,EAAGA,EAAImc,EAAWnc,GAAK,EAAG,CACrC,IAAiBoc,EAAK/B,EAAE/W,EAAEgX,IAASpW,IAAI6X,EAAOvX,MAC7B6X,EAAKhC,EAAE/W,EAAEgX,IAASpW,IAAI8X,EAAOxX,MAC7B8X,EAAKjC,EAAE/W,EAAEgX,IAASpW,IAAI+X,EAAOzX,MAC7B+X,EAAKlC,EAAE/W,EAAEgX,IAASpW,IAAIgY,EAAO1X,MAE9C2F,EAAIqS,MAAMxc,EAAGoc,GACbjS,EAAIqS,MAAMxc,EAAI,EAAGqc,GACjBlS,EAAIqS,MAAMxc,EAAI,EAAGsc,GACjBnS,EAAIqS,MAAMxc,EAAI,EAAGuc,GAEjBR,EAAQzB,IAASrW,kBAAkB8X,EAAOxB,EAAK,IAAO6B,GAAK5X,KAC3DwX,EAAQ1B,IAASrW,kBAAkB+X,EAAOzB,EAAK,IAAO8B,GAAK7X,KAC3DyX,EAAQ3B,IAASrW,kBAAkBgY,EAAO1B,EAAK,IAAO+B,GAAK9X,KAC3D0X,EAAQ5B,IAASrW,kBAAkBiY,EAAO3B,EAAK,IAAOgC,GAAK/X,KAE3DuX,EAAQzB,IAAS/V,YAAYwX,EAAO/T,GACpCgU,EAAQ1B,IAAS/V,YAAYyX,EAAOhU,GACpCiU,EAAQ3B,IAAS/V,YAAY0X,EAAOjU,GACpCkU,EAAQ5B,IAAS/V,YAAY2X,EAAOlU,GAKtC,OAFAmC,EAAIsS,YAAYN,GAEK,EAAbZ,GACN,KAAK,EACH,MACF,KAAK,EACHnb,EAAIia,EAAE/W,EAAEgX,IAASpW,IAAI6X,EAAOvX,MAC5B8V,IAASnW,cAAc4X,EAAO/T,EAAOuS,EAAK,IAAOna,GAAIoE,KACrD2F,EAAIuS,IAAItc,GACR,MAEF,KAAK,EACHA,EAAIia,EAAE/W,EAAEgX,IAASpW,IAAI6X,EAAOvX,MAC5B8V,IAASnW,cAAc4X,EAAO/T,EAAOuS,EAAK,IAAOna,GAAIoE,KACrD2F,EAAIuS,IAAItc,GAERA,EAAIia,EAAE/W,EAAEgX,IAASpW,IAAI8X,EAAOxX,MAC5B8V,IAASnW,cAAc6X,EAAOhU,EAAOuS,EAAK,IAAOna,GAAIoE,KACrD2F,EAAIuS,IAAItc,GACR,MAEF,KAAK,EACHA,EAAIia,EAAE/W,EAAEgX,IAASpW,IAAI6X,EAAOvX,MAC5B8V,IAASnW,cAAc4X,EAAO/T,EAAOuS,EAAK,IAAOna,GAAIoE,KACrD2F,EAAIuS,IAAItc,GAERA,EAAIia,EAAE/W,EAAEgX,IAASpW,IAAI8X,EAAOxX,MAC5B8V,IAASnW,cAAc6X,EAAOhU,EAAOuS,EAAK,IAAOna,GAAIoE,KACrD2F,EAAIuS,IAAItc,GAERA,EAAIia,EAAE/W,EAAEgX,IAASpW,IAAI+X,EAAOzX,MAC5B8V,IAASnW,cAAc8X,EAAOjU,EAAOuS,EAAK,IAAOna,GAAIoE,KACrD2F,EAAIuS,IAAItc,GACR,MAEF,QACE,MAAM,IAAI4D,IACR,wDAINmG,EAAIsS,YAAY,K,kCCjFlB,0DAGc,SAAUvB,EACLlT,EACAsE,EACW+N,EACFE,GAiB1B,IAfA,IAAgBgB,EAAajP,EAAOgP,YAChCS,EAAQ/T,EAAMqT,SACdW,EAAQhU,EAAMqT,SACdY,EAAQjU,EAAMqT,SACdsB,EAAQ3U,EAAMqT,SAEFuB,EAAOrB,GAAc,EACvBsB,EAAK,EACLC,EAAKF,EACLG,EAAK,EAAIH,EACTI,EAAK,EAAIJ,EACTK,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,EACZP,EAAKD,EAAMC,GAAM,EAAGC,GAAM,EAAGC,GAAM,EAAGC,GAAM,EAAG,CACpD,IAAgBZ,EAAK,IAAO/B,EAAE4C,GAAI3Z,EAAEgX,IAASpW,IAAI6X,EAAOvX,MACxC6X,EAAK,IAAOhC,EAAE6C,GAAI5Z,EAAEgX,IAASpW,IAAI8X,EAAOxX,MACxC8X,EAAK,IAAOjC,EAAE8C,GAAI7Z,EAAEgX,IAASpW,IAAI+X,EAAOzX,MACxC6Y,EAAK,IAAOhD,EAAE+C,GAAI9Z,EAAEgX,IAASpW,IAAIyY,EAAOnY,MAExD8H,EAAOkQ,MAAMK,EAAIT,GACjB9P,EAAOkQ,MAAMM,EAAIT,GACjB/P,EAAOkQ,MAAMO,EAAIT,GACjBhQ,EAAOkQ,MAAMQ,EAAIK,GAEjBtB,EAAQzB,IAASrW,kBAAkB8X,EAAOxB,EAAK0C,GAAIb,GAAK5X,KACxDwX,EAAQ1B,IAASrW,kBAAkB+X,EAAOzB,EAAK2C,GAAIb,GAAK7X,KACxDyX,EAAQ3B,IAASrW,kBAAkBgY,EAAO1B,EAAK4C,GAAIb,GAAK9X,KACxDmY,EAAQrC,IAASrW,kBAAkB0Y,EAAOpC,EAAK6C,GAAIC,GAAK7Y,KAExDuX,EAAQzB,IAAS/V,YAAYwX,EAAO/T,GACpCgU,EAAQ1B,IAAS/V,YAAYyX,EAAOhU,GACpCiU,EAAQ3B,IAAS/V,YAAY0X,EAAOjU,GACpC2U,EAAQrC,IAAS/V,YAAYoY,EAAO3U,GAEpCiV,EAAKb,EACLc,EAAKb,EACLc,EAAKb,EACLc,EAAKC,EAIP,KAAOL,EAAKzB,EAAYyB,GAAM,EAAG,CAC/B,IAAgBK,EAAK,IAAOhD,EAAE+C,GAAI9Z,EAAEgX,IAASpW,IAAIyY,EAAOnY,MACxD8H,EAAOkQ,MAAMQ,EAAIK,GACjBV,EAAQrC,IAASnW,cAAcwY,EAAO3U,EAAOuS,EAAK6C,GAAIC,GAAK7Y,KAC3D4Y,EAAKC,K,kCCxDT,iFAEMC,GAAa,IAAIC,UAASC,OAE1B/F,EAAqB,CACzBhW,QAAQ,IAAI8b,UACTE,OAAO,QAAS,CAAEje,OAAQ,IAC1Bke,MAAM,gBACNA,MAAM,gBACND,OAAO,SAAU,CAAEje,OAAQ,GAAIme,WAAW,IAC7CnH,UAAW,IAGPkC,EAAkB,CACtBjX,QAAQ,IAAI8b,UACTG,MAAM,oBAAqB,CAC1BE,UAAsC,YACpC,IAAM1b,EAAS,CACb,MACA,OACA,QACA,OACA,OACA,WACA,QACA,UACA,QACArC,GACF,IAAKqC,EACH,MAAM,IAAImS,MAAJ,oCAAuCxU,EAAvC,qBAER,OAAOqC,KAGVwb,MAAM,cAAe,CACpBE,UAAsC,YACpC,IAAMC,EAAO,CACX,cACA,qBACA,sBACA,wBACA,gBACA,aACAhe,GACF,IAAKge,EACH,MAAM,IAAIxJ,MAAJ,wCAA2CxU,IAEnD,OAAOge,KAGVL,KAAK,aACLA,KAAK,kBACLA,KAAK,oBACRhH,UAAW,IAGPuD,EAAiB,CACrBtY,QAAQ,IAAI8b,UAASO,OAAO,SAC5BtH,UAAW,GAgBPuH,GAAoB,IAAIR,UAASC,KAAK,QAAQtc,OAAO,OAAQ,CACjE1B,OAAQ,OACRoe,UAAsC,YACpC,SAASI,EAAWC,EAAaC,GAG/B,IAFA,IAAM5d,EAAMY,EAAOgW,SAAS,OAAQ+G,EAAaC,GAC3CC,EAAO,GACJne,EAAI,EAAGA,EAAIM,EAAId,OAAQQ,GAAK,EACnCme,EAAK3K,KAAKlT,EAAI8d,OAAOpe,EAAG,IAE1B,OAAOme,EAGT,IAEIne,EAFAqe,EAAU,GACVJ,EAAc,EAGlB,IAAKje,EAAI,EAAGA,EAAIkB,EAAO1B,OAAQQ,GAAK,EAC7BkB,EAAOlB,KACVqe,EAAQ7K,KAAKwK,EAAWC,EAAaje,IACrCie,EAAcje,EAAI,GAMtB,OAHIA,EAAIie,GACNI,EAAQ7K,KAAKwK,EAAWC,EAAaje,IAEhCqe,KAKLC,GAAkB,IAAIf,UAASG,MAAM,KAAM,CAC/CE,UAAsC,YAAG,QAAM3C,KAG3CsD,GAAsB,IAAIhB,UAC7BC,KAAK,WACLA,KAAK,YACLxM,MAAM,OAAQ,CACbxR,OAAQ,WACRqe,MAAM,IAAIN,UACPE,OAAO,MAAO,CACbje,OAAQ,EACRme,WAAW,IAGZa,OAAO,QAAS,CACfC,IAAK,MACLC,QAAS,CACPC,GAAIL,EACJM,GAAIN,EACJO,GAAIP,EACJQ,GAAIR,EACJS,GAAIT,EACJU,GAAIV,EACJW,IAAI,IAAI1B,UAASvM,MAAM,KAAM,CAAE6M,KAAM,QAASre,OAAQ,IACtD0f,IAAI,IAAI3B,UAAS4B,KAAK,KAAM,CAC1BtB,KAAME,EACNH,UAAsC,YAAI,OAAIlR,EAAK0S,aAO/D,SAASC,EAAU3S,GAEjB,IADA,IAAM4S,EAAM,GACHtf,EAAI,EAAGA,EAAI0M,EAAK0S,KAAK5f,OAAQQ,GAAK,EAAG,CAC5C,MAAuB0M,EAAK0S,KAAKpf,GAAzBiF,EAAR,EAAQA,IAAKC,EAAb,EAAaA,MACToa,EAAIra,IACNkN,QAAQoN,KAAR,wBAA8Bta,EAA9B,YAEFqa,EAAIra,GAAOC,EAEb,OAAOoa,EAGT,IAAME,EAAqB,CACzB/H,qBACAiB,kBACAqB,kBAII0F,EAAmB,CAGvBC,wBAHuB,SAGChJ,GACtB,IAAIF,EAAY,EACZ/U,GAAS,IAAI8b,UAASC,KAAK,cAC/BhH,GAAa,EAGTE,GAAgB,GAClBjV,EAASA,EAAOke,KAAK,iBACrBnJ,GAAa,GACa,IAAjBE,IACTjV,EAASA,EAAO+b,KAAK,iBACrBhH,GAAa,GAGf/U,EAASA,EACN+b,KAAK,aACLA,KAAK,iBACLxM,MAAM,aAAc,CACnB6M,KAAMP,EACN9d,OAAQ,kBAEZgX,GAAa,GAGTE,GAAgB,IAClBjV,EAASA,EAAOuP,MAAM,MAAO,CAAE6M,KAAM,QAASre,OAAQ,KACtDgX,GAAa,IAKf,MAAO,CAAE/U,SAAQ+U,UAFK,YAAa,OAAIA,EAA4B,EAAhBoJ,KAOrDC,sBAvCuB,SAuCDnJ,GACpB,IAAIjV,GAAS,IAAI8b,UACdC,KAAK,YACLA,KAAK,eACLA,KAAK,cACLA,KAAK,cACJhH,EAAY,GAEZE,GAAgB,GAClBjV,EAASA,EAAOke,KAAK,iBACrBnJ,GAAa,GACa,IAAjBE,IACTjV,EAASA,EAAO+b,KAAK,iBACrBhH,GAAa,GAGf/U,EAASA,EACN+b,KAAK,aACLA,KAAK,iBACLxM,MAAM,aAAc,CACnB6M,KAAMP,EACN9d,OAAQ,kBAETge,KAAK,kBACRhH,GAAa,GAGTE,GAAgB,IAClBjV,EAASA,EAAOuP,MAAM,MAAO,CAAE6M,KAAM,QAASre,OAAQ,KACtDgX,GAAa,IAKf,MAAO,CAAE/U,SAAQ+U,UAFK,YAAa,OAAIA,EAA4B,EAAhBoJ,KAKrDE,aA5EuB,SA4EVpJ,GA+BX,MAAO,CAAEjV,QA9BM,IAAI8b,UAChBwC,OAAO,gBACPvC,KAAK,WACLA,KAAK,mBACLgB,OAAO,aAAc,CACpBC,IAAK,UACLC,QAAS,CACP,EAAG,IAAInB,SACP,GAAG,IAAIA,UAASC,KAAK,kBACrB,GAAG,IAAID,UAASC,KAAK,UAAUA,KAAK,KAEpC,EAAGD,SAAO9Z,QACP+Z,KAAK,YACLxM,MAAM,UAAW,CAAExR,OAAQ,WAAYqe,KAAMP,IAC7CE,KAAK,cACLxM,MAAM,aAAc,CAAExR,OAAQ,aAAcqe,KAAMP,IACrD,EAAGC,SAAO9Z,QACP0b,KAAK,kBAAmB,CAAEtB,KAAM,iBAChCsB,KAAK,iBAAkB,CAAEtB,KAAM,iBAElC,GAAG,IAAIN,UACJG,MAAM,YACNhH,EAAe,EAAI,OAAS,OAAO,kBACtC,GAAG,IAAI6G,UAASC,KAAK,UAAUA,KAAK,UACpC,GAAG,IAAID,UAASC,KAAK,UAAUA,KAAK,KACpC,GAAG,IAAID,UAASC,KAAK,UAAUA,KAAK,SACpC,GAAG,IAAID,UAASC,KAAK,eAO7BwC,0BA9GuB,SA8GGtJ,GACxB,OAAO,IAAI6G,UACRC,KAAK,WACLA,KAAK,YACLxM,MAAM,OAAQ,CACbxR,OAAQ,WACRqe,MAAM,IAAIN,UACPE,OAAO,MAAO,CAAEje,OAAQ,EAAGme,WAAW,IACtCwB,KAAK,QAAS,CAAEtB,KAAM,KAAKiC,aAAapJ,GAAcjV,YAI/Dwe,mBA1HuB,SA0HJvJ,GACjB,OAAO,IAAI6G,UACRC,KAAK,WACLA,KAAK,YACLxM,MAAM,OAAQ,CACbxR,OAAQ,WACRqe,MAAM,IAAIN,UACPC,KAAK,MAAO,CACXI,UAAsC,YAAqB,OAEzD9d,OAAOC,aAAcmgB,GAAyB,GAAM,KACpDpgB,OAAOC,aAAcmgB,GAAyB,EAAK,KACnDpgB,OAAOC,aAAqC,IAAxBmgB,MAEvBf,KAAK,QAAS,CAAEtB,KAAM,KAAKiC,aAAapJ,GAAcjV,YAI/D0e,sBA5IuB,SA4IDzJ,GACpB,IAAIjV,EAAS,IAAI8b,SAiBjB,MAAO,CAAE9b,OAbTA,EAASA,EACN0d,KAAK,eAAgB,CACpBtB,KAAMU,EACNX,UAAWyB,IAEZF,KAAK,qBAAsB,CAC1BtB,KAAM,KAAKmC,0BAA0BtJ,GACrCkH,UAAWyB,IAEZF,KAAK,cAAe,CACnBtB,KAAM,KAAKoC,mBAAmBvJ,GAC9BkH,UAAWyB,MAKjB1H,qBAjKuB,SAiKFjB,GACnB,IAAIjV,GAAS,IAAI8b,UACd6C,MAAM,UACN5C,KAAK,YACLA,KAAK,eACLA,KAAK,iBACLA,KAAK,cACJhH,EAAY,GAmBhB,OAjBIE,GAAgB,GAClBjV,EAASA,EAAOke,KAAK,iBACrBnJ,GAAa,GACa,IAAjBE,IACTjV,EAASA,EAAO+b,KAAK,iBACrBhH,GAAa,GAGXE,EAAe,IACjBjV,EAASA,EAAOke,KAAK,YACrBnJ,GAAa,GAOR,CAAE/U,OALTA,EAASA,EACN+b,KAAK,aACLA,KAAK,gBAGShH,UAFjBA,GAAa,KAKf6J,qBA9LuB,SA8LF3J,GACnB,IAAIjV,GAAS,IAAI8b,UACdC,KAAK,gBAILxM,MAAM,YAAa,CAClB6M,MAAM,IAAIN,UAASC,OACnBhe,OAAQ,iBAGR8gB,EAAY,EAKhB,OAJI5J,GAAgB,IAClBjV,EAASA,EAAOqc,OAAO,SACvBwC,EAAY,GAEP,CACL7e,SACA+U,UAAW,YAAY,OAAI,EAAmB,EAAf+J,EAAmBD,MAKxD,SAAShJ,EAAkBZ,GACzB,IAAM8J,EAAUC,OAAOC,OAAO,GAAIlB,GAIlC,OAHAiB,OAAO9a,KAAK8Z,GAAkBtF,SAAQ,YACpCqG,EAAQG,GAAclB,EAAiBkB,GAAYjK,MAE9C8J,I,mCCvXT,YAyCA,IAAII,EAAUxY,EAAQ,MAClByY,EAAUzY,EAAQ,MAClB0Y,EAAU1Y,EAAQ,MAClB2Y,EAAU3Y,EAAQ,MAClB4Y,EAAU5Y,EAAQ,MAyBtBpJ,EAAOC,QAAU,CACfgiB,gBAxBF,SAAyBnI,EAAaC,GAClC6H,EAAK5R,OAAO8J,GAAa1H,KAAK2H,EAAc,EAAG,IAwBjDG,iBArBF,SAA0BJ,EAAaC,GACnC8H,EAAM7R,OAAO8J,GAAa1H,KAAK2H,EAAc,EAAG,IAqBlDI,iBAlBF,SAA0BL,EAAaC,GACnC+H,EAAM9R,OAAO8J,GAAa1H,KAAK2H,EAAc,EAAG,IAkBlDK,mBAfF,SAA4BN,EAAaC,GACrC,IAAImI,EAAS,IAAI7d,MACjB0d,EAAQ/R,OAAO8J,EAAaoI,GAAQ9P,KAAK2H,EAAc,EAAG,IAc5DM,gBAXF,SAAyBP,EAAaC,GAElC,IAAI5O,EAAM6W,EAAKhS,OAAO8J,EAAa,EAAG,MACtCxZ,EAAO2I,KAAKkC,EAAK,UAAUiH,KAAK2H,EAAc,EAAG,O,+CCnErD,YAiCA,IAAM5Q,EAAWC,EAAQ,MAOzB,SAASC,EAAsB/E,GAC3B,OAAW,KAAJA,EAGX,SAASiF,EAAsBrF,EAAGsF,GAK9B,IADA,IAAIrI,EAAI,EACDqI,GAAKtF,EAAE/C,EAAE,IACnBA,IAEG,OAAOA,EAGX,SAASsI,EAAavF,GAGlB,IAFA,IAAIyF,EAAM,IAAItF,MAAM,MAChBlD,EAAI,EACCqI,EAAI,EAAGA,EAAI,KAAQA,IAAK,CACpC,KAAOA,GAAKtF,EAAE/C,EAAE,IACZA,IACJwI,EAAIH,GAAKrI,EAEN,OAAOwI,EAGX,SAASC,EAAgBtF,EAAGlD,EAAGoI,GAC3B,OAAOA,GAAKlF,GAAK,KAAW,KAAJA,GAAalD,EAGzC,SAASyI,EAAWC,EAAKxF,GACrB,KAAOA,EAAK,GAAG,IAClBA,GAAKA,GAAK,GAAKwF,EAAI7I,WAEhB,OAAOqD,EASX,SAAS0F,EAAa1F,EAAG2F,GACrBA,EAAIC,aAAc5F,GAAK,GAAM,KAC7B2F,EAAIC,aAAc5F,GAAK,GAAM,KAC7B2F,EAAIC,aAAc5F,GAAM,EAAK,KAC7B2F,EAAIC,aAAc5F,GAAM,EAAK,KAkBjC,SAAS6F,EAAW7F,EAAG2F,EAAKxF,EAAOC,EAAM0F,GAIrC,OAFA9F,EAjBJ,SAAuBA,EAAG2F,EAAKvF,EAAM0F,GAGjC,IAFA,IAAIC,GAAW,GAAK,IAAOD,GAAe,GAAK1F,EAExCJ,GAAK+F,GACfJ,EAAIC,aAAiB,IAAJ5F,GACjBA,IAAM,EAEH,OAAOA,EAUHgG,CAAchG,EAAG2F,EAAKvF,EAAM0F,GAChC9F,GAAKzC,KAAKC,MAAMwC,EAAII,IAAS0F,GAAe9F,EAAII,EAAQD,EAqC5D,SAAS8K,EAAiBzF,EAAK9F,EAAGE,GAE9B,IAAK,IAAIlD,EAAI,EAAGA,EAAI,IAAKA,IAC5BgD,EAAEhD,GAAK,EAEJ,IAAI+D,EAAM+E,EAAI7I,WACVqO,EAAWvK,EACX4G,EAAM,EAGV,EAAG,CACN,IAAInC,EAAIM,EAAIqY,WACZne,EAAEe,GAAOyE,EACLmC,EAAM,GACNA,IACA5G,MAEAA,EAAM+E,EAAI7I,aACCqO,EAAS,IACvB3D,EAAM7B,EAAI7I,YAEXqO,EAAWvK,QACQ,GAAPA,GAGTb,EAAE,GAAK,EACP,IAASlD,EAAI,EAAGA,GAAK,IAAKA,IAC7BkD,EAAElD,EAAE,GAAKkD,EAAElD,GAAKgD,EAAEhD,GA2CnB,SAAS4N,EAAsB5K,GAG3B,IADA,IAAIyL,EAAM,EACDzO,EAAI,EAAGA,EAAI,IAAKA,IAC5ByO,GAAOzL,EAAEhD,GAGN,IAAM0I,EAAO,KACTgG,EAAQhG,EAAM+F,EAClB,EAAG,CACN,IAAIE,EAAU,EACVC,EAAU,EACVC,EAAS,EACbJ,EAAM,EACN,IAASzO,EAAI,EAAGA,EAAI,IAAKA,IACT,GAARgD,EAAEhD,KAGF2O,EAAU3L,EAAEhD,KACnB2O,EAAU3L,EAAEhD,GACZ4O,EAAU5O,GAGPgD,EAAEhD,GAAKa,KAAKC,MAAMkC,EAAEhD,GAAK0O,GACb,GAAR1L,EAAEhD,KACTgD,EAAEhD,GAAK,GAEJyO,GAAOzL,EAAEhD,IAITyO,EAAM/F,EAEN1F,EAAE4L,IAAYlG,EAAI+F,EACXA,EAAI/F,EAAM1F,EAAE4L,GAAS,GAAK5L,EAAE4L,GAAW,EAE9C5L,EAAE4L,IAAYH,EAAI/F,EACX+F,GAAO/F,IAEdgG,GAAgB,IAChBG,EAAS,SAEDA,GAGb,SAASE,EAAkB5E,EAAKnH,GAE5B,IADA,IAAI2H,EAAM,EACD3K,EAAI,EAAGA,EAAI,IAAKA,IAC5B,GAAKgD,EAAEhD,GAAP,CAIA,GAAI2K,EAAM,EACNA,SAIA,GAFAR,EAAIzJ,UAAUV,GAEVA,EAAI,GAAKgD,EAAEhD,EAAE,GAAK,EAAG,CAI5B,IAAK2K,EAAM3K,EAAE,EAAG2K,EAAI,KAAO3H,EAAE2H,GAAMA,KAEnCA,GAAO3K,EAAE,EAETmK,EAAIzJ,UAAUiK,GAIfR,EAAIiX,UAAUpe,EAAEhD,IAEbmK,EAAIzJ,UAAU,GAmRlB1B,EAAOC,QAAU,CAAE+P,OA9bnB,SAAgBlG,GACZ,IAAIvI,EAAS,IAAI4H,EAASW,GACtB0B,EAAQjK,EAAON,WAEfqK,GADQ/J,EAAO8L,aACP9L,EAAO8L,cAEnB,OAAa,GAAT7B,EAsDR,SAAqB1B,EAAKgD,GAEtB,IAAI9I,EAAI,IAAIK,MAAM,KACdH,EAAI,IAAIG,MAAM,KAClBkL,EAAiBzF,EAAK9F,EAAGE,GAOzB,IAJA,IAAIyF,EAAMF,EAAavF,GAGnBI,EAAI,IAAID,MAAM,GACTrD,EAAI,EAAGA,EAAI,EAAGA,IAC1BsD,EAAEtD,GAAK8I,EAAIuD,aAGR,IAAIC,EAAS,IAAIhN,EAAOC,YAAYuM,GACpC,IAAS9L,EAAI,EAAGA,EAAI8L,EAAQ9L,IAAK,CACpC,IAAIwO,EAAKxO,EAAE,EAEPG,EAAIwI,EADAN,EAAsB/E,EAAEkL,KAGhClC,EAAOtM,GAAKG,EACZmD,EAAEkL,GAAM5F,EAAgBtF,EAAEkL,GAAKtL,EAAE/C,GAAI6C,EAAE7C,IACvCmD,EAAEkL,GAAM3F,EAAWC,EAAKxF,EAAEkL,IAGvB,OAAOlC,EA/EHZ,CAAYnL,EAAQ+J,GAsP5B,SAAqBxB,EAAKgD,GAEtB,IAAI9I,EAAI,IAAIK,MAAM,KACdH,EAAI,IAAIG,MAAM,MAhCtB,SAA0ByF,EAAK9F,EAAGE,GAE9B,IAAK,IAAIlD,EAAI,EAAGA,EAAI,IAAKA,IAAK,CACjCgD,EAAEhD,GAAK,IAAIqD,MAAM,KACjBH,EAAElD,GAAK,IAAIqD,MAAM,KACjB,IAAK,IAAIwG,EAAI,EAAGA,EAAI,IAAKA,IACrB7G,EAAEhD,GAAG6J,GAAK,EAGX,IAAI9F,EAAM+E,EAAI7I,WACVqO,EAAWvK,EACX4G,EAAM,EAGV,GACH4D,EAAiBzF,EAAK9F,EAAEe,GAAMb,EAAEa,IAE5B4G,EAAM,GACNA,IACA5G,MAEAA,EAAM+E,EAAI7I,aACCqO,EAAS,IACvB3D,EAAM7B,EAAI7I,YAEXqO,EAAWvK,QACQ,GAAPA,GAOTqI,CAAiBtD,EAAK9F,EAAGE,GAIzB,IADA,IAAIyF,EAAM,IAAItF,MAAM,KACXrD,EAAI,EAAGA,EAAI,IAAKA,IAC5B2I,EAAI3I,GAAKyI,EAAavF,EAAElD,IAKrB,IAFA,IAAIsD,EAAI,IAAID,MAAM,GACdsI,EAAI,IAAItI,MAAM,GACTwG,EAAI,EAAGA,EAAI,EAAGA,IAC1BvG,EAAEuG,GAAKf,EAAIuD,aACXV,EAAE9B,GAAK,EAIJ,IAAIyC,EAAS,IAAIhN,EAAOC,YAAYuM,GAChCS,EAAU1L,KAAKC,MAAMgL,EAAO,GAChC,IAAS9L,EAAI,EAAGA,EAAIuM,EAASvM,IAChC,IAAS6J,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,IAAIrB,EAAIH,EAAsB/E,EAAEuG,IAG5B1J,EAAIwI,EAAIgD,EAAE9B,IAAIrB,GAElB8D,EAAOtM,EAAE6J,EAAE0C,GAAWpM,EACtBmD,EAAEuG,GAAKjB,EAAgBtF,EAAEuG,GAAI3G,EAAEyI,EAAE9B,IAAI1J,GAAI6C,EAAE2I,EAAE9B,IAAI1J,IACjDmD,EAAEuG,GAAKhB,EAAWC,EAAKxF,EAAEuG,IACzB8B,EAAE9B,GAAK1J,EAORH,GAAI,EACJ,KAAOA,EAAI8L,GAAQ,CAClBtD,EAAIH,EAAsB/E,EAAE,IAC5BnD,EAAIoI,EAAsBrF,EAAEyI,EAAE,IAAKnD,GACvC8D,EAAOtM,KAAOG,EACdmD,EAAE,GAAKsF,EAAgBtF,EAAE,GAAIJ,EAAEyI,EAAE,IAAIxL,GAAI6C,EAAE2I,EAAE,IAAIxL,IACjDmD,EAAE,GAAKuF,EAAWC,EAAKxF,EAAE,IACzBqI,EAAE,GAAKxL,EAGJ,OAAOmM,EArSHE,CAAYjM,EAAQ+J,IAqbDL,OAjb3B,SAAgBnB,EAAK0B,GAKjB,OAAa,GAATA,EA4JR,SAAqB1B,GACjB,IAAMgD,EAAShD,EAAItJ,OACf8M,EAAS,IAAInE,EAAS,GAAI,EAAG,KAEjCmE,EAAO5L,UAAU,GACjB4L,EAAO+U,YAAY,GACnB/U,EAAO+U,YAAY,GAGnB,IAAIre,EAAI,IAAIK,MAAM,MA3FtB,SAA2ByF,EAAK9F,GAC5B,IAAK,IAAIhD,EAAI,EAAGA,EAAI,IAAKA,IAC5BgD,EAAEhD,GAAK,EAEJ,IAASA,EAAI,EAAGA,EAAI8I,EAAItJ,OAAQQ,IACnCgD,EAAE8F,EAAI9I,OAuFH8O,CAAkBhG,EAAK9F,GACvB4K,EAAsB5K,GACtB+L,EAAkBzC,EAAQtJ,GAG1B,IAAIE,EAAI,IAAIG,MAAM,KAClBH,EAAE,GAAK,EACP,IAAK,IAAIlD,EAAI,EAAGA,EAAI,IAAKA,IAC5BkD,EAAElD,GAAKkD,EAAElD,EAAE,GAAKgD,EAAEhD,EAAE,GAGjB,IAAIsD,EAAI,IAAID,MAAM,GAClB,IAASrD,EAAI,EAAGA,EAAI,EAAGA,IAC1BsD,EAAEtD,GAxOQ,GAAG,GA0OV,IAAI8M,EAAQjM,KAAKC,MAAa,KAAPgL,EAAY,KAC/BqC,EAAW,IAAIhG,EAAS,GAAI2E,EAAOA,GAGvC,IAAS9M,EAAI8L,EAAO,EAAG9L,GAAK,EAAGA,IAClCsD,EAAEtD,EAAE,GAAKmJ,EAAW7F,EAAEtD,EAAE,GAAImO,EAAUjL,EAAE4F,EAAI9I,IAAKgD,EAAE8F,EAAI9I,IAAK,IAEzD,IAASA,EAAI,EAAGA,GAAK,EAAGA,IAC3BgJ,EAAa1F,EAAEtD,GAAImO,GAGhB,IAAImT,EAAWhV,EAAO7M,IAItB,OAHA6M,EAAOpN,IAAIyB,aAAa2gB,EAAS,GAAKnT,EAAS3O,OAAS2O,EAAS1O,KAAM,GACvE6M,EAAOpN,IAAIyB,aAAamL,EAAQ,GAEzBxM,EAAOsN,OAAO,CAACN,EAAOpN,IAAIU,MAAM,EAAG0M,EAAO7M,KAChD0O,EAASjP,IAAIU,MAAMuO,EAAS1O,IAAK0O,EAAS3O,SAC3C8M,EAAO7M,IAAM0O,EAAS3O,OAAS2O,EAAS1O,KArMpC6N,CAAYxE,GAwVpB,SAAqBA,GACjB,IAAMgD,EAAShD,EAAItJ,OACf8M,EAAS,IAAInE,EAAS,GAAI,EAAG,QAEjCmE,EAAO5L,UAAU,GACjB4L,EAAO+U,YAAY,GACnB/U,EAAO+U,YAAY,GAMnB,IAHA,IAAI7T,EAAK,IAAInK,MAAM,KACfL,EAAI,IAAIK,MAAM,KACdH,EAAI,IAAIG,MAAM,KACTrD,EAAI,EAAGA,EAAI,IAAKA,IAC5BgD,EAAEhD,GAAK,IAAIqD,MAAM,KACjBH,EAAElD,GAAK,IAAIqD,MAAM,MArElB,SAA2ByF,EAAK9F,EAAGwK,GAC/B,IAAK,IAAIxN,EAAI,EAAGA,EAAI,IAAKA,IAAK,CACjCwN,EAAGxN,GAAK,EACR,IAAK,IAAI6J,EAAI,EAAGA,EAAI,IAAKA,IACrB7G,EAAEhD,GAAG6J,GAAK,EAGX,IAAIqD,EAAO,EACX,IAASlN,EAAI,EAAGA,EAAI8I,EAAItJ,OAAQQ,IACnCwN,EAAG1E,EAAI9I,MACPgD,EAAEkK,GAAMpE,EAAI9I,MAEZkN,EAAOpE,EAAI9I,GAIRgD,EAAE,GAAG8F,EAAI,GAAGA,EAAItJ,QAAU,OAC1BwD,EAAE,GAAG8F,EAAI,GAAGA,EAAItJ,QAAU,OAC1BwD,EAAE,GAAG8F,EAAI,GAAGA,EAAItJ,QAAU,OAC1BgO,EAAG,IAAM,GAqDTC,CAAkB3E,EAAK9F,EAAGwK,GAlD9B,SAA+BxK,EAAGwK,GAC9B,IAAK,IAAIxN,EAAI,EAAGA,EAAI,IAAKA,IACxBwN,EAAGxN,IACH4N,EAAsB5K,EAAEhD,IAgDzB6N,CAAsB7K,EAAGwK,GA7C7B,SAA2BrD,EAAKnH,EAAGwK,GAI/B,IAHA,IAAI7C,EAAM,EAGD3K,EAAI,EAAGA,EAAI,IAAKA,IAC5B,GAAKwN,EAAGxN,GAAR,CAIA,GAAI2K,EAAM,EACNA,SAIA,GAFAR,EAAIzJ,UAAUV,GAEVA,EAAI,GAAKwN,EAAGxN,EAAE,GAAK,EAAG,CAC7B,IAAK2K,EAAM3K,EAAE,EAAG2K,EAAI,KAAO6C,EAAG7C,GAAMA,KAEpCA,GAAO3K,EAAE,EACTmK,EAAIzJ,UAAUiK,GAIfoE,EAAkB5E,EAAKnH,EAAEhD,IAEtBmK,EAAIzJ,UAAU,GAsBdsN,CAAkB1B,EAAQtJ,EAAGwK,GAG7B,IAASxN,EAAI,EAAGA,EAAI,IAAKA,IAC5B,GAAKwN,EAAGxN,GAAR,CAGAkD,EAAElD,GAAG,GAAK,EACV,IAAK,IAAI6J,EAAI,EAAGA,EAAI,IAAKA,IACrB3G,EAAElD,GAAG6J,GAAK3G,EAAElD,GAAG6J,EAAE,GAAK7G,EAAEhD,GAAG6J,EAAE,GAI9B,IAAIvG,EAAI,IAAID,MAAM,GACdsI,EAAI,IAAItI,MAAM,GAClB,IAASwG,EAAI,EAAGA,EAAI,EAAGA,IAC1BvG,EAAEuG,GAjbQ,GAAG,GAkbb8B,EAAE9B,GAAK,EAEJ,IAAIsE,EAAW,IAAIhG,EAAS,GAAI2D,EAAQA,GAGpCS,EAAU1L,KAAKC,MAAMgL,EAAO,GAC5BsC,EAAM,IAAI/K,MAAM,GAChB6J,EAAO,IAAI7J,MAAM,GACrB,IAASwG,EAAI,EAAGA,EAAI,EAAGA,IAC1BuE,EAAIvE,IAAMA,EAAE,GAAG0C,EAAU,EACzBW,EAAKrD,GAAKf,EAAIsF,EAAIvE,GAAG,GAIlBqD,EAAK,GAAKpE,EAAIgD,EAAO,GACrB,IAAS9L,EAAI8L,EAAO,EAAG9L,EAAI,EAAEuM,EAAQ,EAAGvM,IAC3CsD,EAAE,GAAK6F,EAAW7F,EAAE,GAAI6K,EAAUjL,EAAE4F,EAAI9I,IAAIkN,EAAK,IAAKlK,EAAE8F,EAAI9I,IAAIkN,EAAK,IAAK,IAC1EA,EAAK,GAAKpE,EAAI9I,GAIX,KAAOoO,EAAI,IAAM,GACpB,IAASvE,EAAI,EAAGA,GAAK,EAAGA,IAAK,CACzB,IAAI1J,EAAI2I,EAAIsF,EAAIvE,IAChBvG,EAAEuG,GAAKV,EAAW7F,EAAEuG,GAAIsE,EAAUjL,EAAE/C,GAAG+M,EAAKrD,IAAK7G,EAAE7C,GAAG+M,EAAKrD,IAAK,IAChEqD,EAAKrD,GAAK1J,EACViO,EAAIvE,KAIL,IAASA,EAAI,EAAGA,GAAK,EAAGA,IACpBvG,EAAEuG,GAAKV,EAAW7F,EAAEuG,GAAIsE,EAAUjL,EAAE,GAAGgK,EAAKrD,IAAK7G,EAAE,GAAGkK,EAAKrD,IAAK,IAGpE,IAAS7J,EAAI,EAAGA,GAAK,EAAGA,IAC3BgJ,EAAa1F,EAAEtD,GAAImO,GAGhB,IAAImT,EAAWhV,EAAO7M,IAItB,OAHA6M,EAAOpN,IAAIyB,aAAa2gB,EAAS,GAAKnT,EAAS3O,OAAS2O,EAAS1O,KAAM,GACvE6M,EAAOpN,IAAIyB,aAAamL,EAAQ,GAEzBxM,EAAOsN,OAAO,CAACN,EAAOpN,IAAIU,MAAM,EAAG0M,EAAO7M,KAChD0O,EAASjP,IAAIU,MAAMuO,EAAS1O,IAAK0O,EAAS3O,SAC3C8M,EAAO7M,IAAM0O,EAAS3O,OAAS2O,EAAS1O,KAtapC4O,CAAYvF,O,4CCxHpB,IAAIqG,EAAQ,CAEZA,MAAc,SAAUkE,GACpB,IAAIkO,EAAM,EACNC,EAAO,EACPC,EAAU,CAAC,EAAG,EAAM,EAAM,EAAM,GAAM,GAAM,GAAM,IAAM,KAC5D,OAAO,SAAU7V,GAEb,IADA,IAAIxK,EAAS,EACNwK,EAAI,GAAG,CACV,IAAI8V,EAAO,EAAIH,EACX3V,GAAK8V,GACLtgB,IAAWsgB,EACXtgB,GAAWqgB,EAAQC,GAAQrO,EAAMmO,KACjCD,EAAM,EACN3V,GAAK8V,IAELtgB,IAAWwK,EACXxK,IAAYiS,EAAMmO,GAASC,EAAQ7V,IAAO,EAAIA,EAAI2V,IAAW,EAAI3V,EAAI2V,EACrEA,GAAO3V,EACPA,EAAI,GAGZ,OAAOxK,IAIf+N,OAAe,SAAU7G,GACrB,IACIqZ,EAAKzQ,EADL9R,EAAO+P,EAAM8B,OAAO3I,GACRsZ,EAAS,GACrBC,EAAQ,EACZ,IAIkB,IAFd3Q,EAAQ/B,EAAMgC,WAAW7I,EAAMlJ,MAG3BwiB,EAAOpO,KAAKtC,GACZ2Q,GAAS3Q,EAAM4Q,mBAEJ,GAAV5Q,GACTyQ,EAAM,IAAII,WAAWF,GACrBA,EAAQ,EACR,IAAK,IAAI7hB,EAAI,EAAGA,EAAI4hB,EAAOpiB,SAAUQ,EACjCkR,EAAQ0Q,EAAO5hB,GACf2hB,EAAIxc,IAAI+L,EAAO2Q,GACfA,GAAS3Q,EAAM4Q,WAEnB,OAAOH,GAGXxS,OAAe,SAAU7G,GACrB,GAAmB,SAAfA,EAAK,IACL,KAAM,wBACV,IAAItI,EAAIsI,EAAK,GAAK,GAClB,GAAItI,EAAI,GAAKA,EAAI,EACb,KAAM,qBACV,OAAOA,GAMXmP,WAAmB,SAAU7G,EAAMlJ,EAAMM,GAQrC,IAPA,IAMIsiB,EAAU,IACLC,EAAI,GAAIjiB,EAAI,EAAGA,EAAI,EAAGA,IAC3BiiB,GAAK3Z,EAAK,GAAG4O,SAAS,IAC1B,GAAS,gBAAL+K,EACA,OAAQ,EACZ,GAAS,gBAALA,EACA,KAAM,0BAEV,GADA3Z,EAAK,IACDA,EAAK,GACL,KAAM,+BACV,IAAI4Z,EAAU5Z,EAAK,IACnB,GAAI4Z,EAAUF,EACV,KAAM,2CACV,IAAIG,EAAI7Z,EAAK,IACT8Z,EAAY,IAAIL,WAAW,KAC3BM,EAAW,EACf,IAAKriB,EAAI,EAAGA,EAAI,GAAIA,IAChB,GAAImiB,EAAK,GAAM,GAAKniB,EAAK,CACrB,IAAI+N,EAAIzF,EAAK,IACb,IAAKuB,EAAI,EAAGA,EAAI,GAAIA,IACZkE,EAAK,GAAM,GAAKlE,IAChBuY,EAAUC,KAAe,GAAKriB,EAAK6J,GAMnD,IAAIyY,EAAaha,EAAK,GACtB,GAAIga,EAAa,GAAKA,EAAa,EAC/B,KAAM,gBACV,IAAIC,EAAaja,EAAK,IACtB,GAAkB,GAAdia,EACA,KAAM,MACV,IAAIC,EAAY,GAChB,IAASxiB,EAAI,EAAGA,EAAIsiB,EAAYtiB,IAC5BwiB,EAAUxiB,GAAKA,EACnB,IAAIyiB,EAAY,IAAIV,WAAW,OAE/B,IAAS/hB,EAAI,EAAGA,EAAIuiB,EAAYviB,IAAK,CACjC,IAAK,IAAI6J,EAAI,EAAGvB,EAAK,GAAIuB,IACrB,GAAIA,GAAKyY,EACL,KAAM,uBACd,IAAII,EAAKF,EAAU3Y,GACnB2Y,EAAUG,OAAO9Y,EAAG,GACpB2Y,EAAUG,OAAO,EAAG,EAAGD,GACvBD,EAAUziB,GAAK0iB,EAGnB,IAAIE,EAAWP,EAAW,EACtBQ,EAAS,GACb,IAAShZ,EAAI,EAAGA,EAAIyY,EAAYzY,IAAK,CACjC,IAgBIiZ,EAAQC,EAQRC,EAxBAxjB,EAAS,IAAIuiB,WAxDH,KAyDVkB,EAAO,IAAIlB,WAAWmB,IAC1Bf,EAAI7Z,EAAK,GACT,IAAStI,EAAI,EAAGA,EAAI4iB,EAAU5iB,IAAK,CAC/B,OAAa,CACT,GAAImiB,EAAI,GAAKA,EA9DF,GA+DP,KAAM,kDACV,IAAK7Z,EAAK,GACN,MACCA,EAAK,GAGN6Z,IAFAA,IAIR3iB,EAAOQ,GAAKmiB,EAGhBW,EAASC,EAASvjB,EAAO,GACzB,IAASQ,EAAI,EAAGA,EAAI4iB,EAAU5iB,IACtBR,EAAOQ,GAAK+iB,EACZA,EAASvjB,EAAOQ,GACXR,EAAOQ,GAAK8iB,IACjBA,EAAStjB,EAAOQ,KAGxBgjB,EAAWH,EAAOhZ,GAAK,IACdsZ,QAAU,IAAIC,YAlFT,KAmFdJ,EAASK,MAAQ,IAAID,YAAYF,IACjCF,EAASM,KAAO,IAAIF,YAAYF,IAChCF,EAASF,OAASA,EAClBE,EAASD,OAASA,EAClB,IAAIO,EAAON,EAASM,KAAKC,SAAS,GAC9BF,EAAQL,EAASK,MAAME,SAAS,GAChCC,EAAK,EACT,IAASxjB,EAAI8iB,EAAQ9iB,GAAK+iB,EAAQ/iB,IAC9B,IAASmiB,EAAI,EAAGA,EAAIS,EAAUT,IACtB3iB,EAAO2iB,IAAMniB,IACbgjB,EAASG,QAAQK,KAAQrB,GACrC,IAAKniB,EAAI8iB,EAAQ9iB,GAAK+iB,EAAQ/iB,IAC1BijB,EAAKjjB,GAAKqjB,EAAMrjB,GAAK,EACzB,IAAKA,EAAI,EAAGA,EAAI4iB,EAAU5iB,IACtBijB,EAAKzjB,EAAOQ,MAEhB,IADAwjB,EAAKrB,EAAI,EACJniB,EAAI8iB,EAAQ9iB,EAAI+iB,EAAQ/iB,IACzBwjB,GAAMP,EAAKjjB,GACXqjB,EAAMrjB,GAAKwjB,EAAK,EAChBA,IAAO,EACPF,EAAKtjB,EAAI,GAAKwjB,GAAMrB,GAAKc,EAAKjjB,IAElCqjB,EAAMN,GAAUS,EAAKP,EAAKF,GAAU,EACpCO,EAAKR,GAAU,EAEnB,IAGIW,EAAQC,EAAiBC,EAHzBC,EAAY,IAAIR,YAAY,KAChC,IAASpjB,EAAI,EAAGA,EAAI,IAAKA,IACrBwiB,EAAUxiB,GAAKA,EAEnByjB,EAASC,EAAQd,EAAWe,EAAW,EAEvC,IADA,IAAIzkB,EAAM,IAAIkkB,YAAYpB,KACb,CACT,IAAMY,IAAa,CAEf,GADAA,EAAWiB,GACPF,GAAYpB,EACZ,KAAM,oCAEVe,GADAN,EAAWH,EAAOJ,EAAUkB,OACZL,KAAKC,SAAS,GAC9BF,EAAQL,EAASK,MAAME,SAAS,GAIpC,IADA1Z,EAAIvB,EADJtI,EAAIgjB,EAASF,UAEA,CACT,GAAI9iB,EAAIgjB,EAASD,OACb,KAAM,sBACV,GAAIlZ,GAAKwZ,EAAMrjB,GACX,MACJA,IACA6J,EAAKA,GAAK,EAAKvB,EAAK,GAGxB,IADAuB,GAAKyZ,EAAKtjB,IACF,GAAK6J,GAtIC,IAuIV,KAAM,gBACV,IAAIia,EAAUd,EAASG,QAAQtZ,GAC/B,GAxIc,GAwIVia,GAvIU,GAuIgBA,EAA9B,CAYA,GAAIL,EAAQ,CAER,GADAA,EAAS,EACLC,EAAQvB,GAAKH,EACb,KAAM,QAGV,IADA4B,EADAlB,EAAKN,EAAUI,EAAU,MACRL,EACVA,KACHjjB,EAAIwkB,KAAWhB,EAEvB,GAAIoB,EAAUzB,EACV,MACJ,GAAIqB,GAAS1B,EACT,KAAM,mCAEVU,EAAKF,EADLxiB,EAAI8jB,EAAU,GAEdtB,EAAUG,OAAO3iB,EAAG,GACpBwiB,EAAUG,OAAO,EAAG,EAAGD,GAEvBkB,EADAlB,EAAKN,EAAUM,MAEfxjB,EAAIwkB,KAAWhB,OA9BNe,IACDA,EAAS,EACTtB,EAAI,GAGJA,GA9IM,GA6IN2B,EACKL,EAEA,EAAIA,EACbA,IAAW,EAwBnB,GAAIvB,EAAU,GAAKA,GAAWwB,EAC1B,KAAM,iEAEV,IADI7Z,EAAI,EACC7J,EAAI,EAAGA,EAAI,IAAKA,IACrB+N,EAAIlE,EAAI+Z,EAAU5jB,GAClB4jB,EAAU5jB,GAAK6J,EACfA,EAAIkE,EAER,IAAS/N,EAAI,EAAGA,EAAI0jB,EAAO1jB,IAEvBd,EAAI0kB,EADJlB,EAAc,IAATxjB,EAAIc,MACcA,GAAK,EAC5B4jB,EAAUlB,KAEd,IAAIjjB,EAAM,EACNskB,EAAU,EACV7X,EAAM,EACNwX,IAEAK,EAAiB,KADjBtkB,EAAMP,EAAIgjB,IAEVziB,IAAQ,EACRyM,GAAO,GAEXwX,EAAQA,EACR,IACIM,EAAQC,EAAUC,EADlB5X,EAAS,IAAIyV,WAAWC,GAExBH,EAAQ,EAGZ,IAFKniB,IACDA,EAAMiV,KACH+O,GAAO,CAcV,IAbAA,IACAO,EAAWF,EAEXA,EAAgB,KADhBtkB,EAAMP,EAAIO,IAEVA,IAAQ,EACK,GAATyM,KACA8X,EAASD,EACTG,EAAUD,EACVF,GAAW,IAEXC,EAAS,EACTE,EAAUH,GAEPC,KAIH,GAFA1X,EAAOuV,KAAWqC,KAEXxkB,EACH,OAAO4M,EAEXyX,GAAWE,IACX/X,EAAM,GAId,OAAOI,EAAOiX,SAAS,EAAG1B,KAG9B7iB,EAAOC,QAAUkQ,G,yDCjRXhH,EAAWC,EAAQ,MACnB8G,EAAY9G,EAAQ,MACpB6G,EAAa7G,EAAQ,MAO3B,SAAS+b,EAAWrb,EAAKsb,EAAKhlB,GAO1B,IANA,IAAIyK,EAAI,EACJwa,EAAI,EACJnX,GAAQ,EAGR5J,EAAI,IAAID,MAAM,MACXghB,EAAIjlB,GAAM,CACpB,IAAI8M,EAAMpD,EAAI7I,WAId,GAHAqD,EAAEuG,KAAOqC,EACTmY,GAAKnY,EAEDA,GAAOgB,EAAM,CACb,IAAIkE,EAAOtI,EAAI7I,WAEf,IADAokB,GAAKnY,EAAMkF,EACJA,KACV9N,EAAEuG,KAAOqC,EAEVgB,EAAOhB,EAIJ,IAAIlM,EAAI,EAGR,IAFA6J,EAAI,EACJwa,EAAI,EACGA,EAAIjlB,GAAM,CACpB,IAAIklB,EAAU,EACd,EAAG,CACC,IAAI5a,EAAOpG,EAAEuG,KACbya,GAAW5a,QACE,KAARA,GAET,KAAO4a,KACHF,EAAIC,KAAOrkB,EACfA,KAmBD,SAASukB,EAAeC,EAAQC,EAAOC,GACnC,IAAIxX,EAAOsX,EAAOG,QAqBlB,OApBAF,EAAMG,MAASH,EAAMG,MAAQJ,EAAOK,QAAUL,EAAOM,KAAKJ,GAC1DxX,IAAUuX,EAAMG,MAAS,GAAGJ,EAAOO,OAAO,IAAOP,EAAOQ,KAEpDR,EAAOS,SACd/X,GAAQsX,EAAOU,KAAKrkB,KAAKskB,IAAIV,EAAMW,EAAG,QAAUZ,EAAOa,MAEhDb,EAAOc,WACdpY,GAAQsX,EAAOe,KAAK1kB,KAAKskB,IAAIV,EAAMe,MAAO,OAAShB,EAAOiB,KAI1DhB,EAAMe,OAAUf,EAAMiB,OAAShB,EAAK,EAAI,EACxCD,EAAMiB,MAAQhB,GAGPF,EAAOmB,SACdzY,GAAQuX,EAAMtkB,GAAKqkB,EAAOoB,MAEvBnB,EAAMW,IAEQ,MAAPlY,EAGX,SAAS2Y,EAAwB/c,GAC7B,IAAIsc,EAAI,GAGRA,EAAET,QAAU7b,EAAIC,aAChBqc,EAAEU,OAAUhd,EAAI7I,WAEhBmlB,EAAEW,SA7Cc,EA6CFX,EAAEU,OAChBV,EAAEY,UA7Cc,EA6CFZ,EAAEU,OAChBV,EAAEO,OA7Cc,EA6CFP,EAAEU,OAChBV,EAAEa,QA7Cc,GA6CFb,EAAEU,OAChBV,EAAEH,OA7Cc,GA6CFG,EAAEU,OAChBV,EAAEE,SA7Cc,GA6CFF,EAAEU,OAChBV,EAAEc,QA7Cc,IA6CFd,EAAEU,OAEhBV,EAAE5U,QAAU1H,EAAI7I,WAEhB,IAAI2J,EAAId,EAAI7I,WAYZ,GAXAmlB,EAAEL,MAASnb,GAAG,EACdwb,EAAEP,OAAW,GAAFjb,EACXA,EAAId,EAAI7I,WACRmlB,EAAEJ,KAAOpb,GAAG,EACZwb,EAAEQ,KAAS,GAAFhc,EACTA,EAAId,EAAI7I,WACRmlB,EAAEC,KAAOzb,GAAG,EACZwb,EAAEK,KAAS,GAAF7b,EAGTwb,EAAEe,KAAO,IAAI9iB,MAAM,KA/DH,GAgEZ+hB,EAAEU,OACT,IAAK,IAAI9lB,EAAI,EAAGA,EAAIolB,EAAE5U,QAASxQ,IAC3BolB,EAAEe,KAAKnmB,GAAK8I,EAAI7I,gBAGpB,IAASD,EAAI,EAAGA,EAAI,IAAKA,IACrBolB,EAAEe,KAAKnmB,GAAKA,EAKb,GADAolB,EAAEN,KAAO,IAAIzhB,MAAM,MACf+hB,EAAEL,MAAQ,GAxEE,IAwEIK,EAAEU,OACzB3B,EAAWrb,EAAKsc,EAAEN,KAAM,UAGxB,IAAS9kB,EAAI,EAAGA,EAAI,IAAKA,IACrBolB,EAAEN,KAAK9kB,GAAKA,EAWb,OARAolB,EAAEF,KAAO,IAAI7hB,MAAM,MAlFH,GAmFZ+hB,EAAEU,QACT3B,EAAWrb,EAAKsc,EAAEF,KAAM,MAErBE,EAAEG,KAAO,IAAIliB,MAAM,KArFH,GAsFZ+hB,EAAEU,QACT3B,EAAWrb,EAAKsc,EAAEG,KAAM,KAEdH,EAiEX,SAASgB,EAAsBtd,EAAK4H,EAAI2V,EAASC,EAAO7B,EAAO8B,GAEvDF,EAAQG,QAAU,EACzB/B,EAAMtkB,EAAImmB,EAAMG,IAAI7V,YAAY9H,EAAK4H,GAErC+T,EAAMtkB,EAAI,EAEPskB,EAAM7a,EAAIyc,EAAQK,KAAKjC,EAAMtkB,GAE7B,IAAIqkB,EAAS6B,EAAQ7B,OAAOC,EAAM7a,GAGlC,GAAI4a,EAAOwB,WAAa,EAAG,CAE9B,IAAItmB,EAAM4mB,EAAM5mB,IAAI,GAAGkR,YAAY9H,EAAK4H,GACxChR,GAAO4mB,EAAM5mB,IAAI,GAAGkR,YAAY9H,EAAK4H,IAAO,EAC5ChR,GAAO4mB,EAAM5mB,IAAI,GAAGkR,YAAY9H,EAAK4H,IAAO,GAC5ChR,GAAO4mB,EAAM5mB,IAAI,GAAGkR,YAAY9H,EAAK4H,IAAO,GACxC8T,EAAOwB,UAAY,IACnBxB,EAAOwB,WAAatmB,QAExBA,GAAO8kB,EAAOwB,UAEXvB,EAAM/kB,IAAMA,EAER2mB,EAAQM,SACfJ,EAAI9B,EAAMmC,KAAON,EAAMC,IAAI3V,YAAY9H,EAAK4H,IAEzC+T,EAAMoC,OAAS,EA3LC,EA4LZrC,EAAOsB,QACVQ,EAAMQ,IAAIlW,YAAY9H,EAAK4H,KAC3B+T,EAAMoC,OAAS,GAGhBpC,EAAMW,EAAI1lB,EACV+kB,EAAMe,MAAQ,EACdf,EAAMG,KAAO,EACbH,EAAMiB,MAAQ,EACdjB,EAAMmC,MAGV,SAASG,EAAWje,EAAKoY,GAErB,IAAI5W,EAAQxB,EAAI+B,YACZwb,EA1GR,SAA2Bvd,GACvB,IAAIud,EAAU,CACjB7V,QAAS,GAKN,GAAY,GADD1H,EAAI7I,WACf,CAKA,IAAI+mB,EAASle,EAAI7I,WACbgnB,EAtGkB,EAsGRD,EAA8Ble,EAAI7I,WAAa,EACzDumB,EAAUQ,EAAOC,OAAS,EAAID,EAAOC,OAAO,EAAI,EAEhDP,EAAO,IAAIrjB,MAAM,KACrB,GAzGsB,EAyGlB2jB,EACPR,EAAU1d,EAAI7I,WACdkkB,EAAWrb,EAAK4d,EAAM,SACZ,CACV,IAAK,IAAI1mB,EAAI,EAAGA,EAAIinB,EAAQjnB,IACxB0mB,EAAK1mB,GAAKA,EACd,KAAOA,EAAI,IAAKA,IACZ0mB,EAAK1mB,GAAKinB,EAAO,EAElBZ,EAAQM,OAjHc,EAiHJK,EAClBX,EAAQK,KAAOA,EACfL,EAAQG,QAAUA,EAElBH,EAAQ7B,OAAS,IAAInhB,MAAMgjB,EAAQY,QACnC,IAAK,IAAI7B,EAAI,EAAGA,EAAI6B,EAAQ7B,IAC/BiB,EAAQ7B,OAAOY,GAAKS,EAAwB/c,GACxCud,EAAQ7V,QAAU6V,EAAQ7B,OAAOY,GAAG5U,UACpC6V,EAAQ7V,QAAU6V,EAAQ7B,OAAOY,GAAG5U,SAGrC,OAAO6V,EA7BVlU,QAAQ+U,MAAM,kCAkGGC,CAAkBre,GAChC,GAAKud,EAAL,CACA,IAAI7B,EAAS6B,EAAQ7B,OACjB+B,EAAM,IAAIljB,MAAM6d,EAAO1hB,QAGvB8mB,EAxER,SAA2BD,GACvB,IAAIC,EAAQ,GAEZA,EAAMc,KAAO,IAAI/jB,MAAM,OACvB,IAAK,IAAIrD,EAAI,EAAGA,EAAK,MAAQA,IAChCsmB,EAAMc,KAAKpnB,GAAK,IAAIkP,EAAUmX,EAAQ7V,QAAQ,GAG3C,IADA8V,EAAM5mB,IAAM,IAAI2D,MAAM,GACbrD,EAAI,EAAGA,EAAI,EAAGA,IAC1BsmB,EAAM5mB,IAAIM,GAAK,IAAIkP,EAAU,KAQ1B,OANAoX,EAAMC,IAAQ,IAAIrX,EAAU,GAC5BoX,EAAMQ,IAAQ,IAAI5X,EAAU,GAExBmX,EAAQG,QAAU,IACzBF,EAAMG,IAAM,IAAIvX,EAAUmX,EAAQG,QAAQ,IAEhCF,EAuDKe,CAAkBhB,GAG1B3V,EAAK,IAAIzB,EAAWnG,GACxB4H,EAAGC,iBAAiB7H,GAkBpB,IAjBA,IAAIwD,EAAS,IAAIhN,EAAOC,YAAY+K,GAGhCma,EAAQ,CACfG,KAAK,EACLc,MAAM,EACNF,MAAM,EACNJ,EAAE,EACFjlB,EAAE,EACFyJ,EAAE,EACFlK,IAAI,EACJmnB,OAAO,EACPD,IAAI,GAIG5mB,EAAI,EACDA,EAAIsK,GAAO,CACrB,GAAe,GAAXma,EAAMW,EAAQ,CAEd,GADAgB,EAAsBtd,EAAK4H,EAAI2V,EAASC,EAAO7B,EAAO8B,GAClD9B,EAAMoC,OAAS,GAClBP,EAAMQ,IAAIlW,YAAY9H,EAAK4H,GAAK,CAEhC,IAAK,IAAI9G,EAAI,EAAGA,EAAIlK,IAAKkK,IAC5B0C,EAAOtM,EAAE4J,GAAK0C,EAAOtM,EAAE4J,EAAE6a,EAAM/kB,KAC5BM,GAAKykB,EAAM/kB,IACX+kB,EAAMW,EAAI,EACV,SAGDlE,EAAO1N,KAAKiR,EAAM/kB,KAElB,IACIwN,GADAsX,EAAS6B,EAAQ7B,OAAOC,EAAM7a,IAChB+a,QAItB,IAAI2C,EAAIhB,EAAMc,KAAKla,GAAM0D,YAAY9H,EAAK4H,GAM1CpE,EAAOtM,KAAOwkB,EAAO2B,KAAKmB,GAC1Bpa,EAAOqX,EAAeC,EAAQC,EAAO6C,GAMlC,OAHIjB,EAAQM,QAMhB,SAA2BS,EAAMG,EAAUhB,EAAK7mB,GAC5C,IAAIknB,EAAM,EACN5mB,EAAI,EACR,KAAOA,EAAIunB,GAAU,CACxB,GAAIhB,EAAIK,GAGJ,IAFA,IAAI/c,EAAI,EACJkE,EAAIrO,EAAIknB,GAAK,EACV/c,EAAIkE,GAAG,CACjB,IAAI6E,EAAQwU,EAAKpnB,EAAE6J,GACnBud,EAAKpnB,EAAE6J,GAAKud,EAAKpnB,EAAE+N,GACnBqZ,EAAKpnB,EAAE+N,GAAK6E,EACZ/I,IACAkE,IAID/N,GAAKN,EAAIknB,MArBTY,CAAkBlb,EAAQhC,EAAOic,EAAKrF,GAE5B5U,GAmNX,SAASmb,EAAYtd,EAAKia,EAAKhlB,GAW3B,IAVA,IAAIY,EAAI,EACJ6J,EAAI,EAEJ6d,EAAO,IAAIrkB,MAAW,EAALjE,GACjBuoB,EAAM,EAMH3nB,EAAIZ,GAAM,CAGpB,IADA,IAAIwoB,EAAU5nB,EACPA,EAAIZ,GAAQglB,EAAIpkB,IAAM6J,GACzB7J,IACJ,IAAIskB,EAAUtkB,EAAI4nB,EAGlB,EAAG,CACC,IAAIpkB,EAAI3C,KAAKskB,IAAI,IAAKb,GACtBoD,EAAKC,KAASnkB,EACd8gB,GAAW9gB,QACD,KAALA,GACTqG,IAOG,IAAIqD,GAAQ,EACR2a,EAAO,IAAIxkB,MAAW,EAALjE,GACjB0oB,EAAM,EAGV,IAFA9nB,EAAI,EAEGA,EAAI2nB,GAAK,CACnB,IAAII,EAAOL,EAAK1nB,KAEhB,GADA6nB,EAAKC,KAASC,EACVA,GAAQ7a,EAAM,CAEd,IADI0a,EAAU5nB,EACPA,EAAI2nB,GAAOD,EAAK1nB,IAAMkN,GAAQlN,EAAI4nB,EAAU,KACtD5nB,IACG6nB,EAAKC,KAAS9nB,EAAI4nB,OAElB1a,EAAO6a,EAKR5d,EAAI3J,UAAUqnB,EAAMC,GAmPxB9oB,EAAOC,QAAU,CAAE+P,OAjenB,SAAgBlG,EAAKoY,GAKjB,OAAO6F,EAJM,IAAI5e,EAASW,GAIAoY,IA4dHjX,OAtB3B,SAAgBnB,EAAKoY,EAAQ8G,GAOzB,IANA,IAAIC,EAAQ,IAAI5kB,MAAM,GAClByhB,EAAQ,IAAIzhB,MAAM,GAClB6hB,EAAQ,IAAI7hB,MAAM,GAClBkiB,EAAQ,IAAIliB,MAAM,GAClBqjB,EAAQ,IAAIrjB,MAAM,KAEblD,EAAI,EAAGA,EAAI,EAAGA,IACnB8nB,EAAM9nB,GAAK,IAAIkD,MAAM,KACrByhB,EAAK3kB,GAAM,IAAIkD,MAAM,KACrB6hB,EAAK/kB,GAAM,IAAIkD,MAAM,MACrBkiB,EAAKplB,GAAM,IAAIkD,MAAM,MAGrB8G,EAAM,IAAIhC,EAAS,GAAI,EAAc,IAAXW,EAAItJ,OAAa,MAE3C4K,WAAWtB,EAAItJ,QACnB,IAAIglB,EAjdR,SAAyB1b,EAAKoY,EAAQ8G,EAAQC,GAG1C,IAHiD,MAE7CC,EAAUF,EAAO,GACZhoB,EAAI,EAAGA,EAAIgoB,EAAOxoB,QAC1BwoB,EAAOhoB,IAAMkoB,EADqBloB,KAGnC,IAAImoB,EAAYnoB,GAAKgoB,EAAOxoB,OAAU,EAAI,EAGtC0L,EAAO,EACPsF,EAAU,EAGd,IAASxQ,EAAI,EAAGA,EAAI,IAAKA,IAC5BioB,EAAM,GAAGjoB,GAAK,EAEX,IAAI4mB,EAAM,EACNlnB,EAAM,EACV,IAASM,EAAI,EAAGA,EAAI8I,EAAItJ,OAAQQ,IACxB,GAAPN,IACAA,EAAMwhB,EAAO0F,EAAM1F,EAAO1hB,OAAO,EAAIonB,IAAQA,IAEjDqB,EAAM,GAAGnf,EAAI9I,MACbN,IAEG,IAASM,EAAI,EAAGA,EAAI,IAAKA,IACvBioB,EAAM,GAAGjoB,KAEVwQ,EAAUxQ,IACVwQ,EAAUxQ,GACdkL,KAGG,IAAI2Z,EAAS,EACToB,EAAU,EAwFd,OArFI/a,GAAQ,KACf+a,EAAU,EAENpB,EADA3Z,GAAQ,EACC,EACJA,GAAQ,EACJ,EACJA,GAAQ,EACJ,EAEA,GA4EH,KAAE6Z,MAAW,GAAGF,EAAO,GAC5BA,OAAWA,EACXG,KAAW,EAEXoD,MAAW,EACXC,OAAWnH,EAAO,GAAK,IAAM,EAAI,EACjCmE,KAAW,EAEXiD,MAAWzD,EAAO,EAAI,EAAI,EAC1B0D,OAAW,EACX9C,KAAW,GAKX+C,MAAW,EACX5C,KAAW,GACX6C,QAAW,EACX9D,QAAY,EAEZnU,QAAWA,EACXtF,KAAWA,EAEX+a,QAAWA,EACXF,SAAW,EACXC,UAA6B,GAAjB9E,EAAO1hB,OAAe,EAAI,EACtCmmB,OAAW,EACXgB,OAAW,EACX1B,OAAW,EACXK,SAAYT,GAAU,EAAK,EAAI,EAC/BqB,QAAW,GA9BN,YAkCM,GAAGrB,EAAO,IAAc,GAAVsD,IAlCpB,YAmCM,GAnCN,WAoCM,IAAItD,GAAQ,IApClB,cAqCM,GArCN,aAsCM,GAtCN,IAuVM6D,CAAgB5f,EAAKoY,EAAQ8G,EAAQC,GAC9C9d,EAxOR,SAA2BA,EAAKqa,EAAQyD,EAAOnD,EAAMI,EAAMK,EAAMmB,GAQ7D,IAPA,IAAIiC,EAAO,CACP,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAC7C,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAC7C,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAC7C,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAGxC3oB,EAAI,EAAGA,EAAIwkB,EAAOhlB,OAAQQ,IACtC0mB,EAAK1mB,GAAKA,EACP,KAAOA,EAAI,IAAKA,IACnB0mB,EAAK1mB,GAAKwkB,EAAOhlB,OAAO,EAGrB2K,EAAIzJ,UAAU,GACd,IAAIsmB,GAAWxC,EAAOhlB,OAAS,EA3hBT,EA2hBkC,IAChDglB,EAAO,GAAGiE,QA3hBI,EA2hB2B,GAMjD,GALAte,EAAIzJ,UAAUsmB,GA7hBQ,EA+hBlBA,GACP7c,EAAIzJ,UAAU8jB,EAAOhlB,QA/hBI,EAiiBlBwnB,EAA0B,CACjC,IAAIR,EAAU,GAAGhC,EAAO,GAAGgE,MACvBhC,EAAU,GAAGA,IACjBrc,EAAIzJ,UAAU8lB,GACdiB,EAAYtd,EAAKuc,EAAM,KAIpB,IAAK,IAAItB,EAAI,EAAGA,EAAIZ,EAAOhlB,OAAQ4lB,IAAK,CAiB3C,GAhBAjb,EAAIye,YAAYpE,EAAOY,GAAGT,SAC1Bxa,EAAIzJ,WAAW8jB,EAAOY,GAAGc,QA9iBN,IA8iB8B,IACzC1B,EAAOY,GAAGE,SAhjBC,GAgjBuB,IAClCd,EAAOY,GAAGH,OAljBC,GAkjBuB,IAClCT,EAAOY,GAAGa,QApjBC,GAojBuB,IAClCzB,EAAOY,GAAGO,OAtjBC,EAsjBuB,IAClCnB,EAAOY,GAAGY,UAxjBC,EAwjBuB,IAClCxB,EAAOY,GAAGW,SA1jBC,EA0jBuB,IACtCvB,EAAOY,GAAGa,QACV9b,EAAIzJ,UAAU8jB,EAAOY,GAAGla,MAExBf,EAAIzJ,UAAU8jB,EAAOY,GAAG5U,SAC5BrG,EAAIzJ,UAAW8jB,EAAOY,GAAGL,OAAS,EAAMP,EAAOY,GAAGP,QAClD1a,EAAIzJ,UAAW8jB,EAAOY,GAAGJ,MAAS,EAAMR,EAAOY,GAAGQ,MAClDzb,EAAIzJ,UAAW8jB,EAAOY,GAAGC,MAAS,EAAMb,EAAOY,GAAGK,MAE9CjB,EAAOY,GAAGa,QAAS,CACnBzB,EAAOY,GAAG5U,QAAUgU,EAAOY,GAAGla,KAC9B,IAAIU,EAAI,EACR,IAAS5L,EAAI,EAAGA,EAAI,IAAKA,IACxBioB,EAAM7C,GAAGplB,KACTmK,EAAIzJ,UAAUV,GACdioB,EAAM7C,GAAGplB,GAAK4L,KAIf,KAAOA,EAAI4Y,EAAOY,GAAGla,KAAMU,IAC9BzB,EAAIzJ,UAAU,QAGX,IAASV,EAAI,EAAGA,EAAI,IAAKA,IAC5BioB,EAAM7C,GAAGplB,GAAKA,EAGf,GAAIwkB,EAAOY,GAAGL,MAAQ,EAAG,CAYrB,IAAS/kB,EAAI,EAAGA,EAAI,IAAKA,IAC5B8kB,EAAKM,GAAGplB,GAAKA,EAENwkB,EAAOY,GAAGc,SACjBuB,EAAYtd,EAAK2a,EAAKM,GAAI,KAG3B,GAAIZ,EAAOY,GAAGgD,MAAQ,EAAG,CACrB,IAASpoB,EAAI,EAAGA,EAAI,KAAMA,IAC7BklB,EAAKE,GAAGplB,GAAKa,KAAKskB,KAAK,GAAGX,EAAOY,GAAGgD,OAAO,EAAGpoB,GAAKwkB,EAAOY,GAAGiD,QAE1DZ,EAAYtd,EAAK+a,EAAKE,GAAI,MAG9B,GAAIZ,EAAOY,GAAGkD,MAAQ,EAAG,CACrB,IAAStoB,EAAI,EAAGA,EAAI,IAAKA,IACxB2oB,EAAK3oB,IAAM,GAAGwkB,EAAOY,GAAGkD,OAAS,IACjCK,EAAK3oB,IAAM,GAAGwkB,EAAOY,GAAGkD,OAAS,GAClC,IAAStoB,EAAI,EAAGA,EAAI,IAAKA,IAC5BulB,EAAKH,GAAGplB,GAAK2oB,EAAK9nB,KAAKskB,IAAIwD,EAAKnpB,OAAO,EAAGQ,GAAKwkB,EAAOY,GAAGmD,SAEtDd,EAAYtd,EAAKob,EAAKH,GAAI,MAI3B,OAAOjb,EAkIG0e,CAAkB1e,EAAKqa,EAAQyD,EAAOnD,EAAMI,EAAMK,EAAMmB,GAClE,OAhIJ,SAAoBvc,EAAKrB,EAAKoY,EAAQ8G,EAAQxD,EAAQyD,EAAOnD,EAAMI,EAAMK,EAAMmB,GAI3E,IAAIF,EAAU,GAAGhC,EAAO,GAAGgE,MACvBhC,EAAU,GAAGA,IAKjB,IAJA,IAAI3V,EAAO/H,EAAItJ,OAGXgR,EAAU,EACL4U,EAAI,EAAGA,EAAIZ,EAAOhlB,OAAQ4lB,IAClC5U,EAAUgU,EAAOY,GAAG5U,UACpBA,EAAUgU,EAAOY,GAAG5U,SAGrB,IADA,IAAIsY,EAAa,IAAIzlB,MAAM,OAClBrD,EAAI,EAAGA,EAAK,MAAQA,IAChC8oB,EAAW9oB,GAAK,IAAIkP,EAAUsB,EAAQ,GAEnC,IAAIuY,EAAY,IAAI1lB,MAAM,GAC1B,IAASrD,EAAI,EAAGA,EAAI,EAAGA,IAC1B+oB,EAAU/oB,GAAK,IAAIkP,EAAU,KAEP,IAAIA,EAAU,GACd,IAAIA,EAAU,GAYjC,IAbA,IAEI8Z,EAAe,IAAI9Z,EAAUsX,EAAQ,GAIrC9V,EAAK,IAAIzB,EAAWnG,GAKpB8d,GAFAxB,EAAI,EACJplB,EAAI,EACE,GAEHA,EAAI6Q,GAAM,CACpB,GAAS,GAALuU,EAAQ,CAER,IAAIjlB,EAAI6nB,EAAOpB,GACXpC,EAAO,GAAGgE,MAAQ,GAElBQ,EAAUlY,YAAY3G,EAAKuG,EAAIvQ,GAEnC,IAAIyJ,EAAI8c,EAAKvmB,GAGTT,EAAMwhB,EAAOrgB,KAAKskB,IAAIjE,EAAO1hB,OAAO,EAAGonB,MACvCpC,EAAO5a,GAAGoc,UACbxB,EAAO5a,GAAGoc,UAAY,IAEtB+C,EAAU,GAAGjY,YAAY3G,EAAKuG,EAAgB,IAAZhR,GAClCqpB,EAAU,GAAGjY,YAAY3G,EAAKuG,EAAKhR,GAAK,EAAM,KAC9CqpB,EAAU,GAAGjY,YAAY3G,EAAKuG,EAAKhR,GAAK,GAAM,KAC9CqpB,EAAU,GAAGjY,YAAY3G,EAAKuG,EAAKhR,GAAK,GAAM,KAC9C8kB,EAAO5a,GAAGoc,WAAa,IAI3B+C,EAAU,GAAGjY,YAAY3G,EAAKuG,EAAgB,IAAZhR,GAClCqpB,EAAU,GAAGjY,YAAY3G,EAAKuG,EAAKhR,GAAK,EAAM,KAC9CqpB,EAAU,GAAGjY,YAAY3G,EAAKuG,EAAKhR,GAAK,GAAM,KAC9CqpB,EAAU,GAAGjY,YAAY3G,EAAKuG,EAAKhR,GAAK,GAAM,MAGvC8kB,EAAO5a,GAAGmc,UACjBkD,EAAQC,KAAK,GAEV9D,EAAI1lB,EACJ,IAAI8lB,EAAQ,EAERtY,EAAQsX,EAAO5a,GAAG+a,QAClBwE,EAAQ,EACRC,EAAQ,EAIhB,IAAI1E,EAAI5b,EAAI9I,KACRsnB,EAAIW,EAAMre,GAAG8a,GACjBoE,EAAW5b,GAAM4D,YAAY3G,EAAKuG,EAAI4W,GAItC6B,GAASA,GAAS3E,EAAO5a,GAAGib,QAAUC,EAAKlb,GAAG0d,GAC9Cpa,EAAQsX,EAAO5a,GAAG+a,QAClBzX,IAASic,GAAU,GAAG3E,EAAO5a,GAAGmb,OAAO,IAAOP,EAAO5a,GAAGob,KAKpDR,EAAO5a,GAAGwe,MAAQ,IAClBlb,GAAQgY,EAAKtb,GAAG/I,KAAKskB,IAAIC,EAAG,QAAUZ,EAAO5a,GAAGyb,MAEhDb,EAAO5a,GAAG0e,MAAQ,IAClBpb,GAAQqY,EAAK3b,GAAG/I,KAAKskB,IAAIK,EAAO,OAAShB,EAAO5a,GAAG6b,KACnDD,GAAU4D,GAAM9B,EAAK,EAAI,EACzB8B,EAAK9B,GAGL9C,EAAO5a,GAAG+b,SACVzY,GAAQ/M,GAAKqkB,EAAO5a,GAAGgc,MAE3B1Y,GAAe,MACfkY,IAIG,OADA1U,EAAGK,kBAAkB5G,GACdA,EAAIjL,IAAIU,MAAM,EAAGuK,EAAI1K,KAsBrB4pB,CAAWlf,EAAKrB,EAAKoY,EAAQ8G,EAAQxD,EAAQyD,EAAOnD,EAAMI,EAAMK,EAAMmB,O,uFCxyB3Eve,EAAYC,EAAQ,MACpBkhB,EAAYlhB,EAAQ,MAGtB0Y,EAAQ,IAFM1Y,EAAQ,OA8D1B,SAASmhB,EAActO,EAAKvb,GAExB,IADA,IAAIY,EAAM2a,EAAI,GACP3a,EAAId,OAASE,GACvBY,EAAM,IAAMA,EAET,OAAOA,EAGX,SAASkpB,EAAiBC,EAAGhgB,EAAGsB,EAAGa,GAC/B,IAAIiS,EAAO4L,EAAE,GAnEG,GAmEUxpB,WAEtBypB,EAAI9d,EADG6d,EAAE,GAAG5L,GAAMxR,aAGtB,GAlEgB,GAkEZwR,EAGP,OAFApU,EAAEmC,GAAKnC,EAAEigB,GACT3e,EAAEa,GAAKb,EAAE2e,GACFjgB,EAAEmC,GAGN,IAAIuW,EAAI,EACR1Y,EAAEmC,GAAK,GACPb,EAAEa,GAAK,IAAIvI,MAAM,KACjB,EAAG,CAGN,OAFAwa,EAAO4L,EAAEtH,GAjFU,GAiFGliB,YAGtB,KAlFmB,EAmFf8K,EAAEa,GAAGuW,GAAKsH,EAAEtH,GAnFG,GAmFUwH,WACzB,MAEJ,KAvFmB,EAwFf5e,EAAEa,GAAGuW,GAAKsH,EAAEtH,GAxFG,GAwFYyH,aAC3B,MAEJ,KArFmB,EAsFf7e,EAAEa,GAAGuW,GAAKsH,EAAEtH,GAtFG,GAsFY9V,aAC3B,MAEJ,KA7FmB,EA8Ff,IAAIwd,EAAIJ,EAAEtH,GA9FK,GA8FW9V,aACtByd,EAAIL,EAAEtH,GA9FK,GA8FSliB,WACxB8K,EAAEa,GAAGuW,GAAKoH,EAAcM,EAAGC,GAC3B,MAEJ,KA9FmB,EA+Ff/e,EAAEa,GAAGuW,IAAMpX,EAAE2e,GAAGvH,IAAI,GAAKsH,EAAEtH,GA/FZ,GA+F0BliB,WACzC,MAEJ,KAjGmB,EAkGX4pB,GAAK9e,EAAE2e,GAAGvH,IAAI,GAAKsH,EAAEtH,GAlGV,GAkGyBliB,WACpC6pB,EAAI/e,EAAE2e,GAAGvH,GAAG3iB,OAChBuL,EAAEa,GAAGuW,GAAKoH,EAAcM,EAAGC,GAC3B,MAEJ,KAtGmB,GAuGf/e,EAAEa,GAAGuW,GAAKpX,EAAE2e,GAAGvH,GACf,MAEJ,QACIpX,EAAEa,GAAGuW,GAAK,GAId1Y,EAAEmC,IAAMb,EAAEa,GAAGuW,WA7GM,IA8GPtE,GAET,OAAOpU,EAAEmC,GAuEb,SAASme,EAAgBN,EAAG1e,EAAGif,EAAMC,EAAOC,EAASC,GAEjD,IAAK,IAAIve,EAAI,EAAGA,EAAIqe,EAAMzqB,OAAQoM,IACrC,KAAIoe,EAAO,GAjMQ,GAiMHjf,EAAEa,GAAG,GAAGiS,OAGnB9S,EAAEa,GAAGoe,GAKV,OAFAP,EA5MmB,GA4MP/oB,UAAUqK,EAAEa,GAAGoe,GAAMnM,MAEzB9S,EAAEa,GAAGoe,GAAMnM,MACnB,KAzMmB,EA0Mf4L,EA1Me,GA0MHpI,YAAYtW,EAAEa,GAAGoe,GAAM/O,KACnC,MAEJ,KA9MmB,EA+MfwO,EA/Me,GA+MJpI,YAAYtW,EAAEa,GAAGoe,GAAM/O,KAClC,MAEJ,KAtNmB,EAuNfwO,EAvNe,GAuNDW,YAAYrf,EAAEa,GAAGoe,GAAM/O,KACrC,MAEJ,KAzNmB,EA0NfwO,EA1Ne,GA0NHY,UAAUtf,EAAEa,GAAGoe,GAAM/O,KACjC,MAEJ,KAxNmB,EAyNfwO,EAzNe,GAyNDpI,YAAYtW,EAAEa,GAAGoe,GAAM/O,KACrC,MAEJ,KAhOmB,EAiOfwO,EAjOe,GAiOApI,YAAYtW,EAAEa,GAAGoe,GAAM/O,KACtCwO,EAjOe,GAiOF/oB,UAAUqK,EAAEa,GAAGoe,GAAM/O,IAAIzb,QACtC,MAEJ,KAhOmB,EAoOnB,KAnOmB,EAoOfiqB,EAAE1e,EAAEa,GAAGoe,GAAMnM,MAAMnd,UAAUqK,EAAEa,GAAGoe,GAAM/O,MAM7C,SAASqP,EAAqBb,EAAGO,EAAMO,EAAWpgB,GAE9C,IAAK,IAAI0T,EAAO,EAAGA,GAzOH,GAyOoBA,IACvC,KAAI4L,EAAE5L,GAAMpe,KAAO,GAAnB,CAGA0K,EAAIzJ,UAAUmd,GAAiB,GAARA,EAAa,IAAM,IAG1C4L,EAAE5L,GAAQ4L,EAAE5L,GAAM3e,IAAIU,MAAM,EAAG6pB,EAAE5L,GAAMpe,KACvC,IAAIqK,EAAO0gB,EAAaf,EAAE5L,GAAO0M,GAEjCpgB,EAAIC,WAAWN,EAAKtK,QACpB2K,EAAI3J,UAAUsJ,EAAMA,EAAKtK,SAI1B,SAASgrB,EAAa1hB,EAAKyhB,GACvB,IACIzgB,EADA2gB,EAAO,GAAG,GAGVC,EAAU,CAAC,EAAG,EAAG,GAAI,GAAI,IAAK,IAAK,KACvC,IAAK,IAAI1qB,KAAK0qB,EAAS,CAC1B,IAAIC,EAAMD,EAAQ1qB,GAClB,KAAW,EAAN2qB,GAAY7hB,EAAItJ,OAAS,QAGnB,EAANmrB,GAAa7hB,EAAItJ,OAAS,GAAM,GAArC,CAGA,IACI,IAAIoT,EAAM2X,EACXzJ,EAAM7W,OAAOnB,EAAK6hB,GAClBrB,EAAKrf,OAAOnB,EAAK6hB,GAClB,MAAOC,GACDhY,EAAM,EAEVA,GAAO6X,EAAO7X,EAAIpT,SAClBirB,EAAO7X,EAAIpT,OACXsK,EAAO8I,IAIR,OAAO9I,EAGX,SAAS+gB,EAAa9f,EAAG+f,EAAG9nB,EAAG+nB,EAAMnf,GACjC,IAAIue,EAAU,EAGV/E,EAAIxZ,EAAE,EACVb,EAAEa,GAAK,IAAIvI,MAAM,KAEbynB,EAAEC,GAEThgB,EAAEa,GAAG,GAAK,CACNiS,KAtSe,EAuSf5C,IAAMrP,EAAIkf,EAAEC,IAGhBhgB,EAAEa,GAAG,GAAK,CACNiS,KA1Se,EA2Sf5C,IAAW,GAALrP,EAAS,EAAI,GAIpBkf,EAAEC,GAAQnf,EAIV,IADA,IAAIof,EAAMD,EAAKE,MAAM,uCACZjrB,EAAI,EAAGA,EAAIgrB,EAAIxrB,OAAQQ,IAAK,CACxC,IAAImiB,EAAIniB,EAAE,EACN6d,EA1Te,EA2Tf5C,EAAM+P,EAAIhrB,GAQd,GAPIgrB,EAAIhrB,GAAGirB,MAAM,eACbpN,EA3Te,EA4TVmN,EAAIhrB,GAAGirB,MAAM,aAClBpN,EAzTe,EA0TO,GAAjBmN,EAAIhrB,GAAGR,SACZqe,EAhUe,GAkUfuH,GAAK,GAAKra,EAAEqa,GAAGjD,GACf,GAAIpX,EAAEqa,GAAGjD,GAAG7hB,KAAO0qB,EAAIhrB,GAC1B6d,EA5TkB,GA6TlB5C,EAAM,QACI,GAjUQ,GAiUJlQ,EAAEqa,GAAGjD,GAAGtE,MAhUJ,GAgU0B9S,EAAEqa,GAAGjD,GAAGtE,KAAmB,CACvE,IAAIgM,EAAI5O,EAAMlQ,EAAEqa,GAAGjD,GAAG7hB,IACtB0C,EAAEmf,KACE0H,GAAK,GAAKA,EAAI,KAAO7mB,EAAEmf,GAAKvW,EAAE,IAC9BiS,EApUc,EAqUd5C,EAAM4O,QAEA,IA5UQ,GA4UH9e,EAAEqa,GAAGjD,GAAGtE,MAtUL,GAsU4B9S,EAAEqa,GAAGjD,GAAGtE,OAC5C9S,EAAEqa,GAAGjD,GAAG7hB,IAAId,QAAUyb,EAAIzb,OAAQ,CACxCqqB,EAAI5O,EAAMlQ,EAAEqa,GAAGjD,GAAG7hB,IACtB0C,EAAEmf,KACE0H,GAAK,GAAKA,EAAI,KAAO7mB,EAAEmf,GAAKvW,EAAE,IAC9BiS,EA3Uc,EA4Ud5C,EAAM4O,GAKX9e,EAAEa,GAAGuW,GAAK,CACN7hB,IAAM0qB,EAAIhrB,GACVib,IAAMA,EACN4C,KAAMA,GAGNsM,EAAUpf,EAAEa,GAAGuW,GAAGlH,IAAIzb,OAAO,IAC7B2qB,EAAUpf,EAAEa,GAAGuW,GAAGlH,IAAIzb,OAAO,GAQ9B,OAJAuL,EAAEa,KAAKuW,GAAK,CACftE,KA1VmB,IA6VT,CAACsE,EAAE,EAAGgI,GAGjBnrB,EAAOC,QAAU,CAAEgL,OAhNnB,SAAgBnB,EAAKyhB,GAEjB,IAAIjqB,EAAMwI,EAAIoO,WACW,MAArB5W,EAAIA,EAAId,OAAO,KACtBc,EAAMA,EAAI4qB,UAAU,EAAE5qB,EAAId,OAAO,IAC9B,IAAIyqB,EAAQ3pB,EAAI4Z,MAAM,MAElB/P,EAAM,IAAIhC,EAAS,GAAI,EAAc,EAAX7H,EAAId,OAAW,KAC7C2K,EAAIkX,YAAY/gB,EAAId,QACpB2K,EAAIkX,YAAY4I,EAAMzqB,QACtB2K,EAAIzJ,UAAU6pB,GAQd,IALA,IAAIxf,EAAI,IAAI1H,MAAM4mB,EAAMzqB,QACpBsrB,EAAI,GACJ9nB,EAAI,IAAIK,MAAM,KAAK8X,KAAK,GACxB+O,EAAU,EACVC,EAAU,EACLnqB,EAAI,EAAGA,EAAIiqB,EAAMzqB,OAAQQ,IAAK,CAC1C,MAAiB6qB,EAAa9f,EAAG+f,EAAG9nB,EAAGinB,EAAMjqB,GAAIA,GAAjD,SAAKmrB,EAAL,KAAUzrB,EAAV,KACIwqB,EAAUiB,IACVjB,EAAUiB,GACVhB,EAAUzqB,IACVyqB,EAAUzqB,GAIX,IAAK,IAAIsqB,EAAO,EAAGA,EAAOE,EAASF,IAAQ,CAE9C,IADA,IAAIP,EAAI,IAAIpmB,MAAM+nB,IACTvN,EAAO,EAAGA,GA7KA,GA6KiBA,IAChC4L,EAAE5L,GAAQ,IAAI1V,EAAS,GAAI,EAAG8hB,EAAMzqB,OAAS2qB,GAEjDJ,EAAgBN,EAAG1e,EAAGif,EAAMC,EAAOC,EAASC,GAC5CG,EAAqBb,EAAGO,EAAMO,EAAWpgB,GAGtC,OAAOA,EAAIjL,IAAIU,MAAM,EAAGuK,EAAI1K,MA4KLuP,OA1O3B,SAAgBlG,EAAKpJ,EAAK2rB,IAClBviB,EAAM,IAAIX,EAASW,IACRuD,aADf,IAEIif,EAASxiB,EAAIuD,aACbke,EAAYzhB,EAAI7I,WAEhBwpB,EAxHR,SAAgC3gB,EAAKyiB,EAAShB,EAAWe,GAKrD,IAJA,IAAInJ,GAAK,EAELsH,EAAI,IAAIpmB,MAAM,MAEVyF,EAAI0iB,OAAO,CACtB,IAAIC,EAAQ3iB,EAAI7I,WACZyrB,EAAkB,IAARD,EACVE,EAAkB,GAARF,EACV5N,EAAkB,GAAR4N,EAOd,GALIC,IAEAjC,IADAtH,GACO,IAAI9e,MAAM,KA7BF,GAgCfwa,GAAoB6N,EAAS,CAC7B,IAAIla,EAAI,IAAInO,MAAMioB,EAAO,GAAGnQ,KAvBb,IAwBfsO,EAAEtH,GAlCa,GAkCE,IAAIha,EAAS7I,EAAO2I,KAAK,CAAC4V,GAAMjR,OAAO4E,KAG5D,GAAIma,EAAS,CACT,IAAIC,EAAW9iB,EAAI7I,WACf4rB,EAAW/iB,EAAI7I,WACnBwpB,EAAEtH,GAAGtE,GAAQ,IAAI1V,EAASshB,EAAEmC,GAASC,GAAU3sB,SAC5C,CACH,IAAI4L,EAAOhC,EAAI+B,YACX6B,EAAO5D,EAAI0C,SAASV,GAG3B2e,EAAEtH,GAAGtE,GADE0M,EACMzJ,EAAM9R,OAAOtC,GAEb4c,EAAKta,OAAOtC,GACtB+c,EAAEtH,GAAGtE,GAAQ,IAAI1V,EAASshB,EAAEtH,GAAGtE,KAIhC,OAAO4L,EAmFCqC,CAAuBhjB,EAAKpJ,EAAK6qB,EAAWe,GAChD7hB,EAAI,IAAIpG,MAAMioB,GACdvgB,EAAI,IAAI1H,MAAMioB,GAEdhrB,EAAM,GACe,qBAAd+qB,IACdA,EAAY,MACT,IAAK,IAAIrrB,EAAI,EAAGA,EAAIsrB,EAAQtrB,IAC/BM,GAAOkpB,EAAiBC,EAAGhgB,EAAGsB,EAAG/K,GAAKqrB,EAEnC,OAAO/qB,M,6LCzLUmY,E,WACnB,WAAYsT,EAAUzX,GAAQ,oBAE5B,KAAKoB,KAAOqW,EAEZ,KAAKC,aAAe1X,E,6CAKtB,WACE,OAAO,KAAK2X,qBAAqB,KAAKD,gB,8EAIxC,wGACgC,KAAKlU,YADrC,iBAIuBoU,WAJvB,yCAKW,MALX,uBAO+B,KAAKxW,KAAK4B,oBAPzC,cAOQE,EAPR,iBAQsB,KAAKV,gBAR3B,WAS4B,wBADpBoB,EARR,QASYiU,YATZ,uBAUU,IAAInoB,IAAJ,+BACoBkU,EAAMiU,YAD1B,4DAVV,eAcQpV,EAAUvV,YACd0W,EAAMnB,QACNS,EAAe2I,sBAAsB1e,OACrC,EACAyW,EAAMsB,iBAERtB,EAAMnB,QAAUA,EApBlB,kBAqBSmB,GArBT,iD,wHAwBA,oGACgC,KAAKJ,YADrC,cACQsU,EADR,yBAES,KAAK1W,KAAKuC,UAAUmU,EAAgBvqB,eAF7C,gD,+HAOA,oGACuB,KAAKwqB,4BAD5B,UACQpb,EADR,qDAGWhO,GAHX,gCAKS,IAAIqpB,IAA+Brb,EAAO8F,UALnD,gD,4EAQA,SAASwV,EAAeC,GAGtB,OAAO,IAAIC,IAAU,KAAMF,EAAeC,K,yEAG5C,WAA2BlY,GAA3B,2GAC+B,KAAKoB,KAAK4B,oBADzC,cACQE,EADR,OAEUG,EAA+CH,EAA/CG,qBAAsB0I,EAAyB7I,EAAzB6I,qBAFhC,SAGmC,KAAK3K,KAAKW,OAH7C,mBAGgBqB,EAHhB,EAGUtY,OAEJkV,GAAYoD,GALlB,+CAMWzU,GANX,eAWQypB,EAASptB,EAAOC,YAAYoY,EAAqBnB,WAXzD,UAYQ,KAAKd,KAAKH,KAAKmX,EAAQ,EAAG/U,EAAqBnB,UAAWlC,GAZlE,WAaQqY,EAAUnrB,YAAUkrB,EAAQ/U,EAAqBlW,QACjDmrB,EAAmB7rB,YAAS4rB,EAAQpM,gBACtCjM,EAAWqY,EAAQntB,QAAUkY,GAfnC,wBAgBIvF,QAAQoN,KAAR,UACK,KAAK7J,KADV,iCACuCpB,EADvC,oDAC2FqY,EAAQntB,OADnG,4EAhBJ,uBAmBWyD,GAnBX,eAqBQ4pB,EAASvtB,EAAOC,YACpB8gB,EAAqB7J,UAAUmW,EAAQpM,eAtB3C,UAwBQ,KAAK7K,KAAKH,KACdsX,EACA,EACAxM,EAAqB7J,UAAUmW,EAAQpM,cACvCjM,EAAWqY,EAAQ7qB,MAAQ8qB,GA5B/B,WA8BQE,EAAUtrB,YAAUqrB,EAAQxM,EAAqB5e,SAEnD,KAAKiU,KAAKG,wBAAuC5S,IAAlB6pB,EAAQxU,MAhC7C,kCAiCU,KAAK5C,KAAKuE,WACd3F,EACAqY,EAAQ7qB,MAAQgrB,EAAQhrB,MAAQ8qB,EAAmB,EACnDE,EAAQxU,MAHJ,iDAIsChE,IArChD,eAyCQyY,EAAiBtM,OAAOC,OAAOiM,EAASG,EAAS,CACrDhrB,MAAO6qB,EAAQ7qB,MAAQgrB,EAAQhrB,MAAQ8qB,EACvC/qB,aAAc8qB,EAAQ7qB,MAAQgrB,EAAQhrB,MAAQ8qB,EAAmBtY,IA3CrE,kBA8CSyY,GA9CT,iD,8DAkDF,2DACG7S,MAAM,KACNC,SAAQ,YAAM,OAAIpY,YAAY0W,EAAevW,Q,+CCtHhD,WACE,IAAI8qB,EAAQ5kB,EAAQ,MAChB2K,EAAO3K,EAAQ,MAAW2K,KAC1Bka,EAAW7kB,EAAQ,MACnB6K,EAAM7K,EAAQ,MAAW6K,IAG7BrQ,EAAM,SAANA,EAAgBsqB,EAASvoB,GAEnBuoB,EAAQC,aAAertB,OAEvBotB,EADEvoB,GAAgC,WAArBA,EAAQyoB,SACXna,EAAID,cAAcka,GAElBna,EAAKC,cAAcka,GACxBD,EAASC,GAChBA,EAAU7pB,MAAMlB,UAAUvC,MAAM0C,KAAK4qB,EAAS,GACtC7pB,MAAMgqB,QAAQH,IAAYA,EAAQC,cAAgBpL,aAC1DmL,EAAUA,EAAQhW,YAWpB,IARA,IAAIwS,EAAIsD,EAAMM,aAAaJ,GACvBpD,EAAqB,EAAjBoD,EAAQ1tB,OACZ+tB,EAAK,WACL1tB,GAAK,UACLO,GAAK,WACLypB,EAAK,UAGA7pB,EAAI,EAAGA,EAAI0pB,EAAElqB,OAAQQ,IAC5B0pB,EAAE1pB,GAAsC,UAA/B0pB,EAAE1pB,IAAO,EAAM0pB,EAAE1pB,KAAO,IACO,YAA/B0pB,EAAE1pB,IAAM,GAAO0pB,EAAE1pB,KAAQ,GAIpC0pB,EAAEI,IAAM,IAAM,KAASA,EAAI,GAC3BJ,EAA4B,IAAvBI,EAAI,KAAQ,GAAM,IAAWA,EAGlC,IAAI0D,EAAK5qB,EAAI6qB,IACTC,EAAK9qB,EAAI+qB,IACTC,EAAKhrB,EAAIirB,IACTC,EAAKlrB,EAAImrB,IAEb,IAAS/tB,EAAI,EAAGA,EAAI0pB,EAAElqB,OAAQQ,GAAK,GAAI,CAErC,IAAIguB,EAAKT,EACLU,EAAKpuB,EACLquB,EAAK9tB,EACL+tB,EAAKtE,EAET0D,EAAIC,EAAGD,EAAG1tB,EAAGO,EAAGypB,EAAGH,EAAE1pB,EAAG,GAAK,GAAI,WACjC6pB,EAAI2D,EAAG3D,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAG,GAAI,IAAK,WACjCI,EAAIotB,EAAGptB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAG,GAAI,GAAK,WACjCH,EAAI2tB,EAAG3tB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAG,GAAI,IAAK,YACjCutB,EAAIC,EAAGD,EAAG1tB,EAAGO,EAAGypB,EAAGH,EAAE1pB,EAAG,GAAK,GAAI,WACjC6pB,EAAI2D,EAAG3D,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAG,GAAI,GAAK,YACjCI,EAAIotB,EAAGptB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAG,GAAI,IAAK,YACjCH,EAAI2tB,EAAG3tB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAG,GAAI,IAAK,UACjCutB,EAAIC,EAAGD,EAAG1tB,EAAGO,EAAGypB,EAAGH,EAAE1pB,EAAG,GAAK,EAAI,YACjC6pB,EAAI2D,EAAG3D,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAG,GAAI,IAAK,YACjCI,EAAIotB,EAAGptB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAE,IAAK,IAAK,OACjCH,EAAI2tB,EAAG3tB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAE,IAAK,IAAK,YACjCutB,EAAIC,EAAGD,EAAG1tB,EAAGO,EAAGypB,EAAGH,EAAE1pB,EAAE,IAAM,EAAI,YACjC6pB,EAAI2D,EAAG3D,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAE,IAAK,IAAK,UACjCI,EAAIotB,EAAGptB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAE,IAAK,IAAK,YAGjCutB,EAAIG,EAAGH,EAFP1tB,EAAI2tB,EAAG3tB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAE,IAAK,GAAK,YAEpBI,EAAGypB,EAAGH,EAAE1pB,EAAG,GAAK,GAAI,WACjC6pB,EAAI6D,EAAG7D,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAG,GAAK,GAAI,YACjCI,EAAIstB,EAAGttB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAE,IAAK,GAAK,WACjCH,EAAI6tB,EAAG7tB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAG,GAAI,IAAK,WACjCutB,EAAIG,EAAGH,EAAG1tB,EAAGO,EAAGypB,EAAGH,EAAE1pB,EAAG,GAAK,GAAI,WACjC6pB,EAAI6D,EAAG7D,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAE,IAAM,EAAI,UACjCI,EAAIstB,EAAGttB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAE,IAAK,IAAK,WACjCH,EAAI6tB,EAAG7tB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAG,GAAI,IAAK,WACjCutB,EAAIG,EAAGH,EAAG1tB,EAAGO,EAAGypB,EAAGH,EAAE1pB,EAAG,GAAK,EAAI,WACjC6pB,EAAI6D,EAAG7D,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAE,IAAM,GAAI,YACjCI,EAAIstB,EAAGttB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAG,GAAI,IAAK,WACjCH,EAAI6tB,EAAG7tB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAG,GAAI,GAAK,YACjCutB,EAAIG,EAAGH,EAAG1tB,EAAGO,EAAGypB,EAAGH,EAAE1pB,EAAE,IAAM,GAAI,YACjC6pB,EAAI6D,EAAG7D,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAG,GAAK,GAAI,UACjCI,EAAIstB,EAAGttB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAG,GAAI,GAAK,YAGjCutB,EAAIK,EAAGL,EAFP1tB,EAAI6tB,EAAG7tB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAE,IAAK,IAAK,YAEpBI,EAAGypB,EAAGH,EAAE1pB,EAAG,GAAK,GAAI,QACjC6pB,EAAI+D,EAAG/D,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAG,GAAI,IAAK,YACjCI,EAAIwtB,EAAGxtB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAE,IAAK,GAAK,YACjCH,EAAI+tB,EAAG/tB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAE,IAAK,IAAK,UACjCutB,EAAIK,EAAGL,EAAG1tB,EAAGO,EAAGypB,EAAGH,EAAE1pB,EAAG,GAAK,GAAI,YACjC6pB,EAAI+D,EAAG/D,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAG,GAAI,GAAK,YACjCI,EAAIwtB,EAAGxtB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAG,GAAI,IAAK,WACjCH,EAAI+tB,EAAG/tB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAE,IAAK,IAAK,YACjCutB,EAAIK,EAAGL,EAAG1tB,EAAGO,EAAGypB,EAAGH,EAAE1pB,EAAE,IAAM,EAAI,WACjC6pB,EAAI+D,EAAG/D,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAG,GAAI,IAAK,WACjCI,EAAIwtB,EAAGxtB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAG,GAAI,IAAK,WACjCH,EAAI+tB,EAAG/tB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAG,GAAI,GAAK,UACjCutB,EAAIK,EAAGL,EAAG1tB,EAAGO,EAAGypB,EAAGH,EAAE1pB,EAAG,GAAK,GAAI,WACjC6pB,EAAI+D,EAAG/D,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAE,IAAK,IAAK,WACjCI,EAAIwtB,EAAGxtB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAE,IAAK,GAAK,WAGjCutB,EAAIO,EAAGP,EAFP1tB,EAAI+tB,EAAG/tB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAG,GAAI,IAAK,WAEpBI,EAAGypB,EAAGH,EAAE1pB,EAAG,GAAK,GAAI,WACjC6pB,EAAIiE,EAAGjE,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAG,GAAI,GAAK,YACjCI,EAAI0tB,EAAG1tB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAE,IAAK,IAAK,YACjCH,EAAIiuB,EAAGjuB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAG,GAAI,IAAK,UACjCutB,EAAIO,EAAGP,EAAG1tB,EAAGO,EAAGypB,EAAGH,EAAE1pB,EAAE,IAAM,EAAI,YACjC6pB,EAAIiE,EAAGjE,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAG,GAAI,IAAK,YACjCI,EAAI0tB,EAAG1tB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAE,IAAK,IAAK,SACjCH,EAAIiuB,EAAGjuB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAG,GAAI,IAAK,YACjCutB,EAAIO,EAAGP,EAAG1tB,EAAGO,EAAGypB,EAAGH,EAAE1pB,EAAG,GAAK,EAAI,YACjC6pB,EAAIiE,EAAGjE,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAE,IAAK,IAAK,UACjCI,EAAI0tB,EAAG1tB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAG,GAAI,IAAK,YACjCH,EAAIiuB,EAAGjuB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAE,IAAK,GAAK,YACjCutB,EAAIO,EAAGP,EAAG1tB,EAAGO,EAAGypB,EAAGH,EAAE1pB,EAAG,GAAK,GAAI,WACjC6pB,EAAIiE,EAAGjE,EAAG0D,EAAG1tB,EAAGO,EAAGspB,EAAE1pB,EAAE,IAAK,IAAK,YACjCI,EAAI0tB,EAAG1tB,EAAGypB,EAAG0D,EAAG1tB,EAAG6pB,EAAE1pB,EAAG,GAAI,GAAK,WACjCH,EAAIiuB,EAAGjuB,EAAGO,EAAGypB,EAAG0D,EAAG7D,EAAE1pB,EAAG,GAAI,IAAK,WAEjCutB,EAAKA,EAAIS,IAAQ,EACjBnuB,EAAKA,EAAIouB,IAAQ,EACjB7tB,EAAKA,EAAI8tB,IAAQ,EACjBrE,EAAKA,EAAIsE,IAAQ,EAGnB,OAAOnB,EAAMoB,OAAO,CAACb,EAAG1tB,EAAGO,EAAGypB,KAIhCjnB,EAAI6qB,IAAO,SAAUF,EAAG1tB,EAAGO,EAAGypB,EAAGjgB,EAAGzJ,EAAGgiB,GACrC,IAAIvW,EAAI2hB,GAAK1tB,EAAIO,GAAKP,EAAIgqB,IAAMjgB,IAAM,GAAKuY,EAC3C,OAASvW,GAAKzL,EAAMyL,IAAO,GAAKzL,GAAON,GAEzC+C,EAAI+qB,IAAO,SAAUJ,EAAG1tB,EAAGO,EAAGypB,EAAGjgB,EAAGzJ,EAAGgiB,GACrC,IAAIvW,EAAI2hB,GAAK1tB,EAAIgqB,EAAIzpB,GAAKypB,IAAMjgB,IAAM,GAAKuY,EAC3C,OAASvW,GAAKzL,EAAMyL,IAAO,GAAKzL,GAAON,GAEzC+C,EAAIirB,IAAO,SAAUN,EAAG1tB,EAAGO,EAAGypB,EAAGjgB,EAAGzJ,EAAGgiB,GACrC,IAAIvW,EAAI2hB,GAAK1tB,EAAIO,EAAIypB,IAAMjgB,IAAM,GAAKuY,EACtC,OAASvW,GAAKzL,EAAMyL,IAAO,GAAKzL,GAAON,GAEzC+C,EAAImrB,IAAO,SAAUR,EAAG1tB,EAAGO,EAAGypB,EAAGjgB,EAAGzJ,EAAGgiB,GACrC,IAAIvW,EAAI2hB,GAAKntB,GAAKP,GAAKgqB,KAAOjgB,IAAM,GAAKuY,EACzC,OAASvW,GAAKzL,EAAMyL,IAAO,GAAKzL,GAAON,GAIzC+C,EAAIyrB,WAAa,GACjBzrB,EAAI0rB,YAAc,GAElBtvB,EAAOC,QAAU,SAAUiuB,EAASvoB,GAClC,QAAgB1B,IAAZiqB,GAAqC,OAAZA,EAC3B,MAAM,IAAI7Y,MAAM,oBAAsB6Y,GAExC,IAAIqB,EAAcvB,EAAMwB,aAAa5rB,EAAIsqB,EAASvoB,IAClD,OAAOA,GAAWA,EAAQ8pB,QAAUF,EAChC5pB,GAAWA,EAAQ+pB,SAAWzb,EAAIG,cAAcmb,GAChDvB,EAAM2B,WAAWJ,IA5JzB,I,oBCAA,WACE,IAAIK,EACE,mEAEN5B,EAAQ,CAEN6B,KAAM,SAASjjB,EAAG/L,GAChB,OAAQ+L,GAAK/L,EAAM+L,IAAO,GAAK/L,GAIjCivB,KAAM,SAASljB,EAAG/L,GAChB,OAAQ+L,GAAM,GAAK/L,EAAO+L,IAAM/L,GAIlCuuB,OAAQ,SAASxiB,GAEf,GAAIA,EAAEuhB,aAAe4B,OACnB,OAA0B,SAAnB/B,EAAM6B,KAAKjjB,EAAG,GAAsC,WAApBohB,EAAM6B,KAAKjjB,EAAG,IAIvD,IAAK,IAAI5L,EAAI,EAAGA,EAAI4L,EAAEpM,OAAQQ,IAC5B4L,EAAE5L,GAAKgtB,EAAMoB,OAAOxiB,EAAE5L,IACxB,OAAO4L,GAITojB,YAAa,SAASpjB,GACpB,IAAK,IAAIyH,EAAQ,GAAIzH,EAAI,EAAGA,IAC1ByH,EAAMG,KAAK3S,KAAKC,MAAsB,IAAhBD,KAAKouB,WAC7B,OAAO5b,GAITia,aAAc,SAASja,GACrB,IAAK,IAAI6b,EAAQ,GAAIlvB,EAAI,EAAGH,EAAI,EAAGG,EAAIqT,EAAM7T,OAAQQ,IAAKH,GAAK,EAC7DqvB,EAAMrvB,IAAM,IAAMwT,EAAMrT,IAAO,GAAKH,EAAI,GAC1C,OAAOqvB,GAITV,aAAc,SAASU,GACrB,IAAK,IAAI7b,EAAQ,GAAIxT,EAAI,EAAGA,EAAmB,GAAfqvB,EAAM1vB,OAAaK,GAAK,EACtDwT,EAAMG,KAAM0b,EAAMrvB,IAAM,KAAQ,GAAKA,EAAI,GAAO,KAClD,OAAOwT,GAITsb,WAAY,SAAStb,GACnB,IAAK,IAAI8b,EAAM,GAAInvB,EAAI,EAAGA,EAAIqT,EAAM7T,OAAQQ,IAC1CmvB,EAAI3b,MAAMH,EAAMrT,KAAO,GAAGkX,SAAS,KACnCiY,EAAI3b,MAAiB,GAAXH,EAAMrT,IAAUkX,SAAS,KAErC,OAAOiY,EAAI1b,KAAK,KAIlB2b,WAAY,SAASD,GACnB,IAAK,IAAI9b,EAAQ,GAAIjT,EAAI,EAAGA,EAAI+uB,EAAI3vB,OAAQY,GAAK,EAC/CiT,EAAMG,KAAK6B,SAAS8Z,EAAI/Q,OAAOhe,EAAG,GAAI,KACxC,OAAOiT,GAITgc,cAAe,SAAShc,GACtB,IAAK,IAAIic,EAAS,GAAItvB,EAAI,EAAGA,EAAIqT,EAAM7T,OAAQQ,GAAK,EAElD,IADA,IAAIuvB,EAAWlc,EAAMrT,IAAM,GAAOqT,EAAMrT,EAAI,IAAM,EAAKqT,EAAMrT,EAAI,GACxD6J,EAAI,EAAGA,EAAI,EAAGA,IACb,EAAJ7J,EAAY,EAAJ6J,GAAwB,EAAfwJ,EAAM7T,OACzB8vB,EAAO9b,KAAKob,EAAUY,OAAQD,IAAY,GAAK,EAAI1lB,GAAM,KAEzDylB,EAAO9b,KAAK,KAElB,OAAO8b,EAAO7b,KAAK,KAIrBgc,cAAe,SAASH,GAEtBA,EAASA,EAAOxsB,QAAQ,iBAAkB,IAE1C,IAAK,IAAIuQ,EAAQ,GAAIrT,EAAI,EAAG0vB,EAAQ,EAAG1vB,EAAIsvB,EAAO9vB,OAC9CkwB,IAAU1vB,EAAI,EACH,GAAT0vB,GACJrc,EAAMG,MAAOob,EAAUe,QAAQL,EAAOE,OAAOxvB,EAAI,IAC1Ca,KAAK+uB,IAAI,GAAI,EAAIF,EAAQ,GAAK,IAAgB,EAARA,EACtCd,EAAUe,QAAQL,EAAOE,OAAOxvB,MAAS,EAAY,EAAR0vB,GAEtD,OAAOrc,IAIXrU,EAAOC,QAAU+tB,EA9FnB,I,mBCaA,SAASC,EAAU4C,GACjB,QAASA,EAAI1C,aAAmD,oBAA7B0C,EAAI1C,YAAYF,UAA2B4C,EAAI1C,YAAYF,SAAS4C,GALzG7wB,EAAOC,QAAU,SAAU4wB,GACzB,OAAc,MAAPA,IAAgB5C,EAAS4C,IAQlC,SAAuBA,GACrB,MAAkC,oBAApBA,EAAIC,aAAmD,oBAAdD,EAAIjwB,OAAwBqtB,EAAS4C,EAAIjwB,MAAM,EAAG,IATjEmwB,CAAaF,MAAUA,EAAIG,a,+JCmErE,SAASC,EACPC,EACAC,EACAC,EACAC,GAEA,IAAKA,EACH,MAAM,IAAIrsB,IACR,+EAIJ,IAAMssB,KACJD,EAAWE,WACsBttB,IAAhCotB,EAAWG,kBACVH,EAAWG,mBAAqBL,GAI/BC,EAAWK,WACdL,EAAWK,SAAW3wB,OAAOswB,EAAWM,UACxCL,EAAWI,SAAWL,EAAWK,UAGnCL,EAAWG,KAAO,CAChBI,WAAYN,EAAWM,WACvBC,eAAgBP,EAAWO,eAC3BF,SAAUL,EAAWK,UAEnBL,EAAWI,WACbL,EAAWG,KAAKE,SAAWJ,EAAWI,UAMnCJ,EAAWE,WAAwCttB,IAAhCotB,EAAWG,mBACjCH,EAAWE,KAAO,CAChBI,WAAYP,EAAWO,WACvBC,eAAgBR,EAAWQ,eAC3BF,SAAUN,EAAWM,UAEnBN,EAAWK,WACbJ,EAAWE,KAAKE,SAAWL,EAAWK,WAM1CL,EAAW9gB,OAASzJ,IAAUQ,YAG1BgqB,EAAW/gB,MAAQzJ,IAAUU,aAC/B6pB,EAAW9gB,OAASzJ,IAAUW,aAG5B4pB,EAAW9gB,MAAQzJ,IAAUU,aAE/B8pB,EAAW/gB,OAASzJ,IAAUW,aAI5B6pB,EAAW/gB,MAAQzJ,IAAUY,eAC/B2pB,EAAW9gB,OAASzJ,IAAUa,eAE5B0pB,EAAW9gB,MAAQzJ,IAAUY,eAC/B4pB,EAAW/gB,OAASzJ,IAAUa,oBAGEzD,IAA9BmtB,EAAWS,iBACTP,EAlIR,SACEJ,EACAC,EACAC,GAgBA,IAAMU,EAdN,SAASC,EAAmBC,GAC1B,IAAMC,EAAU,CAACD,GACjB,GAAIA,EAAYR,kBAAoB,EAAG,CACrC,IAAMH,EAAaH,EAAWc,EAAYR,kBAC1C,IAAKH,EACH,MAAM,IAAIrsB,IACR,gEAGJitB,EAAQzd,KAAR,QAAO,YAASud,EAAmBV,KAErC,OAAOY,EAGYF,CAAmBX,GAClCc,EAASJ,EAAaxR,KAAI,YAAC,OAAI9b,EAAEotB,kBACjCO,EAAOL,EAAaxR,KAAI,YAAC,OAAI9b,EAAEotB,eAAiBptB,EAAE4tB,WAAa,KAC/DC,EAA0BxwB,KAAK6H,IAAL,WAAI,YAAQyoB,IAAQtwB,KAAKskB,IAAL,WAAI,YAAQ+L,IAAU,EACtEG,GAA2B,GAC7BP,EAAa3W,SAAQ,YACnB,QAAyBlX,IAArBO,EAAEqtB,eACJ,MAAM,IAAI7sB,IACR,kGAGJR,EAAEqtB,eAAiBQ,KAqGnBC,CACEpB,EACAC,EACAC,GA5FR,SAAmDA,EAAYC,GAG7D,IAAM5sB,EAAQ5C,KAAKskB,IAAIiL,EAAWQ,eAAgBP,EAAWO,gBAKvDW,EAJM1wB,KAAK6H,IACf0nB,EAAWQ,eAAiBR,EAAWgB,WAAa,EACpDf,EAAWO,eAAiBP,EAAWe,WAAa,GAEzB3tB,EAAQ,EACrC2sB,EAAWS,eAAiBU,EAC5BlB,EAAWQ,eAAiBU,EAqFxBC,CAA0CpB,EAAYC,WAMnDD,EAAWI,iB,IAGC/D,E,WACnB,WAAYgF,EAAWnd,GAAQ,oBAC7B,KAAKmd,UAAYA,EACjB,KAAK/b,KAAO+b,EAAU/b,KACtB,KAAKgc,kBAAoBpd,E,oFAI3B,wGAE+B,KAAKoB,KAAK4B,oBAFzC,cAEQE,EAFR,gBAGgC,KAAKia,UAAU3Z,YAH/C,cAGQsU,EAHR,gBAIuB,KAAK1W,KAAKuC,UAC7BmU,EAAgBvqB,aAAe,KAAK6vB,mBALxC,UAO6B,yBAHrBzgB,EAJR,QAOakb,YAPb,iBAQIlb,EAAO8F,QAAUvV,YACfyP,EAAO8F,QACPS,EAAeqI,sBAAsBpe,OACrC,EACA2qB,EAAgBvqB,cAZtB,2BAcoC,0BAAvBoP,EAAOkb,YAdpB,iBAeIlb,EAAO8F,QAAUvV,YACfyP,EAAO8F,QACPS,EAAekI,wBAAwBje,OACvC,EACA2qB,EAAgBvqB,cAnBtB,8BAsBU,IAAImC,IAAJ,iEACsDiN,EAAO0gB,eAvBvE,iCA0BS1gB,GA1BT,iD,oHA8BA,0GACuB,KAAK6G,YAD5B,OACQ7G,EADR,OAGM2gB,EAAgB3gB,EAAOpP,aACrBgwB,EAAS,IAAIxuB,MAAM4N,EAAO8F,QAAQiB,WAC/BhY,EAAI,EALf,YAKkBA,EAAI6xB,EAAOryB,QAL7B,iCAMsB,KAAKkW,KAAKuC,UAAU2Z,GAN1C,OAMIC,EAAO7xB,GANX,OAOI4xB,EAAgBC,EAAO7xB,GAAG6B,aAP9B,QAKqC7B,GAAK,EAL1C,gDAUS6xB,GAVT,iD,2HAcA,oGACuB,KAAKC,YAD5B,cACQD,EADR,yBAGSA,EAAO,IAHhB,gD,mIAOA,sGACuB,KAAKC,YAD5B,cACQD,EADR,OAEQE,EAAoB,GAC1BF,EAAO1X,SAAQ,YACa,kBAAtBjC,EAAMiU,cACR4F,EAAkB7Z,EAAM8Z,WAAa9Z,MAL3C,kBAQS6Z,GART,gD,8HAWA,WAA0BE,GAA1B,uFACkC,KAAKC,2BADvC,cACQH,EADR,yBAESA,EAAkBE,IAF3B,gD,8HAKA,0GAE6B,KAAKna,YAFlC,aAEQqa,EAFR,OAE+Cpb,SAE7Bqb,SAAW,GAJ7B,8CAKWnvB,GALX,uBAQkC,KAAKwuB,UAAUY,uBARjD,UAQQC,EARR,SAYMH,EAAYI,gBAAkB,GAZpC,oBAaUC,EAAW,KAAKC,oBAAoBN,EAAYI,gBAb1D,uBAeY,IAAIvuB,IACR,oEAhBR,aAoBQmuB,EAAYO,KAAOF,EAAS9Y,kBApBpC,uBAqBY,IAAI1V,IAAmB,mCArBnC,iCAwBW,CACLrB,IAAK6vB,EAAS9lB,KAAKwK,SAAS,QAC5BzT,MAAO0uB,EAAYQ,YACnBC,IAAKT,EAAYQ,YAAcR,EAAYU,WAAa,EACxDH,KAAMP,EAAYU,aA5BxB,YAgCIP,EAAkBQ,oBAClB,KAAKpd,KAAKI,+BAjCd,oBAmCS,KAAKJ,KAAKI,+BAnCnB,uBAoCY,IAAIzB,MACR,wGArCR,yBAyCsB,KAAKqB,KAAKI,+BAC1Bqc,EAAYC,SACZD,EAAYQ,YACZR,EAAYQ,YAAcR,EAAYU,WAAa,GA5CzD,YAyCUlwB,EAzCV,QA+CYnD,SAAW2yB,EAAYU,WA/CnC,uBAgDY,IAAIE,IACR,uEAjDR,iCAqDW,CACLpwB,MACAc,MAAO0uB,EAAYQ,YACnBC,IAAKT,EAAYQ,YAAcR,EAAYU,WAAa,EACxDH,KAAMP,EAAYU,aAzDxB,sCA6DS5vB,GA7DT,iD,iFAgEA,WACE,OAAO,KAAK+vB,YAAW,kBAAM,O,kEAG/B,6IACiC,KAAKtd,KAAK2B,gBAD3C,uBACUX,EADV,EACUA,aADV,SAGkC,KAAK+a,UAAUY,uBAHjD,cAGQC,EAHR,gBAK4B,KAAKxa,YALjC,cAKQqa,EALR,iBAOkC,KAAKD,2BAPvC,WAOQH,EAPR,SAWIrb,EAAe,GACf,KAAKhB,KAAK/Q,QAAQqR,kBAClBmc,EAAYpb,QAAQqb,UAAY,GACK,qBAArCD,EAAYpb,QAAQnU,IAAI6Q,KAAK,KAdjC,kCAgB4B,KAAKwf,qBAhBjC,aAgBUC,EAhBV,4BAkBcvwB,EAAoBuwB,EAApBvwB,IAAKc,EAAeyvB,EAAfzvB,MAAOmvB,EAAQM,EAARN,IACdO,EAASzwB,YAAYC,GACrBywB,EAAYjB,EAAYpb,QAAQnU,IACnC0c,KAAI,YAAI,OAAKkC,EAAO,GAAK,IAAM,IAAMA,EAAKtK,SAAS,OACnDzD,KAAK,IACJ0f,IAAWC,EAvBrB,uBAwBc,IAAIpvB,IAAJ,kDACuCmuB,EAAYpb,QAAQqb,SAD3D,gBAC2E3uB,EAD3E,aACqFmvB,EADrF,2BAC2GQ,EAD3G,6BACyID,IAzBvJ,yBAkC8B,KAAKE,mBAlCnC,QAkCQC,EAlCR,OAmCQC,EAAU,CACdC,mBAAoBrB,EAAYpb,QAAQ4b,aAAe,EACvDc,UAAW,CAAEC,YAAa,EAAGC,aAAc,GAC3CC,eAAgB,CACdC,UADc,SACJ7B,GAIR,OAHK,KAAKA,KACR,KAAKA,GAAa,CAAE0B,YAAa,EAAGC,aAAc,IAE7C,KAAK3B,MAKZ8B,EAAmB,YACvB,IAAMC,EAAQzB,EAAkB0B,sBAAsBC,GACtD,IAAKF,EACH,MAAM,IAAI/vB,IAAJ,+BACoBiwB,EADpB,iBAKR,OAAOF,EAAM/kB,OAAO,EAAMskB,EAAevB,EAAmBwB,IAE1DtC,EAAU,IAAI5tB,MAAM8uB,EAAYpb,QAAQmV,YACnClsB,EAAI,EA3Df,aA2DkBA,EAAIixB,EAAQzxB,QA3D9B,2BA6DMyxB,EAAQjxB,GAAKk0B,YACX,KACAJ,EACAxB,EACAH,EACAmB,EACAvB,EACAwB,EACA7c,EACA1W,GAEFixB,EAAQjxB,GAAG0wB,SACTyB,EAAY3Y,gBACZ2Y,EAAYpb,QAAQod,cACpBn0B,EACA,EA5ER,wDA8EU,gBAAauB,KA9EvB,wBA+EQ4Q,QAAQoN,KACN,8DAEF0R,EAAUA,EAAQmD,QAAO,YAAC,QAAM5wB,KAlFxC,gDA2DsCxD,GAAK,EA3D3C,wBA4FE,IAASA,EAAI,EAAGA,EAAIixB,EAAQzxB,OAAQQ,GAAK,GAC/BwwB,EAAqBS,EAAQjxB,GAA7BwwB,mBACgB,GACtBP,EACEgB,EACAjxB,EACAixB,EAAQjxB,GACRixB,EAAQT,IAnGhB,yBAwGSS,GAxGT,2D,qHA2GA,WAAiBoD,GAAjB,+GAEQC,EAAW,KAAK7C,UAAUzF,aAAe,KAAK0F,mBAChD6C,EAAiB,KAAK7e,KAAKQ,aAAahS,IAAIowB,MAE9CC,EAAiB,KAAKC,gBACtB,KAAK9e,KAAKQ,aAAa/Q,IAAImvB,EAAUC,IANzC,SASyBA,EATzB,YASQtD,EATR,OASyCmD,OAAOC,IAGlC70B,SAAU,KAAKkW,KAAKI,+BAZlC,iCAa8B,KAAKgC,YAbnC,aAaUqa,EAbV,QAekBpb,QAAQqb,UAAY,IACE,IAAlCD,EAAYpb,QAAQqb,UAhB1B,wBAkBYqC,EACJtC,EAAYpb,QAAQqb,UAAY,EAC5BD,EAAYpb,QAAQqb,cACpBnvB,EArBZ,UAsBsC,KAAKwuB,UAAUY,uBAtBrD,QA0BM,IAJMC,EAtBZ,OAuBYoC,EAAa,GAGV10B,EAAI,EAAGA,EAAIixB,EAAQzxB,OAAQQ,GAAK,EACjC20B,OACY1xB,IAAhBwxB,EAA4BA,EAAcxD,EAAQjxB,GAAG2wB,YACnDuC,EAAYwB,EAAWC,MAEzBzB,EAAY,CACVjB,GAAI0C,EACJlxB,MAAOwtB,EAAQjxB,GAAG4wB,eAClBgC,KAAMje,KAER+f,EAAWC,GAASzB,IAGhBN,EACJ3B,EAAQjxB,GAAG4wB,gBACVK,EAAQjxB,GAAG40B,aAAe3D,EAAQjxB,GAAGoxB,YACtC,GACQ8B,EAAUN,MAClBM,EAAUN,IAAMA,GAEd3B,EAAQjxB,GAAG4wB,eAAiBsC,EAAUzvB,QACxCyvB,EAAUzvB,MAAQwtB,EAAQjxB,GAAG4wB,gBA/CvC,iBAoDYruB,QAAQof,IACZlB,OAAOoU,OAAOH,GAAYpV,IAA1B,uCAA8B,WAAM4T,GAAN,uEACN,IAAlBA,EAAUjB,IAAaiB,EAAUzvB,OAASyvB,EAAUN,KAD5B,gCAEJ,EAAKld,KAAKI,+BAC9Bod,EAAUjB,GACViB,EAAUzvB,MACVyvB,EAAUN,KALc,OAE1BM,EAAUvwB,IAFgB,kDAA9B,wDArDR,QAiEM,IAAS3C,EAAI,EAAGA,EAAIixB,EAAQzxB,OAAQQ,GAAK,EACjC20B,OACY1xB,IAAhBwxB,EAA4BA,EAAcxD,EAAQjxB,GAAG2wB,YACjDuC,EAAYwB,EAAWC,KACZzB,EAAUvwB,KACzBsuB,EAAQjxB,GAAG80B,qBAAqB5B,EAAWZ,GAtErD,iCA4ESrB,GA5ET,iD,8DAiFF,+CACG/W,MAAM,KACNC,SAAQ,YAAM,OAAIpY,YAAY0qB,EAAWvqB,O,mJCxe5C,SAAS6yB,EAAmC7zB,GAC1C,IAAM8zB,EAAa9zB,EAAOyuB,QAAQ,GAClC,OAAoB,IAAhBqF,EACK9zB,EAAOgW,SAAS,QAElBhW,EAAOgW,SAAS,OAAQ,EAAG8d,GAkCpC,SAASC,EAAaC,EAASh0B,GAI7B,GAHKA,EAAOhB,cACVgB,EAAS5B,EAAO2I,KAAK/G,IAEP,MAAZg0B,EACF,OAAOH,EAAmC7zB,GAE5C,GAAgB,MAAZg0B,EACF,OAAOp1B,OAAOC,aAAamB,EAAO,IAEpC,GAAgB,MAAZg0B,EAAiB,CACnB,IAAMja,EAAMka,IAAKC,YAAYl0B,GAC7B,GACE+Z,EAAIoa,YAAYtG,OAAOuG,mBACvBra,EAAIsa,SAASxG,OAAOyG,kBAEpB,MAAM,IAAI7e,IAAuB,oBAEnC,OAAOsE,EAAIwa,WAEb,GAAgB,MAAZP,EACF,OAAOh0B,EAAOhB,YAAY,GAE5B,GAAgB,MAAZg1B,EACF,OAAOh0B,EAAOw0B,YAAY,GAE5B,GAAgB,MAAZR,EACF,OAAOh0B,EAAOy0B,aAAa,GAE7B,GAAgB,MAAZT,EACF,OAAOh0B,EAAO00B,SAAS,GAEzB,GAAgB,MAAZV,EACF,OAAOh0B,EAAO20B,UAAU,GAE1B,GAAgB,MAAZX,EACF,OAAOh0B,EAAO4uB,YAAY,GAE5B,GAAgB,MAAZoF,EAAiB,CACnB,IAAM/F,EAAM4F,EAAmC7zB,GAC/C,OAAO6tB,OAAO1Z,SAAS8Z,EAAIrsB,QAAQ,MAAO,IAAK,IAEjD,GAAgB,MAAZoyB,EACF,OAtEJ,SAA4Bh0B,GAC1B,IAAM40B,EAAYh2B,OAAOC,aAAamB,EAAO,IACvC1B,EAAS0B,EAAOhB,YAAY,GAE5B61B,EAAS,CACb31B,EAAG,CAAC,WAAY,GAChB8C,EAAG,CAAC,YAAa,GACjB/C,EAAG,CAAC,cAAe,GACnBoS,EAAG,CAAC,eAAgB,GACpBvS,EAAG,CAAC,cAAe,GACnBg2B,EAAG,CAAC,eAAgB,GACpBxtB,EAAG,CAAC,cAAe,IACnBstB,GACF,IAAKC,EACH,MAAM,IAAI/xB,IAAJ,wCAAwD8xB,EAAxD,MAMR,IAHA,kBAA8BC,EAA9B,GAAOE,EAAP,KAAkBC,EAAlB,KACMllB,EAAQ,IAAI3N,MAAM7D,GACpB6B,EAAS,EACJrB,EAAI,EAAGA,EAAIR,EAAQQ,GAAK,EAC/BgR,EAAMhR,GAAKkB,EAAO+0B,GAAW50B,GAC7BA,GAAU60B,EAEZ,OAAOllB,EA8CEmlB,CAAmBj1B,GAG5B,MAAM,IAAI8C,IAAJ,gCAAgDkxB,IAqFxD,SAASkB,EAAcC,GACrB,GAAIA,aAAiB/2B,EACnB,OAAOy1B,EAAmCsB,GAE5C,GAAIA,EAAM72B,QAAU62B,EAAM1G,QAAS,CAEjC,IAAK0G,EAAMA,EAAM72B,OAAS,GAAI,CAE5B,IAAM82B,EAAYD,EAAM1G,QAAQ,GAChC,OAAO7vB,OAAOC,aAAP,aAAM,YAAiBs2B,EAAMz2B,MAAM,EAAG02B,KAE/C,OAAOx2B,OAAOC,aAAP,aAAM,YAAiBs2B,IAEhC,OAAOv2B,OAAOu2B,GAGF,SAAUnC,EACtBt0B,EACAk0B,EACAxB,EACAH,EACAmB,EACAvB,EACAwB,EACA7c,EACA6f,GAEA,IAAMC,EAAa,IAAIC,IA6BvB,GA3BAD,EAAWlnB,MAAQwkB,EAAiB,MAKpC0C,EAAWE,UAAY5C,EAAiB,MAEpCpd,EAAe,IAAuC,IAAlCyb,EAAYpb,QAAQqb,SAC1CoE,EAAW7F,WAAamD,EAAiB,MAEzC0C,EAAW7F,WAAawB,EAAYpb,QAAQqb,SAG9CoE,EAAWpF,WAAa0C,EAAiB,MAEzC0C,EAAW5F,eAAiBkD,EAAiB,MACzCxB,EAAkBqE,UACpBH,EAAW5F,gBAAkB2C,EAAQC,oBAEvCD,EAAQC,mBAAqBgD,EAAW5F,eACxC4F,EAAWI,YAAc9C,EAAiB,MAEtCxB,EAAkBuE,oBACpBL,EAAW/F,SAAW2F,EAActC,EAAiB,QAInD0C,EAAWM,aAAc,CAE3B,IAAMvG,EAAO,GACbA,EAAKjhB,MAAQwkB,EAAiB,MACzBxB,EAAkBuE,oBACrBtG,EAAKE,SAAW2F,EAActC,EAAiB,OAC/C0C,EAAW/F,SAAWF,EAAKE,UAE7BF,EAAKI,WAAamD,EAAiB,MACnCvD,EAAKK,eAAiBkD,EAAiB,OACnCvD,EAAKjhB,OAASihB,EAAKI,YAAc,KACnC6F,EAAWjG,KAAOA,GAEpBiG,EAAWO,aAAejD,EAAiB,MAGvCvD,EAAKjhB,MAAQzJ,IAAUO,eACzBowB,EAAWlnB,OAASzJ,IAAUW,aAG5B+pB,EAAKjhB,MAAQzJ,IAAUM,iBACzBqwB,EAAWlnB,OAASzJ,IAAUa,oBAIvB8vB,EAAWQ,sBACpBR,EAAWhG,iBAAmBsD,EAAiB,MAAQyC,EAAe,GAKxE,IAAMU,EAAUnD,EAAiB,MACjC,GAAImD,EAAU,EAEZ,MAAM,IAAIjzB,IAAmB,oBAO/B,IAHA,IAAMkzB,EAAK5E,EAAkB6E,YAAYF,GACnCG,EAAQF,EAAG13B,OAERQ,EAAI,EAAGA,EAAIo3B,EAAOp3B,GAAK,EAAG,CACjC,IAAMq3B,EAAQH,EAAGl3B,GACXs3B,EAAUD,EAAMjZ,OAAO,EAAG,GAC1B8W,EAAUmC,EAAMjZ,OAAO,EAAG,GAE1BmZ,EAAWjF,EAAkBkF,eAAeH,GAClD,IAAKE,EACH,MAAM,IAAIvzB,IAAJ,6CACkCqzB,IAG1C,IAAMI,EAAUF,EAASvoB,OACvBpP,EACA0zB,EACAvB,EACAwB,GAEFiD,EAAWrY,KAAKmZ,GAAWrC,EAAaC,EAASuC,GAGnD,GAAKjB,EAAWkB,oBA8CT,GAAIlB,EAAWmB,iBACpBnB,EAAWoB,UAAY,KACvBpB,EAAWqB,cAAgB,SACtB,CAEL,IADA,IAAMC,EAAQ,IAAIz0B,MAAMmzB,EAAWpF,YAC1BpxB,EAAI,EAAGA,EAAI83B,EAAMt4B,OAAQQ,GAAK,EACrC83B,EAAM93B,GAAK8zB,EAAiB,MAI9B,GAFA0C,EAAWoB,UAAY93B,OAAOC,aAAP,aAAuB+3B,GAE1CtB,EAAWuB,4BAA6B,CAC1C,IAAK,IAAI/3B,EAAI,EAAGA,EAAI83B,EAAMt4B,OAAQQ,GAAK,EACrC83B,EAAM93B,GAAK8zB,EAAiB,MAG9B0C,EAAWqB,cAAgBC,OA7DM,CAEnC,IAAgBE,EAAmBlE,EAAiB,MAChDkE,IACFxB,EAAWyB,aA3MjB,SACEzB,EACAwB,EACAlE,EACAxB,EACA5b,GAEA,IAAIwhB,EAAiB,EACjBC,EAAgB3B,EAAW5F,eAAiB,EAC1CqH,EAAe,IAAI50B,MAAM20B,GAE/B,SAASI,EAAT,GAA4C,uBAArBva,EAAqB,KAAfoW,EAAe,KACpCvnB,EAAOonB,EAAiBG,GAC9B,MAAa,cAATpW,EACK/d,OAAOC,aAAa2M,GAEhB,WAATmR,EACKnR,EAAKwK,SAAS,QAEV,aAAT2G,EACKnR,EAAK2rB,UAKP3rB,EAGT,IAAK,IAAI1M,EAAI,EAAGA,EAAIg4B,EAAkBh4B,GAAK,EAAG,CAC5C,IAAM4R,EAAO9R,OAAOC,aAAa+zB,EAAiB,OAE5CwE,EAAexE,EAAiB,MAEhCyE,EAAc,CAAE3mB,QAEhB4mB,EAAc,CAClB/O,EAAG,CAAC,YAAa,MACjBlX,EAAG,CAAC,SAAUmE,EAAe,EAAI,KAAO,MACxC9V,EAAG,CAAC,SAAU,MACdyZ,EAAG,CAAC,SAAU,MACd2b,EAAG,CAAC,SAAU,MACdh2B,EAAG,CAAC,YAAa,MACjBH,EAAG,CAAC,SAAU,MACd6kB,EAAG,CAAC,WAAY,MAChB4C,EAAG,CAAC,SAAU,MACdwD,EAAG,CAAC,SAAU,MACd3f,EAAG,CAAC,SAAU,MACd1B,EAAG,CAAC,SAAU,OACdmI,GAEF,IAAK4mB,EACH,MAAM,IAAIx0B,IAAJ,qCAAqD4N,EAArD,MAGR2mB,EAAY7rB,KAAO0rB,EAAaI,GAGhC,IAAMC,EAAc,CAAEhP,EAAG,CAAC,SAAU,OAAQ7X,GACxC6mB,IACFF,EAAY7rB,KAAO,CAAC6rB,EAAY7rB,KAAM0rB,EAAaK,KAGrDP,GAAkBI,EAClBC,EAAY94B,IAAMy4B,EAElBC,GAAiBG,EACjBC,EAAYG,OAASP,EAGR,MAATvmB,GAAyB,MAATA,EAClBumB,GAAiBI,EAAY7rB,KACX,MAATkF,GAAyB,MAATA,EACzBumB,GAAiBI,EAAY7rB,KAAKlN,OAChB,MAAToS,IACTumB,GAAiB,GAGnBF,EAAaj4B,GAAKu4B,EAEpB,OAAON,EA4HuBU,CACxBnC,EACAwB,EACAlE,EACAxB,EACA5b,IAKJ,IAAIke,EAAc4B,EAAWpF,WAyB7B,GAxBIoF,EAAWyB,cACbzB,EAAWyB,aAAa9d,SAAQ,YAAmB,IAAhBvI,EAAgB,EAAhBA,KAAMlF,EAAU,EAAVA,KAC1B,MAATkF,GAAyB,MAATA,EAClBgjB,GAAeloB,EACG,MAATkF,GAAyB,MAATA,EACzBgjB,GAAeloB,EAAKlN,OACF,MAAToS,IACTgjB,GAAe,MAIjB7F,OAAO6J,MAAMhE,KACfziB,QAAQoN,KAAR,UAEIiX,EAAW/F,UAAX,UACG+F,EAAW7F,WADd,YAC4B6F,EAAW5F,gBAH3C,sCAMAgE,EAAc4B,EAAWpF,YAE3BoF,EAAW5B,YAAcA,EAGzB4B,EAAWqC,eAAiB/E,EAAiB,MACzC0C,EAAWuB,4BAA6B,CAE1C,IADA,IAAMD,EAAQ,IAAIz0B,MAAMmzB,EAAWpF,YAC1BpxB,EAAI,EAAGA,EAAI83B,EAAMt4B,OAAQQ,GAAK,EACrC83B,EAAM93B,GAAK8zB,EAAiB,MAE9B0C,EAAWqB,cAAgBC,GAqB/B,OAAOtB,K,mIC1QT,IAAMsC,EAAc,CAClBvL,EAAG,EACH5tB,EAAG,EACHS,EAAG,EACH8C,EAAG,EACH61B,EAAG,EACHC,EAAG,EACH7W,EAAG,EACHpX,EAAG,EACHa,EAAG,EACHnC,EAAG,G,IAiCgBgtB,E,WACnB,iCACE,KAAKtY,KAAO,G,4CAMd,WACE,SAAU,KAAK7O,MAAQzJ,IAAUQ,e,8BAInC,WACE,SAAU,KAAKiJ,MAAQzJ,IAAUS,oB,+BAInC,WACE,SAAU,KAAKgJ,MAAQzJ,IAAUU,c,4BAInC,WACE,SAAU,KAAK+I,MAAQzJ,IAAUW,e,mCAInC,WACE,SAAU,KAAK8I,MAAQzJ,IAAUY,gB,uCAInC,WACE,SAAU,KAAK6I,MAAQzJ,IAAUa,iB,qBAInC,WACE,SAAU,KAAK4I,MAAQzJ,IAAUc,c,qBAInC,WACE,SAAU,KAAK2I,MAAQzJ,IAAUe,c,yBAInC,WACE,SAAU,KAAK0I,MAAQzJ,IAAUgB,kB,wBAInC,WACE,SAAU,KAAKyI,MAAQzJ,IAAUiB,e,yBAInC,WACE,SAAU,KAAKwI,MAAQzJ,IAAUkB,Y,6BAInC,WACE,SAAU,KAAKuI,MAAQzJ,IAAUmB,sB,wBAMnC,WACE,SAAU,KAAK0vB,UAAY7wB,IAAUE,sB,+BAIvC,WACE,SAAU,KAAK2wB,UAAY7wB,IAAUG,6B,uCAIvC,WACE,SAAU,KAAK0wB,UAAY7wB,IAAUC,kC,4BAIvC,WACE,SAAU,KAAK4wB,UAAY7wB,IAAUI,oB,0BAOvC,WAIE,OAHK,KAAK2xB,WAAa,KAAKqB,aAC1B,KAAKrB,UAtOX,SAA4BpB,EAAYtD,GAEtC,IAAKsD,EAAW5B,aAAgB4B,EAAWpF,cAIvCoF,EAAWmB,iBAAf,CAKA,IAAMuB,EAAkB1C,EAAW5F,eAAiBsC,EAAUzvB,MAE9D,IAAK+yB,EAAWyB,aACd,OAAO/E,EAAUvwB,IACdyb,OAAO8a,EAAiB1C,EAAW5B,aACnC/xB,cAML,IAHA,IAAIi1B,EAAQ,GACRqB,EAAYD,EACZE,EAAqB,EAClBtB,EAAMt4B,OAASg3B,EAAWpF,YAC/B,GAAIgI,EAAqB5C,EAAWyB,aAAaz4B,OAAQ,CACvD,IAAM65B,EAAU7C,EAAWyB,aAAamB,GACxC,GAAqB,MAAjBC,EAAQznB,MAAiC,MAAjBynB,EAAQznB,KAClCwnB,GAAsB,OACjB,GAAIC,EAAQ55B,MAAQq4B,EAAMt4B,OAAS,EAIxC,GAFA45B,GAAsB,EAED,MAAjBC,EAAQznB,KAAc,CAExB,IAAM0nB,EAAMD,EAAQ3sB,KAAKwN,MAAM,KACzBqf,EAAQz5B,OAAOC,aAAP,aAAM,YAAiBu5B,IACrCxB,GAASyB,EACTJ,GAAaI,EAAM/5B,WACO,MAAjB65B,EAAQznB,MAGjBkmB,GAASuB,EAAQ3sB,KAAK,GACtBysB,GAAa,GACa,MAAjBE,EAAQznB,MAEjBkmB,GAASuB,EAAQG,IACjBL,GAAa,GACa,MAAjBE,EAAQznB,KAEjBkmB,GAASuB,EAAQ3sB,KACS,MAAjB2sB,EAAQznB,KAEjBunB,GAAaE,EAAQ3sB,KACK,MAAjB2sB,EAAQznB,KAEjBkmB,GAASuB,EAAQ3sB,KACS,MAAjB2sB,EAAQznB,KAIjBunB,GAAaE,EAAQ3sB,KACK,MAAjB2sB,EAAQznB,KAGjBkmB,GAASuB,EAAQ3sB,KACS,MAAjB2sB,EAAQznB,MAERynB,EAAQznB,UAGd,GAAIwnB,EAAqB5C,EAAWyB,aAAaz4B,OAAQ,CAE9D,IAAM0R,EAAQgiB,EAAUvwB,IAAIyb,OAC1B+a,EACA3C,EAAWyB,aAAamB,GAAoB35B,IAAMq4B,EAAMt4B,OAAS,GAEnEs4B,GAAS5mB,EACTioB,GAAajoB,EAAM1R,YAEhB,CAEL,IAAM0R,EAAQgiB,EAAUvwB,IAAIyb,OAC1B+a,EACA3C,EAAWpF,WAAa0G,EAAMt4B,QAEhCs4B,GAAS5mB,EACTioB,GAAajoB,EAAM1R,OAIvB,OAAOs4B,EAAMj1B,eA6IQ42B,CAAmB,KAAM,KAAKR,aAE1C,KAAKrB,Y,gCAOd,WACE,IACG,KAAKF,qBACN,KAAKgC,aACJ,KAAKC,kBACN,KAAKpJ,MACL,KAAKI,aAAe,KAAKJ,KAAKI,WAC9B,CACA,IAAMiJ,EAAK,KAAKC,wBAA0B,IAAM,IAC1CC,EAAK,KAAKC,4BAA8B,IAAM,IAChDC,EAAK,IACLC,EAAK,IACL,KAAKC,WACPF,EAAK,IACLC,EAAK,KACI,KAAKE,YACdH,EAAK,IACLC,EAAK,KAGP,IAAMrnB,EAAM,GACRwnB,EAAQ,KAAKvJ,gBAAkB,KAAKkG,aAexC,OAdI,KAAKnG,eAAiB,KAAKL,KAAKK,gBAAkBwJ,EAAQ,IAC5DA,GAASA,GAEPA,EAAQ,GACVxnB,EAAI,GAAKgnB,EACThnB,EAAI,GAAKonB,EACTpnB,EAAI,GAAKknB,EACTlnB,EAAI,GAAKqnB,IAETrnB,EAAI,GAAKgnB,EACThnB,EAAI,GAAKonB,EACTpnB,EAAI,GAAKknB,EACTlnB,EAAI,GAAKqnB,GAEJrnB,EAAIa,KAAK,IAElB,OAAO,O,kCAgBT,SAAqByf,EAAWZ,GAC1B,KAAK2F,cAGP,KAAKA,aAAa9d,SAAQ,YACC,MAArBoe,EAAY3mB,MAjMxB,SACE4kB,EACAtD,EACAZ,EACAiG,GAEA,GAAKrF,EAAL,CAKA,IAAMmH,EAAW9B,EAAYG,OAASxF,EAAUzvB,MAC1C62B,EAAUpH,EAAUvwB,IAAI6sB,OAAO6K,GACjCC,IACF/B,EAAYgC,IAAMD,GAEpB,IAAIE,EAAa1B,EAAYwB,QACVr3B,IAAfu3B,IACFA,EAAa,GAEf,IACMlX,EADqBgP,EAAkBmI,mBAAmBD,GAChCjC,EAAY7rB,MACxC4W,IACFiV,EAAYiB,IAAMlW,IA2KZoX,CACE,EACAxH,EACAZ,EACAiG,OASL,KAAKX,WACN1E,EAAUzvB,OAAS,KAAKmtB,gBACxBsC,EAAUN,KACR,KAAKhC,gBAAkB,KAAKgE,aAAe,KAAKxD,YAAc,IAEhE,KAAK6H,WAAa/F,K,oBAItB,WAAM,WACExmB,EAAO,GAUb,OATA+T,OAAO9a,KAAK,MAAMwU,SAAQ,YACJ,MAAhBpM,EAAEyhB,OAAO,KAGb9iB,EAAKqB,GAAK,EAAKA,OAGjBrB,EAAKkrB,UAAY,KAAK+C,eAEfjuB,M,yBC9UX,IAAIkuB,EAAyB,qBAATC,KAAuBA,KAAOx7B,KAC9Cy7B,EAAY,WAChB,SAAS93B,IACT3D,KAAKmV,OAAQ,EACbnV,KAAK07B,aAAeH,EAAOG,aAG3B,OADA/3B,EAAEb,UAAYy4B,EACP,IAAI53B,EANK,IAQhB,SAAU63B,IAEQ,SAAU57B,GAE1B,IAAI+7B,EACY,oBAAqBH,EADjCG,EAEQ,WAAYH,GAAQ,aAAch3B,OAF1Cm3B,EAIA,eAAgBH,GAChB,SAAUA,GACT,WACC,IAEE,OADA,IAAII,MACG,EACP,MAAOrQ,GACP,OAAO,GALV,GANDoQ,EAcQ,aAAcH,EAdtBG,EAeW,gBAAiBH,EAOhC,GAAIG,EACF,IAAIE,EAAc,CAChB,qBACA,sBACA,6BACA,sBACA,uBACA,sBACA,uBACA,wBACA,yBAGEC,EACFC,YAAYC,QACZ,SAASxL,GACP,OAAOA,GAAOqL,EAAYvL,QAAQlP,OAAOte,UAAU+U,SAAS5U,KAAKutB,KAAS,GAIhF,SAASyL,EAAcvQ,GAIrB,GAHoB,kBAATA,IACTA,EAAOjrB,OAAOirB,IAEZ,4BAA4BwQ,KAAKxQ,GACnC,MAAM,IAAIlmB,UAAU,0CAEtB,OAAOkmB,EAAKyQ,cAGd,SAASC,EAAev2B,GAItB,MAHqB,kBAAVA,IACTA,EAAQpF,OAAOoF,IAEVA,EAIT,SAASw2B,EAAYC,GACnB,IAAI/1B,EAAW,CACbg2B,KAAM,WACJ,IAAI12B,EAAQy2B,EAAM5vB,QAClB,MAAO,CAAC8vB,UAAgB54B,IAAViC,EAAqBA,MAAOA,KAU9C,OANI81B,IACFp1B,EAAS/B,OAAO+B,UAAY,WAC1B,OAAOA,IAIJA,EAGT,SAASk2B,EAAQpnB,GACfrV,KAAKigB,IAAM,GAEP5K,aAAmBonB,EACrBpnB,EAAQyF,SAAQ,SAASjV,EAAO6lB,GAC9B1rB,KAAK08B,OAAOhR,EAAM7lB,KACjB7F,MACMgE,MAAMgqB,QAAQ3Y,GACvBA,EAAQyF,SAAQ,SAASlJ,GACvB5R,KAAK08B,OAAO9qB,EAAO,GAAIA,EAAO,MAC7B5R,MACMqV,GACT+L,OAAOub,oBAAoBtnB,GAASyF,SAAQ,SAAS4Q,GACnD1rB,KAAK08B,OAAOhR,EAAMrW,EAAQqW,MACzB1rB,MAgEP,SAAS48B,EAASC,GAChB,GAAIA,EAAKC,SACP,OAAO55B,QAAQ65B,OAAO,IAAIv3B,UAAU,iBAEtCq3B,EAAKC,UAAW,EAGlB,SAASE,EAAgBC,GACvB,OAAO,IAAI/5B,SAAQ,SAASC,EAAS45B,GACnCE,EAAOC,OAAS,WACd/5B,EAAQ85B,EAAOl7B,SAEjBk7B,EAAOE,QAAU,WACfJ,EAAOE,EAAOpV,WAKpB,SAASuV,EAAsBC,GAC7B,IAAIJ,EAAS,IAAIK,WACbC,EAAUP,EAAgBC,GAE9B,OADAA,EAAOO,kBAAkBH,GAClBE,EAoBT,SAASE,EAAY59B,GACnB,GAAIA,EAAIU,MACN,OAAOV,EAAIU,MAAM,GAEjB,IAAIm9B,EAAO,IAAIhb,WAAW7iB,EAAI4iB,YAE9B,OADAib,EAAK53B,IAAI,IAAI4c,WAAW7iB,IACjB69B,EAAK77B,OAIhB,SAAS87B,IA0FP,OAzFA39B,KAAK88B,UAAW,EAEhB98B,KAAK49B,UAAY,SAASf,GAhM5B,IAAoBrM,EAiMhBxwB,KAAK69B,UAAYhB,EACZA,EAEsB,kBAATA,EAChB78B,KAAK89B,UAAYjB,EACRlB,GAAgBC,KAAK94B,UAAUi7B,cAAclB,GACtD78B,KAAKg+B,UAAYnB,EACRlB,GAAoBsC,SAASn7B,UAAUi7B,cAAclB,GAC9D78B,KAAKk+B,cAAgBrB,EACZlB,GAAwBwC,gBAAgBr7B,UAAUi7B,cAAclB,GACzE78B,KAAK89B,UAAYjB,EAAKhlB,WACb8jB,GAAuBA,KA5MlBnL,EA4M6CqM,IA3MjDuB,SAASt7B,UAAUi7B,cAAcvN,KA4M3CxwB,KAAKq+B,iBAAmBZ,EAAYZ,EAAKh7B,QAEzC7B,KAAK69B,UAAY,IAAIjC,KAAK,CAAC57B,KAAKq+B,oBACvB1C,IAAwBI,YAAYj5B,UAAUi7B,cAAclB,IAASf,EAAkBe,IAChG78B,KAAKq+B,iBAAmBZ,EAAYZ,GAEpC78B,KAAK89B,UAAYjB,EAAOzb,OAAOte,UAAU+U,SAAS5U,KAAK45B,GAhBvD78B,KAAK89B,UAAY,GAmBd99B,KAAKqV,QAAQxQ,IAAI,kBACA,kBAATg4B,EACT78B,KAAKqV,QAAQvP,IAAI,eAAgB,4BACxB9F,KAAKg+B,WAAah+B,KAAKg+B,UAAUxf,KAC1Cxe,KAAKqV,QAAQvP,IAAI,eAAgB9F,KAAKg+B,UAAUxf,MACvCmd,GAAwBwC,gBAAgBr7B,UAAUi7B,cAAclB,IACzE78B,KAAKqV,QAAQvP,IAAI,eAAgB,qDAKnC61B,IACF37B,KAAKq9B,KAAO,WACV,IAAIiB,EAAW1B,EAAS58B,MACxB,GAAIs+B,EACF,OAAOA,EAGT,GAAIt+B,KAAKg+B,UACP,OAAO96B,QAAQC,QAAQnD,KAAKg+B,WACvB,GAAIh+B,KAAKq+B,iBACd,OAAOn7B,QAAQC,QAAQ,IAAIy4B,KAAK,CAAC57B,KAAKq+B,oBACjC,GAAIr+B,KAAKk+B,cACd,MAAM,IAAIlpB,MAAM,wCAEhB,OAAO9R,QAAQC,QAAQ,IAAIy4B,KAAK,CAAC57B,KAAK89B,cAI1C99B,KAAK2V,YAAc,WACjB,OAAI3V,KAAKq+B,iBACAzB,EAAS58B,OAASkD,QAAQC,QAAQnD,KAAKq+B,kBAEvCr+B,KAAKq9B,OAAOkB,KAAKnB,KAK9Bp9B,KAAK4X,KAAO,WACV,IAAI0mB,EAAW1B,EAAS58B,MACxB,GAAIs+B,EACF,OAAOA,EAGT,GAAIt+B,KAAKg+B,UACP,OAjGN,SAAwBX,GACtB,IAAIJ,EAAS,IAAIK,WACbC,EAAUP,EAAgBC,GAE9B,OADAA,EAAOuB,WAAWnB,GACXE,EA6FIkB,CAAez+B,KAAKg+B,WACtB,GAAIh+B,KAAKq+B,iBACd,OAAOn7B,QAAQC,QA5FrB,SAA+BtD,GAI7B,IAHA,IAAI69B,EAAO,IAAIhb,WAAW7iB,GACtB6+B,EAAQ,IAAI16B,MAAM05B,EAAKv9B,QAElBQ,EAAI,EAAGA,EAAI+8B,EAAKv9B,OAAQQ,IAC/B+9B,EAAM/9B,GAAKF,OAAOC,aAAag9B,EAAK/8B,IAEtC,OAAO+9B,EAAMtqB,KAAK,IAqFSuqB,CAAsB3+B,KAAKq+B,mBAC7C,GAAIr+B,KAAKk+B,cACd,MAAM,IAAIlpB,MAAM,wCAEhB,OAAO9R,QAAQC,QAAQnD,KAAK89B,YAI5BnC,IACF37B,KAAK4+B,SAAW,WACd,OAAO5+B,KAAK4X,OAAO2mB,KAAK5uB,KAI5B3P,KAAK6+B,KAAO,WACV,OAAO7+B,KAAK4X,OAAO2mB,KAAKO,KAAKv8B,QAGxBvC,KA1MTy8B,EAAQ35B,UAAU45B,OAAS,SAAShR,EAAM7lB,GACxC6lB,EAAOuQ,EAAcvQ,GACrB7lB,EAAQu2B,EAAev2B,GACvB,IAAIk5B,EAAW/+B,KAAKigB,IAAIyL,GACxB1rB,KAAKigB,IAAIyL,GAAQqT,EAAWA,EAAW,KAAOl5B,EAAQA,GAGxD42B,EAAQ35B,UAAR,OAA8B,SAAS4oB,UAC9B1rB,KAAKigB,IAAIgc,EAAcvQ,KAGhC+Q,EAAQ35B,UAAU+B,IAAM,SAAS6mB,GAE/B,OADAA,EAAOuQ,EAAcvQ,GACd1rB,KAAK+F,IAAI2lB,GAAQ1rB,KAAKigB,IAAIyL,GAAQ,MAG3C+Q,EAAQ35B,UAAUiD,IAAM,SAAS2lB,GAC/B,OAAO1rB,KAAKigB,IAAI+e,eAAe/C,EAAcvQ,KAG/C+Q,EAAQ35B,UAAUgD,IAAM,SAAS4lB,EAAM7lB,GACrC7F,KAAKigB,IAAIgc,EAAcvQ,IAAS0Q,EAAev2B,IAGjD42B,EAAQ35B,UAAUgY,QAAU,SAASmkB,EAAUC,GAC7C,IAAK,IAAIxT,KAAQ1rB,KAAKigB,IAChBjgB,KAAKigB,IAAI+e,eAAetT,IAC1BuT,EAASh8B,KAAKi8B,EAASl/B,KAAKigB,IAAIyL,GAAOA,EAAM1rB,OAKnDy8B,EAAQ35B,UAAUwD,KAAO,WACvB,IAAIg2B,EAAQ,GAIZ,OAHAt8B,KAAK8a,SAAQ,SAASjV,EAAO6lB,GAC3B4Q,EAAMnoB,KAAKuX,MAEN2Q,EAAYC,IAGrBG,EAAQ35B,UAAU0yB,OAAS,WACzB,IAAI8G,EAAQ,GAIZ,OAHAt8B,KAAK8a,SAAQ,SAASjV,GACpBy2B,EAAMnoB,KAAKtO,MAENw2B,EAAYC,IAGrBG,EAAQ35B,UAAUq8B,QAAU,WAC1B,IAAI7C,EAAQ,GAIZ,OAHAt8B,KAAK8a,SAAQ,SAASjV,EAAO6lB,GAC3B4Q,EAAMnoB,KAAK,CAACuX,EAAM7lB,OAEbw2B,EAAYC,IAGjBX,IACFc,EAAQ35B,UAAU0B,OAAO+B,UAAYk2B,EAAQ35B,UAAUq8B,SAqJzD,IAAI9T,EAAU,CAAC,SAAU,MAAO,OAAQ,UAAW,OAAQ,OAO3D,SAAS+T,EAAQz2B,EAAOrD,GAEtB,IAAIu3B,GADJv3B,EAAUA,GAAW,IACFu3B,KAEnB,GAAIl0B,aAAiBy2B,EAAS,CAC5B,GAAIz2B,EAAMm0B,SACR,MAAM,IAAIt3B,UAAU,gBAEtBxF,KAAK0U,IAAM/L,EAAM+L,IACjB1U,KAAKq/B,YAAc12B,EAAM02B,YACpB/5B,EAAQ+P,UACXrV,KAAKqV,QAAU,IAAIonB,EAAQ9zB,EAAM0M,UAEnCrV,KAAK6C,OAAS8F,EAAM9F,OACpB7C,KAAKwV,KAAO7M,EAAM6M,KAClBxV,KAAKs/B,OAAS32B,EAAM22B,OACfzC,GAA2B,MAAnBl0B,EAAMk1B,YACjBhB,EAAOl0B,EAAMk1B,UACbl1B,EAAMm0B,UAAW,QAGnB98B,KAAK0U,IAAMjU,OAAOkI,GAYpB,GATA3I,KAAKq/B,YAAc/5B,EAAQ+5B,aAAer/B,KAAKq/B,aAAe,eAC1D/5B,EAAQ+P,SAAYrV,KAAKqV,UAC3BrV,KAAKqV,QAAU,IAAIonB,EAAQn3B,EAAQ+P,UAErCrV,KAAK6C,OAjCP,SAAyBA,GACvB,IAAI08B,EAAU18B,EAAOW,cACrB,OAAO6nB,EAAQiF,QAAQiP,IAAY,EAAIA,EAAU18B,EA+BnC28B,CAAgBl6B,EAAQzC,QAAU7C,KAAK6C,QAAU,OAC/D7C,KAAKwV,KAAOlQ,EAAQkQ,MAAQxV,KAAKwV,MAAQ,KACzCxV,KAAKs/B,OAASh6B,EAAQg6B,QAAUt/B,KAAKs/B,OACrCt/B,KAAKy/B,SAAW,MAEK,QAAhBz/B,KAAK6C,QAAoC,SAAhB7C,KAAK6C,SAAsBg6B,EACvD,MAAM,IAAIr3B,UAAU,6CAEtBxF,KAAK49B,UAAUf,GAOjB,SAASltB,EAAOktB,GACd,IAAI6C,EAAO,IAAIzB,SAYf,OAXApB,EACG8C,OACA9kB,MAAM,KACNC,SAAQ,SAAS9G,GAChB,GAAIA,EAAO,CACT,IAAI6G,EAAQ7G,EAAM6G,MAAM,KACpB6Q,EAAO7Q,EAAMnO,QAAQjJ,QAAQ,MAAO,KACpCoC,EAAQgV,EAAMzG,KAAK,KAAK3Q,QAAQ,MAAO,KAC3Ci8B,EAAKhD,OAAOzoB,mBAAmByX,GAAOzX,mBAAmBpO,QAGxD65B,EAGT,SAASE,EAAaC,GACpB,IAAIxqB,EAAU,IAAIonB,EAYlB,OAT0BoD,EAAWp8B,QAAQ,eAAgB,KACzCoX,MAAM,SAASC,SAAQ,SAASglB,GAClD,IAAIC,EAAQD,EAAKjlB,MAAM,KACnBjV,EAAMm6B,EAAMrzB,QAAQizB,OACxB,GAAI/5B,EAAK,CACP,IAAIC,EAAQk6B,EAAM3rB,KAAK,KAAKurB,OAC5BtqB,EAAQqnB,OAAO92B,EAAKC,OAGjBwP,EAKT,SAAS2qB,EAASC,EAAU36B,GACrBA,IACHA,EAAU,IAGZtF,KAAKwe,KAAO,UACZxe,KAAK0V,YAA4B9R,IAAnB0B,EAAQoQ,OAAuB,IAAMpQ,EAAQoQ,OAC3D1V,KAAKkgC,GAAKlgC,KAAK0V,QAAU,KAAO1V,KAAK0V,OAAS,IAC9C1V,KAAKmgC,WAAa,eAAgB76B,EAAUA,EAAQ66B,WAAa,KACjEngC,KAAKqV,QAAU,IAAIonB,EAAQn3B,EAAQ+P,SACnCrV,KAAK0U,IAAMpP,EAAQoP,KAAO,GAC1B1U,KAAK49B,UAAUqC,GAjDjBb,EAAQt8B,UAAUs9B,MAAQ,WACxB,OAAO,IAAIhB,EAAQp/B,KAAM,CAAC68B,KAAM78B,KAAK69B,aAmCvCF,EAAK16B,KAAKm8B,EAAQt8B,WAgBlB66B,EAAK16B,KAAK+8B,EAASl9B,WAEnBk9B,EAASl9B,UAAUs9B,MAAQ,WACzB,OAAO,IAAIJ,EAAShgC,KAAK69B,UAAW,CAClCnoB,OAAQ1V,KAAK0V,OACbyqB,WAAYngC,KAAKmgC,WACjB9qB,QAAS,IAAIonB,EAAQz8B,KAAKqV,SAC1BX,IAAK1U,KAAK0U,OAIdsrB,EAASnY,MAAQ,WACf,IAAIpS,EAAW,IAAIuqB,EAAS,KAAM,CAACtqB,OAAQ,EAAGyqB,WAAY,KAE1D,OADA1qB,EAAS+I,KAAO,QACT/I,GAGT,IAAI4qB,EAAmB,CAAC,IAAK,IAAK,IAAK,IAAK,KAE5CL,EAASzqB,SAAW,SAASb,EAAKgB,GAChC,IAA0C,IAAtC2qB,EAAiB/P,QAAQ5a,GAC3B,MAAM,IAAI4qB,WAAW,uBAGvB,OAAO,IAAIN,EAAS,KAAM,CAACtqB,OAAQA,EAAQL,QAAS,CAACkrB,SAAU7rB,MAGjE9U,EAAQ87B,aAAeF,EAAKE,aAC5B,IACE,IAAI97B,EAAQ87B,aACZ,MAAO8E,GACP5gC,EAAQ87B,aAAe,SAAS7N,EAASnC,GACvC1rB,KAAK6tB,QAAUA,EACf7tB,KAAK0rB,KAAOA,EACZ,IAAI7D,EAAQ7S,MAAM6Y,GAClB7tB,KAAKygC,MAAQ5Y,EAAM4Y,OAErB7gC,EAAQ87B,aAAa54B,UAAYse,OAAOsf,OAAO1rB,MAAMlS,WACrDlD,EAAQ87B,aAAa54B,UAAUgrB,YAAcluB,EAAQ87B,aAGvD,SAASvmB,EAAMxM,EAAOg4B,GACpB,OAAO,IAAIz9B,SAAQ,SAASC,EAAS45B,GACnC,IAAI6D,EAAU,IAAIxB,EAAQz2B,EAAOg4B,GAEjC,GAAIC,EAAQtB,QAAUsB,EAAQtB,OAAOuB,QACnC,OAAO9D,EAAO,IAAIn9B,EAAQ87B,aAAa,UAAW,eAGpD,IAAIoF,EAAM,IAAIC,eAEd,SAASC,IACPF,EAAIG,QAGNH,EAAI5D,OAAS,WACX,IAAI53B,EAAU,CACZoQ,OAAQorB,EAAIprB,OACZyqB,WAAYW,EAAIX,WAChB9qB,QAASuqB,EAAakB,EAAII,yBAA2B,KAEvD57B,EAAQoP,IAAM,gBAAiBosB,EAAMA,EAAIK,YAAc77B,EAAQ+P,QAAQxQ,IAAI,iBAC3E,IAAIg4B,EAAO,aAAciE,EAAMA,EAAIrrB,SAAWqrB,EAAIM,aAClDj+B,EAAQ,IAAI68B,EAASnD,EAAMv3B,KAG7Bw7B,EAAI3D,QAAU,WACZJ,EAAO,IAAIv3B,UAAU,4BAGvBs7B,EAAIO,UAAY,WACdtE,EAAO,IAAIv3B,UAAU,4BAGvBs7B,EAAIQ,QAAU,WACZvE,EAAO,IAAIn9B,EAAQ87B,aAAa,UAAW,gBAG7CoF,EAAIzsB,KAAKusB,EAAQ/9B,OAAQ+9B,EAAQlsB,KAAK,GAEV,YAAxBksB,EAAQvB,YACVyB,EAAIS,iBAAkB,EACW,SAAxBX,EAAQvB,cACjByB,EAAIS,iBAAkB,GAGpB,iBAAkBT,GAAOnF,IAC3BmF,EAAIU,aAAe,QAGrBZ,EAAQvrB,QAAQyF,SAAQ,SAASjV,EAAO6lB,GACtCoV,EAAIW,iBAAiB/V,EAAM7lB,MAGzB+6B,EAAQtB,SACVsB,EAAQtB,OAAOoC,iBAAiB,QAASV,GAEzCF,EAAIa,mBAAqB,WAEA,IAAnBb,EAAIc,YACNhB,EAAQtB,OAAOuC,oBAAoB,QAASb,KAKlDF,EAAIgB,KAAkC,qBAAtBlB,EAAQ/C,UAA4B,KAAO+C,EAAQ/C,cAIvE1oB,EAAM4sB,UAAW,EAEZvG,EAAKrmB,QACRqmB,EAAKrmB,MAAQA,EACbqmB,EAAKiB,QAAUA,EACfjB,EAAK4D,QAAUA,EACf5D,EAAKwE,SAAWA,GAGlBpgC,EAAQ68B,QAAUA,EAClB78B,EAAQw/B,QAAUA,EAClBx/B,EAAQogC,SAAWA,EACnBpgC,EAAQuV,MAAQA,EAEhBiM,OAAO4gB,eAAepiC,EAAS,aAAc,CAAEiG,OAAO,IA5gBtC,CAghBf,IAlhBH,CAmhBG41B,GACHA,EAAStmB,MAAM8sB,UAAW,SAEnBxG,EAAStmB,MAAM4sB,SAGtB,IAAIG,EAAMzG,GACV77B,EAAUsiC,EAAI/sB,OACNgtB,QAAUD,EAAI/sB,MACtBvV,EAAQuV,MAAQ+sB,EAAI/sB,MACpBvV,EAAQ68B,QAAUyF,EAAIzF,QACtB78B,EAAQw/B,QAAU8C,EAAI9C,QACtBx/B,EAAQogC,SAAWkC,EAAIlC,SACvBrgC,EAAOC,QAAUA,G,mICviBIsV,E,WACnB,cAAyD,IAA3CC,EAA2C,EAA3CA,MAA2C,IAApCpV,YAAoC,MAA7B,IAA6B,MAAnBqiC,iBAAmB,MAAP,MAAO,EACvD,GADuD,qBAClDjtB,EACH,MAAM,IAAIH,MAAM,2BAElB,KAAKG,MAAQA,EACb,KAAKitB,UAAYA,EACjB,KAAKC,SAAW,IAAIvrB,IAAI,CAAEvR,QAAS/D,KAAKC,MAAM1B,EAAOqiC,K,8EAGvD,WAAU1oB,EAAc1X,EAAQ7B,EAAQ8U,GAAxC,+FACMyE,EAAavZ,OAAS6B,EAAS7B,GADrC,sBAEU,IAAI6U,MAAM,4CAFpB,OAWE,IALMstB,EAAa9gC,KAAKC,MAAMwT,EAAW,KAAKmtB,WACxCG,EAAY/gC,KAAKC,OAAOwT,EAAW9U,GAAU,KAAKiiC,WAGlDI,EAAU,IAAIx+B,MAAMu+B,EAAYD,EAAa,GAVrD,WAWWzwB,GACP2wB,EAAQ3wB,EAAQywB,GAAc,EAAKG,UAAU5wB,GAAO0sB,MAAK,YAAI,MAAK,CAChElxB,OACAq1B,YAAa7wB,OAHRA,EAAQywB,EAAYzwB,GAAS0wB,EAAW1wB,GAAS,EAAG,EAApDA,GAXX,gBAmBuB3O,QAAQof,IAAIkgB,GAnBnC,OAmBQjgB,EAnBR,OAoBQogB,EAAe1tB,EAAWsN,EAAO,GAAGmgB,YAAc,KAAKN,UAC7D7f,EAAOzH,SAAQ,YAA0B,IAAvBzN,EAAuB,EAAvBA,KAAMq1B,EAAiB,EAAjBA,YAChBE,EAAqBF,EAAc,EAAKN,UAC1CS,EAAY,EACZC,EAAU,EAAKV,UACfW,EACF/gC,GAAU0gC,EAAcJ,GAAc,EAAKF,UAAYO,EAErDD,IAAgBJ,IAClBS,EAAa/gC,EACb6gC,EAAYF,GAEVD,IAAgBH,IAClBO,EAAU7tB,EAAW9U,EAASyiC,GAGhCv1B,EAAK0E,KAAK2H,EAAcqpB,EAAYF,EAAWC,MApCnD,iD,oFAwCA,SAAUJ,GACR,IAAMM,EAAgB,KAAKX,SAASx9B,IAAI69B,GACxC,GAAIM,EACF,OAAOA,EAGT,IAAMC,EAAe,KAAK9tB,MACxButB,EAAc,KAAKN,UACnB,KAAKA,WAGP,OADA,KAAKC,SAASv8B,IAAI48B,EAAaO,GACxBA,M,8FC/DL,SAAUnrB,EAAgBF,GAC9B,IAAMsrB,EAAQtrB,EAAKiD,MAAM,SACnBxN,EAAO,GAWb,OAVA61B,EAAMpoB,SAAQ,YACZ,MAAyBglB,EAAKjlB,MAAM,MAApC,iBAAOuE,EAAP,KACM+jB,EADN,WAC4BljB,KAAI,YAC9B,MAA0B9W,EAAE0R,MAAM,IAAK,GAAvC,mBACA,MAAO,CAAEuE,IADT,KACwBvZ,MADxB,SAGEuZ,GACF/R,EAAK8G,KAAK,CAAEiL,IAAKA,EAAIL,OAAO,GAAI1R,KAAM81B,OAGnC91B,I,gICXH+1B,EAAiB,CACrBC,KAAK,EACLlhB,MAAM,EACNmhB,MAAM,EACNC,WAAW,EACXC,gBAAgB,GAIGC,E,WACnB,aAAqC,IAAzBC,EAAyB,uDAAZ,GAAIC,EAAQ,uCAGnC,GAHmC,oBACnC,KAAKD,WAAaA,EAClB,KAAKC,SAAWA,GACXA,EACH,MAAM,IAAIn+B,UAAU,iDAEtB,IAAK49B,EAAeO,GAClB,MAAM,IAAIn+B,UAAJ,4BAAmCm+B,I,4CAO7C,SAASt2B,EAAMu2B,EAAQC,GACrB,IAAIjoB,EAAM,EACV,GACEgoB,EAAOtP,cAAgB,EAAIsP,EAAOvP,YAAcwP,GAAW,EAC3Dx2B,EAAKlN,OAEL,MAAM,IAAI+B,IACR,+DAGJ,IAAK,IAAI4hC,EAAOD,EAASC,EAAMA,GAAQ,EAErCloB,IAAQ,EACRA,GAAQvO,EAAKu2B,EAAOtP,eAAiBsP,EAAOvP,YAAe,EAC3DuP,EAAOvP,aAAe,EAClBuP,EAAOvP,YAAc,IACvBuP,EAAOtP,cAAgB,GAEzBsP,EAAOvP,aAAe,EAExB,OAAOzY,M,SCrCUmoB,E,kDACnB,aAAqC,MAAzBL,EAAyB,uDAAZ,GAAIC,EAAQ,uCAEnC,GAFmC,oBACnC,cAAMD,EAAYC,IACb,CAAC,OAAQ,OAAOK,SAAS,EAAKL,UACjC,MAAM,IAAIn+B,UAAJ,UACD,EAAKm+B,SADJ,uDAH2B,OAQnC,EAAKM,gBACL,EAAKC,aACL,EAAKC,cAGiC,IAAlC,EAAKC,YAAY,GAAGC,YACtB,EAAKC,QAAU,EAAKC,uBAda,E,iDAkBrC,WAGE,IAHW,WAEPC,EAAQ,IAAIxgC,MAAM,KAAK0/B,WAAWe,UAC7B9jC,EAAI,EAAGA,EAAI,KAAK+iC,WAAWe,SAAU9jC,GAAK,EACjD6jC,EAAM7jC,GAAK,CACT+jC,OAAQ,KAAKhB,WAAWiB,QAAQhkC,GAChC0jC,UAAW,KAAKX,WAAWkB,WAAWjkC,IAI1C6jC,EAAQA,EAAMK,MACZ,SAAC3W,EAAG1tB,GAAJ,OAAU0tB,EAAEmW,UAAY7jC,EAAE6jC,WAAanW,EAAEwW,OAASlkC,EAAEkkC,UAGtD,KAAKI,SAAW,GAChBN,EAAM1pB,SAAQ,YACP,EAAKgqB,SAASvyB,EAAK8xB,aACtB,EAAKS,SAASvyB,EAAK8xB,WAAa,IAElC,EAAKS,SAASvyB,EAAK8xB,WAAWlwB,KAAK5B,EAAKmyB,a,wBAI5C,WAAU,WACR,KAAKF,MAAQ,GACb,IAAIO,EAAa,EACbC,GAAa,EACjB5jB,OAAO+d,QAAQ,KAAK2F,UAAUhqB,SAAQ,YAAyB,uBAAvBupB,EAAuB,KAAZM,EAAY,KAC7DN,EAAYruB,SAASquB,EAAW,IAChCM,EAAQ7pB,SAAQ,YACd,IAAMvI,EAAO,CAAE8xB,YAAWx+B,MAAO6+B,GACjCM,GAAa,EACb,IAAM7e,EAAQke,EAAYU,EAK1B,GAJAC,IAAc7e,EACd5T,EAAK0yB,QAAUD,EACfD,GAAc5e,EA5DtB,SAAyB+e,GACvB,IAAIvkC,EAAKukC,GAAMA,GAAM,GAAM,WAE3B,OAAwC,WADxCvkC,GAAS,UAAJA,IAAoBA,GAAK,EAAK,aACpBA,GAAK,GAAM,YAA6B,GA2D7CwkC,CAAgBH,GAAaX,EAC/B,MAAM,IAAI1/B,IAAmB,uBAG/B,EAAK6/B,MAAME,GAAUnyB,U,yBAK3B,WACE,KAAK6xB,YAAchjB,OAAOoU,OAAO,KAAKgP,OAAOK,MAC3C,SAAC3W,EAAG1tB,GAAJ,OAAU0tB,EAAEmW,UAAY7jC,EAAE6jC,WAAanW,EAAE+W,QAAUzkC,EAAEykC,WAIvD,KAAKG,cAAgBhkB,OAAOoU,OAAO,KAAKgP,OAAOK,MAC7C,SAAC3W,EAAG1tB,GAAJ,OAAU0tB,EAAEroB,MAAQrF,EAAEqF,SAGxB,KAAKw/B,sBAAwB,KAAKjB,YAAYnkB,KAAI,YAAC,OAAIlf,EAAE8E,SACzD,KAAKy/B,eAAiB,KAAKlB,YAAYnkB,KAAI,YAAC,OAAIlf,EAAEkkC,WAClD,KAAKM,0BAA4B,KAAKnB,YAAYnkB,KAAI,YAAC,OAAIlf,EAAEsjC,aAC7D,IAAMmB,EAAahkC,KAAK6H,IAAL,WAAI,YAAQ,KAAKi8B,iBAEpC,KAAKG,eAAiB,IAAIzhC,MAAMwhC,EAAa,GAAG1pB,MAAM,GACtD,IAAK,IAAInb,EAAI,EAAGA,EAAI,KAAK2kC,eAAenlC,OAAQQ,GAAK,EACnD,KAAK8kC,eAAe,KAAKrB,YAAYzjC,GAAGskC,SAAWtkC,I,oBAIvD,SAAOJ,EAAO0zB,EAAevB,EAAmBwB,GAC9C,OAAO,KAAKoQ,QAAQ/jC,EAAO0zB,EAAeC,EAAQE,a,mCAQpD,WACE,OAAO,KAAKgQ,YAAY,GAAGv+B,Q,qBAG7B,SAAQtF,EAAO0zB,EAAeyR,GAK5B,IAJA,IAAM/8B,EAAQsrB,EAAcvc,QAExBiuB,EAAU,EACV18B,EAAO,EACFtI,EAAI,EAAGA,EAAI,KAAKyjC,YAAYjkC,OAAQQ,GAAK,EAAG,CACnD,IAAMR,EAAS,KAAKikC,YAAYzjC,GAAG0jC,UACnCp7B,IAAS9I,EAASwlC,EAClB18B,GAAQ,KAAK28B,SAASj9B,EAAO+8B,EAAYvlC,EAASwlC,GAClDA,EAAUxlC,EAER,IAAMqiB,EAAQ,KAAKijB,eAAex8B,GAClC,GAAIuZ,GAAS,GAAK,KAAK+iB,0BAA0B/iB,KAAWriB,EAC1D,OAAO,KAAKklC,sBAAsB7iB,GAGpC,IACE,IAAIhY,EAAI7J,EACR,KAAKyjC,YAAY55B,EAAI,GAAG65B,YAAclkC,GACtCqK,EAAI,KAAK45B,YAAYjkC,OACrBqK,GAAK,EAEL7J,GAAK,EAIX,MAAM,IAAIgE,IAAmB,iC,GA7HY8+B,G,UCDxBoC,E,kDACnB,aAAqC,MAAzBnC,EAAyB,uDAAZ,GAAIC,EAAQ,uCAEnC,GAFmC,oBAEb,SADtB,cAAMD,EAAYC,IACTA,SACP,EAAKmC,YAAc,EAAKC,eACnB,IAAsB,SAAlB,EAAKpC,SAGd,MAAM,IAAIrsB,IAAJ,UACD,EAAKqsB,SADJ,oDAFN,EAAKmC,YAAc,EAAKE,YALS,S,0CAarC,SAAOzlC,EAAO0zB,EAAevB,EAAmBwB,GAC9C,IAAQ+R,EAAmB,KAAKvC,WAAxBuC,eACFC,EAAexT,EAAkBuT,GACvC,IAAKC,EACH,MAAM,IAAIvhC,IAAJ,yCAC8BshC,IAGtC,IAAMrC,EAAS1P,EAAQK,eAAeC,UAAUyR,GAChD,OAAO,KAAKH,YAAYI,EAActC,K,wBAGxC,SAAWsC,EAActC,GACvB,MAA4BhiC,YAC1BskC,EAAaxuB,QACbksB,EAAOtP,cAFT,mBAAOvyB,EAAP,KAAeokC,EAAf,KAKA,OADAvC,EAAOtP,cAAgB6R,EAChBpkC,I,yBAGT,SAAYmkC,EAActC,GACxB,GAAIA,EAAOtP,cAAgB4R,EAAaxuB,QAAQvX,OAC9C,MAAM,IAAI+B,IACR,qEAGJ,IAAMH,EAASmkC,EAAaxuB,QAAQksB,EAAOtP,cAE3C,OADAsP,EAAOtP,cAAgB,EAChBvyB,M,GA3CgC0hC,GCJtB2C,E,kDACnB,aAAqC,MAAzB1C,EAAyB,uDAAZ,GAAIC,EAAQ,uCAEnC,GAFmC,oBACnC,cAAMD,EAAYC,GACD,cAAbA,EAGF,MAAM,IAAIn+B,UAAJ,yDAC8Cm+B,IANnB,OAGjC,EAAKW,QAAU,EAAK+B,iBAHa,E,0CAWrC,SAAO9lC,EAAO0zB,EAAevB,EAAmBwB,GAC9C,IAAQ+R,EAAmB,KAAKvC,WAAxBuC,eACFC,EAAexT,EAAkBuT,GACvC,IAAKC,EACH,MAAM,IAAIvhC,IAAJ,yCAC8BshC,IAGtC,IAAMrC,EAAS1P,EAAQK,eAAeC,UAAUyR,GAChD,OAAO,KAAK3B,QAAQ4B,EAActC,K,8BAGpC,SAAiBsC,EAActC,GAM7B,IALA,IAAM0C,EAAaJ,EAAaxuB,QACxB6uB,EAAa,KAAK7C,WAAlB6C,SAEFC,EAAgB5C,EAAOtP,aACzBmS,EAAe7C,EAAOtP,aAExBgS,EAAWG,KAAkBF,GAC7BE,EAAeH,EAAWnmC,QAC1B,CACA,GAAIsmC,IAAiBH,EAAWnmC,OAC9B,MAAM,IAAI+B,IAAJ,uDAIRukC,GAAgB,EAIlB,OAFA7C,EAAOtP,aAAemS,EAAe,EACxBH,EAAW/lC,MAAMimC,EAAeC,O,GA1CDhD,GCA3B2C,E,kDACnB,aAAuD,MAA3C1C,EAA2C,uDAA9B,GAAIC,EAA0B,uCAAhB+C,EAAgB,uCAGrD,GAHqD,qBACrD,cAAMhD,EAAYC,IACb+C,iBAAmBA,EACP,cAAb/C,EACF,MAAM,IAAIn+B,UAAJ,qDAC0Cm+B,IALG,S,0CAUvD,SAAOpjC,EAAO0zB,EAAevB,EAAmBwB,GAW9C,IAVA,IACMyS,EADc,KAAKC,kBACOj3B,OAC9BpP,EACA0zB,EACAvB,EACAwB,GAGI2S,EAAY,KAAKC,gBACjBz5B,EAAO,IAAIrJ,MAAM2iC,GACdhmC,EAAI,EAAGA,EAAIgmC,EAAahmC,GAAK,EACpC0M,EAAK1M,GAAKkmC,EAAUl3B,OAClBpP,EACA0zB,EACAvB,EACAwB,GAIJ,OAAO7mB,I,6BAIT,WACE,IAAM05B,EAAiB,KAAKrD,WAAWsD,gBACvC,OAAO,KAAKN,iBAAiBK,EAAgB,S,2BAI/C,WACE,IAAMA,EAAiB,KAAKrD,WAAWuD,eAEvC,OAAO,KAAKP,iBAAiBK,EAAgB,Y,GA5CDtD,GAgDhD,gCACG5oB,MAAM,KACNC,SAAQ,YAAM,OAAIpY,YAAY0jC,EAAoBvjC,M,ICnDhCqkC,E,kDACnB,aAAqC,MAAzBxD,EAAyB,uDAAZ,GAAIC,EAAQ,uCAEnC,GAFmC,oBAEb,SADtB,cAAMD,EAAYC,IACTA,SACP,MAAM,IAAIrsB,IAAJ,UACD,EAAKqsB,SADJ,gDAH2B,S,0CASrC,SAAOpjC,EAAO0zB,EAAevB,EAAmBwB,GAO9C,OALE,KAAK0R,SACH3R,EAAcvc,QACdwc,EAAQE,UACR,KAAKsP,WAAWvjC,QACd,KAAKujC,WAAW1hC,W,GAhBayhC,GCAlB0D,E,kDACnB,aAAqC,MAAzBzD,EAAyB,uDAAZ,GAAIC,EAAQ,uCAEnC,GAFmC,oBAEb,SADtB,cAAMD,EAAYC,IACTA,SACP,MAAM,IAAIrsB,IAAJ,UACD,EAAKqsB,SADJ,iDAH2B,S,0CASrC,SAAOpjC,EAAO0zB,EAAevB,EAAmBwB,GAG9C,IAFA,IAAI/zB,EAAS,EAEyD,IAA/D,KAAKylC,SAAS3R,EAAcvc,QAASwc,EAAQE,UAAW,IAC7Dj0B,GAAU,EAUZ,OAPiB,KAAKylC,SACpB3R,EAAcvc,QACdwc,EAAQE,UACRj0B,EAAS,GAGe,GAAMA,EAAS,GAC1B,KAAKujC,WAAW1hC,W,GAxBKyhC,GCAnB2D,E,kDACnB,aAAqC,MAAzB1D,EAAyB,uDAAZ,GAAIC,EAAQ,uCAEnC,GAFmC,oBAEb,SADtB,cAAMD,EAAYC,IACTA,SACP,MAAM,IAAIrsB,IAAJ,UACD,EAAKqsB,SADJ,kDAH2B,S,0CASrC,SAAOpjC,EAAO0zB,EAAevB,EAAmBwB,GAE9C,IADA,IAKI1zB,EACA+L,EANA86B,EAAiB,EACd,KAAKzB,SAAS3R,EAAcvc,QAASwc,EAAQE,UAAW,IAC7DiT,GAAkB,EAapB,OARuB,IAAnBA,GACF7mC,EAAI,KAAKkjC,WAAW4D,EACpB/6B,EAAI,KAAKq5B,SAAS3R,EAAcvc,QAASwc,EAAQE,UAAW5zB,IAG5D+L,EAAK,IADL/L,EAAI6mC,EAAiB,KAAK3D,WAAW4D,EAAI,GAC1B,KAAK1B,SAAS3R,EAAcvc,QAASwc,EAAQE,UAAW5zB,GAGlE+L,EAAI,KAAKm3B,WAAW1hC,W,GA1BUyhC,GCOnC8D,EAAe,CACnB,EAAG1B,EAEH,EAAG9B,EACH,EAAGyD,EACH,EAAGpB,EACH,EAAGc,EACH,EAAGE,EAEH,EAAGD,GAOC,SAAUT,EAAiBe,EAAc9D,GAC7C,IALkC/Q,EAK5B8U,GAL4B9U,EAMnB,WAAb+Q,EAAwB,EAAI8D,EAAaE,QALpCJ,EAAa3U,IAOpB,IAAK8U,EACH,MAAM,IAAIpwB,IAAJ,4CACiCmwB,EAAaE,UAItD,OAAO,IAAID,EAAWD,EAAa/D,WAAYC,EAAU+C,GC/B3D,IAAMkB,EAAkB,CACtBC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJtoB,GAAI,MACJuoB,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,OACJ1Q,GAAI,MACJ2Q,GAAI,MACJ9kC,GAAI,OACJ+kC,GAAI,MACJC,GAAI,OACJC,GAAI,YACJC,GAAI,YACJC,GAAI,MACJC,GAAI,OACJC,GAAI,YACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJ1pB,GAAI,YACJ2pB,GAAI,OACJC,GAAI,YACJC,GAAI,MACJC,GAAI,SACJC,GAAI,U,IAqCevc,E,WACnB,WAAYvV,GAAO,oBACjB0J,OAAOC,OAAO,KAAM3J,GAEpB,KAAK8f,kBAAoB9f,EAAQ+xB,aAAahqB,GAC9C,KAAK6X,QAAU5f,EAAQ+xB,aAAa/pB,GACpC,KAAK+T,oBAAsB/b,EAAQ+xB,aAAa9pB,GAChD,KAAK+pB,iBAAmBhyB,EAAQ+xB,aAAa5pB,GAC7C,KAAKub,mBA1CT,SAAiCmI,GAE/B,IADA,IAAMoG,EAAS,IAAI3lC,MAAM,GAChBrD,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAC1BgpC,EAAOhpC,GAAK,IAAIqD,MAAM,GA4BxB,OAzBA2lC,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IACrCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IACrCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IACrCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IAErCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IACrCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IACrCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IACrCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IAErCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IACrCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IACrCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IACrCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IAErCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IACrCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IACrCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IACrCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IAErCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IACrCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IACrCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IACrCoG,EAAO,GAAIpG,EAAU,IAAM,EAAK,GAAK,IAE9BoG,EAWqBC,CAAwBlyB,EAAQ+xB,aAAa7pB,IAEvE,KAAKiqB,qBAAuB,GAC5B,KAAKC,cAAgB,G,kDAOvB,SAAe7R,GACb,IAAK,KAAK6R,cAAc7R,GAAU,CAChC,IAAMwP,EAAe,KAAKsC,YAAY9R,GAClCwP,IACF,KAAKqC,cAAc7R,GAAWyO,EAC5Be,EACA,cAIN,OAAO,KAAKqC,cAAc7R,K,yBAQ5B,SAAY+R,GACV,OAAO,KAAKN,iBAAiBM,K,mCAG/B,SAAsBpV,GACpB,IAAK,KAAKiV,qBAAqBjV,GAAiB,CAC9C,IAAM6S,EAAe,KAAKwC,mBAAmBrV,GAC7C,GAAI6S,EAAc,CAChB,IAAM9D,EAAWiE,EAAgBhT,GACjC,IAAK+O,EACH,MAAM,IAAIh/B,IAAJ,2BACgBiwB,EADhB,4CAIR,KAAKiV,qBAAqBjV,GAAkB8R,EAC1Ce,EACA9D,IAIN,OAAO,KAAKkG,qBAAqBjV,K,oBAGnC,WAAM,WACEvnB,EAAO,GAOb,OANA+T,OAAO9a,KAAK,MAAMwU,SAAQ,YACpB,SAASohB,KAAKxtB,KAGlBrB,EAAKqB,GAAK,EAAKA,OAEVrB,M,0JC3II8I,E,QAAf,E,wBCEqB+zB,E,WAWnB,WAAY9zB,GAeV,GAfc,oBAEVA,EAAK+zB,KACP,KAAKA,KAAO/zB,EAAK+zB,KAEjB,KAAKA,KAAO,IAAIh0B,EAAS,CACvBzB,IAAK0B,EAAKg0B,QACV9zB,KAAMF,EAAKi0B,SACX9zB,WAAYH,EAAKk0B,eACjB5zB,SAAUN,EAAKM,SACfC,iBAAkBP,EAAKO,iBACvBC,UAAWR,EAAKQ,cAId,KAAKuzB,gBAAgBh0B,GACzB,MAAM,IAAInB,MAAM,kCAIlB,GADA,KAAKwN,MAAQpM,EAAKoM,OACb,KAAKA,MAAM+nB,mBACd,MAAM,IAAIv1B,MAAM,mCAGlB,KAAKw1B,eAAiBp0B,EAAKo0B,gBAAkB,I,6FAU/C,WAAyBlnC,EAAKc,EAAOmvB,GAArC,kJAA0CkX,EAA1C,+BAAiD,IAC1CC,YAAcD,EAAKC,cAAe,EACvCD,EAAKE,cAAgBF,EAAKE,gBAAiB,EAC3CF,EAAKG,cAAgBH,EAAKG,eAAiB,IAExB,kBAARtnC,EALb,sBAOU,IAAIgU,IACR,2CARN,cAWQge,EAAQhyB,EAXhB,SAYuB,KAAKkf,MAAM+nB,mBAAmBjV,EAAOlxB,EAAOmvB,GAZnE,UAYQsX,EAZR,UAaQC,EAAYD,EAAO5qB,KAAI,YAAC,OAAInf,EAAEiqC,cAAYC,QAAO,SAAC9c,EAAG1tB,GAAJ,OAAU0tB,EAAI1tB,IAAG,IACxD,KAAKgqC,gBAdvB,uBAeU,IAAIS,IAAJ,uBACYH,EAAUI,iBADtB,+CAC6E,KAAKV,eAAeU,iBADjG,WAfV,eAuBQnW,EAAS,YAAO,OACpBiF,EAAQ1I,aAAehuB,GACvB02B,EAAQzI,gBAAkBgC,GAC1ByG,EAAQzI,eAAiByI,EAAQzE,YAAc,GAAKnxB,GA1BxD,UA2B6BlB,QAAQof,IACjCuoB,EAAO5qB,KAAI,YAAK,OAAI,EAAKkrB,kBAAkB5qC,EAAOw0B,OA5BtD,WA2BQqW,EA3BR,OA+BMnR,GAAM,QAAMn3B,WAAUyK,OAAhB,oBAA0B69B,KAChCX,EAAKC,YAhCX,iBAmCI,IAFMW,EAAY,GACZC,EAAU,GACP3qC,EAAI,EAAGA,EAAIs5B,EAAI95B,OAAQQ,GAAK,EAC7B+qB,EAAOuO,EAAIt5B,GAAGywB,SACdwB,EAAKqH,EAAIt5B,GAAG0wB,SACbga,EAAU3f,KACb2f,EAAU3f,GAAQ,GAEpB2f,EAAU3f,IAAS,EACnB4f,EAAQ1Y,GAAM,EAShB,IAPM2Y,EAAe,GACrBnqB,OAAO+d,QAAQkM,GAAWvwB,SAAQ,YAAW,uBAATpM,EAAS,KACjC,IADiC,OAEzC68B,EAAa78B,IAAK,MAGhB88B,EAAe,GACZ7qC,EAAI,EAAGA,EAAIs5B,EAAI95B,OAAQQ,GAAK,EAC7B+qB,EAAOuO,EAAIt5B,GAAGywB,SAElBma,EAAa7f,IACbuO,EAAIt5B,GAAGuwB,OACN+I,EAAIt5B,GAAGuwB,KAAKI,aAAegE,GAASmV,EAAKE,gBAC1CnpC,KAAKiqC,IAAIxR,EAAIt5B,GAAG4wB,eAAiB0I,EAAIt5B,GAAGuwB,KAAKK,gBAC3CkZ,EAAKG,gBAEDc,EAAa,KAAKlpB,MAAM+nB,mBAC5BtQ,EAAIt5B,GAAGuwB,KAAKI,WACZ2I,EAAIt5B,GAAGuwB,KAAKK,eACZ0I,EAAIt5B,GAAGuwB,KAAKK,eAAiB,GAE/Bia,EAAar3B,KAAKu3B,IAjE1B,iBAoE6BxoC,QAAQof,IAAIkpB,GApEzC,QAsEI,IAFMG,EApEV,OAqEQC,EAAa,GACRjrC,EAAI,EAAGA,EAAIgrC,EAAWxrC,OAAQQ,GAAK,GAC1C,KAAWwT,KAAX,oBAAmBw3B,EAAWhrC,KAvEpC,GA0EIirC,EAAaA,EACV/G,MAAK,SAAC3W,EAAG1tB,GAAJ,OAAU0tB,EAAErW,WAAWg0B,cAAcrrC,EAAEqX,eAC5Ckd,QACC,SAAC3uB,EAAMhG,EAAK0rC,GAAZ,OACG1rC,GAAOgG,EAAKyR,aAAei0B,EAAI1rC,EAAM,GAAGyX,cAGzCk0B,EAAqB,GACrBC,EAAmB,MAEnBC,EAAgBL,EACnB3rB,KAAI,YAAC,OAAInf,EAAEiqC,cACXC,QAAO,SAAC9c,EAAG1tB,GAAJ,OAAU0tB,EAAI1tB,IAAG,IACP,KAAKgqC,gBAvF7B,uBAwFY,IAAIx1B,MAAJ,4BACiBi3B,EAAcf,iBAD/B,+CACsF,KAAKV,eAAeU,iBAD1G,WAxFZ,eA6FIU,EAAW9wB,SAAQ,YACjB,IAAIoxB,EAAgB,EAAK/B,KAAKtzB,aAAahS,IAAI9D,EAAE8W,YAC5Cq0B,IACHA,EAAgB,EAAKf,kBAAkBpqC,GAAG,kBAAM,KAChD,EAAKopC,KAAKtzB,aAAa/Q,IAAI/E,EAAE8W,WAAYq0B,IAE3CH,EAAmB53B,KAAK+3B,GACxB,IAAMC,EAAcD,EAAc3N,MAAK,YAErC,IADA,IAAM6N,EAAW,GACRzrC,EAAI,EAAGA,EAAI0rC,EAAMlsC,OAAQQ,GAAK,EAAG,CACxC,IAAMq5B,EAAUqS,EAAM1rC,GAClB4qC,EAAavR,EAAQ5I,YAAcka,EAAQtR,EAAQ3I,WACrD+a,EAASj4B,KAAK6lB,GAGlB,OAAOoS,KAETJ,EAAiB73B,KAAKg4B,MA9G5B,UAgH+BjpC,QAAQof,IAAI0pB,GAhH3C,SAgHUM,EAhHV,QAiHqBnsC,SACTosC,EAAWD,EAAatB,QAAO,SAACjpC,EAAQ2iB,GAAT,OACnC3iB,EAAOwL,OAAOmX,MAEhBuV,EAAMA,EAAI1sB,OAAOg/B,IArHvB,iCAwHStS,GAxHT,iD,0FA2HA,WAEEjF,GAAc,IADZwX,EACY,EADZA,eAAgBC,EACJ,EADIA,WAAY1B,EAChB,EADgBA,WAK9B,OAFkB,KAAKZ,KAAK3xB,uBAAuBg0B,GAC3BE,SAASD,EAAY1B,GAChCpX,WAAWqB,K,yCAS1B,SAA4BM,GAC1B,OAAO,KAAK9S,MAAMmqB,4BAA4BrX,O,8DCpL5CsX,E,WACJ,WAAYx2B,GAAI,oBACdgL,OAAOC,OAAO,KAAMjL,G,4CAGtB,WACE,gBAAU,KAAKhS,MAAf,YAAwB,KAAKivB,KAA7B,YAAqC,KAAKmZ,eAA1C,YAA4D,KAAKC,WAAjE,YAA+E,KAAK1B,gB,KAIxF,SAAS8B,EAAiBrqB,EAAOsqB,GAC/B,GAAIA,EAAOC,MAAK,YAAE,YAAWnpC,IAAPopC,KACpB,MAAM,IAAIroC,IAAmB,4BAG/B,kBAAqEmoC,EAArE,GAAOxX,EAAP,KAAclxB,EAAd,KAAqBivB,EAArB,KAA2BmZ,EAA3B,KAA2CC,EAA3C,KAAuD1B,EAAvD,KAEKvoB,EAAM8S,KACT9S,EAAM8S,GAAS,IAGjB9S,EAAM8S,GAAOnhB,KACX,IAAIy4B,EAAM,CACRxoC,QACAivB,OACAmZ,iBACAC,aACA1B,gB,IAKekC,E,WAiBnB,WAAY72B,GAAI,+BACd,IAAMG,EAAalC,YAAK+B,EAAK1B,IAAK0B,EAAKE,KAAMF,EAAKG,YAClD,KAAK22B,YAAc,IAAIC,IAAsB,CAC3C1nC,MAAO,IAAIJ,IAAS,CAAEE,QAAS,IAC/BuW,KAAM,SAACzO,EAAMiyB,GAAP,OAAkB,EAAK8N,WAAW,CAAE9N,cAE5C,KAAK+N,SAAW92B,EAAW82B,SAASC,KAAK/2B,G,8CAG3C,WACE,IAAMiM,EAAQ,GACd,OAAO,KAAK6qB,WACT9O,MAAK,YACJ,OAAgB,KAAZlxB,EAAK,IAAyB,MAAZA,EAAK,GAClB3E,YAAM2E,GAERA,KAERkxB,MAAK,YACJ,GACEgP,EAAmBptC,OAAS,GAvEpB,WAwERotC,EAAmBC,aAAa,GAEhC,MAAM,IAAI7oC,IACR,iJASJ,IAFA,IAAI8oC,EAAgB,GAChBC,EAAgB,GACX/sC,EAAI,EAAGA,EAAI4sC,EAAmBptC,OAAQQ,GAAK,EAAG,CACrD,IAAMgtC,EAAWJ,EAAmB5sC,GACpC,GACGgtC,GAAY,IAAMA,GAAY,KAC7BD,GAA8B,KAAbC,EAEnBD,GAAiBjtC,OAAOC,aAAaitC,QAChC,GAAiB,IAAbA,EACTF,EAAct5B,KAAKub,OAAO1Z,SAAS03B,EAAe,KAClDA,EAAgB,QACX,GAAiB,KAAbC,EACTF,EAAct5B,KAAKub,OAAO1Z,SAAS03B,EAAe,KAClDA,EAAgB,GAChBb,EAAiBrqB,EAAOirB,GACxBA,EAAgB,QACX,GAAiB,KAAbE,GAAyC,KAAbA,EAGrC,MAAM,IAAIhpC,IAAmB,4BAkBjC,OAbI+oC,GACFD,EAAct5B,KAAKub,OAAO1Z,SAAS03B,EAAe,KAEvB,IAAzBD,EAActtC,QAChB0sC,EAAiBrqB,EAAOirB,GAI1BrsB,OAAO+d,QAAQ3c,GAAO1H,SAAQ,YAAiB,uBAAfwa,EAAe,KAARsY,EAAQ,KAC7CprB,EAAM8S,GAASsY,EAAI/I,MACjB,SAAC3W,EAAG1tB,GAAJ,OAAU0tB,EAAE9pB,MAAQ5D,EAAE4D,OAAS8pB,EAAEmF,KAAO7yB,EAAE6yB,WAGvC7Q,O,sBAIb,WAAkB,IAATioB,EAAS,uDAAF,GACd,OAAO,KAAKyC,YAAYroC,IAAI,QAAS,KAAM4lC,EAAKnL,U,gFAQlD,WAAkChK,GAAlC,iFACkB,KAAKuY,WADvB,mBACmCvY,EADnC,kF,8HAeA,WAAyBA,EAAOwY,EAAYC,GAA5C,6FAC4B,KAAKF,WADjC,eAC6CvY,EAArC0Y,EADR,sDAGW,IAHX,OAkBE,IAZMC,EAAU,YACd,IAAMC,EAAaC,EAAM/pC,MACnBgqC,EAAWD,EAAM/pC,MAAQ+pC,EAAM9a,KACrC,OAAI6a,GAAcH,GACR,EAENK,GAAYN,EACP,EAEF,GAEHO,EAAO,GACJ1tC,EAAI,EAAGA,EAAIqtC,EAAW7tC,OAAQQ,GAAK,EACX,IAA3BstC,EAAQD,EAAWrtC,KACrB0tC,EAAKl6B,KAAK65B,EAAWrtC,IApB3B,yBAuBS0tC,GAvBT,iD,iHCvImBC,E,WAInB,WAAoBxB,EAAqByB,GAAqB,yBAA1CzB,SAA0C,KAArByB,S,6CAEzC,WACE,OAAOvuC,KAAK8sC,OAAO1b,W,wBAGrB,WACE,OAAOpxB,KAAK8sC,OAAOvb,eAAiB,I,sBAGtC,WACE,OAAOvxB,KAAK8sC,OAAOvb,eAAiBvxB,KAAK8sC,OAAOvX,YAAc,I,qCAGhE,WACE,OAAOv1B,KAAK8sC,OAAOlU,e,uBAGrB,WACE,MAAO,U,wBAGT,WACE,OAAO54B,KAAK8sC,OAAOtT,iB,wBAGrB,WACE,OAAOx5B,KAAK8sC,OAAO78B,Q,yBAGrB,WACE,OAAOjQ,KAAK8sC,OAAOtS,yBAA2B,EAAI,I,4BAGpD,WACE,IAAMgU,EAAKxuC,KAAKuuC,OAAOE,UAAUC,WACjC,OAAOF,EAAKA,EAAGxuC,KAAK8sC,OAAOvV,kBAAe3zB,I,uBAG5C,WACE,OAAQ5D,KAAK8sC,OAAOtU,eAAiB,IAAIpkB,KAAK,O,qBAGhD,WACE,OAAOpU,KAAK8sC,OAAOtU,gB,yBAGrB,WACE,OAAOx4B,KAAKuuC,OAAOI,YAAY3uC,KAAK8sC,OAAOxb,c,0BAG7C,WACE,OAAOtxB,KAAK4uC,gB,4BAGd,WACE,QAAS5uC,KAAK8sC,OAAO5b,O,mCAGvB,WACE,OAAOlxB,KAAK8sC,OAAOzS,WAAar6B,KAAK8sC,OAAO+B,0BAAuBjrC,I,kCAGrE,WACE,OAAO5D,KAAK8sC,OAAOtb,gBAAkBxxB,KAAK8sC,OAAOpV,e,8BAGnD,WACE,OAAO13B,KAAK8sC,OAAO5b,KACflxB,KAAKuuC,OAAOI,YAAY3uC,KAAK8sC,OAAO5b,KAAKI,iBACzC1tB,I,2BAGN,WACE,OAAO5D,KAAK8sC,OAAO5b,KAAOlxB,KAAK8sC,OAAO5b,KAAKK,oBAAiB3tB,I,wCAG9D,WACE,OAAO5D,KAAK8sC,OAAO5b,KAAZ,UACAlxB,KAAKuuC,OAAOI,YAAY3uC,KAAK8sC,OAAO5b,KAAKI,YADzC,YAEDtxB,KAAK8sC,OAAO5b,KAAKK,qBAEnB3tB,I,uBAGN,WACE,IAAMqkC,EAAKjoC,KAAK8uC,iBACRhwB,EAAS9e,KAAK8sC,OAAdhuB,KAER,YAAclb,IAAPqkC,EAAA,2BAAwBnpB,GAAxB,IAA8BmpB,OAAOnpB,I,sBAG9C,WACE,OAAO9e,KAAK8sC,OAAOxR,iB,wBAIrB,WACE,IAAIh4B,EAAM,GACNyrC,EAAQ,GACRC,EAAK,IACLC,EAAQ,EAGN/T,EAAMl7B,KAAK8sC,OAAOlT,WAAWt2B,IAC7B4rC,EAAWlvC,KAAK8sC,OAAOlT,WAAWx1B,MACpC+qC,EAAWnvC,KAAK8sC,OAAOvb,eACvB6d,EAAS,EA0Fb,MAzFwC,qBAA7BpvC,KAAK8sC,OAAOlU,aAErB54B,KAAK8sC,OAAOlU,aAAa9d,SAAQ,YAAiC,IAA9BvI,EAA8B,EAA9BA,KAAM8mB,EAAwB,EAAxBA,OAAQc,EAAgB,EAAhBA,IAAK9sB,EAAW,EAAXA,KAcrD,GAbA+hC,EAAS/V,EAAS8V,EAClB7rC,GAAO43B,EAAIrP,UAAUsjB,EAAWD,EAAU7V,EAAS6V,GACnDC,EAAW9V,EAEP4V,GAAgB,MAAPD,IACXD,GAASE,EAAQD,EACjBC,EAAQ,GAENG,IACFJ,EAAK,IACLC,GAASG,GAGE,MAAT78B,EAAc,CAEhB,IAAM0nB,EAAM5sB,EAAKwN,MAAM,KACjBqf,EAAQz5B,OAAOC,aAAP,MAAAD,OAAM,YAAiBw5B,IACrC32B,GAAO42B,EACPiV,GAAYjV,EAAM/5B,OAClB8uC,GAAS/U,EAAM/5B,WACG,MAAToS,GAKS,MAATA,GAHTjP,GAAO62B,EACPgV,IACAF,KAMkB,MAAT18B,GAAyB,MAATA,GAEzB48B,GAAY9hC,EACR4hC,IACFF,GAASE,EAAQD,GAEnBD,GAAS1hC,EAAOkF,EAChB08B,EAAQ,GACU,MAAT18B,GAAyB,MAATA,GAEzBjP,GAAO+J,EACH4hC,IACFF,GAASE,EAAQD,GAEnBD,GAAS1hC,EAAKlN,OAASoS,EACvB08B,EAAQ,GACU,MAAT18B,GAETjP,GAAO+J,EACH4hC,IACFF,GAASE,EAAQD,GAEnBD,GAAS,GAAJ,OAAO,EAAP,KACLE,EAAQ,GACU,MAAT18B,GAEL08B,IACFF,GAASE,EAAQD,GAEnBD,GAAS,GAAJ,OAAO1hC,EAAP,MACa,MAATkF,IAEL08B,IACFF,GAASE,EAAQD,GAEnBD,GAAS,GAAJ,OAAO1hC,EAAP,KACL4hC,EAAQ,MAIZG,EAASpvC,KAAK8sC,OAAO/a,WAAazuB,EAAInD,OAEpCmD,EAAInD,SAAWH,KAAK8sC,OAAO/a,aAC7Bqd,EAASpvC,KAAK8sC,OAAO/a,WAAazuB,EAAInD,OACtCmD,GAAO43B,EAAIrP,UAAUsjB,EAAWD,EAAUC,EAAWD,EAAWE,GAE5DH,GAAgB,MAAPD,IACXD,GAASE,EAAQD,EACjBC,EAAQ,GAEVD,EAAK,IACLC,GAASG,GAEPH,IACFF,GAASE,EAAQD,GAEZD,I,kBAGT,WAIE,OAHmB3tB,OAAOub,oBACxB2R,EAAwBxrC,WAGvBiyB,QACC,SAAAsa,GAAI,OACFA,EAAKC,WAAW,UACP,oBAATD,GACS,4BAATA,KAEHpvB,KAAI,SAAArd,GAAU,OAAIA,EAAWa,QAAQ,QAAS,S,gBAGnD,WACE,gBAAUzD,KAAKuuC,OAAO3b,GAAtB,YAA4B5yB,KAAK8sC,OAAOzb,Y,iBAG1C,SAAIke,GACF,IAAM3sC,EAAa,QAAH,OAAW2sC,GAE3B,GAAIvvC,KAAK4C,GAEP,OAAO5C,KAAK4C,O,oBAKhB,c,sBAIA,c,iBAIA,c,2BAEA,WACE,OAAO,I,0BAGT,WACE,IAAM4sC,EAAaxvC,KAAK6E,IAAI,cAC5B,GAAI2qC,EAAWrvC,OAAQ,CACrB,IAAM2sC,GACoB,IAAxB9sC,KAAK6E,IAAI,UACL2qC,EAAWA,EAAWrvC,OAAS,GAC/BqvC,EAAW,GACThxB,EAAkBsuB,EAAlBtuB,KAAMixB,EAAY3C,EAAZ2C,QACd,GAAa,aAATjxB,GAAgC,aAATA,EACzB,OAAOixB,EAGX,OAAO,I,oBAGT,WAAkC,WAE1B3wB,EAA4B,GAQlC,OAPA9e,KAAK8e,OAAOhE,SAAQ,SAACgI,GACnB,IAAMlH,EAAM,EAAK/W,IAAIie,QACTlf,IAARgY,IACFkD,EAAKgE,GAAKlH,MAId,2BACKkD,GADL,IAEE4M,KAAM1rB,KAAK6E,IAAI,QACf2Z,KAAMxe,KAAK6E,IAAI,QACfwsB,SAAUrxB,KAAK4yB,S,6BAInB,WACE,IAAMgG,EAAe54B,KAAK6E,IAAI,sBACxBkjB,EAAO/nB,KAAK0vC,UAClB,IAAK9W,EACH,MAAO,GAET,IAAMx0B,EAAQpE,KAAK6E,IAAI,SACjB2qC,EAAyB,GAyF/B,OAxFA5W,EAAa9d,SACX,SAAC1E,GASC,IAAQ7D,EAA8B6D,EAA9B7D,KAAMnS,EAAwBgW,EAAxBhW,IAAKiN,EAAmB+I,EAAnB/I,KAAM8sB,EAAa/jB,EAAb+jB,IAAKe,EAAQ9kB,EAAR8kB,IACxB7B,EAASjjB,EAAKijB,OAAS,EAAIj1B,EACjC,GAAa,MAATmO,EAEFi9B,EAAWr7B,KAAK,CACd/P,MAAOi1B,EACPl5B,OAAQ,EACR8jB,KAAMkW,EACNpS,KAAI,OAAEA,QAAF,IAAEA,OAAF,EAAEA,EAAO3nB,GACbuvC,QAASzU,EACT1c,KAAM,kBAEH,GAAa,MAATjM,EAETi9B,EAAWr7B,KAAK,CACd/P,MAAOi1B,EACP7a,KAAM,YACNyF,KAAM,GAAF,OAAK5W,EAAKlN,QACdA,OAAQ,SAEL,GAAa,MAAToS,EAETi9B,EAAWr7B,KAAK,CACdqK,KAAM,OACNre,OAAQkN,EACRjJ,MAAOi1B,EACPpV,KAAM,WAEH,GAAa,MAAT1R,EAAc,CAEvB,IAAMlS,EAAMgN,EAAKlN,OACjBqvC,EAAWr7B,KAAK,CACd/P,MAAOi1B,EACP7a,KAAM,WACNyF,KAAM,IAAF,OAAM5jB,GACVovC,QAASpvC,EACTF,OAAQ,SAEL,GAAa,MAAToS,QAEJ,GAAa,MAATA,EAAc,CAEvB,IAAMlS,EAAMgN,EACZmiC,EAAWr7B,KAAK,CACd/P,MAAOi1B,EACP7a,KAAM,WACNyF,KAAM,IAAF,OAAM5jB,GACVovC,QAASpvC,EACTF,OAAQ,QAEQ,MAAToS,EAETi9B,EAAWr7B,KAAK,CACdqK,KAAM,WACNre,OAAQkN,EACRjJ,MAAOi1B,EACPpV,KAAM,MAEU,MAAT1R,GAES,MAATA,GAES,MAATA,GAES,MAATA,GAGTi9B,EAAWr7B,KAAK,CACd/P,MAAOi1B,EACP7a,KAAM,YACNyF,KAAM5W,EACNlN,OAAQ,OAOTqvC,M,KCjXUI,E,4MACnBnB,UAAoB,G,EAEZoB,Y,IAOAC,oB,IAGAC,uBAAmC,G,sFAE3C,mGACQC,EAAeC,yBAAejwC,KAAKkwC,OAAQ,gBAC3CC,EAAeF,yBAAejwC,KAAKkwC,OAAQ,gBAC5CF,EAHP,sBAIU,IAAIh7B,MAAM,iCAJpB,UAMOm7B,EANP,sBAOU,IAAIn7B,MAAM,iCAPpB,UAWQm1B,EAAY,IAAID,EAAgB,CACpCI,eAAgB8F,uBAAaJ,EAAchwC,KAAKqwC,eAChD7tB,MAAO,IAAIyqB,EAAU,CACnB12B,WAAY65B,uBAAaD,EAAcnwC,KAAKqwC,iBAE9C35B,SAAU1W,KAAK0W,SAAS42B,KAAKttC,MAC7B2W,kBAAkB,EAClB6zB,eAAgB,MAGZ8F,EAAsBL,yBAAejwC,KAAKkwC,OAAQ,CACtD,kBACA,SAGGlwC,KAAKuwC,cA1BZ,uBA2BU,IAAIv7B,MAAM,4BA3BpB,eA8BQw7B,EAAUP,yBAAejwC,KAAKkwC,OAAQ,mBA9B9C,UA+BiDlwC,KAAKuwC,cAAcC,GA/BpE,qBA+BuBC,EA/BvB,EA+BUC,uBAEyBC,yBAjCnC,uBAkCU,IAAI37B,MAAJ,sEAC2Ds7B,EAD3D,MAlCV,iCAuCS,CAAEnG,OAAMsG,oBAvCjB,iD,oHA0CA,WAAgBhG,GAAhB,iBAAAvc,EAAA,sEACyBluB,KAAK4wC,YAD9B,uBACUzG,EADV,EACUA,KADV,kBAESA,EAAKA,KAAK0G,cAAcpG,IAFjC,gD,oHAKA,WAAuBnV,EAAelxB,EAAemvB,GAArD,sFACEnvB,GAAS,EADX,SAGoCpE,KAAK4wC,YAHzC,mBAGUH,EAHV,EAGUA,gBACFK,EAAU9wC,KAAK+wC,oBAAoBzb,IAAUt1B,KAAK2uC,YAAYrZ,GAJtE,8CAMW1xB,GANX,wBAS0B6sC,EACrBO,YAAY,CACXF,UACA1sC,QACAmvB,MACA0d,aAAc,KAEfC,KAAKlY,eACLmY,YAjBL,WASQC,EATR,QAmBQC,EAAWD,EACdvM,MAAK,SAAC3W,EAAG1tB,GAAJ,OAAU0tB,EAAErpB,IAAI,SAAWrE,EAAEqE,IAAI,YACtCob,KAAI,SAAApO,GACH,IAAMy/B,EAAaz/B,EAAMhN,IAAI,SACvB0sC,EAAW1/B,EAAMhN,IAAI,OACrB2sC,EAAYhwC,KAAK6H,IAAIjF,EAAQktC,EAAY,GAEzCG,EADUjwC,KAAKskB,IAAIyN,EAAM+d,EAAYC,EAAWD,GACzBE,EAE7B,OADiB3/B,EAAMhN,IAAI,QAAUgN,EAAMhN,IAAI,aAC/Bka,OAAOyyB,EAAWC,MAEnCr9B,KAAK,KAEKjU,SAAWozB,EAAMnvB,EAhChC,uBAiCU,IAAI4Q,MAAJ,0CAC+B87B,EAD/B,aAEF1sC,EAAQ,GACR8mC,iBAHE,YAGkB3X,EAAI2X,iBAHtB,qBAGmDmG,EAASlxC,OAAO+qC,iBAHnE,6CAIF3X,EAAMnvB,GACN8mC,mBAtCR,iCAyCSmG,GAzCT,iD,wHA4CA,WAAuB5G,GAAvB,iGACwCA,GAAQ,IAAtCiH,sBADV,MAC2B,aAD3B,WAE2B1xC,KAAK4wC,YAFhC,cAEQe,EAFR,OAGED,EAAe,qBACPvH,EAASwH,EAATxH,KAJV,SAKwCA,EAAKA,KAAKpyB,aAAV,OAAuB0yB,QAAvB,IAAuBA,OAAvB,EAAuBA,EAAMnL,QALrE,cAKQmP,EALR,OASQmD,EAAqB,GACrBC,EAAmC,GACzCpD,EACG1Z,QAAO,SAAAtK,GAAC,MAAc,OAAVA,EAAErL,OACdtE,SAAQ,SAACg3B,EAAQC,GAChBD,EAAOzkC,KAAKyN,SAAQ,SAAA1U,GAClB,GAAiB,OAAbA,EAAKgZ,IAAc,CAErB,IAAM0xB,EAAU1qC,EAAKP,MACrBgsC,EAASf,GAAWiB,EACpBH,EAASG,GAASjB,SAKpBpC,EAAaD,EAChB1Z,QAAO,SAAAtK,GAAC,MAAc,OAAVA,EAAErL,OACda,KAAI,SAAA+xB,GAAM,uBAAIA,EAAO3kC,KAAK4kC,MAAK,SAAA7rC,GAAI,MAAiB,OAAbA,EAAKgZ,cAAlC,aAAI,EAA6CvZ,SAExDwH,EAAO,CAAEukC,WAAUC,WAAUnD,cACnCgD,EAAe,IACf1xC,KAAKyuC,UAAYphC,EA9BnB,+BA+BWohC,UAAWphC,GAASskC,IA/B/B,iD,iHAkCA,WAAoBlH,GAApB,mFACOzqC,KAAK6vC,SACR7vC,KAAK6vC,OAAS7vC,KAAKkyC,SAASzH,GAAMrnC,OAAM,SAAAmoB,GAEtC,MADA,EAAKskB,YAASjsC,EACR2nB,MAJZ,kBAOSvrB,KAAK6vC,QAPd,gD,uHAUA,WAAkBpF,GAAlB,iBAAAvc,EAAA,sEAC8BluB,KAAKmyC,MAAM1H,GADzC,oBACUgE,EADV,EACUA,WACOmD,SAFjB,sBAGU,IAAI58B,MAAM,iCAHpB,gCAKSy5B,EAAUmD,UALnB,gD,gFAUA,SAAYd,GACV,OAAI9wC,KAAKyuC,UAAUoD,SACV7xC,KAAKyuC,UAAUoD,SAASf,GAE7B9wC,KAAK8vC,eACA9vC,KAAK8vC,eAAexf,QAAQwgB,QADrC,I,yBAQF,SAAYiB,GACV,OAAI/xC,KAAKyuC,UAAUmD,SACV5xC,KAAKyuC,UAAUmD,SAASG,GAE7B/xC,KAAK8vC,eACA9vC,KAAK8vC,eAAeiC,QAD7B,I,iCAMF,SAAoBA,GAClB,OAAO/xC,KAAK+vC,uBAAuBgC,K,yBAGrC,SACEK,EACA3H,GACA,WACA,EAA8CA,GAAQ,GAA9CnL,EAAR,EAAQA,OAAR,IAAgBoS,sBAAhB,MAAiC,aAAjC,EACQZ,EAAyCsB,EAAzCtB,QAAS1sC,EAAgCguC,EAAhChuC,MAAOmvB,EAAyB6e,EAAzB7e,IAAK8e,EAAoBD,EAApBC,gBAE7B,OAAOC,2BAAgB,uCAAU,WAAMC,GAAN,uBAAArkB,EAAA,sEACS,EAAKikB,MAAM1H,GADpB,mBACvBN,EADuB,EACvBA,KAAMsG,EADiB,EACjBA,gBACdiB,EAAe,0BACV,EAAK5B,eAHqB,iCAIDW,EAAgB+B,YAAY/H,GAJ3B,OAI7B,EAAKqF,eAJwB,uBAOjBlsC,KADRmuC,EAAQ,EAAKU,YAAY3B,IANA,wBAQzBuB,IACF,EAAKtC,uBAAuBgC,GAASM,GATV,UAWPlI,EAAKuI,mBAAmBX,EAAO3tC,EAAOmvB,EAAKkX,GAXpC,QAWvB7Y,EAXuB,OAY7B+gB,2BAAiBrT,GAEjB1N,EAAQ9W,SAAQ,SAACgyB,GACfyF,EAAShW,KAAK,EAAKqW,oBAAoB9F,OAfZ,wBAkB7Bh6B,QAAQoN,KAAK,kBAAmB4wB,GAlBH,QAoB/BY,EAAe,IACfa,EAASM,WArBsB,4CAAV,sDAsBpBvT,K,2BAGL,c,iCAEA,SAAoBwN,GAClB,OAAO,IAAIwB,EAAwBxB,EAAQ9sC,Q,yEAI7C,WAA2B8yC,EAAmBrI,GAA9C,iBAAAvc,EAAA,sEACsBluB,KAAK+yC,gBAAgBD,EAASrI,GADpD,cACQz2B,EADR,OAEQw2B,EAAiByF,yBAAejwC,KAAKkwC,OAAQ,kBAFrD,kBAGS,CACLl8B,QACAw2B,mBALJ,gD,6HAcA,WAA8BsI,EAAmBE,GAAjD,kGACyBhzC,KAAK4wC,YAD9B,uBACUzG,EADV,EACUA,KADV,SAE6BjnC,QAAQof,IACjCwwB,EAAQ7yB,KAAI,SAAAmyB,GACV,IAAQtB,EAAwBsB,EAAxBtB,QAAS1sC,EAAeguC,EAAfhuC,MAAOmvB,EAAQ6e,EAAR7e,IAClB0f,EAAQ,EAAKR,YAAY3B,GAC/B,OAAO3G,EAAK3nB,MAAM+nB,mBAAmB0I,EAAO7uC,EAAOmvB,OANzD,cAEQ2f,EAFR,yBAUSA,EAAaC,OAAOnI,QAAO,SAAC9c,EAAG1tB,GAAJ,OAAU0tB,EAAI1tB,EAAEuqC,aAAY,IAVhE,gD,8DA/OuC4F,2B,kCCzBzC,YAEAvvB,OAAO4gB,eAAepiC,EAAS,aAAc,CAAEiG,OAAO,IACtDjG,EAAQwzC,YAAcxzC,EAAQyzC,qBAAkB,EAChD,IAAMC,EAAiBvqC,EAAQ,KAC3BwqC,EAAY,WAIZ,GAAoB,qBAAT/X,KACP,OAAOA,KAEX,GAAsB,qBAAXgY,OACP,OAAOA,OAEX,GAAsB,qBAAXjY,EACP,OAAOA,EAEX,MAAM,IAAIvmB,MAAM,mCAGhBq+B,EAAyD,qBAAhCE,IAAYF,gBAAkCC,EAAeD,gBAAkBE,IAAYF,gBACxHzzC,EAAQyzC,gBAAkBA,EAE1B,IAAID,EAAqD,qBAAhCG,IAAYF,gBAAkCC,EAAeF,YAAcG,IAAYH,YAChHxzC,EAAQwzC,YAAcA,I,mDCxBtB,IAAIK,EAAmBzzC,MAAQA,KAAKyzC,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDtyB,OAAO4gB,eAAepiC,EAAS,aAAc,CAAEiG,OAAO,IACtD,IAAM+tC,EAA0BH,EAAgB1qC,EAAQ,MACxDnJ,EAAQuiC,QAAUyR,EAAwBzR,S,kBCN1CxiC,EAAOC,QAAUk2B,EAKjB,IAAI+d,EAAO,KAEX,IACEA,EAAO,IAAIC,YAAYC,SAAS,IAAID,YAAYE,OAAO,IAAItxB,WAAW,CACpE,EAAG,GAAI,IAAK,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,IAAK,IAAK,EAAG,EAAG,EAAG,IAAK,IAAK,IAAK,GAAI,IAAK,EAAG,EAAG,EAAG,IAAK,IAAK,IAAK,GAAI,IAAK,EAAG,EAAG,EAAG,IAAK,IAAK,IAAK,GAAI,IAAK,EAAG,EAAG,EAAG,IAAK,IAAK,IAAK,GAAI,IAAK,EAAG,EAAG,EAAG,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,EAAG,EAAG,GAAI,IAAK,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,EAAG,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,GAAI,EAAG,IAAK,GAAI,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,EAAG,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,GAAI,EAAG,IAAK,GAAI,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,EAAG,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,GAAI,EAAG,IAAK,GAAI,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,EAAG,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,GAAI,EAAG,IAAK,GAAI,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,EAAG,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,GAAI,EAAG,IAAK,MACvnC,IAAI9iB,QACT,MAAO2rB,IAcT,SAASuK,EAAKzjB,EAAK4hC,EAAM/6B,GAMrBlZ,KAAKqS,IAAY,EAANA,EAMXrS,KAAKi0C,KAAc,EAAPA,EAMZj0C,KAAKkZ,WAAaA,EAoCtB,SAASg7B,EAAO1jB,GACZ,OAAsC,KAA9BA,GAAOA,EAAG,YAXtBsF,EAAKhzB,UAAUqxC,WAEf/yB,OAAO4gB,eAAelM,EAAKhzB,UAAW,aAAc,CAAE+C,OAAO,IAkB7DiwB,EAAKoe,OAASA,EAOd,IAAIE,EAAY,GAOZC,EAAa,GAQjB,SAASC,EAAQzuC,EAAOqT,GACpB,IAAIsX,EAAK+jB,EAAW9uC,EACpB,OAAIyT,GAEIzT,EAAS,IADbI,KAAW,IACgBA,EAAQ,OAC/B0uC,EAAYF,EAAWxuC,IAEZ0uC,GAEf/jB,EAAMgkB,EAAS3uC,GAAgB,EAARA,GAAa,GAAK,EAAI,GAAG,GAC5CJ,IACA4uC,EAAWxuC,GAAS2qB,GACjBA,IAGH/qB,GAAU,MADdI,GAAS,IACqBA,EAAQ,OAClC0uC,EAAYH,EAAUvuC,IAEX0uC,GAEf/jB,EAAMgkB,EAAS3uC,EAAOA,EAAQ,GAAK,EAAI,GAAG,GACtCJ,IACA2uC,EAAUvuC,GAAS2qB,GAChBA,GAmBf,SAASikB,EAAW5uC,EAAOqT,GACvB,GAAIqgB,MAAM1zB,GACN,OAAOqT,EAAWw7B,EAAQC,EAC9B,GAAIz7B,EAAU,CACV,GAAIrT,EAAQ,EACR,OAAO6uC,EACX,GAAI7uC,GAAS+uC,EACT,OAAOC,MACR,CACH,GAAIhvC,IAAUivC,EACV,OAAOC,EACX,GAAIlvC,EAAQ,GAAKivC,EACb,OAAOE,EAEf,OAAInvC,EAAQ,EACD4uC,GAAY5uC,EAAOqT,GAAU+7B,MACjCT,EAAU3uC,EAAQqvC,EAAkB,EAAIrvC,EAAQqvC,EAAkB,EAAGh8B,GAmBhF,SAASs7B,EAASW,EAASC,EAAUl8B,GACjC,OAAO,IAAI4c,EAAKqf,EAASC,EAAUl8B,GA5CvC4c,EAAKwe,QAAUA,EAkCfxe,EAAK2e,WAAaA,EAsBlB3e,EAAK0e,SAAWA,EAShB,IAAIa,EAAU7zC,KAAK+uB,IASnB,SAAS+kB,EAAWr0C,EAAKiY,EAAUq8B,GAC/B,GAAmB,IAAft0C,EAAId,OACJ,MAAM6U,MAAM,gBAChB,GAAY,QAAR/T,GAAyB,aAARA,GAA8B,cAARA,GAA+B,cAARA,EAC9D,OAAO0zC,EASX,GARwB,kBAAbz7B,GAEPq8B,EAAQr8B,EACRA,GAAW,GAEXA,IAAcA,GAElBq8B,EAAQA,GAAS,IACL,GAAK,GAAKA,EAClB,MAAMjV,WAAW,SAErB,IAAIva,EACJ,IAAKA,EAAI9kB,EAAIqvB,QAAQ,MAAQ,EACzB,MAAMtb,MAAM,mBACX,GAAU,IAAN+Q,EACL,OAAOuvB,EAAWr0C,EAAI4qB,UAAU,GAAI3S,EAAUq8B,GAAON,MAQzD,IAHA,IAAIO,EAAef,EAAWY,EAAQE,EAAO,IAEzCxzC,EAAS4yC,EACJh0C,EAAI,EAAGA,EAAIM,EAAId,OAAQQ,GAAK,EAAG,CACpC,IAAIZ,EAAOyB,KAAKskB,IAAI,EAAG7kB,EAAId,OAASQ,GAChCkF,EAAQmQ,SAAS/U,EAAI4qB,UAAUlrB,EAAGA,EAAIZ,GAAOw1C,GACjD,GAAIx1C,EAAO,EAAG,CACV,IAAI01C,EAAQhB,EAAWY,EAAQE,EAAOx1C,IACtCgC,EAASA,EAAO2zC,IAAID,GAAOE,IAAIlB,EAAW5uC,SAG1C9D,GADAA,EAASA,EAAO2zC,IAAIF,IACJG,IAAIlB,EAAW5uC,IAIvC,OADA9D,EAAOmX,SAAWA,EACXnX,EAoBX,SAAS6zC,EAAUh6B,EAAK1C,GACpB,MAAmB,kBAAR0C,EACA64B,EAAW74B,EAAK1C,GACR,kBAAR0C,EACA05B,EAAW15B,EAAK1C,GAEpBs7B,EAAS54B,EAAIvJ,IAAKuJ,EAAIq4B,KAA0B,mBAAb/6B,EAAyBA,EAAW0C,EAAI1C,UAftF4c,EAAKwf,WAAaA,EAyBlBxf,EAAK8f,UAAYA,EAUjB,IAcIV,EAAiBW,WAOjBjB,EAAiBM,EAAiBA,EAOlCJ,EAAiBF,EAAiB,EAOlCkB,EAAaxB,EA5BI,GAAK,IAkCtBK,EAAOL,EAAQ,GAMnBxe,EAAK6e,KAAOA,EAMZ,IAAID,EAAQJ,EAAQ,GAAG,GAMvBxe,EAAK4e,MAAQA,EAMb,IAAIqB,EAAMzB,EAAQ,GAMlBxe,EAAKigB,IAAMA,EAMX,IAAIC,EAAO1B,EAAQ,GAAG,GAMtBxe,EAAKkgB,KAAOA,EAMZ,IAAIC,EAAU3B,GAAS,GAMvBxe,EAAKmgB,QAAUA,EAMf,IAAIjB,EAAYR,GAAS,EAAc,YAAc,GAMrD1e,EAAKkf,UAAYA,EAMjB,IAAIH,EAAqBL,GAAS,GAAc,GAAc,GAM9D1e,EAAK+e,mBAAqBA,EAM1B,IAAIE,EAAYP,EAAS,GAAG,YAAc,GAM1C1e,EAAKif,UAAYA,EAMjB,IAAImB,EAAgBpgB,EAAKhzB,UAMzBozC,EAAcC,MAAQ,WAClB,OAAOn2C,KAAKkZ,SAAWlZ,KAAKqS,MAAQ,EAAIrS,KAAKqS,KAOjD6jC,EAAc9f,SAAW,WACrB,OAAIp2B,KAAKkZ,UACIlZ,KAAKi0C,OAAS,GAAKiB,GAAmBl1C,KAAKqS,MAAQ,GACzDrS,KAAKi0C,KAAOiB,GAAkBl1C,KAAKqS,MAAQ,IAUtD6jC,EAAcr+B,SAAW,SAAkB09B,GAEvC,IADAA,EAAQA,GAAS,IACL,GAAK,GAAKA,EAClB,MAAMjV,WAAW,SACrB,GAAItgC,KAAKo2C,SACL,MAAO,IACX,GAAIp2C,KAAKq2C,aAAc,CACnB,GAAIr2C,KAAKs2C,GAAGvB,GAAY,CAGpB,IAAIwB,EAAY9B,EAAWc,GACvBiB,EAAMx2C,KAAKw2C,IAAID,GACfE,EAAOD,EAAId,IAAIa,GAAWpc,IAAIn6B,MAClC,OAAOw2C,EAAI3+B,SAAS09B,GAASkB,EAAKN,QAAQt+B,SAAS09B,GAEnD,MAAO,IAAMv1C,KAAKi1C,MAAMp9B,SAAS09B,GAQzC,IAHA,IAAIC,EAAef,EAAWY,EAAQE,EAAO,GAAIv1C,KAAKkZ,UAClDw9B,EAAM12C,KACN+B,EAAS,KACA,CACT,IAAI40C,EAASD,EAAIF,IAAIhB,GAEjBoB,GADSF,EAAIvc,IAAIwc,EAAOjB,IAAIF,IAAeW,UAAY,GACvCt+B,SAAS09B,GAE7B,IADAmB,EAAMC,GACEP,SACJ,OAAOQ,EAAS70C,EAEhB,KAAO60C,EAAOz2C,OAAS,GACnBy2C,EAAS,IAAMA,EACnB70C,EAAS,GAAK60C,EAAS70C,IASnCm0C,EAAcW,YAAc,WACxB,OAAO72C,KAAKi0C,MAOhBiC,EAAcY,oBAAsB,WAChC,OAAO92C,KAAKi0C,OAAS,GAOzBiC,EAAca,WAAa,WACvB,OAAO/2C,KAAKqS,KAOhB6jC,EAAcc,mBAAqB,WAC/B,OAAOh3C,KAAKqS,MAAQ,GAOxB6jC,EAAce,cAAgB,WAC1B,GAAIj3C,KAAKq2C,aACL,OAAOr2C,KAAKs2C,GAAGvB,GAAa,GAAK/0C,KAAKi1C,MAAMgC,gBAEhD,IADA,IAAIr7B,EAAmB,GAAb5b,KAAKi0C,KAAYj0C,KAAKi0C,KAAOj0C,KAAKqS,IACnC6P,EAAM,GAAIA,EAAM,GACK,IAArBtG,EAAO,GAAKsG,GADOA,KAG5B,OAAoB,GAAbliB,KAAKi0C,KAAY/xB,EAAM,GAAKA,EAAM,GAO7Cg0B,EAAcE,OAAS,WACnB,OAAqB,IAAdp2C,KAAKi0C,MAA2B,IAAbj0C,KAAKqS,KAOnC6jC,EAAcgB,IAAMhB,EAAcE,OAMlCF,EAAcG,WAAa,WACvB,OAAQr2C,KAAKkZ,UAAYlZ,KAAKi0C,KAAO,GAOzCiC,EAAciB,WAAa,WACvB,OAAOn3C,KAAKkZ,UAAYlZ,KAAKi0C,MAAQ,GAOzCiC,EAAckB,MAAQ,WAClB,OAA0B,KAAP,EAAXp3C,KAAKqS,MAOjB6jC,EAAcmB,OAAS,WACnB,OAA0B,KAAP,EAAXr3C,KAAKqS,MAQjB6jC,EAAcoB,OAAS,SAAgBC,GAGnC,OAFKrD,EAAOqD,KACRA,EAAQ3B,EAAU2B,KAClBv3C,KAAKkZ,WAAaq+B,EAAMr+B,UAAalZ,KAAKi0C,OAAS,KAAQ,GAAMsD,EAAMtD,OAAS,KAAQ,KAErFj0C,KAAKi0C,OAASsD,EAAMtD,MAAQj0C,KAAKqS,MAAQklC,EAAMllC,MAS1D6jC,EAAcI,GAAKJ,EAAcoB,OAOjCpB,EAAcsB,UAAY,SAAmBD,GACzC,OAAQv3C,KAAKs2C,GAAmBiB,IASpCrB,EAAcuB,IAAMvB,EAAcsB,UAQlCtB,EAAcwB,GAAKxB,EAAcsB,UAOjCtB,EAAchgB,SAAW,SAAkBqhB,GACvC,OAAOv3C,KAAKyK,KAAqB8sC,GAAS,GAS9CrB,EAAcyB,GAAKzB,EAAchgB,SAOjCggB,EAAc0B,gBAAkB,SAAyBL,GACrD,OAAOv3C,KAAKyK,KAAqB8sC,IAAU,GAS/CrB,EAAc2B,IAAM3B,EAAc0B,gBAQlC1B,EAAc4B,GAAK5B,EAAc0B,gBAOjC1B,EAAclgB,YAAc,SAAqBuhB,GAC7C,OAAOv3C,KAAKyK,KAAqB8sC,GAAS,GAS9CrB,EAAc6B,GAAK7B,EAAclgB,YAOjCkgB,EAAc8B,mBAAqB,SAA4BT,GAC3D,OAAOv3C,KAAKyK,KAAqB8sC,IAAU,GAS/CrB,EAAc+B,IAAM/B,EAAc8B,mBAQlC9B,EAAcgC,GAAKhC,EAAc8B,mBAQjC9B,EAAcjI,QAAU,SAAiBsJ,GAGrC,GAFKrD,EAAOqD,KACRA,EAAQ3B,EAAU2B,IAClBv3C,KAAKs2C,GAAGiB,GACR,OAAO,EACX,IAAIY,EAAUn4C,KAAKq2C,aACf+B,EAAWb,EAAMlB,aACrB,OAAI8B,IAAYC,GACJ,GACPD,GAAWC,EACL,EAENp4C,KAAKkZ,SAGFq+B,EAAMtD,OAAS,EAAMj0C,KAAKi0C,OAAS,GAAOsD,EAAMtD,OAASj0C,KAAKi0C,MAASsD,EAAMllC,MAAQ,EAAMrS,KAAKqS,MAAQ,GAAO,EAAI,EAFhHrS,KAAKm6B,IAAIod,GAAOlB,cAAgB,EAAI,GAYnDH,EAAczrC,KAAOyrC,EAAcjI,QAMnCiI,EAAcmC,OAAS,WACnB,OAAKr4C,KAAKkZ,UAAYlZ,KAAKs2C,GAAGvB,GACnBA,EACJ/0C,KAAKs4C,MAAM3C,IAAII,IAQ1BG,EAAcjB,IAAMiB,EAAcmC,OAOlCnC,EAAcP,IAAM,SAAa4C,GACxBrE,EAAOqE,KACRA,EAAS3C,EAAU2C,IAIvB,IAAIC,EAAMx4C,KAAKi0C,OAAS,GACpBwE,EAAkB,MAAZz4C,KAAKi0C,KACXyE,EAAM14C,KAAKqS,MAAQ,GACnBsmC,EAAiB,MAAX34C,KAAKqS,IAEXumC,EAAML,EAAOtE,OAAS,GACtB4E,EAAoB,MAAdN,EAAOtE,KACb6E,EAAMP,EAAOlmC,MAAQ,GAGrB0mC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAYrC,OAVAD,IADAC,GAAOP,GAHgB,MAAbJ,EAAOlmC,QAIF,GAGf2mC,IADAC,GAAOP,EAAMI,KACE,GAGfC,IADAC,GAAOP,EAAMI,KACE,GAEfE,GAAOP,EAAMI,EAENpE,GANPyE,GAAO,QAMiB,IATxBC,GAAO,QAQPH,GAAO,QACoC,IAH3CC,GAAO,OAG+Ch5C,KAAKkZ,WAQ/Dg9B,EAAciD,SAAW,SAAkBC,GAGvC,OAFKlF,EAAOkF,KACRA,EAAaxD,EAAUwD,IACpBp5C,KAAK21C,IAAIyD,EAAWnE,QAS/BiB,EAAc/b,IAAM+b,EAAciD,SAOlCjD,EAAcmD,SAAW,SAAkBC,GACvC,GAAIt5C,KAAKo2C,SACL,OAAOzB,EAKX,GAJKT,EAAOoF,KACRA,EAAa1D,EAAU0D,IAGvBzF,EAKA,OAAOW,EAJGX,EAAK6B,IAAI11C,KAAKqS,IACLrS,KAAKi0C,KACLqF,EAAWjnC,IACXinC,EAAWrF,MACTJ,EAAK0F,WAAYv5C,KAAKkZ,UAG/C,GAAIogC,EAAWlD,SACX,OAAOzB,EACX,GAAI30C,KAAKs2C,GAAGvB,GACR,OAAOuE,EAAWlC,QAAUrC,EAAYJ,EAC5C,GAAI2E,EAAWhD,GAAGvB,GACd,OAAO/0C,KAAKo3C,QAAUrC,EAAYJ,EAEtC,GAAI30C,KAAKq2C,aACL,OAAIiD,EAAWjD,aACJr2C,KAAKi1C,MAAMS,IAAI4D,EAAWrE,OAE1Bj1C,KAAKi1C,MAAMS,IAAI4D,GAAYrE,MACnC,GAAIqE,EAAWjD,aAClB,OAAOr2C,KAAK01C,IAAI4D,EAAWrE,OAAOA,MAGtC,GAAIj1C,KAAK23C,GAAG7B,IAAewD,EAAW3B,GAAG7B,GACrC,OAAOrB,EAAWz0C,KAAKo2B,WAAakjB,EAAWljB,WAAYp2B,KAAKkZ,UAKpE,IAAIs/B,EAAMx4C,KAAKi0C,OAAS,GACpBwE,EAAkB,MAAZz4C,KAAKi0C,KACXyE,EAAM14C,KAAKqS,MAAQ,GACnBsmC,EAAiB,MAAX34C,KAAKqS,IAEXumC,EAAMU,EAAWrF,OAAS,GAC1B4E,EAAwB,MAAlBS,EAAWrF,KACjB6E,EAAMQ,EAAWjnC,MAAQ,GACzBmnC,EAAuB,MAAjBF,EAAWjnC,IAEjB0mC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAqBrC,OAnBAD,IADAC,GAAOP,EAAMa,KACE,GAGfR,IADAC,GAAOP,EAAMc,KACE,GACfP,GAAO,MAEPD,IADAC,GAAON,EAAMG,KACE,GAGfC,IADAC,GAAOP,EAAMe,KACE,GACfR,GAAO,MAEPD,IADAC,GAAON,EAAMI,KACE,GACfE,GAAO,MAEPD,IADAC,GAAOL,EAAME,KACE,GAEfE,GAAOP,EAAMgB,EAAMf,EAAMK,EAAMJ,EAAMG,EAAMF,EAAMC,EAE1CpE,GAZPyE,GAAO,QAYiB,IAlBxBC,GAAO,QAiBPH,GAAO,QACoC,IAH3CC,GAAO,OAG+Ch5C,KAAKkZ,WAS/Dg9B,EAAcR,IAAMQ,EAAcmD,SAQlCnD,EAAcuD,OAAS,SAAgBC,GAGnC,GAFKxF,EAAOwF,KACRA,EAAU9D,EAAU8D,IACpBA,EAAQtD,SACR,MAAMphC,MAAM,oBAaZ,IAWA2kC,EAAQjD,EAAK1zC,EArBjB,GAAI6wC,EAIA,OAAK7zC,KAAKkZ,WACS,aAAflZ,KAAKi0C,OACY,IAAjByF,EAAQrnC,MAAgC,IAAlBqnC,EAAQzF,KAU3BO,GANIx0C,KAAKkZ,SAAW26B,EAAK+F,MAAQ/F,EAAKgG,OACzC75C,KAAKqS,IACLrS,KAAKi0C,KACLyF,EAAQrnC,IACRqnC,EAAQzF,MAESJ,EAAK0F,WAAYv5C,KAAKkZ,UARhClZ,KAWf,GAAIA,KAAKo2C,SACL,OAAOp2C,KAAKkZ,SAAWw7B,EAAQC,EAEnC,GAAK30C,KAAKkZ,SA6BH,CAKH,GAFKwgC,EAAQxgC,WACTwgC,EAAUA,EAAQI,cAClBJ,EAAQ3B,GAAG/3C,MACX,OAAO00C,EACX,GAAIgF,EAAQ3B,GAAG/3C,KAAK+5C,KAAK,IACrB,OAAO/D,EACXhzC,EAAM0xC,MAtCU,CAGhB,GAAI10C,KAAKs2C,GAAGvB,GACR,OAAI2E,EAAQpD,GAAGP,IAAQ2D,EAAQpD,GAAGL,GACvBlB,EACF2E,EAAQpD,GAAGvB,GACTgB,GAIP4D,EADe35C,KAAKg6C,IAAI,GACNxD,IAAIkD,GAASO,IAAI,IACxB3D,GAAG3B,GACH+E,EAAQrD,aAAeN,EAAME,GAEpCS,EAAM12C,KAAKm6B,IAAIuf,EAAQhE,IAAIiE,IAC3B32C,EAAM22C,EAAOhE,IAAIe,EAAIF,IAAIkD,KAI9B,GAAIA,EAAQpD,GAAGvB,GAClB,OAAO/0C,KAAKkZ,SAAWw7B,EAAQC,EACnC,GAAI30C,KAAKq2C,aACL,OAAIqD,EAAQrD,aACDr2C,KAAKi1C,MAAMuB,IAAIkD,EAAQzE,OAC3Bj1C,KAAKi1C,MAAMuB,IAAIkD,GAASzE,MAC5B,GAAIyE,EAAQrD,aACf,OAAOr2C,KAAKw2C,IAAIkD,EAAQzE,OAAOA,MACnCjyC,EAAM2xC,EAmBV,IADA+B,EAAM12C,KACC02C,EAAIuB,IAAIyB,IAAU,CAGrBC,EAASn4C,KAAK6H,IAAI,EAAG7H,KAAKC,MAAMi1C,EAAItgB,WAAasjB,EAAQtjB,aAWzD,IAPA,IAAI9nB,EAAO9M,KAAKkM,KAAKlM,KAAKuR,IAAI4mC,GAAUn4C,KAAK04C,KACzC/zB,EAAS7X,GAAQ,GAAM,EAAI+mC,EAAQ,EAAG/mC,EAAO,IAI7C6rC,EAAY1F,EAAWkF,GACvBS,EAAYD,EAAUzE,IAAIgE,GACvBU,EAAU/D,cAAgB+D,EAAUrC,GAAGrB,IAG1C0D,GADAD,EAAY1F,EADZkF,GAAUxzB,EACqBnmB,KAAKkZ,WACdw8B,IAAIgE,GAK1BS,EAAU/D,WACV+D,EAAYpE,GAEhB/yC,EAAMA,EAAI2yC,IAAIwE,GACdzD,EAAMA,EAAIvc,IAAIigB,GAElB,OAAOp3C,GASXkzC,EAAcM,IAAMN,EAAcuD,OAOlCvD,EAAcmE,OAAS,SAAgBX,GAKnC,OAJKxF,EAAOwF,KACRA,EAAU9D,EAAU8D,IAGpB7F,EAOOW,GANIx0C,KAAKkZ,SAAW26B,EAAKyG,MAAQzG,EAAK0G,OACzCv6C,KAAKqS,IACLrS,KAAKi0C,KACLyF,EAAQrnC,IACRqnC,EAAQzF,MAESJ,EAAK0F,WAAYv5C,KAAKkZ,UAGxClZ,KAAKm6B,IAAIn6B,KAAKw2C,IAAIkD,GAAShE,IAAIgE,KAS1CxD,EAAcxC,IAAMwC,EAAcmE,OAQlCnE,EAAcQ,IAAMR,EAAcmE,OAMlCnE,EAAcoC,IAAM,WAChB,OAAO9D,GAAUx0C,KAAKqS,KAAMrS,KAAKi0C,KAAMj0C,KAAKkZ,WAQhDg9B,EAAcsE,IAAM,SAAajD,GAG7B,OAFKrD,EAAOqD,KACRA,EAAQ3B,EAAU2B,IACf/C,EAASx0C,KAAKqS,IAAMklC,EAAMllC,IAAKrS,KAAKi0C,KAAOsD,EAAMtD,KAAMj0C,KAAKkZ,WAQvEg9B,EAAcuE,GAAK,SAAYlD,GAG3B,OAFKrD,EAAOqD,KACRA,EAAQ3B,EAAU2B,IACf/C,EAASx0C,KAAKqS,IAAMklC,EAAMllC,IAAKrS,KAAKi0C,KAAOsD,EAAMtD,KAAMj0C,KAAKkZ,WAQvEg9B,EAAcwE,IAAM,SAAanD,GAG7B,OAFKrD,EAAOqD,KACRA,EAAQ3B,EAAU2B,IACf/C,EAASx0C,KAAKqS,IAAMklC,EAAMllC,IAAKrS,KAAKi0C,KAAOsD,EAAMtD,KAAMj0C,KAAKkZ,WAQvEg9B,EAAcyE,UAAY,SAAmB9W,GAGzC,OAFIqQ,EAAOrQ,KACPA,EAAUA,EAAQsS,SACE,KAAnBtS,GAAW,IACL7jC,KACF6jC,EAAU,GACR2Q,EAASx0C,KAAKqS,KAAOwxB,EAAU7jC,KAAKi0C,MAAQpQ,EAAY7jC,KAAKqS,MAAS,GAAKwxB,EAAW7jC,KAAKkZ,UAE3Fs7B,EAAS,EAAGx0C,KAAKqS,KAAQwxB,EAAU,GAAK7jC,KAAKkZ,WAS5Dg9B,EAAc+D,IAAM/D,EAAcyE,UAOlCzE,EAAc0E,WAAa,SAAoB/W,GAG3C,OAFIqQ,EAAOrQ,KACPA,EAAUA,EAAQsS,SACE,KAAnBtS,GAAW,IACL7jC,KACF6jC,EAAU,GACR2Q,EAAUx0C,KAAKqS,MAAQwxB,EAAY7jC,KAAKi0C,MAAS,GAAKpQ,EAAW7jC,KAAKi0C,MAAQpQ,EAAS7jC,KAAKkZ,UAE5Fs7B,EAASx0C,KAAKi0C,MAASpQ,EAAU,GAAK7jC,KAAKi0C,MAAQ,EAAI,GAAK,EAAGj0C,KAAKkZ,WASnFg9B,EAAc8D,IAAM9D,EAAc0E,WAOlC1E,EAAc2E,mBAAqB,SAA4BhX,GAI3D,GAHIqQ,EAAOrQ,KACPA,EAAUA,EAAQsS,SAEN,KADhBtS,GAAW,IAEP,OAAO7jC,KAEP,IAAIi0C,EAAOj0C,KAAKi0C,KAChB,OAAIpQ,EAAU,GAEH2Q,EADGx0C,KAAKqS,MACUwxB,EAAYoQ,GAAS,GAAKpQ,EAAWoQ,IAASpQ,EAAS7jC,KAAKkZ,UAE9Es7B,EADY,KAAZ3Q,EACSoQ,EAEAA,IAAUpQ,EAAU,GAFd,EAAG7jC,KAAKkZ,WAY1Cg9B,EAAc6D,KAAO7D,EAAc2E,mBAQnC3E,EAAc4E,MAAQ5E,EAAc2E,mBAMpC3E,EAAc6E,SAAW,WACrB,OAAK/6C,KAAKkZ,SAEHs7B,EAASx0C,KAAKqS,IAAKrS,KAAKi0C,MAAM,GAD1Bj0C,MAQfk2C,EAAc4D,WAAa,WACvB,OAAI95C,KAAKkZ,SACElZ,KACJw0C,EAASx0C,KAAKqS,IAAKrS,KAAKi0C,MAAM,IAQzCiC,EAAc8E,QAAU,SAAiBlD,GACrC,OAAOA,EAAK93C,KAAKi7C,YAAcj7C,KAAKk7C,aAOxChF,EAAc+E,UAAY,WACtB,IAAIE,EAAKn7C,KAAKi0C,KACVmH,EAAKp7C,KAAKqS,IACd,MAAO,CACS,IAAZ+oC,EACAA,IAAQ,EAAI,IACZA,IAAO,GAAK,IACZA,IAAO,GACK,IAAZD,EACAA,IAAQ,EAAI,IACZA,IAAO,GAAK,IACZA,IAAO,KAQfjF,EAAcgF,UAAY,WACtB,IAAIC,EAAKn7C,KAAKi0C,KACVmH,EAAKp7C,KAAKqS,IACd,MAAO,CACH8oC,IAAO,GACPA,IAAO,GAAK,IACZA,IAAQ,EAAI,IACA,IAAZA,EACAC,IAAO,GACPA,IAAO,GAAK,IACZA,IAAQ,EAAI,IACA,IAAZA,IAWRtlB,EAAKulB,UAAY,SAAmBrnC,EAAOkF,EAAU4+B,GACjD,OAAOA,EAAKhiB,EAAKC,YAAY/hB,EAAOkF,GAAY4c,EAAKwlB,YAAYtnC,EAAOkF,IAS5E4c,EAAKC,YAAc,SAAqB/hB,EAAOkF,GAC3C,OAAO,IAAI4c,EACP9hB,EAAM,GACNA,EAAM,IAAO,EACbA,EAAM,IAAM,GACZA,EAAM,IAAM,GACZA,EAAM,GACNA,EAAM,IAAO,EACbA,EAAM,IAAM,GACZA,EAAM,IAAM,GACZkF,IAUR4c,EAAKwlB,YAAc,SAAqBtnC,EAAOkF,GAC3C,OAAO,IAAI4c,EACP9hB,EAAM,IAAM,GACZA,EAAM,IAAM,GACZA,EAAM,IAAO,EACbA,EAAM,GACNA,EAAM,IAAM,GACZA,EAAM,IAAM,GACZA,EAAM,IAAO,EACbA,EAAM,GACNkF,K,uECvyCJu6B,EAAmBzzC,MAAQA,KAAKyzC,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDtyB,OAAO4gB,eAAepiC,EAAS,aAAc,CAAEiG,OAAO,IACtD,IAAM01C,EAA6BxyC,EAAQ,KACrCyyC,EAA6B/H,EAAgB1qC,EAAQ,MACrD0yC,EAA4BhI,EAAgB1qC,EAAQ,MACpDokC,E,WACF,cAA8B,IAAhBrxB,EAAgB,EAAhBA,KAAMrW,EAAU,EAAVA,MAChB,GAD0B,UACN,oBAATqW,EACP,MAAM,IAAItW,UAAU,6BAExB,GAAqB,kBAAVC,EACP,MAAM,IAAID,UAAU,4BAExB,GAAyB,oBAAdC,EAAMZ,KACQ,oBAAdY,EAAMK,KACW,oBAAjBL,EAAMS,OACb,MAAM,IAAIV,UAAU,qEAExBxF,KAAKyF,MAAQA,EACbzF,KAAK07C,aAAe5/B,E,+BAcxB,SAAMlW,EAAKuoC,GACHnuC,KAAKyF,MAAMZ,IAAIe,KAASuoC,GACxBnuC,KAAKyF,MAAMS,OAAON,K,kBAG1B,SAAKA,EAAKyH,EAAMiyB,EAAQoS,GAAgB,WAC9BiK,EAAU,IAAIH,EAA2BrZ,QACzCyZ,EAAiB,IAAIH,EAA0BtZ,QACrDyZ,EAAeC,YAAYnK,GAC3B,IAAMoK,EAAW,CACbH,QAASA,EACTpe,QAASv9B,KAAK07C,aAAaruC,EAAMsuC,EAAQrc,QAAQ,SAACzR,GAC9C+tB,EAAe3c,SAASpR,MAE5BkuB,SAAS,EACTH,iBACI/a,cACA,OAAO7gC,KAAK27C,QAAQrc,OAAOuB,UAGnCib,EAASH,QAAQK,UAAU1c,GAE3Bwc,EAASH,QAAQrc,OAAOoC,iBAAiB,SAAS,WACzCoa,EAASC,SACV,EAAKE,MAAMr2C,EAAKk2C,MAIxBA,EAASve,QACJgB,MAAK,WACNud,EAASC,SAAU,KACpB,WACCD,EAASC,SAAU,EAEnB,EAAKE,MAAMr2C,EAAKk2C,MAEf14C,OAAM,SAAAmoB,GAIP,MADAzY,QAAQ+U,MAAM0D,GACRA,KAEVvrB,KAAKyF,MAAMK,IAAIF,EAAKk2C,K,iBAmBxB,SAAIl2C,GACA,OAAO5F,KAAKyF,MAAMM,IAAIH,K,iBAc1B,SAAIA,EAAKyH,EAAMiyB,EAAQoS,GACnB,IAAKpS,GAAUjyB,aAAgBkuC,EAA2BnI,YACtD,MAAM,IAAI5tC,UAAU,yGAExB,IAAM02C,EAAal8C,KAAKyF,MAAMZ,IAAIe,GAClC,OAAIs2C,EACIA,EAAWrb,UAAYqb,EAAWH,SAElC/7C,KAAKi8C,MAAMr2C,EAAKs2C,GACTl8C,KAAK6E,IAAIe,EAAKyH,EAAMiyB,EAAQoS,IAEnCwK,EAAWH,QAEJG,EAAW3e,SAItB2e,EAAWP,QAAQK,UAAU1c,GAC7B4c,EAAWN,eAAeC,YAAYnK,GAC/BvE,EAAsBgP,mBAAmBD,EAAW3e,QAAS+B,KAGxEt/B,KAAK8b,KAAKlW,EAAKyH,EAAMiyB,EAAQoS,GACtBvE,EAAsBgP,mBAG7Bn8C,KAAKyF,MAAMZ,IAAIe,GAAK23B,QAAS+B,M,oBAQjC,SAAO15B,GACH,IAAMw2C,EAAcp8C,KAAKyF,MAAMZ,IAAIe,GAC/Bw2C,IACKA,EAAYL,SACbK,EAAYT,QAAQ1a,QAExBjhC,KAAKyF,MAAMS,OAAON,M,mBAO1B,WAII,IAFA,IAAMy2C,EAAUr8C,KAAKyF,MAAMa,OACvBg2C,EAAc,EACTv6C,EAASs6C,EAAQ9f,QAASx6B,EAAOy6B,KAAMz6B,EAASs6C,EAAQ9f,OAC7Dv8B,KAAKkG,OAAOnE,EAAO8D,OACnBy2C,GAAe,EAEnB,OAAOA,K,+BA/IX,SAAwBC,GACpB,MAEmB,eAAnBA,EAAU7wB,MAGa,gBAAnB6wB,EAAUhqC,MAEY,wBAAtBgqC,EAAU1uB,SAEY,mBAAtB0uB,EAAU1uB,U,gCA8ClB,SAA0B0P,EAAS+B,GAI/B,SAASkd,IACL,GAAIld,GAAUA,EAAOuB,QACjB,MAAMzf,OAAOC,OAAO,IAAIrM,MAAM,WAAY,CAAEzC,KAAM,gBAG1D,OAAOgrB,EAAQgB,MAAK,SAAAx8B,GAEhB,OADAy6C,IACOz6C,KACR,SAAA8lB,GAEC,MADA20B,IACM30B,S,KA4ElBjoB,EAAQuiC,QAAUgL,G,uECzKlB/rB,OAAO4gB,eAAepiC,EAAS,aAAc,CAAEiG,OAAO,IACtD,IAAM01C,EAA6BxyC,EAAQ,KACrC0zC,E,6BAMAC,E,WACF,aAAc,UACV18C,KAAK28C,QAAU,IAAIC,IACnB58C,KAAK68C,gBAAkB,IAAItB,EAA2BlI,gB,mCAQ1D,WAAqC,WAA3B/T,EAA2B,uDAAlB,IAAImd,EACnB,GAAIz8C,KAAKs/B,OAAOuB,QACZ,MAAM,IAAI7rB,MAAM,yCAIpBhV,KAAK28C,QAAQhH,IAAIrW,GACbA,EAAOuB,QAGP7gC,KAAK88C,cAAcxd,GAEqB,oBAA5BA,EAAOoC,kBACnBpC,EAAOoC,iBAAiB,SAAS,WAC7B,EAAKob,cAAcxd,Q,2BAI/B,SAAcA,GACVt/B,KAAK28C,QAAQz2C,OAAOo5B,GACM,IAAtBt/B,KAAK28C,QAAQ58C,MACbC,KAAK68C,gBAAgB5b,U,kBAG7B,WACI,OAAOjhC,KAAK68C,gBAAgBvd,S,mBAEhC,WACIt/B,KAAK68C,gBAAgB5b,Y,KAG7BrhC,EAAQuiC,QAAUua,G,uEClDlBt7B,OAAO4gB,eAAepiC,EAAS,aAAc,CAAEiG,OAAO,I,IAChDk3C,E,WACF,aAAc,UACV/8C,KAAKg9C,UAAY,IAAIJ,I,qCAEzB,WAAkC,IAAtB3d,EAAsB,uDAAX,aACnBj/B,KAAKg9C,UAAUrH,IAAI1W,GACnBA,EAASj/B,KAAKi9C,kB,sBAElB,SAASpvB,GACL7tB,KAAKi9C,eAAiBpvB,EACtB7tB,KAAKg9C,UAAUliC,SAAQ,SAAAoiC,GACnBA,EAAIrvB,U,KAIhBjuB,EAAQuiC,QAAU4a,G,wPCjBLI,EAAb,qJAA+BnoC,QAGlBsC,EAAb,qJAA4CtC,QAG/BrQ,EAAb,yIAAwCw4C,GAK3Bj7C,EAAb,yIAA4CyC,GAK/BsmC,EAAb,yIAAwCkS,GAK3BzpB,EAAb,yIAAuCypB,I,iCCrB1B,SAASC,EAAQ5sB,GAA8S,OAA9N4sB,EAApD,oBAAX54C,QAAoD,kBAApBA,OAAO+B,SAAkC,SAAiBiqB,GAAM,cAAcA,GAAwB,SAAiBA,GAAM,OAAOA,GAAyB,oBAAXhsB,QAAyBgsB,EAAI1C,cAAgBtpB,QAAUgsB,IAAQhsB,OAAO1B,UAAY,gBAAkB0tB,GAAc4sB,EAAQ5sB,GAG3V,IAAiCvwB,EAAlB8I,EAAQ,IAA4B9I,OAC/Co9C,EAAKt0C,EAAQ,KAEbu0C,EAAUv0C,EAAQ,KAAau0C,QAC/BxnB,EAAO/sB,EAAQ,KAEG,qBAAXyqC,SAAwBA,OAAOvzC,OAASA,GAC/B,qBAATu7B,OAAsBA,KAAKv7B,OAASA,GAE/C,IAAIs9C,EAAkB,CACpBC,MAAO,EACPC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,KAAM,EACNC,QAAS,EACTC,QAAS,EACTC,QAAS,EACTC,QAAS,EACTC,QAAS,EACTC,QAAS,EACTC,SAAU,EACVC,SAAU,EACVC,OAAQ,EACRC,MAAO,GAeLC,EAAgB,GAChBC,EAAkB,aAElBC,EAAY,IAChB,WACE,IAAI/9C,EACJ,IAAKA,EAAI,EAAGA,GAAK,GAAIA,IACnB+9C,EAAUvqC,KAAKxT,GAHnB,GAQA,IAAIg+C,EAAW,GACfv9B,OAAO9a,KAAKi3C,GACZhwC,OAAO6T,OAAO9a,KA1BM,CAClB7F,OAAQ,KACRR,OAAQ,KACR+D,MAAO,KACP46C,KAAM,KACNC,OAAQ,KACRC,KAAM,KACNC,IAAK,KACLC,KAAM,KACNC,KAAM,QAkBRnkC,SAAQ,SAAU0D,GAChBmgC,EAASngC,EAAK2d,eAAiB3d,KAWjC,IAAIN,EAAS,WACXle,KAAKk/C,QAAU,GACfl/C,KAAKwe,KAAO,GACZxe,KAAKsF,QAAU,GACftF,KAAKu8B,KAAO,KACZv8B,KAAKm/C,KAAO,KACZn/C,KAAKo/C,SAAW,KAChBp/C,KAAK+uB,OAAS,KACd/uB,KAAKq/C,cAAgB,KACrBr/C,KAAKs/C,MAAQ,MAOfphC,EAAO9Z,MAAQ,WACb,OAAO,IAAI8Z,GAGbkD,OAAO9a,KAAKi3C,GAAiBziC,SAAQ,SAAU0D,GAC7CN,EAAOpb,UAAU0b,EAAK2d,eAAiB,SAAU+iB,EAAS55C,GACxD,OAAOtF,KAAKu/C,cAAc/gC,EAAK2d,cAAe+iB,EAAS55C,IAGzD,IAAIk6C,EAAoBhhC,EAAK/a,QAAQ,QAAS,IAAI04B,cAC5CqjB,KAAqBthC,EAAOpb,YAChCob,EAAOpb,UAAU08C,GAAqB,SAAUN,EAAS55C,GACvD,OAAOtF,KAAKw/C,EAAoBx/C,KAAK+uB,QAAQmwB,EAAS55C,QAK5Do5C,EAAU5jC,SAAQ,SAAUna,GAC1Bud,EAAOpb,UAAU,MAAMyK,OAAO5M,EAAEkX,aAAe,SAAUqnC,EAAS55C,GAKhE,OAJKA,IACHA,EAAU,IAEZA,EAAQnF,OAASQ,EACVX,KAAKu/C,cAAc,MAAOL,EAAS55C,OAI9C4Y,EAAOpb,UAAU4d,OAAS,SAAU4+B,GAGlC,OAFAd,EAAcc,GAASt/C,KACvBA,KAAKs/C,MAAQA,EACNt/C,MAGTke,EAAOpb,UAAU28C,KAAO,SAAUt/C,EAAQmF,GACxC,GAAIA,GAAWA,EAAQ6W,OACrB,MAAM,IAAInH,MAAM,yCAGlB,OAAOhV,KAAKu/C,cAAc,OAAQ,GAAI,CAAEp/C,OAAQA,KAGlD+d,EAAOpb,UAAUsb,OAAS,SAAU8gC,EAAS55C,GAC3C,IAAKA,EAAQo6C,iBAAmBp6C,EAAQnF,SAAWmF,EAAQq6C,OACzD,MAAM,IAAI3qC,MACV,qEAGF,IAAK1P,EAAQo6C,gBAAkBp6C,EAAQnF,SAAWmF,EAAQq6C,OACxD,MAAM,IAAI3qC,MACV,2EAGF,GAAI1P,EAAQgZ,YAAehZ,EAAQnF,SAAUmF,EAAQq6C,OACnD,MAAM,IAAI3qC,MACV,6DAKF,OAFA1P,EAAQyoB,SAAWzoB,EAAQyoB,UAAY,OAEhC/tB,KAAKu/C,cAAc,SAAUL,EAAS55C,IAG/C4Y,EAAOpb,UAAUjB,OAAS,SAAUq9C,EAAS55C,GAC3C,IAAKA,EAAQnF,SAAWmF,EAAQs6C,UAC9B,MAAM,IAAI5qC,MAAM,oDAGlB,OAAOhV,KAAKu/C,cAAc,SAAUL,EAAS55C,IAG/C4Y,EAAOpb,UAAU6O,MAAQ,SAAUutC,EAAS55C,GAC1C,IAAKA,EAAQs6C,YAAct6C,EAAQnF,SAAWmF,EAAQu6C,cACpD,MAAM,IAAI7qC,MAAM,0CAElB,IAAK1P,EAAQkZ,KACX,MAAM,IAAIxJ,MAAM,wCAElB,GACwB,kBAAjB1P,EAAQkZ,OACdggC,EAAcl5C,EAAQkZ,OACvB4C,OAAO9a,KAAKi3C,GAAiBjtB,QAAQquB,EAASr5C,EAAQkZ,OAAS,EAE7D,MAAM,IAAIxJ,MAAM,6BAA8BzH,OAC9CjI,EAAQkZ,KAAM,wBAIhB,OAAOxe,KAAKu/C,cAAc,QAASL,EAAS55C,IAG9C4Y,EAAOpb,UAAUqc,OAAS,SAAU+/B,EAAS55C,GAM3C,GALyB,IAArBw6C,UAAU3/C,QAAqC,WAArBi9C,EAAQ8B,KACpC55C,EAAU45C,EACVA,EAAU,OAGP55C,EAAQ8Z,IACX,MAAM,IAAIpK,MAAM,uCAElB,IAAK1P,EAAQ+Z,QACX,MAAM,IAAIrK,MAAM,2CAsBlB,OAnBAoM,OAAO9a,KAAKhB,EAAQ+Z,SAASvE,SAAQ,SAAUlV,GAI7C,IAAKN,EAAQ+Z,QAAQzZ,GACnB,MAAM,IAAIoP,MAAM,eAAezH,OAAO3H,EAAK,QAAQ2H,OAAO2xC,EAAS,mBAGrE,GACgC,kBAAzB55C,EAAQ+Z,QAAQzZ,KACtB44C,EAAcl5C,EAAQ+Z,QAAQzZ,KAC/Bwb,OAAO9a,KAAKi3C,GAAiBjtB,QAAQquB,EAASr5C,EAAQ+Z,QAAQzZ,KAAS,EAErE,MAAM,IAAIoP,MAAM,6BAA8BzH,OAC9CjI,EAAQ+Z,QAAQzZ,GAAM,0BAGvB5F,MAEIA,KAAKu/C,cAAc,SAAUL,EAAS55C,IAG/C4Y,EAAOpb,UAAUgd,KAAO,SAAUo/B,EAAS55C,GAMzC,GALyB,IAArBw6C,UAAU3/C,QAAqC,WAArBi9C,EAAQ8B,KACpC55C,EAAU45C,EACVA,EAAU,OAGP55C,EAAQkZ,KACX,MAAM,IAAIxJ,MAAM,uCAElB,KAAM1P,EAAQkZ,gBAAgBN,KAAYsgC,EAAcl5C,EAAQkZ,MAC9D,MAAM,IAAIxJ,MAAM,gDAElB,KAAM1P,EAAQkZ,gBAAgBN,KAAYghC,EACxC,MAAM,IAAIlqC,MACV,8DAIF,OAAOhV,KAAKu/C,cAAc,OAAQL,EAAS55C,IAG7C4Y,EAAOpb,UAAUi9C,UAAY,SAAUA,GACrC,OAAQA,EAAU5jB,eAChB,IAAK,SACHn8B,KAAK+uB,OAAS,KACd,MACF,IAAK,MACH/uB,KAAK+uB,OAAS,KACd,MACF,QACE,MAAM,IAAI/Z,MAAM,sBAAsBzH,OAAOwyC,IAGjD,OAAO//C,MAGTke,EAAOpb,UAAU49B,OAAS,SAAU2e,GAClC,KAAMA,aAAyBW,UAC7B,MAAM,IAAIhrC,MAAM,0CAKlB,OAFAhV,KAAKq/C,cAAgBA,EAEdr/C,MAGTke,EAAOpb,UAAUm9C,QAAU,WACzB,IAAI/d,EAAM,IAAIob,EAkBd,OAhBApb,EAAIge,SAAS,mCACbhe,EAAIie,cAAc,4CAClBje,EAAIge,SAAS,KAERlgD,KAAKs/C,MAGRt/C,KAAKogD,eAAele,GAFpBliC,KAAKqgD,WAAWne,GAKdliC,KAAKs/C,MACPpd,EAAIge,SAAS,gBAAiBzB,EAAkBz+C,KAAKs/C,OAErDpd,EAAIge,SAAS,4CAGRhe,EAAI3vB,MAGb2L,EAAOpb,UAAUu9C,WAAa,SAAUne,GACtCA,EAAIge,SAAS,mBAETlgD,KAAKq/C,cACPnd,EAAIge,SAAS,mCAEbhe,EAAIge,SAAS,kBAGflgD,KAAKsgD,SAASpe,GAEdliC,KAAKugD,kBAAkBre,GAEvBA,EAAIge,SAAS,6CAGfhiC,EAAOpb,UAAUs9C,eAAiB,SAAUle,GAiB1C,OAhBAA,EAAIge,SAAS,yBAA0BzB,EAAkBz+C,KAAKs/C,OAE1Dt/C,KAAKq/C,cACPnd,EAAIge,SAAS,mCAEbhe,EAAIge,SAAS,kBAGflgD,KAAKsgD,SAASpe,GAEdA,EAAIse,aAAaxgD,KAAKs/C,OACtBt/C,KAAKugD,kBAAkBre,GAEvBA,EAAIge,SAAS,4CACbhe,EAAIge,SAAS,KAENhe,GAGThkB,EAAOpb,UAAUy9C,kBAAoB,SAAUre,GAC7C,IAAIue,EAAave,EAAIwe,0BACrBxe,EAAIye,cAAcF,GAClBA,EAAW3lC,SAAQ,SAAUwkC,GACdd,EAAcc,GACpBc,eAAele,OAI1BhkB,EAAOpb,UAAU89C,QAAU,WACzB,IAAIn3C,EAAM,4CAA4C8D,OAAOvN,KAAKigD,UAAW,OAC7EjgD,KAAKo/C,SAAW/B,EAAGwD,iBAAiBp3C,IAGtCyU,EAAOpb,UAAUg+C,OAAS,WACxB,IAAI/gD,EAAOghD,IAEX,GAAI3/B,OAAO9a,KAAKi3C,GAAiBjtB,QAAQtwB,KAAKwe,OAAS,EACrDze,EAAOw9C,EAAgBv9C,KAAKwe,WAGvB,GACO,WAAdxe,KAAKwe,MAC0B,kBAAxBxe,KAAKsF,QAAQnF,OAElBJ,EAAOC,KAAKsF,QAAQnF,YAGf,GACO,WAAdH,KAAKwe,MAC0B,kBAAxBxe,KAAKsF,QAAQnF,OAElBJ,EAAOC,KAAKsF,QAAQnF,YAGf,GAAkB,UAAdH,KAAKwe,MAAmD,kBAAxBxe,KAAKsF,QAAQnF,OAAqB,CAC3E,IAAI6gD,EAAcD,IACe,kBAAtB/gD,KAAKsF,QAAQkZ,KACtBwiC,EAAczD,EAAgBoB,EAAS3+C,KAAKsF,QAAQkZ,OAC3Cxe,KAAKsF,QAAQkZ,gBAAgBN,IACtC8iC,EAAchhD,KAAKsF,QAAQkZ,KAAKsiC,UAElC/gD,EAAOC,KAAKsF,QAAQnF,OAAS6gD,MAGN,SAAdhhD,KAAKwe,KACdze,EAAOC,KAAKsF,QAAQnF,OAGG,SAAdH,KAAKwe,KACdze,EAAOC,KAAKsF,QAAQkZ,KAAKsiC,SACf9gD,KAAKwe,OACfze,EAAO,GAOT,OAJIC,KAAKu8B,OACPx8B,GAAQC,KAAKu8B,KAAKukB,UAGb/gD,GAITme,EAAOpb,UAAUP,MAAQ,SAAUV,GAKjC,OAJK7B,KAAKo/C,UACRp/C,KAAK4gD,UAGA5gD,KAAKo/C,SAASv9C,EAAQ7B,KAAKq/C,cAAevpB,IAOnD5X,EAAOpb,UAAUy8C,cAAgB,SAAU/gC,EAAM0gC,EAAS55C,GACxD,IAAIlD,EAAS,IAAI8b,EAcjB,OAZA9b,EAAOoc,KAAOmgC,EAASngC,GACvBpc,EAAO88C,QAAUA,EACjB98C,EAAOkD,QAAUA,GAAWlD,EAAOkD,QACnClD,EAAO2sB,OAAS/uB,KAAK+uB,OAEjB/uB,KAAKm/C,KACPn/C,KAAKm/C,KAAK5iB,KAAOn6B,EAEjBpC,KAAKu8B,KAAOn6B,EAEdpC,KAAKm/C,KAAO/8C,EAELpC,MAITke,EAAOpb,UAAUw9C,SAAW,SAAUpe,GAChCliC,KAAKwe,OACPxe,KAAK,WAAWuN,OAAOvN,KAAKwe,OAAO0jB,GACnCliC,KAAKihD,eAAe/e,IAGtB,IAAIgd,EAAUhd,EAAIgf,iBAAiBlhD,KAAKk/C,SAKxC,OAJIl/C,KAAKsF,QAAQiZ,WACfve,KAAKmhD,kBAAkBjf,EAAKgd,EAASl/C,KAAKsF,QAAQiZ,WAG7Cve,KAAKohD,aAAalf,IAG3BhkB,EAAOpb,UAAUm+C,eAAiB,SAAU/e,GAC1C,GAAKliC,KAAKsF,QAAQ6W,OAAlB,CAIA,IAAI+iC,EAAUhd,EAAIgf,iBAAiBlhD,KAAKk/C,SAExC,OAAQ9B,EAAQp9C,KAAKsF,QAAQ6W,SAC3B,IAAK,WACH+lB,EAAIge,SACJ,gCACAlgD,KAAKsF,QAAQ6W,OACb+iC,GAEA,MACF,IAAK,SACHhd,EAAIge,SAAS,qBAAsBlgD,KAAKsF,QAAQ6W,OAAQ+iC,GACxD,MACF,IAAK,SACHhd,EAAIge,SAAS,uBAAwBlgD,KAAKsF,QAAQ6W,OAAQ+iC,GAC1D,MACF,QACE,MAAM,IAAIlqC,MACV,sEAGJktB,EAAIie,cAAc,gCAAiCjB,GACnDhd,EAAIge,SAAS,OAIfhiC,EAAOpb,UAAUs+C,aAAe,SAAUlf,GAKxC,OAJIliC,KAAKu8B,OACP2F,EAAMliC,KAAKu8B,KAAK+jB,SAASpe,IAGpBA,GAGT9gB,OAAO9a,KAAKi3C,GAAiBziC,SAAQ,SAAU0D,GAC7CN,EAAOpb,UAAU,WAAWyK,OAAOiR,IAAS,SAAU0jB,GACvC,WAAT1jB,EACF0jB,EAAIge,SACJ,8FACAhe,EAAIgf,iBAAiBlhD,KAAKk/C,SAC1B1gC,GAEkB,UAATA,EACT0jB,EAAIge,SACJ,+FACAhe,EAAIgf,iBAAiBlhD,KAAKk/C,SAC1B1gC,GAGA0jB,EAAIge,SACJ,gCACAhe,EAAIgf,iBAAiBlhD,KAAKk/C,SAC1B1gC,GAGF0jB,EAAIge,SAAS,iBAAkB3C,EAAgB/+B,QAInDN,EAAOpb,UAAUu+C,YAAc,SAAUnf,GAEvC,IAAI9/B,EAAS08B,KAAKv8B,MAAMu8B,KAAKwiB,UAAUthD,OAIvC,GAHAoC,EAAO88C,QAAUhd,EAAIgf,iBAAiB9+C,EAAO88C,SAC7Chd,EAAIqf,UAAUptC,KAAK/R,IAGlBpC,KAAKu8B,MACNv8B,KAAKu8B,MAAQ,CAAC,MAAO,QAAQjM,QAAQtwB,KAAKu8B,KAAK/d,MAAQ,EACvD,CACE,IAAIgjC,EAAM,EACVtf,EAAIqf,UAAUzmC,SAAQ,SAAUiL,GAC9By7B,GAAOz7B,EAAEzgB,QAAQnF,UAGnB,IAAIyb,EAAMsmB,EAAIuf,sBAEd,GAAID,GAAO,EACTtf,EAAIge,SAAS,sCAAuCtkC,GACpD4lC,EAAM,OACD,GAAIA,GAAO,GAChBtf,EAAIge,SAAS,yCAA0CtkC,GACvD4lC,EAAM,QACD,GAAIA,GAAO,GAAI,CACpB,IAAIE,EAAOxf,EAAIuf,sBACXE,EAAOzf,EAAIuf,sBACfvf,EAAIge,SAAS,yCAA0CwB,GACvDxf,EAAIge,SAAS,0CAA2CyB,GACxDzf,EAAIge,SAAS,8BAA+BwB,EAAMC,EAAM/lC,GACxD4lC,EAAM,OACD,MAAIA,GAAO,IAIhB,MAAM,IAAIxsC,MACV,uEAJAktB,EAAIge,SAAS,yCAA0CtkC,GACvD4lC,EAAM,GAMRtf,EAAIge,SAAS,iBAAkBsB,EAAM,GAErC,IAAII,EAAY,EACZC,EAA8B,OAAhB7hD,KAAK+uB,OACvBmT,EAAIqf,UAAUzmC,SAAQ,SAAUiL,GAC9Bmc,EAAIge,SACJ,0BACAn6B,EAAEm5B,QACFtjC,EACAimC,EAAcL,EAAMI,EAAY77B,EAAEzgB,QAAQnF,OAASyhD,GAClD,GAAK77B,EAAEzgB,QAAQnF,QAAU,GAE1ByhD,GAAa77B,EAAEzgB,QAAQnF,UAGzB+hC,EAAIqf,UAAY,KAIpBrjC,EAAOpb,UAAUg/C,aAAe,SAAU5f,GACxC,IAAI/hC,EAAS+hC,EAAI6f,eAAe/hD,KAAKsF,QAAQnF,QAC7C+hC,EAAIge,SAAS,iBAAkB//C,IAGjC+d,EAAOpb,UAAUk/C,eAAiB,SAAU9f,GAC1C,IAAIxW,EAAOwW,EAAIgf,iBAAiBlhD,KAAKk/C,SACjC96C,EAAQ89B,EAAIuf,sBAEZzhD,KAAKsF,QAAQnF,QAAUH,KAAKsF,QAAQo6C,gBACtCxd,EAAIge,SAAS,oBAAqB97C,GAClC89B,EAAIge,SACJ,kEACA97C,EACApE,KAAKsF,QAAQnF,QAEb+hC,EAAIge,SACJ,+EACAx0B,EACA1rB,KAAKsF,QAAQyoB,SACb3pB,EACApE,KAAKsF,QAAQnF,SAEJH,KAAKsF,QAAQnF,QACtB+hC,EAAIge,SACJ,sDACAx0B,EACA1rB,KAAKsF,QAAQyoB,SACbmU,EAAI6f,eAAe/hD,KAAKsF,QAAQnF,SAEhC+hC,EAAIge,SAAS,iBAAkBhe,EAAI6f,eAAe/hD,KAAKsF,QAAQnF,UACtDH,KAAKsF,QAAQo6C,gBACtBxd,EAAIge,SAAS,oBAAqB97C,GAClC89B,EAAIge,SAAS,4CACbhe,EAAIge,SACJ,iDACAx0B,EACA1rB,KAAKsF,QAAQyoB,SACb3pB,IAESpE,KAAKsF,QAAQq6C,SACtBzd,EAAIge,SAAS,oBAAqB97C,GAClC89B,EAAIge,SAAS,oCACbhe,EAAIge,SACJ,6CACAx0B,EACA1rB,KAAKsF,QAAQyoB,SACb3pB,IAGEpE,KAAKsF,QAAQgZ,WACf4jB,EAAIge,SAAS,oCAAqCx0B,IAItDxN,EAAOpb,UAAUm/C,eAAiB,SAAU/f,GACX,QAA3BliC,KAAKsF,QAAQs6C,UACf1d,EAAIge,SACJ,8BACAhe,EAAIgf,iBAAiBlhD,KAAKk/C,WAG1Bhd,EAAIge,SACJ,4CACAhe,EAAIgf,iBAAiBlhD,KAAKk/C,SAC1Bhd,EAAI6f,eAAe/hD,KAAKsF,QAAQnF,SAEhC+hC,EAAIge,SAAS,iBAAkBhe,EAAI6f,eAAe/hD,KAAKsF,QAAQnF,UAG7DH,KAAKsF,QAAQ86B,OACf8B,EAAIge,SAAS,0BAA2Bhe,EAAIgf,iBAAiBlhD,KAAKk/C,WAItEhhC,EAAOpb,UAAUo/C,cAAgB,SAAUhgB,GACzC,IAAI/hC,EAAS+hC,EAAI6f,eAAe/hD,KAAKsF,QAAQnF,QACzC0/C,EAAgB3d,EAAI6f,eAAe/hD,KAAKsF,QAAQu6C,eAChDrhC,EAAOxe,KAAKsF,QAAQkZ,KACpB2jC,EAAUjgB,EAAIuf,sBACdW,EAAMlgB,EAAIgf,iBAAiBlhD,KAAKk/C,SAChC94C,EAAO87B,EAAIuf,sBACX77C,EAAM5F,KAAKsF,QAAQM,IACnBy8C,EAAwB,kBAARz8C,EAqBpB,GAnBIy8C,EACFngB,EAAIge,SAAS,YAAakC,GAE1BlgB,EAAIge,SAAS,YAAakC,GAEU,oBAA3BpiD,KAAKsF,QAAQs6C,UACtB1d,EAAIge,SAAS,QACuB,QAA3BlgD,KAAKsF,QAAQs6C,UACtB1d,EAAIge,SAAS,qDAAsDiC,QACxCv+C,IAAlBi8C,EACT3d,EAAIge,SACJ,iDACAiC,EACAtC,GAGA3d,EAAIge,SAAS,wCAAyCiC,EAAShiD,GAG7C,kBAATqe,EACT,GAAKggC,EAAchgC,GAGZ,CACL,IAAI8jC,EAAUpgB,EAAIuf,sBAClBvf,EAAIge,SAAS,yBAA0BoC,EAAS7D,EAAkBjgC,GAClE0jB,EAAIge,SAAS,6CAA8C95C,EAAMk8C,GAC7D9jC,IAASxe,KAAKs/C,OAAOpd,EAAIqgB,aAAa/jC,QAN1C0jB,EAAIge,SAAS,oCAAqC95C,EAAMu4C,EAASngC,IACjE0jB,EAAIge,SAAS,iBAAkB3C,EAAgBoB,EAASngC,UAOjDA,aAAgBN,IACzBgkB,EAAIge,SAAS,gBAAiB95C,GAE9B87B,EAAIsgB,UAAUp8C,GACdoY,EAAK8hC,SAASpe,GACdA,EAAIugB,YAGFJ,EACFngB,EAAIge,SAAS,sBAAuBkC,EAAKx8C,EAAKQ,GAE9C87B,EAAIge,SAAS,iBAAkBkC,EAAKh8C,GAGtC87B,EAAIge,SAAS,KAEyB,oBAA3BlgD,KAAKsF,QAAQs6C,WACtB1d,EAAIge,SACJ,yDACAlgD,KAAKsF,QAAQs6C,UACbx5C,IAKJ8X,EAAOpb,UAAU4/C,mBAAqB,SAAUxgB,EAAKgd,EAAS1gC,GAC5D,GAAoB,kBAATA,EACT,GAAKggC,EAAchgC,GAOZ,CACL,IAAI8jC,EAAUpgB,EAAIuf,sBAClBvf,EAAIge,SAAS,yBAA0BoC,EAAS7D,EAAkBjgC,GAClE0jB,EAAIge,SACJ,yCACAhe,EAAIgf,iBAAiBlhD,KAAKk/C,SAC1BoD,GAEI9jC,IAASxe,KAAKs/C,OAAOpd,EAAIqgB,aAAa/jC,QAd1C0jB,EAAIge,SACJ,gCACAhe,EAAIgf,iBAAiBlhD,KAAKk/C,SAC1BP,EAASngC,IAET0jB,EAAIge,SAAS,iBAAkB3C,EAAgBoB,EAASngC,UAWjDA,aAAgBN,IACzBgkB,EAAIygB,SAASzD,GACb1gC,EAAK8hC,SAASpe,GACdA,EAAI0gB,QAAQ1D,KAIhBhhC,EAAOpb,UAAU+/C,eAAiB,SAAU3gB,GAC1C,IAAI9iB,EAAM8iB,EAAI6f,eAAe/hD,KAAKsF,QAAQ8Z,KACtCpf,KAAKk/C,SACPhd,EAAIge,SAAS,YAAahe,EAAIgf,iBAAiBlhD,KAAKk/C,UAEtDhd,EAAIge,SAAS,gBAAiB9gC,GAC9BgC,OAAO9a,KAAKtG,KAAKsF,QAAQ+Z,SAASvE,SAAQ,SAAUgI,GAClD,IAAItE,EAAOxe,KAAKsF,QAAQ+Z,QAAQyD,GAC5B4M,OAAO6J,MAAMvjB,SAAS8M,EAAG,KAC3Bof,EAAIge,SAAS,cAAep9B,GAE5Bof,EAAIge,SAAS,YAAap9B,GAE5B9iB,KAAK0iD,mBAAmBxgB,EAAKliC,KAAKk/C,QAAS1gC,GAC3C0jB,EAAIge,SAAS,YACZlgD,MACHkiC,EAAIge,SAAS,YACTlgD,KAAKsF,QAAQw9C,cACf9iD,KAAK0iD,mBAAmBxgB,EAAKliC,KAAKk/C,QAASl/C,KAAKsF,QAAQw9C,eAExD5gB,EAAIie,cAAc,kDAAmD/gC,GAEvE8iB,EAAIge,SAAS,MAGfhiC,EAAOpb,UAAUigD,aAAe,SAAU7gB,GACxC,IAAI8gB,EAAU9gB,EAAIgf,iBAAiBlhD,KAAKk/C,SAExC,GAAIl/C,KAAKsF,QAAQkZ,gBAAgBN,EAC3Ble,KAAKk/C,SACPhd,EAAIge,SAAS,YAAa8C,GAE5B9gB,EAAIygB,SAAS3iD,KAAKk/C,SAClBl/C,KAAKsF,QAAQkZ,KAAK8hC,SAASpe,GAC3BA,EAAI0gB,QAAQ5iD,KAAKk/C,cACZ,GAAIV,EAAcx+C,KAAKsF,QAAQkZ,MAAO,CAC3C,IAAI8jC,EAAUpgB,EAAIuf,sBAClBvf,EAAIge,SACJ,yBACAoC,EACA7D,EAAkBz+C,KAAKsF,QAAQkZ,MAE/B0jB,EAAIge,SAAS,yCAA0C8C,EAASV,GAC5DtiD,KAAKsF,QAAQkZ,OAASxe,KAAKs/C,OAAOpd,EAAIqgB,aAAaviD,KAAKsF,QAAQkZ,QAIxEN,EAAOpb,UAAUq+C,kBAAoB,SAAUjf,EAAKgd,EAAS3gC,GAClC,oBAAdA,GACT2jB,EAAIge,SAAS,+BAAgChB,EAAS3gC,IAI1DL,EAAOpb,UAAUmgD,UAAY,WAC3B,QAASjjD,KAAKwe,KAAKoN,MAAM,kCAK3B1N,EAAOpb,UAAUqb,KAAO,SAAU+gC,EAAS55C,GACzC,OAAOtF,KAAKu/C,cAAc,OAAQL,EAAS55C,IAE7C4Y,EAAOpb,UAAUqb,KAAO,SAAU+gC,EAAS55C,GACzC,OAAOtF,KAAKu/C,cAAc,OAAQL,EAAS55C,IAG7C4Y,EAAOpb,UAAUogD,aAAe,SAAUhhB,GACxC,IAAIxW,EAAOwW,EAAIgf,iBAAiBlhD,KAAKk/C,SACjCj9C,EAAaigC,EAAIuf,sBACrBvf,EAAIge,SAAS,aAAa3yC,OAC1BtL,EAAY,gCAAgCsL,OAC5CtL,EAAY,sBAAsBsL,OAClCme,EAAM,OAAOne,OAAOtL,EAAY,0CAA0CsL,OAE1EtL,EAAY,sBAAsBsL,OAClCme,EAAM,SAASne,OAAOtL,EAAY,2EAA2EsL,OAE7GtL,EAAY,sBAAsBsL,OAClCme,EAAM,SAASne,OAAOtL,EAAY,wGAAwGsL,OAE1ItL,EAAY,sBAAsBsL,OAClCme,EAAM,SAASne,OAAOtL,EAAY,qIAAqIsL,OAGvKme,EAAM,SAASne,OAAOtL,EAAY,sUAQpCic,EAAOpb,UAAUwd,KAAO,SAAU4+B,EAAS55C,GACzC,OAAOtF,KAAKu/C,cAAc,OAAQL,EAAS55C,IAG7C4Y,EAAOpb,UAAUqgD,aAAe,SAAUjhB,GACxC,IAAIxW,EAAOwW,EAAIgf,iBAAiBlhD,KAAKk/C,SACjCj9C,EAAaigC,EAAIuf,sBACrBvf,EAAIge,SAAS,WAAW3yC,OACxBtL,EAAY,8BAA8BsL,OAC1CtL,EAAY,oBAAoBsL,OAChCme,EAAM,OAAOne,OAAOtL,EAAY,sCAAsCsL,OAEtEtL,EAAY,oBAAoBsL,OAChCme,EAAM,0FAA0Fne,OAEhGtL,EAAY,oBAAoBsL,OAChCme,EAAM,0FAA0Fne,OAChGme,EAAM,UAAUne,OAAOtL,EAAY,sFAAsFsL,OAEzHtL,EAAY,oBAAoBsL,OAChCme,EAAM,gJAAgJne,OAEtJtL,EAAY,oBAAoBsL,OAChCme,EAAM,yQAAyQne,OAI/QtL,EAAY,oBAAoBsL,OAChCme,EAAM,8MAA8Mne,OAGpNtL,EAAY,oBAAoBsL,OAChCme,EAAM,oOAAoOne,OAG1OtL,EAAY,oBAAoBsL,OAChCme,EAAM,mEAAmEne,OACzEme,EAAM,6CAA6Cne,OAAOme,EAAM,wFAAwFne,OAExJme,EAAM,OAAOne,OAAOme,EAAM,mDAAmDne,OAG7Eme,EAAM,mEAAmEne,OACzEme,EAAM,6CAA6Cne,OAAOme,EAAM,wFAAwFne,OAExJme,EAAM,OAAOne,OAAOme,EAAM,4CAU5B9rB,EAAQse,OAASA,G,kBCl1BjBve,EAAOC,QAAQihD,iBALf,SAA0BtuC,GAExB,OADW,IAAIytC,SAAS,OAAQ,sBACtB/8C,KAAKmgD,WAAY7wC,K,iCCHhB,SAAS6qC,EAAQ5sB,GAA8S,OAA9N4sB,EAApD,oBAAX54C,QAAoD,kBAApBA,OAAO+B,SAAkC,SAAiBiqB,GAAM,cAAcA,GAAwB,SAAiBA,GAAM,OAAOA,GAAyB,oBAAXhsB,QAAyBgsB,EAAI1C,cAAgBtpB,QAAUgsB,IAAQhsB,OAAO1B,UAAY,gBAAkB0tB,GAAc4sB,EAAQ5sB,GAQ3V,IAAI8sB,EAAU,WACZt9C,KAAKuS,KAAO,GACZvS,KAAKqjD,OAAS,CAAC,CAAC,SAChBrjD,KAAKsjD,SAAU,EACftjD,KAAKuhD,UAAY,GACjBvhD,KAAKujD,iBAAmB,EACxBvjD,KAAKygD,WAAa,IAOpBnD,EAAQx6C,UAAUo+C,iBAAmB,SAAUx1B,GAC7C,IAAI83B,EAAM,GAKV,IAHAx/C,MAAMlB,UAAUqR,KAAKsvC,MAAMD,EAAKxjD,KAAKqjD,OAAOrjD,KAAKqjD,OAAOljD,OAAS,IAG1D,cAAc+7B,KAAKxQ,IACxB83B,EAAIE,MACJh4B,EAAOA,EAAKjoB,QAAQ,cAAe,IAOrC,OAJIioB,GACF83B,EAAIrvC,KAAKuX,GAGJ83B,EAAIpvC,KAAK,MAGlBkpC,EAAQx6C,UAAUi/C,eAAiB,SAAUnmC,GAC3C,OAAQwhC,EAAQxhC,IACd,IAAK,SACH,OAAOA,EAAI/D,WACb,IAAK,SACH,OAAO7X,KAAKkhD,iBAAiBtlC,GAC/B,IAAK,WACH,MAAO,IAAIrO,OAAOqO,EAAK,WAAWrO,OAAOvN,KAAKkhD,mBAAoB,WACpE,QACE,SAIN5D,EAAQx6C,UAAUq9C,cAAgB,WAChC,IAAI/pC,EAAOpS,MAAMlB,UAAUvC,MAAM0C,KAAK68C,WAClCtf,EAAM8c,EAAQqG,YAAYF,MAAMzjD,KAAMoW,GAEtCpW,KAAKsjD,QACPtjD,KAAKkgD,SAAS,2DAA2D3yC,OACzEizB,EAAK,kBAGLxgC,KAAKkgD,SAAS,mBAAmB3yC,OAAOizB,EAAK,QAIjD8c,EAAQx6C,UAAU2+C,oBAAsB,WACtC,MAAO,OAAOl0C,OAAOvN,KAAKujD,qBAG5BjG,EAAQx6C,UAAUo9C,SAAW,WAC3B,IAAI9pC,EAAOpS,MAAMlB,UAAUvC,MAAM0C,KAAK68C,WAEtC9/C,KAAKuS,MAAQ,GAAGhF,OAAO+vC,EAAQqG,YAAYF,MAAMzjD,KAAMoW,GAAO,OAGhEknC,EAAQx6C,UAAU6/C,SAAW,SAAUj3B,GACjCA,GACF1rB,KAAKqjD,OAAOrjD,KAAKqjD,OAAOljD,OAAS,GAAGgU,KAAKuX,IAI7C4xB,EAAQx6C,UAAU8/C,QAAU,SAAUl3B,GAChCA,GACF1rB,KAAKqjD,OAAOrjD,KAAKqjD,OAAOljD,OAAS,GAAGujD,OAIxCpG,EAAQx6C,UAAU0/C,UAAY,SAAU92B,GACtC1rB,KAAKqjD,OAAOlvC,KAAK,CAACuX,KAGpB4xB,EAAQx6C,UAAU2/C,SAAW,WAC3BziD,KAAKqjD,OAAOK,OAGdpG,EAAQx6C,UAAUy/C,aAAe,SAAUjD,GACrCt/C,KAAKygD,WAAWnB,KACpBt/C,KAAKygD,WAAWnB,GAAS,CAAEsE,UAAU,EAAOC,WAAW,KAGzDvG,EAAQx6C,UAAU09C,aAAe,SAAUlB,GACzCt/C,KAAKygD,WAAWnB,GAAOsE,UAAW,GAGpCtG,EAAQx6C,UAAU69C,cAAgB,SAAUmD,GAC1CA,EAAUhpC,QACV,SAAUwkC,GACRt/C,KAAKygD,WAAWnB,GAAOuE,WAAY,GACnCvW,KAAKttC,QAITs9C,EAAQx6C,UAAU49C,wBAA0B,WAC1C,IAAID,EAAazgD,KAAKygD,WACtB,OAAOr/B,OAAO9a,KAAKtG,KAAKygD,YAAY1rB,QAAO,SAAUuqB,GACnD,OAAQmB,EAAWnB,GAAOsE,WAAanD,EAAWnB,GAAOuE,cAQ7DvG,EAAQqG,YAAc,SAAU7iD,GAC9B,IAAIijD,EAAK,SACLC,EAAUljD,EAAE8qB,MAAMm4B,GAClB5+B,EAASnhB,MAAMlB,UAAUvC,MAAM0C,KAAK68C,UAAW,GASnD,OAPIkE,GACFA,EAAQlpC,SAAQ,SAAU8Q,GACxB,IAAIpJ,EAAQxM,SAAS4V,EAAM7M,OAAO,EAAG6M,EAAMzrB,OAAS,GAAI,IACxDW,EAAIA,EAAE2C,QAAQmoB,EAAOzG,EAAO3C,GAAO3K,eAIhC/W,GAGTlB,EAAQ09C,QAAUA","file":"8.aa3f117980c15500c977.worker.js","sourcesContent":["/*\n * Copyright (c) 2019 Genome Research Ltd.\n * Author(s): James Bonfield\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice,\n *       this list of conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above\n *       copyright notice, this list of conditions and the following\n *       disclaimer in the documentation and/or other materials provided\n *       with the distribution.\n *\n *    3. Neither the names Genome Research Ltd and Wellcome Trust Sanger\n *       Institute nor the names of its contributors may be used to endorse\n *       or promote products derived from this software without specific\n *       prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY GENOME RESEARCH LTD AND CONTRIBUTORS \"AS\n * IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GENOME RESEARCH\n * LTD OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n// Turn a buffer into a fake stream with get / put commands.\n// This enables up to closely match the published pseudocode.\nmodule.exports = class IOStream {\n    constructor(buf, start_pos = 0, size = 0) {\n\tif (size != 0) {\n\t    this.buf = Buffer.allocUnsafe(size)\n\t    this.length = size\n\t} else {\n\t    this.buf = buf\n\t    this.length = buf.length\n\t}\n\tthis.pos = start_pos\n    }\n\n    // ----------\n    // Reading\n    EOF() {\n\treturn this.pos >= this.length\n    }\n\n    ReadData(len) {\n\tvar A = this.buf.slice(this.pos, this.pos+len)\n\tthis.pos += len;\n\treturn A\n    }\n\n    ReadByte() {\n\tconst b = this.buf[this.pos]\n\tthis.pos++\n\treturn b\n    }\n\n    ReadChar() {\n\tconst b = this.buf[this.pos]\n\tthis.pos++\n\treturn String.fromCharCode(b)\n    }\n\n    ReadUint16() {\n\tvar i = this.ReadByte()\n\ti |= this.ReadByte()<<8\n\treturn i\n    }\n\n    ReadUint32() {\n\tconst i = this.buf.readInt32LE(this.pos)\n\tthis.pos += 4\n\treturn i\n    }\n\n    // nul terminated string\n    ReadString() {\n\tvar s = \"\"\n\tdo {\n\t    var b = this.buf[this.pos++]\n\t    if (b)\n\t\ts += String.fromCharCode(b)\n\t} while (b)\n\treturn s\n    }\n\n//    ReadUint7() {\n//\t// Variable sized unsigned integers\n//\tvar i = 0;\n//\tvar s = 0;\n//\tdo {\n//\t    var c = this.ReadByte();\n//\t    i = i | ((c & 0x7f)<<s);\n//\t    s += 7;\n//\t} while ((c & 0x80))\n//\n//\treturn i;\n//    }\n\n    ReadUint7() {\n\t// Variable sized unsigned integers\n\tvar i = 0;\n\tdo {\n\t    var c = this.ReadByte();\n\t    i = (i<<7) | (c & 0x7f)\n\t} while ((c & 0x80))\n\n\treturn i;\n    }\n\n    ReadITF8() {\n\tvar i = this.buf[this.pos];\n\tthis.pos++;\n\n\t//process.stderr.write(\"i=\"+i+\"\\n\");\n\n\tif (i >= 0xf0) {\n\t    // 1111xxxx => +4 bytes\n\t    i = (i & 0x0f) << 28;\n\t    i += (this.buf[this.pos+0] << 20)\n\t      +  (this.buf[this.pos+1] << 12)\n\t      +  (this.buf[this.pos+2] <<  4)\n\t      +  (this.buf[this.pos+3] >>  4);\n\t    this.pos += 4;\n\t    //process.stderr.write(\"  4i=\"+i+\"\\n\");\n\t} else if (i >= 0xe0) {\n\t    // 1110xxxx => +3 bytes\n\t    i = (i & 0x0f) << 24;\n\t    i += (this.buf[this.pos+0] << 16)\n\t      +  (this.buf[this.pos+1] <<  8)\n\t      +  (this.buf[this.pos+2] <<  0);\n\t    this.pos += 3;\n\t    //process.stderr.write(\"  3i=\"+i+\"\\n\");\n\t} else if (i >= 0xc0) {\n\t    // 110xxxxx => +2 bytes\n\t    i = (i & 0x1f) << 16;\n\t    i += (this.buf[this.pos+0] << 8)\n\t      +  (this.buf[this.pos+1] << 0);\n\t    this.pos += 2;\n\t    //process.stderr.write(\"  2i=\"+i+\"\\n\");\n\t} else if (i >= 0x80) {\n\t    // 10xxxxxx => +1 bytes\n\t    i = (i & 0x3f) << 8;\n\t    i += this.buf[this.pos];\n\t    this.pos++;;\n\t    //process.stderr.write(\"  1i=\"+i+\"\\n\");\n\t} else {\n\t    // 0xxxxxxx => +0 bytes\n\t}\n\n\treturn i;\n    }\n\n    // ----------\n    // Writing\n    WriteByte(b) {\n\tthis.buf[this.pos++] = b\n    }\n\n    WriteChar(b) {\n\tthis.buf[this.pos++] = b.charCodeAt(0)\n    }\n\n    WriteString(str) {\n\tfor (var i = 0; i < str.length; i++)\n\t    this.buf[this.pos++] = str.charCodeAt(i)\n\tthis.buf[this.pos++] = 0\n    }\n\n    WriteData(buf, len) {\n\tfor (var i = 0; i < len; i++)\n\t    this.buf[this.pos++] = buf[i]\n    }\n\n    WriteStream(stream) {\n\tthis.WriteData(stream.buf, stream.pos)\n    }\n\n    WriteUint16(u) {\n\t//this.buf.writeInt16LE(u, this.pos);\n\tthis.WriteByte(u&0xff)\n\tthis.WriteByte((u>>8)&0xff)\n    }\n\n    WriteUint32(u) {\n\tthis.buf.writeInt32LE(u, this.pos);\n\tthis.pos += 4;\n    }\n\n//    WriteUint7(i) {\n//\tdo {\n//\t    this.WriteByte((i & 0x7f) | ((i > 0x80) << 7));\n//\t    i >>= 7;\n//\t} while (i > 0);\n//    }\n\n    WriteUint7(i) {\n\tvar s = 0;\n\tvar X = i;\n\tdo {\n\t    s += 7;\n\t    X >>= 7;\n\t} while (X > 0);\n\n\tdo {\n\t    s -= 7;\n\t    this.WriteByte(((i >> s) & 0x7f) + ((s > 0) << 7))\n\t} while (s > 0);\n    }\n\n    WriteITF8(i) {\n\t// Horrid, ITF8 is unsigned, but we still write signed into it\n\tif (i < 0)\n\t    i = (1<<32) + i\n\n\tif (i <= 0x0000007f) {\n\t    // 1 byte\n\t    this.buf[this.pos++] = i\n\t} else if (i <= 0x00003fff) {\n\t    // 2 bytes\n\t    this.buf[this.pos++] = 0x80 | Math.floor(i / 256)\n\t    this.buf[this.pos++] = i & 0xff;\n\t} else if (i < 0x0001ffff) {\n\t    // 3 bytes\n\t    this.buf[this.pos++] = 0xc0 | Math.floor(i / 65536)\n\t    this.buf[this.pos++] = Math.floor(i / 256) & 0xff\n\t    this.buf[this.pos++] = i & 0xff;\n\t} else if (i < 0x0fffffff) {\n\t    // 4 bytes\n\t    this.buf[this.pos++] = 0xe0 | Math.floor(i / 16777216)\n\t    this.buf[this.pos++] = Math.floor(i / 65536) & 0xff\n\t    this.buf[this.pos++] = Math.floor(i /   256) & 0xff\n\t    this.buf[this.pos++] = i & 0xff;\n\t} else {\n\t    // 5 bytes; oddly using 4.5 bytes\n\t    this.buf[this.pos++] = 0xf0 | Math.floor(i / 268435456)\n\t    this.buf[this.pos++] = Math.floor(i / 1048576) & 0xff\n\t    this.buf[this.pos++] = Math.floor(i /    4096) & 0xff\n\t    this.buf[this.pos++] = Math.floor(i /       4) & 0xff\n\t    this.buf[this.pos++] = i & 0x0f;\n\t}\n    }\n\n    // ----------\n    // Writing from end of buffer going backwards.\n    // Needed by rANS codec.\n    WriteByteNeg(b) {\n\tthis.buf[--this.pos] = b;\n    }\n};\n",null,null,null,"'use strict';\n\nclass QuickLRU {\n\tconstructor(options = {}) {\n\t\tif (!(options.maxSize && options.maxSize > 0)) {\n\t\t\tthrow new TypeError('`maxSize` must be a number greater than 0');\n\t\t}\n\n\t\tthis.maxSize = options.maxSize;\n\t\tthis.cache = new Map();\n\t\tthis.oldCache = new Map();\n\t\tthis._size = 0;\n\t}\n\n\t_set(key, value) {\n\t\tthis.cache.set(key, value);\n\t\tthis._size++;\n\n\t\tif (this._size >= this.maxSize) {\n\t\t\tthis._size = 0;\n\t\t\tthis.oldCache = this.cache;\n\t\t\tthis.cache = new Map();\n\t\t}\n\t}\n\n\tget(key) {\n\t\tif (this.cache.has(key)) {\n\t\t\treturn this.cache.get(key);\n\t\t}\n\n\t\tif (this.oldCache.has(key)) {\n\t\t\tconst value = this.oldCache.get(key);\n\t\t\tthis._set(key, value);\n\t\t\treturn value;\n\t\t}\n\t}\n\n\tset(key, value) {\n\t\tif (this.cache.has(key)) {\n\t\t\tthis.cache.set(key, value);\n\t\t} else {\n\t\t\tthis._set(key, value);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\thas(key) {\n\t\treturn this.cache.has(key) || this.oldCache.has(key);\n\t}\n\n\tpeek(key) {\n\t\tif (this.cache.has(key)) {\n\t\t\treturn this.cache.get(key);\n\t\t}\n\n\t\tif (this.oldCache.has(key)) {\n\t\t\treturn this.oldCache.get(key);\n\t\t}\n\t}\n\n\tdelete(key) {\n\t\tconst deleted = this.cache.delete(key);\n\t\tif (deleted) {\n\t\t\tthis._size--;\n\t\t}\n\n\t\treturn this.oldCache.delete(key) || deleted;\n\t}\n\n\tclear() {\n\t\tthis.cache.clear();\n\t\tthis.oldCache.clear();\n\t\tthis._size = 0;\n\t}\n\n\t* keys() {\n\t\tfor (const [key] of this) {\n\t\t\tyield key;\n\t\t}\n\t}\n\n\t* values() {\n\t\tfor (const [, value] of this) {\n\t\t\tyield value;\n\t\t}\n\t}\n\n\t* [Symbol.iterator]() {\n\t\tfor (const item of this.cache) {\n\t\t\tyield item;\n\t\t}\n\n\t\tfor (const item of this.oldCache) {\n\t\t\tconst [key] = item;\n\t\t\tif (!this.cache.has(key)) {\n\t\t\t\tyield item;\n\t\t\t}\n\t\t}\n\t}\n\n\tget size() {\n\t\tlet oldCacheSize = 0;\n\t\tfor (const key of this.oldCache.keys()) {\n\t\t\tif (!this.cache.has(key)) {\n\t\t\t\toldCacheSize++;\n\t\t\t}\n\t\t}\n\n\t\treturn this._size + oldCacheSize;\n\t}\n}\n\nmodule.exports = QuickLRU;\n",null,null,"/*\n * Copyright (c) 2019 Genome Research Ltd.\n * Author(s): James Bonfield\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice,\n *       this list of conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above\n *       copyright notice, this list of conditions and the following\n *       disclaimer in the documentation and/or other materials provided\n *       with the distribution.\n *\n *    3. Neither the names Genome Research Ltd and Wellcome Trust Sanger\n *       Institute nor the names of its contributors may be used to endorse\n *       or promote products derived from this software without specific\n *       prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY GENOME RESEARCH LTD AND CONTRIBUTORS \"AS\n * IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GENOME RESEARCH\n * LTD OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nconst IOStream = require(\"./iostream\");\n\n//----------------------------------------------------------------------\n// rANS primitives itself\n//\n// RansGet* is decoder side\n\nfunction RansGetCumulativeFreq(R, bits) {\n    return R & ((1<<bits)-1)\n}\n\nfunction RansGetSymbolFromFreq(C, f) {\n    // NOTE: Inefficient.\n    // In practice we would implement this via a precomputed\n    // lookup table C2S[f]; see RansBuildC2S below.\n    var s = 0;\n    while (f >= C[s+1])\n\ts++;\n\n    //console.error(f, C, s)\n\n    return s;\n}\n\nfunction RansBuildC2S(C, bits) {\n    var max = 1<<bits\n    var C2S = new Array(max);\n    var s = 0;\n    for (var f = 0; f < max; f++) {\n\twhile (f >= C[s+1])\n\t    s++;\n\tC2S[f] = s;\n    }\n    return C2S;\n}\n\nfunction RansAdvanceStep(R, c, f, bits) {\n    return f * (R >> bits) + (R & ((1<<bits)-1)) - c;\n}\n\nfunction RansRenorm(src, R) {\n    if (R < (1<<15))\n\tR = (R << 16) + src.ReadUint16();\n\n    return R;\n}\n\n\n// RanEnc* is for encoder\nfunction RansEncInit() {\n    return 1<<15;\n}\n\nfunction RansEncFlush(R, dst) {\n    dst.WriteByteNeg((R >> 24) & 0xff);\n    dst.WriteByteNeg((R >> 16) & 0xff);\n    dst.WriteByteNeg((R >>  8) & 0xff);\n    dst.WriteByteNeg((R >>  0) & 0xff);\n}\n\nfunction RansEncRenorm(R, dst, freq, scale_bits) {\n    //var R_max = (((1 << 15) >> scale_bits) << 16) * freq;\n    var R_max = (1 << (31-scale_bits)) * freq\n\n    while (R >= R_max) {\n\tdst.WriteByteNeg((R>>8) & 0xff);\n\tdst.WriteByteNeg(R & 0xff);\n\tR >>= 16;\n    }\n    return R;\n}\n\n// Puts a symbol with frequency freq, cumulative freq start\n// and total freq 1<<scale_bits.\n//\n// Note with static probabilities, /freq and %freq could be\n// precomputed via multiplies and shifts.\nfunction RansEncPut(R, dst, start, freq, scale_bits) {\n    var scale = 1<<scale_bits;\n    R = RansEncRenorm(R, dst, freq, scale_bits);\n    R = (Math.floor(R / freq) << scale_bits) + (R % freq) + start;\n    return R;\n}\n\n\n//----------------------------------------------------------------------\n// Run length encoding\nfunction EncodeRLE(src) {\n    // Step 1: find which symbols benefit from RLE\n    var L = new Array(256)\n    for (var i = 0; i < 256; i++)\n\tL[i] = 0\n\n    var last = -1\n    for (var i = 0; i < src.length; i++) {\n\tL[src[i]] += src[i] == last ? 1 : -1\n\tlast = src[i]\n    }\n\n    var nrle = 0;\n    for (var i = 0; i < 256; i++)\n\tif (L[i] > 0)\n\t    nrle++\n\n    if (!nrle) {\n\t// Format cannot cope with zero RLE symbols, so pick one!\n\tnrle = 1;\n\tL[0] = 1;\n    }\n\n    // Start meta-data as list of symbols to RLE\n    var meta = new IOStream(\"\", 0, nrle+1 + src.length)\n    meta.WriteByte(nrle)\n    for (var i = 0; i < 256; i++)\n\tif (L[i] > 0)\n\t    meta.WriteByte(i)\n\n    // Step 2: Now apply RLE itself\n    var data = new Buffer.allocUnsafe(src.length)\n    var dpos = 0\n    for (var i = 0; i < src.length; i++) {\n\tdata[dpos++] = src[i]\n\tif (L[src[i]] > 0) {\n\t    last = src[i];\n\t    var run = 0;\n\t    while (i+run+1 < src.length && src[i+run+1] == last)\n\t\trun++;\n\t    meta.WriteUint7(run)\n\t    i += run\n\t}\n    }\n\n    // Compress the meta-data\n    var cmeta = RansEncode0(meta.buf.slice(0, meta.pos))\n    var hdr = new IOStream(\"\", 0, 16)\n    hdr.WriteUint7(meta.pos*2)   // Uncompressed meta-data length + compressed-bit-flag(0)\n    hdr.WriteUint7(dpos)         // Length of RLE encoded data\n    hdr.WriteUint7(cmeta.length) // Compressed meta-data length\n    var meta = Buffer.concat([hdr.buf.slice(0,hdr.pos), cmeta])\n\n    return [meta, data.slice(0, dpos)]\n}\n\nfunction DecodeRLEMeta(src) {\n    var u_meta_len = src.ReadUint7()\n    var rle_len = src.ReadUint7()\n\n    // Decode RLE lengths\n    if (u_meta_len & 1) {\n\tvar rle_meta = src.ReadData((u_meta_len-1)/2)\n    } else {\n\tvar comp_meta_len = src.ReadUint7()\n\tvar rle_meta = src.ReadData(comp_meta_len)\n\trle_meta = RansDecode0(new IOStream(rle_meta), u_meta_len/2)\n    }\n\n    // Decode list of symbols for which RLE lengths are applied\n    var rle_meta = new IOStream(rle_meta)\n    var L = new Array(256)\n    var n = rle_meta.ReadByte()\n    if (n == 0)\n\tn = 256;\n    for (var i = 0; i < n; i++)\n\tL[rle_meta.ReadByte()] = 1\n\n    return [L, rle_meta, rle_len]\n}\n\nfunction DecodeRLE(buf, L, rle_meta, len) {\n    var src = new IOStream(buf);\n\n    var out = new Buffer.allocUnsafe(len)\n\n    // Expand up buf+meta to out; i = buf index, j = out index\n    var j = 0;\n    for (var i = 0; j < len; i++) {\n\tvar sym = buf[i];\n\tif (L[sym]) {\n\t    var run = rle_meta.ReadUint7()\n\t    for (var r = 0; r <= run; r++)\n\t\tout[j++] = sym\n\t} else {\n\t    out[j++] = sym\n\t}\n    }\n\n    return out\n}\n\n//----------------------------------------------------------------------\n// Bit packing\n\nfunction EncodePack(src) {\n    // Step 1: identify number of distinct symbols\n    var F = new Array(256)\n    for (var i = 0; i < 256; i++)\n\tF[i] = 0\n\n    for (var i = 0; i < src.length; i++)\n\tF[src[i]]++\n\n    var P = new Array(256)\n    var nsym = 0;\n    for (var i = 0; i < 256; i++)\n\tif (F[i] > 0)\n\t    P[i] = nsym++\n\n    if (nsym > 16) {\n\t//console.error(\"Too many symbols to pack:\",nsym)\n\treturn\n    }\n\n\n    // Pack data\n    if (nsym <= 1) {\n\t// Constant\n\tvar data = new Buffer.allocUnsafe(0)\n    }\n\n    else if (nsym <= 2) {\n\t// 1 bit per value\n\tvar data = new Buffer.allocUnsafe(Math.ceil(src.length/8))\n\tvar j = -1\n\tfor (i = 0; i < src.length; i++) {\n\t    if (i % 8 == 0)\n\t\tdata[++j] = 0\n\t    data[j] += P[src[i]] << (i % 8)\n\t}\n    }\n\n    else if (nsym <= 4) {\n\t// 2 bits per value\n\tvar data = new Buffer.allocUnsafe(Math.ceil(src.length/4))\n\tvar j = -1\n\tfor (i = 0; i < src.length; i++) {\n\t    if (i % 4 == 0)\n\t\tdata[++j] = 0\n\t    data[j] += P[src[i]] << ((i % 4) * 2)\n\t}\n    }\n\n    else {\n\t// 4 bits per value\n\tvar data = new Buffer.allocUnsafe(Math.ceil(src.length/2))\n\tvar j = -1\n\tfor (i = 0; i < src.length; i++) {\n\t    if (i % 2 == 0)\n\t\tdata[++j] = 0\n\t    data[j] += P[src[i]] << ((i % 2) * 4)\n\t}\n    }\n\n\n    // Produce pack meta-data\n    var meta = new IOStream(\"\", 0, nsym+5)\n    meta.WriteByte(nsym)\n    var j = 0\n    for (var i = 0; i < 256; i++) {\n\tif (F[i] > 0) {\n\t    F[i] = j++;\n\t    meta.WriteByte(i)\n\t}\n    }\n    meta.WriteUint7(data.length)\n\n    return [meta.buf.slice(0, meta.pos), data]\n}\n\n\n// Pack meta data is the number and value of distinct symbols plus\n// the length of the packed byte stream.\nfunction DecodePackMeta(src) {\n    var nsym = src.ReadByte()\n    var P = new Array(nsym)\n\n    for (var i = 0; i < nsym; i++)\n\tP[i] = src.ReadByte()\n\n    var len = src.ReadUint7()\n\n    return [P, nsym, len]\n}\n\n// Extract bits from src producing output of length len.\n// Nsym is number of distinct symbols used.\nfunction DecodePack(data, P, nsym, len) {\n    var out = new Buffer.allocUnsafe(len)\n    var j = 0;\n\n    // Constant value\n    if (nsym <= 1) {\n\tfor (var i = 0; i < len; i++)\n\t    out[i] = P[0]\n    }\n\n    // 1 bit per value\n    else if (nsym <= 2) {\n\tfor (i = 0; i < len; i++) {\n\t    if (i % 8 == 0)\n\t\tvar v = data[j++];\n\n\t    out[i] = P[v & 1]\n\t    v >>= 1\n\t}\n    }\n\n    // 2 bits per value\n    else if (nsym <= 4) {\n\tfor (i = 0; i < len; i++) {\n\t    if (i % 4 == 0)\n\t\tvar v = data[j++];\n\n\t    out[i] = P[v & 3]\n\t    v >>= 2\n\t}\n    }\n\n    // 4 bits per value\n    else if (nsym <= 16) {\n\tfor (i = 0; i < len; i++) {\n\t    if (i % 2 == 0)\n\t\tvar v = data[j++];\n\n\t    out[i] = P[v & 15]\n\t    v >>= 4\n\t}\n    }\n\n    return out\n}\n\n\n//----------------------------------------------------------------------\n// 4 way interleaving.\n// This is simply 4 rANS streams interleaved to form bytes 0,4,8...,\n// 1,5,9..., 2,6,10... and 3,7,11...\n//\n// It works well when the distributions differ for each of the 4 bytes,\n// for example when compressing a series of 32-bit integers.\n//\n// Maybe make this more general purpose of X* where we specify the stripe\n// size instead of fixing it at 4?\nfunction RansEncodeStripe(hdr, src, N) {\n    if (N == 0)\n\tN = 4; // old default\n\n    // Split into multiple streams\n    var part = new Array(N)\n    var ulen = new Array(N)\n    for (var s = 0; s < N; s++) {\n\tulen[s] = Math.floor(src.length / N) + ((src.length % N) > s);\n\tpart[s] = new Array(ulen[s])\n    }\n\n    for (var x = 0, i = 0; i < src.length; i+=N, x++) {\n\tfor (var j = 0; j < N; j++)\n\t    if (x < part[j].length)\n\t\tpart[j][x] = src[i+j]\n    }\n\n    // Compress each part\n    var comp = new Array(N)\n    var total = 0\n    for (var s = 0; s < N; s++) {\n\t// Example: try O0 and O1 and choose best\n\tvar comp0 = encode(part[s], 0)\n\tvar comp1 = encode(part[s], 1)\n\tcomp[s] = (comp1.length < comp0.length) ? comp1 : comp0\n\ttotal += comp[s].length\n    }\n\n    // Serialise\n    var out = new IOStream(\"\", 0, total+5*N+1)\n    out.WriteByte(N)\n    for (var s = 0; s < N; s++)\n\tout.WriteUint7(comp[s].length)\n\n    for (var s = 0; s < N; s++)\n\tout.WriteData(comp[s], comp[s].length)\n\n    return out.buf.slice(0, out.buf.pos)\n}\n\nfunction RansDecodeStripe(src, len) {\n    var N = src.ReadByte()\n\n    // Retrieve lengths\n    var clen = new Array(N)\n    var ulen = new Array(N)\n    for (var j = 0; j < N; j++)\n\tclen[j] = src.ReadUint7()\n\n    // Decode streams\n    var T = new Array(N);\n    for (var j = 0; j < N; j++) {\n\tulen[j] = Math.floor(len / N) + ((len % N) > j)\n\tT[j] = RansDecodeStream(src, ulen[j])\n    }\n\n    // Transpose\n    var out = new Buffer.allocUnsafe(len)\n    for (var j = 0; j < N; j++) {\n\tfor (var i = 0; i < ulen[j]; i++) {\n\t    out[i*N + j] = T[j][i];\n\t}\n    }\n\n    return out;\n}\n\n\n//----------------------------------------------------------------------\n// Main rANS entry function: decodes a compressed src and\n// returns the uncompressed buffer.\nfunction decode(src) {\n    var stream = new IOStream(src)\n    return RansDecodeStream(stream, 0)\n}\n\nfunction RansDecodeStream(stream, n_out) {\n    var format = stream.ReadByte();\n    var order  = format & 1\n    var stripe = format & 8\n    var nosz   = format & 16\n    var cat    = format & 32\n    var rle    = format & 64\n    var pack   = format & 128\n\n    if (!nosz)\n\tn_out = stream.ReadUint7();\n\n    // N-way interleaving\n    if (stripe)\n\treturn RansDecodeStripe(stream, n_out)\n\n    // Bit packing\n    if (pack) {\n\tvar pack_len = n_out\n\tvar [P, nsym, n_out] = DecodePackMeta(stream)\n    }\n\n    // Run length encoding\n    if (rle) {\n\tvar rle_len = n_out\n\tvar [L, rle_meta, n_out] = DecodeRLEMeta(stream)\n    }\n\n    // Uncompress data (all, packed or run literals)\n    if (cat)\n\tvar buf = stream.ReadData(n_out)\n    else if (order == 0)\n\tvar buf = RansDecode0(stream, n_out)\n    else\n\tvar buf = RansDecode1(stream, n_out)\n\n    // Apply expansion transforms\n    if (rle)\n\tbuf = DecodeRLE(buf, L, rle_meta, rle_len)\n\n    if (pack)\n\tbuf = DecodePack(buf, P, nsym, pack_len)\n\n    return buf\n}\n\nfunction encode(src, format) {\n    var hdr = new IOStream(\"\", 0, 10);\n    hdr.WriteByte(format);\n\n    var order = format & 1\n    var stripe= format & 8\n    var nosz  = format & 16\n    var cat   = format & 32\n    var rle   = format & 64\n    var pack  = format & 128\n\n    var N     = format>>8\n\n    if (!nosz)\n\thdr.WriteUint7(src.length);\n\n    if (stripe)\n\treturn Buffer.concat([hdr.buf.slice(0, hdr.pos), RansEncodeStripe(hdr, src, N)])\n\n    var pack_meta = new Buffer.alloc(0)\n    if (pack)\n\t[pack_meta, src] = EncodePack(src)\n\n    var rle_meta = new Buffer.alloc(0)\n    if (rle)\n\t[rle_meta, src] = EncodeRLE(src)\n\n    if (src.length < 4 && order == 1) {\n\t// Protect against short order-1 data due to RLE/Pack\n\torder = 0\n\thdr.buf[0] &= ~1\n    }\n\n    if (cat)\n\tvar comp = src\n    else if (order == 0)\n\tvar comp = RansEncode0(src)\n    else\n\tvar comp = RansEncode1(src)\n\n    return Buffer.concat([hdr.buf.slice(0,hdr.pos), pack_meta, rle_meta, comp])\n}\n\n//----------------------------------------------------------------------\n// Order-0 decoder\n\nfunction ReadAlphabet(src) {\n    var A = new Array(256)\n    for (var i = 0; i < 256; i++)\n\tA[i] = 0;\n\n    var rle = 0\n    var sym = src.ReadByte()\n    var last_sym = sym\n\n    do {\n\tA[sym] = 1;\n\tif (rle > 0) {\n\t    rle--\n\t    sym++\n\t} else {\n\t    sym = src.ReadByte()\n\t    if (sym == last_sym+1)\n\t\trle = src.ReadByte()\n\t}\n\tlast_sym = sym\n    } while (sym != 0)\n\n    return A\n}\n\n// Decode a single table of order-0 frequences,\n// filling out the F and C arrays.\nfunction ReadFrequencies0(src, F, C) {\n    // Initialise; not in the specification - implicit?\n    for (var i = 0; i < 256; i++)\n\tF[i] = 0;\n\n    // Fetch alphabet\n    var A = ReadAlphabet(src);\n\n    // Fetch frequencies for the symbols listed in our alphabet\n    for (var i = 0; i < 256; i++) {\n\tif (A[i] > 0)\n\t    F[i] = src.ReadUint7()\n    }\n\n    NormaliseFrequencies0_Shift(F, 12)\n\n    // Compute C[] from F[]\n    C[0] = 0;\n    for (var i = 0; i <= 255; i++)\n\tC[i+1] = C[i] + F[i];\n}\n\nfunction RansDecode0(src, nbytes) {\n    // Decode frequencies\n    var F = new Array(256);\n    var C = new Array(256);\n    ReadFrequencies0(src, F, C);\n\n    // Fast lookup to avoid slow RansGetSymbolFromFreq\n    var C2S = RansBuildC2S(C, 12);\n\n    // Initialise rANS state\n    var R = new Array(4);\n    for (var i = 0; i < 4; i++)\n\tR[i] = src.ReadUint32();\n\n    // Main decode loop\n    var output = new Buffer.allocUnsafe(nbytes);\n    for (var i = 0; i < nbytes; i++) {\n\tvar i4 = i%4;\n\tvar f = RansGetCumulativeFreq(R[i4], 12);\n\tvar s = C2S[f]; // Equiv to RansGetSymbolFromFreq(C, f);\n\n\toutput[i] = s;\n\tR[i4] = RansAdvanceStep(R[i4], C[s], F[s], 12);\n\tR[i4] = RansRenorm(src, R[i4]);\n    }\n\n    return output;\n}\n\n//----------------------------------------------------------------------\n// Order-0 encoder\n\nfunction BuildFrequencies0(src, F) {\n    for (var i = 0; i < 256; i++)\n\tF[i] = 0;\n\n    for (var i = 0; i < src.length; i++)\n\tF[src[i]]++;\n}\n\nfunction NormaliseFrequencies0(F, bits) {\n    // Compute total\n    var tot = 0;\n    for (var i = 0; i < 256; i++)\n\ttot += F[i];\n\n    // Scale total of frequencies to max\n    const max = (1<<bits);\n    var scale = max / tot;\n    do {\n\tvar max_val = 0;\n\tvar max_idx = 0;\n\tvar renorm = 0;\n\ttot = 0;\n\tfor (var i = 0; i < 256; i++) {\n\t    if (F[i] == 0)\n\t\tcontinue\n\n\t    if (max_val < F[i]) {\n\t\tmax_val = F[i]\n\t\tmax_idx = i\n\t    }\n\n\t    F[i] = Math.floor(F[i] * scale);\n\t    if (F[i] == 0)\n\t\tF[i] = 1;\n\n\t    tot += F[i];\n\t}\n\n\t// Adjust new tot to ensure it matches.\n\tif (tot < max) {\n\t    // Too low, boost the most common symbol\n\t    F[max_idx] += max-tot;\n\t} else if (tot-max < F[max_idx]/2 && F[max_idx] > 2) {\n\t    // Too high, reduce the common symbol\n\t    F[max_idx] -= tot-max;\n\t} else if (tot != max) {\n\t    // Much too high, fudge scale and try again.\n\t    scale = max / tot;\n\t    renorm = 1;\n\t}\n    } while (renorm)\n}\n\nfunction NormaliseFrequencies0_Shift(F, bits) {\n    // Compute total and number of bits to shift by\n    var tot = 0;\n    for (var i = 0; i < 256; i++)\n\ttot += F[i];\n\n    if (tot == 0 || tot == (1<<bits))\n\treturn\n\n    var shift = 0;\n    while (tot < (1<<bits)) {\n\ttot *= 2;\n\tshift++;\n    }\n\n    // Scale total of frequencies to (1<<bits)\n    for (var i = 0; i < 256; i++)\n\tF[i] <<= shift;\n}\n\nfunction WriteAlphabet(out, F) {\n    var rle = 0;\n    for (var i = 0; i < 256; i++) {\n\tif (!F[i])\n\t    continue\n\n\tif (rle > 0)\n\t    rle--\n\telse {\n\t    out.WriteByte(i)\n\n\t    if (i > 0 && F[i-1] > 0) {\n\t\t// We've encoded two symbol frequencies in a row.\n\t\t// How many more are there?  Store that count so\n\t\t// we can avoid writing consecutive symbols.\n\t\tfor (rle = i+1; rle<256 && F[rle]; rle++)\n\t\t    ;\n\t\trle -= i+1;\n\n\t\tout.WriteByte(rle);\n\t    }\n\t}\n    }\n    out.WriteByte(0)\n}\n\nfunction WriteFrequencies0(out, F) {\n    WriteAlphabet(out, F)\n\n    for (var i = 0; i < 256; i++) {\n\tif (F[i])\n\t    out.WriteUint7(F[i])\n    }\n}\n\nfunction RansEncode0(src) {\n    const nbytes = src.length;\n    var output = new IOStream(\"\", 0, 257*3+9);\n\n    // Compute frequencies\n    var F = new Array(256)\n    BuildFrequencies0(src, F)\n    var bit_size = Math.ceil(Math.log2(nbytes));\n    if (bit_size > 12)\n\tbit_size = 12;\n    NormaliseFrequencies0(F, bit_size);\n    WriteFrequencies0(output, F);\n    NormaliseFrequencies0(F, 12);\n\n    // Compute cumulative frequencies\n    var C = new Array(256)\n    C[0] = 0;\n    for (var i = 1; i < 256; i++)\n\tC[i] = C[i-1] + F[i-1];\n\n    // Initialise rANS state\n    var R = new Array(4);\n    for (var i = 0; i < 4; i++)\n\tR[i] = RansEncInit();\n\n    // Allow expansion room if trying to compress random data.\n    var rans_out = new IOStream(\"\", (nbytes*1.05+100)>>0, (nbytes*1.05+100)>>0);\n\n    // Main encode loop\n    for (var i = nbytes-1; i >= 0; i--)\n\tR[i%4] = RansEncPut(R[i%4], rans_out, C[src[i]], F[src[i]], 12);\n\n    for (var i = 3; i >= 0; i--)\n\tRansEncFlush(R[i], rans_out);\n\n    // Stitch blocks together into final output buffer\n    //console.error(\"pos=\",rans_out.pos, \" len=\",rans_out.length)\n    //console.error(rans_out.buf.slice(rans_out.pos, rans_out.length))\n    return Buffer.concat([output.buf.slice(0, output.pos),\n\t\t\t  rans_out.buf.slice(rans_out.pos, rans_out.length)],\n\t\t\t output.pos + rans_out.length - rans_out.pos);\n}\n\n//----------------------------------------------------------------------\n// Order-1 decoder\n\n// Decode a table of order-1 frequences,\n// filling out the F and C arrays.\nfunction ReadFrequencies1(src, F, C, shift) {\n    // Initialise; not in the specification - implicit?\n    for (var i = 0; i < 256; i++) {\n\tF[i] = new Array(256);\n\tC[i] = new Array(256);\n\tfor (var j = 0; j < 256; j++)\n\t    F[i][j] = 0;\n    }\n\n    // Fetch alphabet\n    var A = ReadAlphabet(src);\n\n    // Read F[]\n    for (var i = 0; i < 256; i++) {\n\tif (!A[i])\n\t    continue\n\n\tvar run = 0;\n\tfor (var j = 0; j < 256; j++) {\n\t    if (!A[j])\n\t\tcontinue\n\n\t    if (run > 0) {\n\t\trun--\n\t    } else {\n\t\tF[i][j] = src.ReadUint7();\n\t\tif (F[i][j] == 0)\n\t\t    run = src.ReadByte();\n\t    }\n\t}\n\n\tNormaliseFrequencies0_Shift(F[i], shift)\n\n\t// Compute C[] from F[]\n\tC[i][0] = 0;\n\tfor (var j = 0; j < 256; j++)\n\t    C[i][j+1] = C[i][j] + F[i][j];\n    }\n}\n\nfunction RansDecode1(src, nbytes) {\n    // FIXME: this bit is missing from the RansDecode0 pseudocode.\n\n    var comp = src.ReadByte();\n    var shift = comp >> 4;\n\n    var freq_src = src\n    if (comp & 1) {\n\tvar ulen = src.ReadUint7()\n\tvar clen = src.ReadUint7()\n\tvar comp = new IOStream(src.ReadData(clen))\n\tvar freq_src = new IOStream(RansDecode0(comp, ulen));\n    }\n\n    // Decode frequencies\n    var F = new Array(256);\n    var C = new Array(256);\n    ReadFrequencies1(freq_src, F, C, shift);\n\n    // Fast lookup to avoid slow RansGetSymbolFromFreq\n    var C2S = new Array(256);\n    for (var i = 0; i < 256; i++)\n\t// Could do only for symbols in alphabet?\n\tC2S[i] = RansBuildC2S(C[i], shift);\n\n    // Initialise rANS state\n    var R = new Array(4);\n    var L = new Array(4);\n    for (var j = 0; j < 4; j++) {\n\tR[j] = src.ReadUint32();\n\tL[j] = 0;\n    }\n\n    // Main decode loop\n    var output = new Buffer.allocUnsafe(nbytes);\n    var nbytes4 = Math.floor(nbytes/4);\n    for (var i = 0; i < nbytes4; i++) {\n\tfor (var j = 0; j < 4; j++) {\n\t    var f = RansGetCumulativeFreq(R[j], shift);\n\n\t    //var s = RansGetSymbolFromFreq(C[L[j]], f);\n\t    var s = C2S[L[j]][f]; // Precomputed version of above\n\n\t    output[i+j*nbytes4] = s;\n\t    R[j] = RansAdvanceStep(R[j], C[L[j]][s], F[L[j]][s], shift);\n\t    R[j] = RansRenorm(src, R[j]);\n\t    L[j] = s;\n\t}\n    }\n\n    // Now deal with the remainder if buffer size is not a multiple of 4,\n    // using rANS state 3 exclusively.  (It'd have been nice to have\n    // designed this to just act as if we kept going with a bail out.)\n    i = 4*i;\n    while (i < nbytes) {\n\tvar f = RansGetCumulativeFreq(R[3], shift);\n\tvar s = RansGetSymbolFromFreq(C[L[3]], f);\n\toutput[i++] = s;\n\tR[3] = RansAdvanceStep(R[3], C[L[3]][s], F[L[3]][s], shift);\n\tR[3] = RansRenorm(src, R[3]);\n\tL[3] = s;\n    }\n\n    return output;\n}\n\n//----------------------------------------------------------------------\n// Order-1 encoder\n\nfunction BuildFrequencies1(src, F, F0) {\n    for (var i = 0; i < 256; i++) {\n\tF0[i] = 0;\n\tfor (var j = 0; j < 256; j++)\n\t    F[i][j] = 0;\n    }\n\n    var last = 0;\n    for (var i = 0; i < src.length; i++) {\n\tF0[last]++;\n\tF[last][src[i]]++;\n\tlast = src[i];\n    }\n    F0[last]++;\n\n    // Also accept we'll be starting at 4 points, not just byte 0\n    F[0][src[1*(src.length >> 2)]]++;\n    F[0][src[2*(src.length >> 2)]]++;\n    F[0][src[3*(src.length >> 2)]]++;\n    F0[0] += 3;\n}\n\nfunction NormaliseFrequencies1(F, F0, shift) {\n\n    for (var i = 0; i < 256; i++) {\n\tif (!F0[i])\n\t    continue;\n\n\tvar bit_size = Math.ceil(Math.log2(F0[i]));\n\tif (bit_size > shift)\n\t    bit_size = shift;\n\n\tNormaliseFrequencies0(F[i], bit_size)\n    }\n}\n\nfunction NormaliseFrequencies1_Shift(F, F0, shift) {\n    for (var i = 0; i < 256; i++)\n\tif (F0[i])\n\t    NormaliseFrequencies0_Shift(F[i], shift)\n}\n\nfunction WriteFrequencies1(out, F, F0) {\n    WriteAlphabet(out, F0)\n\n    for (var i = 0; i < 256; i++) {\n\tif (!F0[i])\n\t    continue\n\n\tvar run = 0\n\tfor (var j = 0; j < 256; j++) {\n\t    if (!F0[j])\n\t\tcontinue\n\n\t    if (run) {\n\t\trun--\n\t    } else {\n\t\tout.WriteUint7(F[i][j])\n\n\t\tif (!F[i][j]) {\n\t\t    // Count how many more zero-freqs we have\n\t\t    for (var k = j+1; k < 256; k++) {\n\t\t\tif (!F0[k])\n\t\t\t    continue\n\n\t\t\tif (F[i][k] == 0)\n\t\t\t    run++\n\t\t\telse\n\t\t\t    break\n\t\t    }\n\t\t    out.WriteByte(run)\n\t\t}\n\t    }\n\t}\n    }\n}\n\nfunction RansEncode1(src) {\n    const nbytes = src.length;\n    var output = new IOStream(\"\", 0, 257*257*3+9);\n\n    // Compute frequencies\n    var F0 = new Array(256)\n    var F = new Array(256)\n    var C = new Array(256)\n    for (var i = 0; i < 256; i++) {\n\tF[i] = new Array(256);\n\tC[i] = new Array(256);\n    }\n\n    // Frequency precision\n    var shift = 12;\n\n    BuildFrequencies1(src, F, F0)\n    NormaliseFrequencies1(F, F0, shift);\n\n    // Store frequencies, possibly compressed\n    var freq = new IOStream(\"\", 0, 257*257*3+9);\n\n    WriteFrequencies1(freq, F, F0);\n\n    var cfreq = RansEncode0(freq.buf.slice(0, freq.pos))\n    if (cfreq.length < freq.pos) {\n\toutput.WriteByte(1 | (shift<<4));\n\toutput.WriteUint7(freq.pos)\n\toutput.WriteUint7(cfreq.length)\n\toutput.WriteData(cfreq, cfreq.length);\n    } else {\n\toutput.WriteByte(0 | (shift<<4));\n\toutput.WriteData(freq.buf, freq.pos);\n    }\n\n    // Normalise and compute cumulative frequencies\n    NormaliseFrequencies1_Shift(F, F0, shift);\n    for (var i = 0; i < 256; i++) {\n\tif (!F0[i])\n\t    continue;\n\n\tC[i][0] = 0;\n\tfor (var j = 1; j < 256; j++)\n\t    C[i][j] = C[i][j-1] + F[i][j-1];\n    }\n\n    // Initialise rANS state\n    var R = new Array(4);\n    var L = new Array(4);\n    for (var j = 0; j < 4; j++) {\n\tR[j] = RansEncInit();\n\tL[j] = 0;\n    }\n    var rans_out = new IOStream(\"\", (nbytes*1.05+100)>>0, (nbytes*1.05+100)>>0);\n\n    // We have 4 rans codecs running in parallel on its own 1/4tr of buffer\n    var nbytes4 = Math.floor(nbytes/4);\n    var idx = new Array(4);\n    var last = new Array(4)\n    for (var j = 0; j < 4; j++) {\n\tidx[j] = (j+1)*nbytes4 - 2;\n\tlast[j] = src[idx[j]+1]\n    }\n\n    // Deal with the remainder if not a multiple of 4\n    last[3] = src[nbytes-1];\n    for (var i = nbytes-2; i > 4*nbytes4-2; i--) {\n\tR[3] = RansEncPut(R[3], rans_out, C[src[i]][last[3]], F[src[i]][last[3]], shift);\n\tlast[3] = src[i];\n    }\n\n    // Main encode loop\n    while (idx[0] >= 0) {\n\tfor (var j = 3; j >= 0; j--) {\n\t    var s = src[idx[j]]\n\t    R[j] = RansEncPut(R[j], rans_out, C[s][last[j]], F[s][last[j]], shift);\n\t    last[j] = s;\n\t    idx[j]--;\n\t}\n    }\n\n    for (var j = 3; j >= 0; j--) {\n        R[j] = RansEncPut(R[j], rans_out, C[0][last[j]], F[0][last[j]], shift)\n    }\n\n    for (var i = 3; i >= 0; i--)\n\tRansEncFlush(R[i], rans_out);\n\n    // Stitch blocks together into final output buffer\n    return Buffer.concat([output.buf.slice(0, output.pos),\n\t\t\t  rans_out.buf.slice(rans_out.pos, rans_out.length)],\n\t\t\t output.pos + rans_out.length - rans_out.pos);\n}\n\nmodule.exports = { decode, encode }\n","/*\n * Copyright (c) 2019 Genome Research Ltd.\n * Author(s): James Bonfield\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice,\n *       this list of conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above\n *       copyright notice, this list of conditions and the following\n *       disclaimer in the documentation and/or other materials provided\n *       with the distribution.\n *\n *    3. Neither the names Genome Research Ltd and Wellcome Trust Sanger\n *       Institute nor the names of its contributors may be used to endorse\n *       or promote products derived from this software without specific\n *       prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY GENOME RESEARCH LTD AND CONTRIBUTORS \"AS\n * IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GENOME RESEARCH\n * LTD OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nconst RangeCoder = require(\"./arith_sh\");\nconst IOStream = require(\"./iostream\");\nconst ByteModel = require(\"./byte_model\");\nconst bzip2 = require(\"bzip2\");\n\nconst ARITH_ORDER  = 1\nconst ARITH_EXT    = 4\nconst ARITH_STRIPE = 8\nconst ARITH_NOSIZE = 16\nconst ARITH_CAT    = 32\nconst ARITH_RLE    = 64\nconst ARITH_PACK   = 128\n\nmodule.exports = class RangeCoderGen {\n    decode(src) {\n\tthis.stream = new IOStream(src);\n\treturn this.decodeStream(this.stream)\n    }\n\n    decodeStream(stream, n_out=0) {\n\tvar flags = this.stream.ReadByte();\n\tif (!(flags & ARITH_NOSIZE))\n\t    n_out = this.stream.ReadUint7();\n\tvar e_len = n_out;\n\n\tvar order = flags & ARITH_ORDER;\n\n\t// 4-way recursion\n\tif (flags & ARITH_STRIPE)\n\t    return this.decodeStripe(this.stream, n_out)\n\n\t// Meta data\n\tif (flags & ARITH_PACK) {\n\t    var P\n\t    [P, e_len] = this.decodePackMeta(this.stream)\n\t}\n\n\t// NOP, useful for tiny blocks\n\tif (flags & ARITH_CAT)\n\t    var data = this.decodeCat(this.stream, e_len)\n\n\t// Entropy decode\n\telse if (flags & ARITH_EXT) {\n\t    var data = this.decodeExt(this.stream, e_len)\n\t} else if (flags & ARITH_RLE) {\n\t    var data = order\n\t\t? this.decodeRLE1(this.stream, e_len)\n\t\t: this.decodeRLE0(this.stream, e_len)\n\t} else {\n\t    var data = order\n\t\t? this.decode1(this.stream, e_len)\n\t\t: this.decode0(this.stream, e_len)\n\t}\n\n\t// Transforms\n\tif (flags & ARITH_PACK)\n\t    data = this.decodePack(data, P, n_out)\n\n\treturn data\n    }\n\n    encode(src, flags) {\n\tthis.stream = new IOStream(\"\", 0, src.length*1.1 + 100); // guestimate worst case!\n\n\tthis.stream.WriteByte(flags);\n\tif (!(flags & ARITH_NOSIZE))\n\t    this.stream.WriteUint7(src.length);\n\n\tif (flags & ARITH_STRIPE)\n\t    return Buffer.concat([this.stream.buf.slice(0, this.stream.pos),\n\t\t\t\t  this.encodeStripe(this.stream, src, flags>>8)])\n\n\tvar order = flags & ARITH_ORDER;\n\tvar e_len = src.length;\n\n\t// step 1: Encode meta-data\n\tvar pack_meta\n\tif (flags & ARITH_PACK)\n\t    [pack_meta, src, e_len] = this.encodePack(src)\n\n\t// step 2: Write any meta data\n\tif (flags & ARITH_PACK)\n\t    this.stream.WriteStream(pack_meta)\n\n\t// step 3: arith encoding below\n\tif (flags & ARITH_RLE) {\n\t    return order\n\t\t? this.encodeRLE1(src, e_len, this.stream)\n\t\t: this.encodeRLE0(src, e_len, this.stream);\n\t} else {\n\t    return order\n\t\t? this.encode1(src, e_len, this.stream)\n\t\t: this.encode0(src, e_len, this.stream);\n\t}\n    }\n\n    //----------------------------------------------------------------------\n    // Order-0 codec\n    decode0(stream, n_out) {\n\tvar output = new Buffer.allocUnsafe(n_out);\n\n\tvar max_sym = stream.ReadByte()\n\tif (max_sym == 0)\n\t    max_sym = 256\n\n\tvar byte_model = new ByteModel(max_sym);\n\n\tvar rc = new RangeCoder(stream);\n\trc.RangeStartDecode(stream);\n\n\tfor (var i = 0; i < n_out; i++)\n\t    output[i] = byte_model.ModelDecode(stream, rc);\n\n\treturn output;\n    }\n\n    encode0(src, n_in, out) {\n\t// Count the maximum symbol present\n\tvar max_sym = 0;\n\tfor (var i = 0; i < n_in; i++)\n\t    if (max_sym < src[i])\n\t\tmax_sym = src[i]\n\tmax_sym++;  // FIXME not what spec states!?\n\n\tvar byte_model = new ByteModel(max_sym);\n\tout.WriteByte(max_sym);\n\tvar rc = new RangeCoder(out);\n\n\tfor (var i = 0; i < n_in; i++)\n\t    byte_model.ModelEncode(out, rc, src[i])\n\trc.RangeFinishEncode(out)\n\n\treturn out.buf.slice(0, out.pos);\n    }\n\n    //----------------------------------------------------------------------\n    // Order-1 codec\n\n    decode1(stream, n_out) {\n\tvar output = new Buffer.allocUnsafe(n_out);\n\n\tvar max_sym = stream.ReadByte()\n\tif (max_sym == 0)\n\t    max_sym = 256\n\n\tvar byte_model = new Array(max_sym);\n\tfor (var i = 0; i < max_sym; i++)\n\t    byte_model[i] = new ByteModel(max_sym);\n\n\tvar rc = new RangeCoder(stream);\n\trc.RangeStartDecode(stream);\n\n\tvar last = 0;\n\tfor (var i = 0; i < n_out; i++) {\n\t    output[i] = byte_model[last].ModelDecode(stream, rc);\n\t    last = output[i];\n\t}\n\n\treturn output;\n    }\n\n    encode1(src, n_in, out) {\n\t// Count the maximum symbol present\n\tvar max_sym = 0;\n\tfor (var i = 0; i < n_in; i++)\n\t    if (max_sym < src[i])\n\t\tmax_sym = src[i]\n\tmax_sym++;  // FIXME not what spec states!\n\n\tvar byte_model = new Array(max_sym);\n\tfor (var i = 0; i < max_sym; i++)\n\t    byte_model[i] = new ByteModel(max_sym);\n\tout.WriteByte(max_sym);\n\tvar rc = new RangeCoder(out);\n\n\tvar last = 0;\n\tfor (var i = 0; i < n_in; i++) {\n\t    byte_model[last].ModelEncode(out, rc, src[i])\n\t    last = src[i]\n\t}\n\trc.RangeFinishEncode(out)\n\n\treturn out.buf.slice(0, out.pos);\n    }\n\n    //----------------------------------------------------------------------\n    // External codec\n    decodeExt(stream, n_out) {\n\t// Bzip2 only for now\n\tvar output = new Buffer.allocUnsafe(n_out)\n\tvar bits = bzip2.array(stream.buf.slice(stream.pos))\n\tvar size = bzip2.header(bits)\n\tvar j = 0\n\tdo {\n\t    var chunk = bzip2.decompress(bits, size);\n\t    if (chunk != -1) {\n\t        Buffer.from(chunk).copy(output, j)\n\t        j += chunk.length\n\t\tsize -= chunk.length\n\t    }\n\t} while(chunk != -1);\n\n\treturn output\n    }\n\n    encodeExt(stream, n_out) {\n\t// We cannot compress using Bzip2 now as it's\n\t// absent from bzip2.js, but consider using\n\t// https://github.com/cscott/compressjs\n    }\n\n    //----------------------------------------------------------------------\n    // Order-0 RLE codec\n    decodeRLE0(stream, n_out) {\n\tvar output = new Buffer.allocUnsafe(n_out);\n\n\tvar max_sym = stream.ReadByte()\n\tif (max_sym == 0)\n\t    max_sym = 256\n\n\tvar model_lit = new ByteModel(max_sym);\n\tvar model_run = new Array(258);\n\tfor (var i = 0; i <= 257; i++)\n\t    model_run[i] = new ByteModel(4)\n\n\tvar rc = new RangeCoder(stream);\n\trc.RangeStartDecode(stream);\n\n\tvar i = 0;\n\twhile (i < n_out) {\n\t    output[i] = model_lit.ModelDecode(stream, rc)\n\t    var part = model_run[output[i]].ModelDecode(stream, rc)\n\t    var run = part\n\t    var rctx = 256\n\t    while (part == 3) {\n\t\tpart = model_run[rctx].ModelDecode(stream, rc)\n\t\trctx = 257\n\t\trun += part\n\t    }\n\t    for (var j = 1; j <= run; j++)\n\t\toutput[i+j] = output[i]\n\t    i += run+1\n\t}\n\n\treturn output;\n    }\n\n    encodeRLE0(src, n_in, out) {\n\t// Count the maximum symbol present\n\tvar max_sym = 0;\n\tfor (var i = 0; i < n_in; i++)\n\t    if (max_sym < src[i])\n\t\tmax_sym = src[i]\n\tmax_sym++;  // FIXME not what spec states!\n\n\tvar model_lit = new ByteModel(max_sym);\n\tvar model_run = new Array(258);\n\tfor (var i = 0; i <= 257; i++)\n\t    model_run[i] = new ByteModel(4)\n\n\tout.WriteByte(max_sym);\n\tvar rc = new RangeCoder(out);\n\n\tvar i = 0\n\twhile (i < n_in) {\n\t    model_lit.ModelEncode(out, rc, src[i])\n\t    var run = 1\n\t    while (i+run < n_in && src[i+run] == src[i])\n\t\trun++\n\t    run--\n\n\t    var rctx = src[i]\n\t    var last = src[i]\n\t    i += run+1\n\n\t    var part = run >= 3 ? 3 : run\n\t    model_run[rctx].ModelEncode(out, rc, part)\n\t    run -= part\n\t    rctx = 256\n\t    while (part == 3) {\n\t\tpart = run >= 3 ? 3 : run\n\t\tmodel_run[rctx].ModelEncode(out, rc, part)\n\t\trctx = 257\n\t\trun -= part\n\t    }\n\t}\n\trc.RangeFinishEncode(out)\n\n\treturn out.buf.slice(0, out.pos);\n    }\n\n    //----------------------------------------------------------------------\n    // Order-1 RLE codec\n\n    decodeRLE1(stream, n_out) {\n\tvar output = new Buffer.allocUnsafe(n_out);\n\n\tvar max_sym = stream.ReadByte()\n\tif (max_sym == 0)\n\t    max_sym = 256\n\n\tvar model_lit = new Array(max_sym);\n\tfor (var i = 0; i < max_sym; i++)\n\t    model_lit[i] = new ByteModel(max_sym);\n\n\tvar model_run = new Array(258);\n\tfor (var i = 0; i <= 257; i++)\n\t    model_run[i] = new ByteModel(4)\n\n\tvar rc = new RangeCoder(stream);\n\trc.RangeStartDecode(stream);\n\n\tvar last = 0;\n\tvar i = 0;\n\twhile (i < n_out) {\n\t    output[i] = model_lit[last].ModelDecode(stream, rc)\n\t    last = output[i]\n\t    var part = model_run[output[i]].ModelDecode(stream, rc)\n\t    var run = part\n\t    var rctx = 256\n\t    while (part == 3) {\n\t\tpart = model_run[rctx].ModelDecode(stream, rc)\n\t\trctx = 257\n\t\trun += part\n\t    }\n\t    for (var j = 1; j <= run; j++)\n\t\toutput[i+j] = output[i]\n\t    i += run+1\n\t}\n\n\treturn output;\n    }\n\n    encodeRLE1(src, n_in, out) {\n\t// Count the maximum symbol present\n\tvar max_sym = 0;\n\tfor (var i = 0; i < n_in; i++)\n\t    if (max_sym < src[i])\n\t\tmax_sym = src[i]\n\tmax_sym++;  // FIXME not what spec states!\n\n\tvar model_lit = new Array(max_sym)\n\tfor (var i = 0; i < max_sym; i++)\n\t    model_lit[i] = new ByteModel(max_sym);\n\tvar model_run = new Array(258);\n\tfor (var i = 0; i <= 257; i++)\n\t    model_run[i] = new ByteModel(4)\n\n\tout.WriteByte(max_sym);\n\tvar rc = new RangeCoder(out);\n\n\tvar i = 0\n\tvar last = 0\n\twhile (i < n_in) {\n\t    model_lit[last].ModelEncode(out, rc, src[i])\n\t    var run = 1\n\t    while (i+run < n_in && src[i+run] == src[i])\n\t\trun++\n\t    run--\n\n\t    var rctx = src[i]\n\t    last = src[i]\n\t    i += run+1\n\n\t    var part = run >= 3 ? 3 : run\n\t    model_run[rctx].ModelEncode(out, rc, part)\n\t    run -= part\n\t    rctx = 256\n\t    while (part == 3) {\n\t\tpart = run >= 3 ? 3 : run\n\t\tmodel_run[rctx].ModelEncode(out, rc, part)\n\t\trctx = 257\n\t\trun -= part\n\t    }\n\t}\n\trc.RangeFinishEncode(out)\n\n\treturn out.buf.slice(0, out.pos);\n    }\n\n    //----------------------------------------------------------------------\n    // Pack method\n    decodePackMeta(stream) {\n\tthis.nsym  = stream.ReadByte()\n\n\tvar M = new Array(this.nsym);\n\tfor (var i = 0; i < this.nsym; i++)\n\t    M[i] = stream.ReadByte()\n\n\tvar e_len = stream.ReadUint7(); // Could be derived data from nsym and n_out\n\n\treturn [M, e_len]\n    }\n\n    decodePack(data, M, len) {\n\tvar out = new Buffer.allocUnsafe(len);\n\n\tif (this.nsym <= 1) {\n\t    // Constant value\n\t    for (var i = 0; i < len; i++)\n\t\tout[i] = M[0]\n\n\t} else if (this.nsym <= 2) {\n\t    // 1 bit per value\n\t    for (var i = 0, j = 0; i < len; i++) {\n\t\tif (i % 8 == 0)\n\t\t    var v = data[j++]\n\t\tout[i] = M[v & 1]\n\t\tv >>= 1\n\t    }\n\n\t} else if (this.nsym <= 4) {\n\t    // 2 bits per value\n\t    for (var i = 0, j = 0; i < len; i++) {\n\t\tif (i % 4 == 0)\n\t\t    var v = data[j++]\n\t\tout[i] = M[v & 3]\n\t\tv >>= 2\n\t    }\n\n\t} else if (this.nsym <= 16) {\n\t    // 4 bits per value\n\t    for (var i = 0, j = 0; i < len; i++) {\n\t\tif (i % 2 == 0)\n\t\t    var v = data[j++]\n\t\tout[i] = M[v & 15]\n\t\tv >>= 4\n\t    }\n\n\t} else {\n\t    // 8 bits per value: NOP\n\t    return data\n\t}\n\n\treturn out\n    }\n\n    // Compute M array and return meta-data stream\n    packMeta(src) {\n\tvar stream = new IOStream(\"\", 0, 1024)\n\n\t// Count symbols\n\tvar M = new Array(256)\n\tfor (var i = 0; i < src.length; i++)\n\t    M[src[i]] = 1\n\n\t// Write Map\n\tfor (var nsym = 0, i = 0; i < 256; i++)\n\t    if (M[i])\n\t\tM[i] = ++nsym; // map to 1..N\n\tstream.WriteByte(nsym);\n\n\t// FIXME: add check for nsym > 16?\n\t// Or just accept it as an inefficient waste of time.\n\tfor (var i = 0; i < 256; i++) {\n\t    if (M[i]) {\n\t\tstream.WriteByte(i) // adjust to 0..N-1\n\t\tM[i]--;\n\t    }\n\t}\n\n\treturn [stream, M, nsym]\n    }\n\n    encodePack(data) {\n\tvar meta, M, nsym\n\t[meta, M, nsym] = this.packMeta(data)\n\n\tvar len = data.length\n\tvar i = 0;\n\tif (nsym <= 1) {\n\t    // Constant values\n\t    meta.WriteUint7(0)\n\t    return [meta, new Buffer.allocUnsafe(0), 0];\n\t}\n\n\tif (nsym <= 2) {\n\t    // 1 bit per value\n\t    var out = new Buffer.allocUnsafe(Math.floor((len+7)/8));\n\t    for (var i = 0, j = 0; i < (len & ~7); i+=8, j++)\n\t\tout[j] = (M[data[i+0]]<<0)\n\t\t       + (M[data[i+1]]<<1)\n\t\t       + (M[data[i+2]]<<2)\n\t\t       + (M[data[i+3]]<<3)\n\t\t       + (M[data[i+4]]<<4)\n\t\t       + (M[data[i+5]]<<5)\n\t\t       + (M[data[i+6]]<<6)\n\t\t       + (M[data[i+7]]<<7)\n\t    if (i < len) {\n\t\tout[j] = 0;\n\t\tvar v = 0;\n\t\twhile (i < len) {\n\t\t    out[j] |= M[data[i++]]<<v;\n\t\t    v++;\n\t\t}\n\t\tj++;\n\t    }\n\n\t    meta.WriteUint7(j)\n\t    return [meta, out, out.length]\n\t}\n\n\tif (nsym <= 4) {\n\t    // 2 bits per value\n\t    var out = new Buffer.allocUnsafe(Math.floor((len+3)/4));\n\t    for (var i = 0, j = 0; i < (len & ~3); i+=4, j++)\n\t\tout[j] = (M[data[i+0]]<<0)\n\t\t       + (M[data[i+1]]<<2)\n\t\t       + (M[data[i+2]]<<4)\n\t\t       + (M[data[i+3]]<<6)\n\n\t    if (i < len) {\n\t\tout[j] = 0;\n\t\tvar v = 0;\n\t\twhile (i < len) {\n\t\t    out[j] |= M[data[i++]]<<v;\n\t\t    v+=2;\n\t\t}\n\t\tj++;\n\t    }\n\n\t    meta.WriteUint7(j)\n\t    return [meta, out, out.length]\n\t}\n\n\tif (nsym <= 16) {\n\t    // 4 bits per value\n\t    var out = new Buffer.allocUnsafe(Math.floor((len+1)/2));\n\t    for (var i = 0, j = 0; i < (len & ~1); i+=2, j++)\n\t\tout[j] = (M[data[i+0]]<<0)\n\t\t       + (M[data[i+1]]<<4)\n\t    if (i < len)\n\t\tout[j++] = M[data[i++]];\n\n\t    meta.WriteUint7(j)\n\t    return [meta, out, out.length]\n\t}\n\n\t// Otherwise an expensive NOP\n\tmeta.WriteUint7(data.length)\n\treturn [meta, data, data.length]\n    }\n\n    //----------------------------------------------------------------------\n    // STRIPE method\n    encodeStripe(hdr, src, N) {\n    if (N == 0)\n\tN = 4; // old default\n\n\t// Split into multiple streams\n\tvar part = new Array(N)\n\tvar ulen = new Array(N)\n\tfor (var s = 0; s < N; s++) {\n\t    ulen[s] = Math.floor(src.length / N) + ((src.length % N) > s);\n\t    part[s] = new Array(ulen[s])\n\t}\n\n\tfor (var x = 0, i = 0; i < src.length; i+=N, x++) {\n\t    for (var j = 0; j < N; j++)\n\t\tif (x < part[j].length)\n\t\t    part[j][x] = src[i+j]\n\t}\n\n\t// Compress each part\n\tvar comp = new Array(N)\n\tvar total = 0\n\tfor (var s = 0; s < N; s++) {\n\t    // Example: try O0 and O1 and choose best\n\t    var comp0 = this.encode(part[s], 0)\n\t    var comp1 = this.encode(part[s], 1)\n\t    comp[s] = (comp1.length < comp0.length) ? comp1 : comp0\n\t    total += comp[s].length\n\t}\n\n\t// Serialise\n\tvar out = new IOStream(\"\", 0, total+5*N + 1)\n\tout.WriteByte(N)\n\tfor (var s = 0; s < N; s++)\n\t    out.WriteUint7(comp[s].length)\n\n\tfor (var s = 0; s < N; s++)\n\t    out.WriteData(comp[s], comp[s].length)\n\n\treturn out.buf.slice(0, out.buf.pos)\n    }\n\n    decodeStripe(stream, len) {\n\tvar N = stream.ReadByte()\n\t\n\t// Retrieve lengths\n\tvar clen = new Array(N)\n\tvar ulen = new Array(N)\n\tfor (var j = 0; j < N; j++)\n\t    clen[j] = stream.ReadUint7()\n\n\t// Decode streams\n\tvar T = new Array(N);\n\tfor (var j = 0; j < N; j++) {\n\t    ulen[j] = Math.floor(len / N) + ((len % N) > j)\n\t    T[j] = this.decodeStream(stream, ulen[j])\n\t}\n\n\t// Transpose\n\tvar out = new Buffer.allocUnsafe(len)\n\tfor (var j = 0; j < N; j++) {\n\t    for (var i = 0; i < ulen[j]; i++) {\n\t\tout[i*N + j] = T[j][i];\n\t    }\n\t}\n\n\treturn out\n    }\n\n    //----------------------------------------------------------------------\n    // Cat method\n    decodeCat(stream, len) {\n\tvar out = new Buffer.allocUnsafe(len);\n\tfor (var i = 0; i < len; i++)\n\t    out[i] = stream.ReadByte()\n\n\treturn out\n    }\n}\n","/*\n * Copyright (c) 2019 Genome Research Ltd.\n * Author(s): James Bonfield\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice,\n *       this list of conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above\n *       copyright notice, this list of conditions and the following\n *       disclaimer in the documentation and/or other materials provided\n *       with the distribution.\n *\n *    3. Neither the names Genome Research Ltd and Wellcome Trust Sanger\n *       Institute nor the names of its contributors may be used to endorse\n *       or promote products derived from this software without specific\n *       prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY GENOME RESEARCH LTD AND CONTRIBUTORS \"AS\n * IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GENOME RESEARCH\n * LTD OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n// An arithmetic coder, based on Eugene Shelwien's reimplementation of\n// Michael Schindler range coder.\n//\n// Order-0 byte stream of ~/scratch/data/q40b\n// C:              3.1s decode  (approx same vs 32-bit and 64-bit)\n// Arith_sh.js     6.7s decode  (32-bit with carries)\n// Arith.js      317.0s decode  (64-bit no carries); int64 crippling it.\n\n//----------------------------------------------------------------------\n// Arithmetic (range) coder\nmodule.exports = class RangeCoder {\n    constructor(src) {\n\tthis.low   = 0;\n\tthis.range = 0xffffffff;\n\tthis.code  = 0;\n\tthis.FFnum = 0;\n\tthis.carry = 0;\n\tthis.cache = 0;\n    }\n\n    RangeStartDecode(src) {\n\tfor (var i = 0; i < 5; i++)\n\t    this.code = (this.code << 8) + src.ReadByte();\n\tthis.code &= 0xffffffff;\n\tthis.code >>>= 0; // force to be +ve int\n    }\n\n    RangeGetFrequency(tot_freq) {\n\tthis.range = Math.floor(this.range / tot_freq);\n\t//return this.code / this.range;\n\treturn Math.floor(this.code / this.range);\n\n\t// Conceptual scenario; return freq only and don't modify range yet\n\t//return Math.floor(this.code / (Math.floor(this.range / tot_freq)));\n    }\n\n    RangeDecode(src, sym_low, sym_freq, tot_freq) {\n\t// Conceptually we divide range here, but in practice we cached it earlier\n\t//this.range = Math.floor(this.range / tot_freq);\n\n\tthis.code  -= sym_low * this.range;\n\tthis.range *= sym_freq;\n\n\twhile (this.range < (1<<24)) {\n\t    this.range *= 256;\n\t    this.code = (this.code*256 + src.ReadByte());\n\t}\n    }\n\n    RangeShiftLow(dst) {\n\t// We know range is < (1<<24) as we got here.  We already have a\n\t// cached copy of 8 bits from low.  Is this correct, or does it need\n\t// fixing?  Possible scenarios.\n\t// 1. Low < 0xff000000 thus low+range < 0xffffffff and cache\n\t//    cannot possibly change.  Output cache and as many ffs as needed.\n\t// 2. We already detected an overflow in RangeEncode, setting carry.\n\t//    In this case output cached byte + 1 and any 00s needed.\n\t// 3. Neither case - range is low but we haven't yet detected if we're\n\t//    XXffffff or XY000000 scenario.  Increase counter for ff/00s.\n\n\tif (this.low < 0xff000000 | this.carry) {\n\t    // cached byte if no overflow, byte+1 otherwise\n\t    dst.WriteByte(this.cache + this.carry);\n\n\t    // Flush any tracked FFs (no carry) or 00s (carry).\n\t    while (this.FFnum) {\n\t\tdst.WriteByte(this.carry-1);\n\t\tthis.FFnum--;\n\t    }\n\n\t    // Take a copy of top byte ready for next flush\n\t    this.cache = this.low >>> 24;\n\t    this.carry = 0;\n\t} else {\n\t    this.FFnum++; // keep track of number of trailing ff/00 bytes to write\n\t}\n\tthis.low <<= 8;\n\tthis.low >>>= 0; // force to be +ve int\n    }\n\n    RangeEncode(dst, sym_low, sym_freq, tot_freq) {\n\tvar old_low = this.low\n\tthis.range  = Math.floor(this.range / tot_freq)\n\tthis.low   += sym_low * this.range;\n\tthis.low >>>= 0; // Truncate to +ve int so we can spot overflow\n\tthis.range *= sym_freq;\n\n\t// \"low + sym*range < old_low\" means we overflow; set carry.\n\t// NB: can this.low < old_low occur twice before range < (1<<24)?\n\t// We claim not, but prove it!\n\tif (this.low < old_low) {\n\t    if (this.carry != 0) console.log(\"ERROR: Multiple carry\")\n\t    this.carry = 1\n\t}\n\n\t// Renormalise if range gets too small\n\twhile (this.range < (1<<24)) {\n\t    this.range *= 256;\n\t    this.RangeShiftLow(dst);\n\t}\n    }\n\n    RangeFinishEncode(dst) {\n\tfor (var i = 0; i < 5; i++)\n\t    this.RangeShiftLow(dst)\n    }\n};\n","/*\n * Copyright (c) 2019 Genome Research Ltd.\n * Author(s): James Bonfield\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice,\n *       this list of conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above\n *       copyright notice, this list of conditions and the following\n *       disclaimer in the documentation and/or other materials provided\n *       with the distribution.\n *\n *    3. Neither the names Genome Research Ltd and Wellcome Trust Sanger\n *       Institute nor the names of its contributors may be used to endorse\n *       or promote products derived from this software without specific\n *       prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY GENOME RESEARCH LTD AND CONTRIBUTORS \"AS\n * IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GENOME RESEARCH\n * LTD OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n// An adaptive probability model for encoding and decoding of symbols\n// within a given alphabet, using the range coder to get/put the\n// compressed data.\n\nconst MAX_FREQ = ((1<<16)-17)\nconst STEP     = 16\n\nmodule.exports = class ByteModel {\n    constructor(max_sym = 256) {\n\tthis.total_freq = max_sym;\n\tthis.max_sym = max_sym-1;\n\tthis.S = new Array\n\tthis.F = new Array\n\n\tfor (var i = 0; i <= this.max_sym; i++) {\n\t    this.S[i] = i;\n\t    this.F[i] = 1;\n\t}\n    }\n\n    ModelDecode(src, rc) {\n\t// Find symbol\n\tvar freq = rc.RangeGetFrequency(this.total_freq);\n\n\t// Linear scan to find cumulative frequency 'freq'\n\tvar acc = 0;\n\tvar x = 0;\n\twhile (acc + this.F[x] <= freq)\n\t    acc += this.F[x++];\n\n//\tfor (var acc = 0; (acc += this.F[x]) <= freq; x++)\n//\t    ;\n//\tacc -= this.F[x];\n\n\t// Update range coder\n\trc.RangeDecode(src, acc, this.F[x], this.total_freq);\n\n\t// Update model\n\tthis.F[x]       += STEP;\n\tthis.total_freq += STEP;\n\tif (this.total_freq > MAX_FREQ)\n\t    this.ModelRenormalise();\n\t\n\n\t// Keep symbols approximately frequency sorted\n\tvar sym = this.S[x];\n\tif (x > 0 && this.F[x] > this.F[x-1]) {\n\t    var tmp = this.F[x];\n\t    this.F[x] = this.F[x-1];\n\t    this.F[x-1] = tmp;\n\n\t    tmp = this.S[x];\n\t    this.S[x] = this.S[x-1];\n\t    this.S[x-1] = tmp;\n\t}\n\n\treturn sym;\n    }\n\n    ModelRenormalise() {\n\t// Halve all the frequencies, being careful not to hit zero\n\tthis.total_freq = 0;\n\tfor (var i = 0; i <= this.max_sym; i++) {\n\t    this.F[i] -= Math.floor(this.F[i] / 2);\n\t    this.total_freq += this.F[i];\n\t}\n    }\n\n    ModelEncode(dst, rc, sym) {\n\t// Find cumulative frequency\n\tvar acc = 0;\n\tfor (var x = 0; this.S[x] != sym; x++)\n\t    acc += this.F[x];\n\n\t// Encode\n\trc.RangeEncode(dst, acc, this.F[x], this.total_freq);\n\n\t// Update model\n\tthis.F[x]       += STEP;\n\tthis.total_freq += STEP;\n\tif (this.total_freq > MAX_FREQ) // FIXME x2\n\t    this.ModelRenormalise();\n\n\t// Keep symbols approximately frequency sorted\n\tvar sym = this.S[x];\n\tif (x > 0 && this.F[x] > this.F[x-1]) {\n\t    var tmp = this.F[x];\n\t    this.F[x] = this.F[x-1];\n\t    this.F[x-1] = tmp;\n\n\t    tmp = this.S[x];\n\t    this.S[x] = this.S[x-1];\n\t    this.S[x-1] = tmp;\n\t}\n    }\n};\n","var charenc = {\n  // UTF-8 encoding\n  utf8: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)));\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)));\n    }\n  },\n\n  // Binary encoding\n  bin: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      for (var bytes = [], i = 0; i < str.length; i++)\n        bytes.push(str.charCodeAt(i) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      for (var str = [], i = 0; i < bytes.length; i++)\n        str.push(String.fromCharCode(bytes[i]));\n      return str.join('');\n    }\n  }\n};\n\nmodule.exports = charenc;\n",null,null,null,null,null,null,null,null,"/*\n * Copyright (c) 2020 Genome Research Ltd.\n * Author(s): James Bonfield\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice,\n *       this list of conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above\n *       copyright notice, this list of conditions and the following\n *       disclaimer in the documentation and/or other materials provided\n *       with the distribution.\n *\n *    3. Neither the names Genome Research Ltd and Wellcome Trust Sanger\n *       Institute nor the names of its contributors may be used to endorse\n *       or promote products derived from this software without specific\n *       prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY GENOME RESEARCH LTD AND CONTRIBUTORS \"AS\n * IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GENOME RESEARCH\n * LTD OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n// This is an interface to the htscodecs reference implementation of\n// the CRAM 3.1 codecs.\n\n// This JavaScript file is not part of the reference implementation\n// and is simply and interface to get a consistent interface for cram-js.\n\n\"use strict\";\n\nvar r4x8    = require('./rans');\nvar r4x16   = require('./rans4x16');\nvar arith   = require('./arith_gen');\nvar fqzcomp = require('./fqzcomp');\nvar tok3    = require('./tok3');\n\nfunction r4x8_uncompress(inputBuffer, outputBuffer) {\n    r4x8.decode(inputBuffer).copy(outputBuffer, 0, 0);\n}\n\nfunction r4x16_uncompress(inputBuffer, outputBuffer) {\n    r4x16.decode(inputBuffer).copy(outputBuffer, 0, 0);\n}\n\nfunction arith_uncompress(inputBuffer, outputBuffer) {\n    arith.decode(inputBuffer).copy(outputBuffer, 0, 0);\n}\n\nfunction fqzcomp_uncompress(inputBuffer, outputBuffer) {\n    var q_lens = new Array\n    fqzcomp.decode(inputBuffer, q_lens).copy(outputBuffer, 0, 0);\n}\n\nfunction tok3_uncompress(inputBuffer, outputBuffer) {\n    // Returns in string form instead of buffer\n    var out = tok3.decode(inputBuffer, 0, '\\0');\n    Buffer.from(out, 'binary').copy(outputBuffer, 0, 0);\n}\n\nmodule.exports = {\n  r4x8_uncompress:    r4x8_uncompress,\n  r4x16_uncompress:   r4x16_uncompress,\n  arith_uncompress:   arith_uncompress,\n  fqzcomp_uncompress: fqzcomp_uncompress,\n  tok3_uncompress:    tok3_uncompress,\n};\n","/*\n * Copyright (c) 2019-2020 Genome Research Ltd.\n * Author(s): James Bonfield\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice,\n *       this list of conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above\n *       copyright notice, this list of conditions and the following\n *       disclaimer in the documentation and/or other materials provided\n *       with the distribution.\n *\n *    3. Neither the names Genome Research Ltd and Wellcome Trust Sanger\n *       Institute nor the names of its contributors may be used to endorse\n *       or promote products derived from this software without specific\n *       prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY GENOME RESEARCH LTD AND CONTRIBUTORS \"AS\n * IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GENOME RESEARCH\n * LTD OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nconst IOStream = require(\"./iostream\");\n\n//----------------------------------------------------------------------\n// rANS primitives itself\n//\n// RansGet* is decoder side\n\nfunction RansGetCumulativeFreq(R) {\n    return R & 0xfff;\n}\n\nfunction RansGetSymbolFromFreq(C, f) {\n    // NOTE: Inefficient.\n    // In practice we would implement this via a precomputed\n    // lookup table C2S[f]; see RansBuildC2S below.\n    var s = 0;\n    while (f >= C[s+1])\n\ts++;\n\n    return s;\n}\n\nfunction RansBuildC2S(C) {\n    var C2S = new Array(0x1000);\n    var s = 0;\n    for (var f = 0; f < 0x1000; f++) {\n\twhile (f >= C[s+1])\n\t    s++;\n\tC2S[f] = s;\n    }\n    return C2S;\n}\n\nfunction RansAdvanceStep(R, c, f) {\n    return f * (R >> 12) + (R & 0xfff) - c;\n}\n\nfunction RansRenorm(src, R) {\n    while (R < (1<<23))\n\tR = (R << 8) + src.ReadByte();\n\n    return R;\n}\n\n\n// RanEnc* is for encoder\nfunction RansEncInit() {\n    return 1<<23;\n}\n\nfunction RansEncFlush(R, dst) {\n    dst.WriteByteNeg((R >> 24) & 0xff);\n    dst.WriteByteNeg((R >> 16) & 0xff);\n    dst.WriteByteNeg((R >>  8) & 0xff);\n    dst.WriteByteNeg((R >>  0) & 0xff);\n}\n\nfunction RansEncRenorm(R, dst, freq, scale_bits) {\n    var R_max = (((1 << 23) >> scale_bits) << 8) * freq;\n\n    while (R >= R_max) {\n\tdst.WriteByteNeg(R & 0xff);\n\tR >>= 8;\n    }\n    return R;\n}\n\n// Puts a symbol with frequency freq, cumulative freq start\n// and total freq 1<<scale_bits.\n//\n// Note with static probabilities, /freq and %freq could be\n// precomputed via multiplies and shifts.\nfunction RansEncPut(R, dst, start, freq, scale_bits) {\n    var scale = 1<<scale_bits;\n    R = RansEncRenorm(R, dst, freq, scale_bits);\n    R = (Math.floor(R / freq) << scale_bits) + (R % freq) + start;\n    return R;\n}\n\n//----------------------------------------------------------------------\n// Main rANS entry function: decodes a compressed src and\n// returns the uncompressed buffer.\nfunction decode(src) {\n    var stream = new IOStream(src);\n    var order = stream.ReadByte();\n    var n_in  = stream.ReadUint32();\n    var n_out = stream.ReadUint32();\n\n    if (order == 0) {\n\treturn RansDecode0(stream, n_out)\n    } else {\n\treturn RansDecode1(stream, n_out)\n    }\n}\n\nfunction encode(src, order) {\n    //var stream = new IOStream(src);\n    //var n_in  = stream.ReadUint32();\n    //var n_out = stream.ReadUint32();\n\n    if (order == 0) {\n\treturn RansEncode0(src)\n    } else {\n\treturn RansEncode1(src)\n    }\n}\n\n//----------------------------------------------------------------------\n// Order-0 decoder\n\n// Decode a single table of order-0 frequences,\n// filling out the F and C arrays.\nfunction ReadFrequencies0(src, F, C) {\n    // Initialise; not in the specification - implicit?\n    for (var i = 0; i < 256; i++)\n\tF[i] = 0;\n\n    var sym = src.ReadByte();\n    var last_sym = sym;\n    var rle = 0;\n\n    // Read F[]\n    do {\n\tvar f = src.ReadITF8();\n\tF[sym] = f;\n\tif (rle > 0) {\n\t    rle--;\n\t    sym++;\n\t} else {\n\t    sym = src.ReadByte();\n\t    if (sym == last_sym+1)\n\t\trle = src.ReadByte();\n\t}\n\tlast_sym = sym;\n    } while (sym != 0);\n\n    // Compute C[] from F[]\n    C[0] = 0;\n    for (var i = 0; i <= 255; i++)\n\tC[i+1] = C[i] + F[i];\n}\n\nfunction RansDecode0(src, nbytes) {\n    // Decode frequencies\n    var F = new Array(256);\n    var C = new Array(256);\n    ReadFrequencies0(src, F, C);\n\n    // Fast lookup to avoid slow RansGetSymbolFromFreq\n    var C2S = RansBuildC2S(C);\n\n    // Initialise rANS state\n    var R = new Array(4);\n    for (var i = 0; i < 4; i++)\n\tR[i] = src.ReadUint32();\n\n    // Main decode loop\n    var output = new Buffer.allocUnsafe(nbytes);\n    for (var i = 0; i < nbytes; i++) {\n\tvar i4 = i%4;\n\tvar f = RansGetCumulativeFreq(R[i4]);\n\tvar s = C2S[f]; // Equiv to RansGetSymbolFromFreq(C, f);\n\n\toutput[i] = s;\n\tR[i4] = RansAdvanceStep(R[i4], C[s], F[s]);\n\tR[i4] = RansRenorm(src, R[i4]);\n    }\n\n    return output;\n}\n\n//----------------------------------------------------------------------\n// Order-0 encoder\n\nfunction BuildFrequencies0(src, F) {\n    for (var i = 0; i < 256; i++)\n\tF[i] = 0;\n\n    for (var i = 0; i < src.length; i++)\n\tF[src[i]]++;\n}\n\nfunction NormaliseFrequencies0(F) {\n    // Compute total\n    var tot = 0;\n    for (var i = 0; i < 256; i++)\n\ttot += F[i];\n\n    // Scale total of frequencies to max\n    const max = (1<<12);\n    var scale = max / tot;\n    do {\n\tvar max_val = 0;\n\tvar max_idx = 0;\n\tvar renorm = 0;\n\ttot = 0;\n\tfor (var i = 0; i < 256; i++) {\n\t    if (F[i] == 0)\n\t\tcontinue\n\n\t    if (max_val < F[i]) {\n\t\tmax_val = F[i]\n\t\tmax_idx = i\n\t    }\n\n\t    F[i] = Math.floor(F[i] * scale);\n\t    if (F[i] == 0)\n\t\tF[i] = 1;\n\n\t    tot += F[i];\n\t}\n\n\t// Adjust new tot to ensure it matches.\n\tif (tot < max) {\n\t    // Too low, boost the most common symbol\n\t    F[max_idx] += max-tot;\n\t} else if (tot-max < F[max_idx]/2 && F[max_idx] > 2) {\n\t    // Too high, reduce the common symbol\n\t    F[max_idx] -= tot-max;\n\t} else if (tot != max) {\n\t    // Much too high, fudge scale and try again.\n\t    scale = scale * 0.99\n\t    renorm = 1;\n\t}\n    } while (renorm)\n}\n\nfunction WriteFrequencies0(out, F) {\n    var rle = 0;\n    for (var i = 0; i < 256; i++) {\n\tif (!F[i])\n\t    continue\n\n\t// Output Symbol if needed and Frequency\n\tif (rle > 0)\n\t    rle--\n\telse {\n\t    out.WriteByte(i)\n\n\t    if (i > 0 && F[i-1] > 0) {\n\t\t// We've encoded two symbol frequencies in a row.\n\t\t// How many more are there?  Store that count so\n\t\t// we can avoid writing consecutive symbols.\n\t\tfor (rle = i+1; rle<256 && F[rle]; rle++)\n\t\t    ;\n\t\trle -= i+1;\n\n\t\tout.WriteByte(rle);\n\t    }\n\t}\n\n\tout.WriteITF8(F[i])\n    }\n    out.WriteByte(0);\n}\n\nfunction RansEncode0(src) {\n    const nbytes = src.length\n    var output = new IOStream(\"\", 0, 257*3+9);\n\n    output.WriteByte(0);   // Order 0\n    output.WriteUint32(0); // compressed size: correct later\n    output.WriteUint32(0); // uncompressed size: correct later\n\n    // Compute frequencies\n    var F = new Array(256)\n    BuildFrequencies0(src, F)\n    NormaliseFrequencies0(F);\n    WriteFrequencies0(output, F);\n\n    // Compute cumulative frequencies\n    var C = new Array(256)\n    C[0] = 0;\n    for (var i = 1; i < 256; i++)\n\tC[i] = C[i-1] + F[i-1];\n\n    // Initialise rANS state\n    var R = new Array(4);\n    for (var i = 0; i < 4; i++)\n\tR[i] = RansEncInit();\n\n    var alloc = Math.floor(nbytes*1.05+100)\n    var rans_out = new IOStream(\"\", alloc, alloc)\n\n    // Main encode loop\n    for (var i = nbytes-1; i >= 0; i--)\n\tR[i%4] = RansEncPut(R[i%4], rans_out, C[src[i]], F[src[i]], 12);\n\n    for (var i = 3; i >= 0; i--)\n\tRansEncFlush(R[i], rans_out);\n\n    // Stitch blocks together into final output buffer\n    var freq_tab = output.pos\n    output.buf.writeInt32LE(freq_tab-9 + (rans_out.length - rans_out.pos), 1);\n    output.buf.writeInt32LE(nbytes, 5);\n\n    return Buffer.concat([output.buf.slice(0, output.pos),\n\t\t\t  rans_out.buf.slice(rans_out.pos, rans_out.length)],\n\t\t\t output.pos + rans_out.length - rans_out.pos);\n}\n\n//----------------------------------------------------------------------\n// Order-1 decoder\n\n// Decode a table of order-1 frequences,\n// filling out the F and C arrays.\nfunction ReadFrequencies1(src, F, C) {\n    // Initialise; not in the specification - implicit?\n    for (var i = 0; i < 256; i++) {\n\tF[i] = new Array(256);\n\tC[i] = new Array(256);\n\tfor (var j = 0; j < 256; j++)\n\t    F[i][j] = 0;\n    }\n\n    var sym = src.ReadByte();\n    var last_sym = sym;\n    var rle = 0;\n\n    // Read F[]\n    do {\n\tReadFrequencies0(src, F[sym], C[sym]);\n\n\tif (rle > 0) {\n\t    rle--;\n\t    sym++;\n\t} else {\n\t    sym = src.ReadByte();\n\t    if (sym == last_sym+1)\n\t\trle = src.ReadByte();\n\t}\n\tlast_sym = sym;\n    } while (sym != 0);\n}\n\nfunction RansDecode1(src, nbytes) {\n    // Decode frequencies\n    var F = new Array(256);\n    var C = new Array(256);\n    ReadFrequencies1(src, F, C);\n\n    // Fast lookup to avoid slow RansGetSymbolFromFreq\n    var C2S = new Array(256);\n    for (var i = 0; i < 256; i++)\n\tC2S[i] = RansBuildC2S(C[i]);\n\n    // Initialise rANS state\n    var R = new Array(4);\n    var L = new Array(4);\n    for (var j = 0; j < 4; j++) {\n\tR[j] = src.ReadUint32();\n\tL[j] = 0;\n    }\n\n    // Main decode loop\n    var output = new Buffer.allocUnsafe(nbytes);\n    var nbytes4 = Math.floor(nbytes/4);\n    for (var i = 0; i < nbytes4; i++) {\n\tfor (var j = 0; j < 4; j++) {\n\t    var f = RansGetCumulativeFreq(R[j]);\n\n\t    //var s = RansGetSymbolFromFreq(C[L[j]], f);\n\t    var s = C2S[L[j]][f]; // Precomputed version of above\n\n\t    output[i+j*nbytes4] = s;\n\t    R[j] = RansAdvanceStep(R[j], C[L[j]][s], F[L[j]][s]);\n\t    R[j] = RansRenorm(src, R[j]);\n\t    L[j] = s;\n\t}\n    }\n\n    // Now deal with the remainder if buffer size is not a multiple of 4,\n    // using rANS state 3 exclusively.  (It'd have been nice to have\n    // designed this to just act as if we kept going with a bail out.)\n    i = 4*i;\n    while (i < nbytes) {\n\tvar f = RansGetCumulativeFreq(R[3]);\n\tvar s = RansGetSymbolFromFreq(C[L[3]], f);\n\toutput[i++] = s;\n\tR[3] = RansAdvanceStep(R[3], C[L[3]][s], F[L[3]][s]);\n\tR[3] = RansRenorm(src, R[3]);\n\tL[3] = s;\n    }\n\n    return output;\n}\n\n//----------------------------------------------------------------------\n// Order-1 encoder\n\nfunction BuildFrequencies1(src, F, F0) {\n    for (var i = 0; i < 256; i++) {\n\tF0[i] = 0;\n\tfor (var j = 0; j < 256; j++)\n\t    F[i][j] = 0;\n    }\n\n    var last = 0;\n    for (var i = 0; i < src.length; i++) {\n\tF0[src[i]]++;\n\tF[last][src[i]]++;\n\t//F[last][src[i]]++;\n\tlast = src[i];\n    }\n\n    // Also accept we'll be starting at 4 points, not just byte 0\n    F[0][src[1*(src.length >> 2)]]++;\n    F[0][src[2*(src.length >> 2)]]++;\n    F[0][src[3*(src.length >> 2)]]++;\n    F0[0] += 3;\n}\n\nfunction NormaliseFrequencies1(F, F0) {\n    for (var i = 0; i < 256; i++)\n\tif (F0[i])\n\t    NormaliseFrequencies0(F[i])\n}\n\nfunction WriteFrequencies1(out, F, F0) {\n    var rle = 0;\n    var last_sym = 0;\n\n    for (var i = 0; i < 256; i++) {\n\tif (!F0[i])\n\t    continue\n\n\t// Output Symbol if needed and Frequency\n\tif (rle > 0)\n\t    rle--\n\telse {\n\t    out.WriteByte(i)\n\n\t    if (i > 0 && F0[i-1] > 0) {\n\t\tfor (rle = i+1; rle<256 && F0[rle]; rle++)\n\t\t    ;\n\t\trle -= i+1;\n\t\tout.WriteByte(rle);\n\t    }\n\t}\n\n\tWriteFrequencies0(out, F[i]);\n    }\n    out.WriteByte(0);\n}\n\nfunction RansEncode1(src) {\n    const nbytes = src.length;\n    var output = new IOStream(\"\", 0, 257*257*3+9);\n\n    output.WriteByte(1);   // Order 0\n    output.WriteUint32(0); // compressed size: correct later\n    output.WriteUint32(0); // uncompressed size: correct later\n\n    // Compute frequencies\n    var F0 = new Array(256)\n    var F = new Array(256)\n    var C = new Array(256)\n    for (var i = 0; i < 256; i++) {\n\tF[i] = new Array(256);\n\tC[i] = new Array(256);\n    }\n\n    BuildFrequencies1(src, F, F0)\n    NormaliseFrequencies1(F, F0);\n    WriteFrequencies1(output, F, F0);\n\n    // Compute cumulative frequencies\n    for (var i = 0; i < 256; i++) {\n\tif (!F0[i])\n\t    continue;\n\n\tC[i][0] = 0;\n\tfor (var j = 1; j < 256; j++)\n\t    C[i][j] = C[i][j-1] + F[i][j-1];\n    }\n\n    // Initialise rANS state\n    var R = new Array(4);\n    var L = new Array(4);\n    for (var j = 0; j < 4; j++) {\n\tR[j] = RansEncInit();\n\tL[j] = 0;\n    }\n    var rans_out = new IOStream(\"\", nbytes, nbytes);\n\n    // We have 4 rans codecs running in parallel on its own 1/4tr of buffer\n    var nbytes4 = Math.floor(nbytes/4);\n    var idx = new Array(4);\n    var last = new Array(4)\n    for (var j = 0; j < 4; j++) {\n\tidx[j] = (j+1)*nbytes4 - 2;\n\tlast[j] = src[idx[j]+1]\n    }\n\n    // Deal with the remainder if not a multiple of 4\n    last[3] = src[nbytes-1];\n    for (var i = nbytes-2; i > 4*nbytes4-2; i--) {\n\tR[3] = RansEncPut(R[3], rans_out, C[src[i]][last[3]], F[src[i]][last[3]], 12);\n\tlast[3] = src[i];\n    }\n\n    // Main encode loop\n    while (idx[0] >= 0) {\n\tfor (var j = 3; j >= 0; j--) {\n\t    var s = src[idx[j]]\n\t    R[j] = RansEncPut(R[j], rans_out, C[s][last[j]], F[s][last[j]], 12);\n\t    last[j] = s;\n\t    idx[j]--;\n\t}\n    }\n\n    for (var j = 3; j >= 0; j--) {\n        R[j] = RansEncPut(R[j], rans_out, C[0][last[j]], F[0][last[j]], 12)\n    }\n\n    for (var i = 3; i >= 0; i--)\n\tRansEncFlush(R[i], rans_out);\n\n    // Stitch blocks together into final output buffer\n    var freq_tab = output.pos;\n    output.buf.writeInt32LE(freq_tab-9 + (rans_out.length - rans_out.pos), 1);\n    output.buf.writeInt32LE(nbytes, 5);\n\n    return Buffer.concat([output.buf.slice(0, output.pos),\n\t\t\t  rans_out.buf.slice(rans_out.pos, rans_out.length)],\n\t\t\t output.pos + rans_out.length - rans_out.pos);\n}\n\nmodule.exports = { decode, encode }\n","/*\nbzip2.js - a small bzip2 decompression implementation\n\nCopyright 2011 by antimatter15 (antimatter15@gmail.com)\n\nBased on micro-bunzip by Rob Landley (rob@landley.net).\n\nBased on bzip2 decompression code by Julian R Seward (jseward@acm.org),\nwhich also acknowledges contributions by Mike Burrows, David Wheeler,\nPeter Fenwick, Alistair Moffat, Radford Neal, Ian H. Witten,\nRobert Sedgewick, and Jon L. Bentley.\n\nI hereby release this code under the GNU Library General Public License\n(LGPL) version 2, available at http://www.gnu.org/copyleft/lgpl.html\n*/\n\nvar bzip2 = {};\n\nbzip2.array = function (bytes) {\n    var bit = 0,\n        byte = 0;\n    var BITMASK = [0, 0x01, 0x03, 0x07, 0x0F, 0x1F, 0x3F, 0x7F, 0xFF];\n    return function (n) {\n        var result = 0;\n        while (n > 0) {\n            var left = 8 - bit;\n            if (n >= left) {\n                result <<= left;\n                result |= (BITMASK[left] & bytes[byte++]);\n                bit = 0;\n                n -= left;\n            } else {\n                result <<= n;\n                result |= ((bytes[byte] & (BITMASK[n] << (8 - n - bit))) >> (8 - n - bit));\n                bit += n;\n                n = 0;\n            }\n        }\n        return result\n    }\n}\n\nbzip2.simple = function (bits) {\n    var size = bzip2.header(bits);\n    var all, chunk, chunks = [];\n    var index = 0;\n    do {\n        //all += chunk;\n        chunk = bzip2.decompress(bits, size);\n        //all.set(chunk, index);\n        if (chunk != -1) {\n            chunks.push(chunk);\n            index += chunk.byteLength;\n        }\n    } while (chunk != -1);\n    all = new Uint8Array(index);\n    index = 0;\n    for (var i = 0; i < chunks.length; ++i) {\n        chunk = chunks[i];\n        all.set(chunk, index);\n        index += chunk.byteLength;\n    }\n    return all;\n}\n\nbzip2.header = function (bits) {\n    if (bits(8 * 3) != 4348520)\n        throw \"No magic number found\";\n    var i = bits(8) - 48;\n    if (i < 1 || i > 9)\n        throw \"Not a BZIP archive\";\n    return i;\n};\n\n//takes a function for reading the block data (starting with 0x314159265359)\n//a block size (0-9) (optional, defaults to 9)\n//a length at which to stop decompressing and return the output\nbzip2.decompress = function (bits, size, len) {\n    var MAX_HUFCODE_BITS = 20;\n    var MAX_SYMBOLS = 258;\n    var SYMBOL_RUNA = 0;\n    var SYMBOL_RUNB = 1;\n    var GROUP_SIZE = 50;\n\n    var bufsize = 100000 * 9;\n    for (var h = '', i = 0; i < 6; i++)\n        h += bits(8).toString(16);\n    if (h == \"177245385090\")\n        return -1; //last block\n    if (h != \"314159265359\")\n        throw \"eek not valid bzip data\";\n    bits(32); //ignore CRC codes\n    if (bits(1))\n        throw \"unsupported obsolete version\";\n    var origPtr = bits(24);\n    if (origPtr > bufsize)\n        throw \"Initial position larger than buffer size\";\n    var t = bits(16);\n    var symToByte = new Uint8Array(256),\n        symTotal = 0;\n    for (i = 0; i < 16; i++) {\n        if (t & (1 << (15 - i))) {\n            var k = bits(16);\n            for (j = 0; j < 16; j++) {\n                if (k & (1 << (15 - j))) {\n                    symToByte[symTotal++] = (16 * i) + j;\n                }\n            }\n        }\n    }\n\n    var groupCount = bits(3);\n    if (groupCount < 2 || groupCount > 6)\n        throw \"another error\";\n    var nSelectors = bits(15);\n    if (nSelectors == 0)\n        throw \"meh\";\n    var mtfSymbol = []; //TODO: possibly replace JS array with typed arrays\n    for (var i = 0; i < groupCount; i++)\n        mtfSymbol[i] = i;\n    var selectors = new Uint8Array(32768);\n\n    for (var i = 0; i < nSelectors; i++) {\n        for (var j = 0; bits(1); j++)\n            if (j >= groupCount)\n                throw \"whoops another error\";\n        var uc = mtfSymbol[j];\n        mtfSymbol.splice(j, 1); //this is a probably inefficient MTF transform\n        mtfSymbol.splice(0, 0, uc);\n        selectors[i] = uc;\n    }\n\n    var symCount = symTotal + 2;\n    var groups = [];\n    for (var j = 0; j < groupCount; j++) {\n        var length = new Uint8Array(MAX_SYMBOLS),\n            temp = new Uint8Array(MAX_HUFCODE_BITS + 1);\n        t = bits(5); //lengths\n        for (var i = 0; i < symCount; i++) {\n            while (true) {\n                if (t < 1 || t > MAX_HUFCODE_BITS)\n                    throw \"I gave up a while ago on writing error messages\";\n                if (!bits(1))\n                    break;\n                if (!bits(1))\n                    t++;\n                else\n                    t--;\n            }\n            length[i] = t;\n        }\n        var minLen, maxLen;\n        minLen = maxLen = length[0];\n        for (var i = 1; i < symCount; i++) {\n            if (length[i] > maxLen)\n                maxLen = length[i];\n            else if (length[i] < minLen)\n                minLen = length[i];\n        }\n        var hufGroup;\n        hufGroup = groups[j] = {};\n        hufGroup.permute = new Uint32Array(MAX_SYMBOLS);\n        hufGroup.limit = new Uint32Array(MAX_HUFCODE_BITS + 1);\n        hufGroup.base = new Uint32Array(MAX_HUFCODE_BITS + 1);\n        hufGroup.minLen = minLen;\n        hufGroup.maxLen = maxLen;\n        var base = hufGroup.base.subarray(1);\n        var limit = hufGroup.limit.subarray(1);\n        var pp = 0;\n        for (var i = minLen; i <= maxLen; i++)\n            for (var t = 0; t < symCount; t++)\n                if (length[t] == i)\n                    hufGroup.permute[pp++] = t;\n        for (i = minLen; i <= maxLen; i++)\n            temp[i] = limit[i] = 0;\n        for (i = 0; i < symCount; i++)\n            temp[length[i]]++;\n        pp = t = 0;\n        for (i = minLen; i < maxLen; i++) {\n            pp += temp[i];\n            limit[i] = pp - 1;\n            pp <<= 1;\n            base[i + 1] = pp - (t += temp[i]);\n        }\n        limit[maxLen] = pp + temp[maxLen] - 1;\n        base[minLen] = 0;\n    }\n    var byteCount = new Uint32Array(256);\n    for (var i = 0; i < 256; i++)\n        mtfSymbol[i] = i;\n    var runPos, count, symCount, selector;\n    runPos = count = symCount = selector = 0;\n    var buf = new Uint32Array(bufsize);\n    while (true) {\n        if (!(symCount--)) {\n            symCount = GROUP_SIZE - 1;\n            if (selector >= nSelectors)\n                throw \"meow i'm a kitty, that's an error\";\n            hufGroup = groups[selectors[selector++]];\n            base = hufGroup.base.subarray(1);\n            limit = hufGroup.limit.subarray(1);\n        }\n        i = hufGroup.minLen;\n        j = bits(i);\n        while (true) {\n            if (i > hufGroup.maxLen)\n                throw \"rawr i'm a dinosaur\";\n            if (j <= limit[i])\n                break;\n            i++;\n            j = (j << 1) | bits(1);\n        }\n        j -= base[i];\n        if (j < 0 || j >= MAX_SYMBOLS)\n            throw \"moo i'm a cow\";\n        var nextSym = hufGroup.permute[j];\n        if (nextSym == SYMBOL_RUNA || nextSym == SYMBOL_RUNB) {\n            if (!runPos) {\n                runPos = 1;\n                t = 0;\n            }\n            if (nextSym == SYMBOL_RUNA)\n                t += runPos;\n            else\n                t += 2 * runPos;\n            runPos <<= 1;\n            continue;\n        }\n        if (runPos) {\n            runPos = 0;\n            if (count + t >= bufsize)\n                throw \"Boom.\";\n            uc = symToByte[mtfSymbol[0]];\n            byteCount[uc] += t;\n            while (t--)\n                buf[count++] = uc;\n        }\n        if (nextSym > symTotal)\n            break;\n        if (count >= bufsize)\n            throw \"I can't think of anything. Error\";\n        i = nextSym - 1;\n        uc = mtfSymbol[i];\n        mtfSymbol.splice(i, 1);\n        mtfSymbol.splice(0, 0, uc);\n        uc = symToByte[uc];\n        byteCount[uc]++;\n        buf[count++] = uc;\n    }\n    if (origPtr < 0 || origPtr >= count)\n        throw \"I'm a monkey and I'm throwing something at someone, namely you\";\n    var j = 0;\n    for (var i = 0; i < 256; i++) {\n        k = j + byteCount[i];\n        byteCount[i] = j;\n        j = k;\n    }\n    for (var i = 0; i < count; i++) {\n        uc = buf[i] & 0xff;\n        buf[byteCount[uc]] |= (i << 8);\n        byteCount[uc]++;\n    }\n    var pos = 0,\n        current = 0,\n        run = 0;\n    if (count) {\n        pos = buf[origPtr];\n        current = (pos & 0xff);\n        pos >>= 8;\n        run = -1;\n    }\n    count = count;\n    var output = new Uint8Array(bufsize);\n    var copies, previous, outbyte;\n    var index = 0;\n    if (!len)\n        len = Infinity;\n    while (count) {\n        count--;\n        previous = current;\n        pos = buf[pos];\n        current = pos & 0xff;\n        pos >>= 8;\n        if (run++ == 3) {\n            copies = current;\n            outbyte = previous;\n            current = -1;\n        } else {\n            copies = 1;\n            outbyte = current;\n        }\n        while (copies--) {\n            //output += (String.fromCharCode(outbyte));\n            output[index++] = outbyte;\n            //index++;\n            if (!--len)\n                return output;\n        }\n        if (current != previous)\n            run = 0;\n    }\n    //return output;\n    //return output.subarray(0,index-1);\n    return output.subarray(0, index);\n}\n\nmodule.exports = bzip2;\n","/*\n * Copyright (c) 2019 Genome Research Ltd.\n * Author(s): James Bonfield\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice,\n *       this list of conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above\n *       copyright notice, this list of conditions and the following\n *       disclaimer in the documentation and/or other materials provided\n *       with the distribution.\n *\n *    3. Neither the names Genome Research Ltd and Wellcome Trust Sanger\n *       Institute nor the names of its contributors may be used to endorse\n *       or promote products derived from this software without specific\n *       prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY GENOME RESEARCH LTD AND CONTRIBUTORS \"AS\n * IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GENOME RESEARCH\n * LTD OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nconst IOStream = require(\"./iostream\");\nconst ByteModel = require(\"./byte_model\");\nconst RangeCoder = require(\"./arith_sh\");\n\n\n//----------------------------------------------------------------------\n// Main arithmetic entry function: decodes a compressed src and\n// returns the uncompressed buffer.\n\nfunction read_array(src, tab, size) {\n    var j = 0; // array value\n    var z = 0; // array index: tab[j]\n    var last = -1;\n\n    // Remove first level of run-length encoding\n    var R = new Array(1024) // runs\n    while (z < size) {\n\tvar run = src.ReadByte()\n\tR[j++] = run\n\tz += run\n\n\tif (run == last) {\n\t    var copy = src.ReadByte()\n\t    z += run * copy\n\t    while (copy--)\n\t\tR[j++] = run\n\t}\n\tlast = run\n    }\n\n    // Now expand runs in R to tab, noting 255 is max run\n    var i = 0\n    j = 0\n    z = 0\n    while (z < size) {\n\tvar run_len = 0\n\tdo {\n\t    var part = R[j++]\n\t    run_len += part\n\t} while (part == 255)\n\t\n\twhile (run_len--)\n\t    tab[z++] = i;\n\ti++\n    }\n}\n\nconst QMAX = 256\n\nconst FLAG_DEDUP  = 2\nconst FLAG_FLEN   = 4\nconst FLAG_SEL    = 8    // whether selector is used in context\nconst FLAG_QMAP   = 16\nconst FLAG_PTAB   = 32\nconst FLAG_DTAB   = 64\nconst FLAG_QTAB   = 128\n\nconst GFLAG_MULTI_PARAM = 1\nconst GFLAG_HAVE_STAB   = 2\nconst GFLAG_DO_REV      = 4\n\n// Compute a new context from our current state and qual q\nfunction fqz_update_ctx(params, state, q) {\n    var last = params.context\n    state.qctx = ((state.qctx << params.qshift) + params.qtab[q]); // >>> 0\n    last += ((state.qctx & ((1<<params.qbits)-1)) << params.qloc); // >>> 0\n\n    if (params.do_pos)\n\tlast += params.ptab[Math.min(state.p, 1023)] << params.ploc\n\n    if (params.do_delta) {\n\tlast += params.dtab[Math.min(state.delta, 255)] << params.dloc\n\t// Is it better to use q here or qtab[q]?\n\t// If qtab[q] we can map eg [a-z0-9A-Z]->0 ,->1 and have\n\t// delta being a token number count into comma separated lists?\n\tstate.delta += (state.prevq != q) ? 1 : 0\n\tstate.prevq = q\n    }\n\n    if (params.do_sel)\n\tlast += state.s << params.sloc\n\n    state.p--\n\n    return last & 0xffff\n}\n\nfunction decode_fqz_single_param(src) {\n    var p = {} // params\n    \n    // Load FQZ parameters\n    p.context = src.ReadUint16()\n    p.pflags  = src.ReadByte()\n\n    p.do_dedup  = p.pflags & FLAG_DEDUP\n    p.fixed_len = p.pflags & FLAG_FLEN\n    p.do_sel    = p.pflags & FLAG_SEL\n    p.do_qmap   = p.pflags & FLAG_QMAP\n    p.do_pos    = p.pflags & FLAG_PTAB\n    p.do_delta  = p.pflags & FLAG_DTAB\n    p.do_qtab   = p.pflags & FLAG_QTAB\n\n    p.max_sym = src.ReadByte()\n\n    var x = src.ReadByte()\n    p.qbits  = x>>4\n    p.qshift = x&15\n    x = src.ReadByte()\n    p.qloc = x>>4\n    p.sloc = x&15\n    x = src.ReadByte()\n    p.ploc = x>>4\n    p.dloc = x&15\n\n    // Qual map, eg to \"unbin\" Illumina qualities\n    p.qmap = new Array(256);\n    if (p.pflags & FLAG_QMAP) {\n\tfor (var i = 0; i < p.max_sym; i++)\n\t    p.qmap[i] = src.ReadByte()\n    } else {\n\t// Useful optimisation to speed up main loop\n\tfor (var i = 0; i < 256; i++)\n\t    p.qmap[i] = i;  // NOP\n    }\n\n    // Read tables\n    p.qtab = new Array(1024);\n    if (p.qbits > 0 && (p.pflags & FLAG_QTAB)) {\n\tread_array(src, p.qtab, 256)\n    } else {\n\t// Useful optimisation to speed up main loop\n\tfor (var i = 0; i < 256; i++)\n\t    p.qtab[i] = i;  // NOP\n    }\n\n    p.ptab = new Array(1024);\n    if (p.pflags & FLAG_PTAB)\n\tread_array(src, p.ptab, 1024);\n\n    p.dtab = new Array(256);\n    if (p.pflags & FLAG_DTAB)\n\tread_array(src, p.dtab, 256);\n\n    return p\n}\n\nfunction decode_fqz_params(src) {\n    var gparams = {\n\tmax_sym: 0\n    }\n\n    // Check fqz format version\n    var vers = src.ReadByte()\n    if (vers != 5) {\n\tconsole.error(\"Invalid FQZComp version number\");\n\treturn;\n    }\n\n    var gflags = src.ReadByte()\n    var nparam = (gflags & GFLAG_MULTI_PARAM) ? src.ReadByte() : 1\n    var max_sel = gflags.nparam > 1 ? gflags.nparam-1 : 0 // Note max_sel, not num_sel\n\n    var stab = new Array(256);\n    if (gflags & GFLAG_HAVE_STAB) {\n\tmax_sel = src.ReadByte()\n\tread_array(src, stab, 256);\n    } else {\n\tfor (var i = 0; i < nparam; i++)\n\t    stab[i] = i;\n\tfor (; i < 256; i++)\n\t    stab[i] = nparam-1;\n    }\n    gparams.do_rev = (gflags & GFLAG_DO_REV)\n    gparams.stab = stab\n    gparams.max_sel = max_sel\n\n    gparams.params = new Array(gparams.nparam)\n    for (var p = 0; p < nparam; p++) {\n\tgparams.params[p] = decode_fqz_single_param(src)\n\tif (gparams.max_sym < gparams.params[p].max_sym)\n\t    gparams.max_sym = gparams.params[p].max_sym\n    }\n\n    return gparams\n}\n\nfunction fqz_create_models(gparams) {\n    var model = {}\n\n    model.qual = new Array(1<<16)\n    for (var i = 0; i < (1<<16); i++)\n\tmodel.qual[i] = new ByteModel(gparams.max_sym+1) // +1 as max value not num. values\n\n    model.len = new Array(4)\n    for (var i = 0; i < 4; i++)\n\tmodel.len[i] = new ByteModel(256)\n\n    model.rev   = new ByteModel(2)\n    model.dup   = new ByteModel(2)\n\n    if (gparams.max_sel > 0)\n\tmodel.sel = new ByteModel(gparams.max_sel+1) // +1 as max value not num. values\n\n    return model\n}\n\n// Initialise a new record, updating state.\n// Returns 1 if dup, otherwise 0\nfunction decode_fqz_new_record(src, rc, gparams, model, state, rev) {\n    // Parameter selector\n    if (gparams.max_sel > 0) {\n\tstate.s = model.sel.ModelDecode(src, rc)\n    } else {\n\tstate.s = 0;\n    }\n    state.x = gparams.stab[state.s]\n\n    var params = gparams.params[state.x]\n\n    // Reset contexts at the start of each new record\n    if (params.fixed_len >= 0) {\n\t// Not fixed or fixed but first record\n\tvar len = model.len[0].ModelDecode(src, rc)\n\tlen |= model.len[1].ModelDecode(src, rc) << 8\n\tlen |= model.len[2].ModelDecode(src, rc) << 16\n\tlen |= model.len[3].ModelDecode(src, rc) << 24\n\tif (params.fixed_len > 0)\n\t    params.fixed_len = -len\n    } else {\n\tlen = -params.fixed_len\n    }\n    state.len = len\n\n    if (gparams.do_rev)\n\trev[state.rec] = model.rev.ModelDecode(src, rc)\n\n    state.is_dup = 0\n    if (params.pflags & FLAG_DEDUP) {\n\tif (model.dup.ModelDecode(src, rc))\n\t    state.is_dup = 1\n    }\n\n    state.p = len;  // number of remaining bytes in this record\n    state.delta = 0\n    state.qctx = 0\n    state.prevq = 0\n    state.rec++\n}\n\nfunction decode_fqz(src, q_lens) {\n    // Decode parameter block\n    var n_out = src.ReadUint7()\n    var gparams = decode_fqz_params(src)\n    if (!gparams) return\n    var params = gparams.params\n    var rev = new Array(q_lens.length)\n\n    // Create initial models\n    var model = fqz_create_models(gparams)\n\n    // Create our entropy encoder and output buffers\n    var rc = new RangeCoder(src)\n    rc.RangeStartDecode(src)\n    var output = new Buffer.allocUnsafe(n_out)\n\n    // Internal FQZ state\n    var state = {\n\tqctx:0,   // Qual-only sub-context\n\tprevq:0,  // Previous quality value\n\tdelta:0,  // Running delta (q vs prevq)\n\tp:0,      // Number of bases left in current record\n\ts:0,      // Current parameter selector value (0 if unused)\n\tx:0,      // \"stab\" tabulated copy of s\n\tlen:0,    // Length of current string\n\tis_dup:0, // This string is a duplicate of last\n\trec:0     // Record number\n    }\n\n    // The main decode loop itself\n    var i = 0     // position in output buffer\n    while (i < n_out) {\n\tif (state.p == 0) {\n\t    decode_fqz_new_record(src, rc, gparams, model, state, rev)\n\t    if (state.is_dup > 0) {\n\t\tif (model.dup.ModelDecode(src, rc)) {\n\t\t    // Duplicate of last line\n\t\t    for (var x = 0; x < len; x++)\n\t\t\toutput[i+x] = output[i+x-state.len]\n\t\t    i += state.len\n\t\t    state.p = 0\n\t\t    continue\n\t\t}\n\t    }\n\t    q_lens.push(state.len)\n\n\t    var params = gparams.params[state.x]\n\t    var last = params.context\n\t}\n\n\t// Decode the current quality (possibly mapped via qmap)\n\tvar Q = model.qual[last].ModelDecode(src, rc)\n\n\t//if (params.do_qmap)\n\t//    output[i++] = params.qmap[Q];\n\t//else\n\t//    output[i++] = Q\n\toutput[i++] = params.qmap[Q]; // optimised version of above\n\tlast = fqz_update_ctx(params, state, Q)\n    }\n\n    if (gparams.do_rev)\n\treverse_qualities(output, n_out, rev, q_lens)\n\n    return output;\n}\n\nfunction reverse_qualities(qual, qual_len, rev, len) {\n    var rec = 0\n    var i = 0\n    while (i < qual_len) {\n\tif (rev[rec]) {\n\t    var j = 0\n\t    var k = len[rec]-1\n\t    while (j < k) {\n\t\tvar tmp   = qual[i+j]\n\t\tqual[i+j] = qual[i+k]\n\t\tqual[i+k] = tmp\n\t\tj++\n\t\tk--\n\t    }\n\t}\n\n\ti += len[rec++];\n    }\n}\n\nfunction decode(src, q_lens) {\n    var stream = new IOStream(src);\n\n    //var n_out = stream.ReadUint32(); stream.ReadUint32(); // move to main\n\n    return decode_fqz(stream, q_lens);\n}\n    \n//----------------------------------------------------------------------\n// FQZComp encoder.\n\nfunction pick_fqz_params(src, q_lens, q_dirs, qhist) {\n    // Find cardinality of q_dirs\n    var qd_last = q_dirs[0];\n    for (var i = 0; i < q_dirs.length; i++)\n\tif (q_dirs[i] != qd_last)\n\t    break;\n    var qd_fixed = (i == q_dirs.length) ? 1 : 0\n\n    // Scan input to find number of symbols and max symbol\n    var nsym = 0\n    var max_sym = 0\n\n    // selector == 0: Assume one single input dataset\n    for (var i = 0; i < 256; i++)\n\tqhist[0][i] = 0;\n\n    var rec = 0;\n    var len = 0\n    for (var i = 0; i < src.length; i++) {\n\tif (len == 0) {\n\t    len = q_lens[rec < q_lens.length-1 ? rec++ : rec]\n\t}\n\tqhist[0][src[i]]++;\n\tlen--;\n    }\n    for (var i = 0; i < 256; i++) {\n\tif (!qhist[0][i])\n\t    continue;\n\tif (max_sym < i)\n\t    max_sym = i;\n\tnsym++;\n    }\n\n    var qshift = 5\n    var do_qmap = 0\n    // Reduced symbol frequencies implies lower qshift and\n    // a lookup table to go from qual to Q\n    if (nsym <= 16) {\n\tdo_qmap = 1 // based on qhist\n\tif (nsym <= 2)\n\t    qshift = 1\n\telse if (nsym <= 4)\n\t    qshift = 2\n\telse if (nsym <= 8)\n\t    qshift = 3\n\telse\n\t    qshift = 4\n    }\n\n//    // Two params and a 1-bit selector.\n//    // This is 1% overhead vs two data sets compressed independently.\n//    // It's 6.9% smaller than compressing both together with 1 param.\n//    if (0) return [{\n//\t// q4\n//\tqbits:     8,\n//\tqshift:    2,\n//\tqloc:      7,\n//\n//\tpbits:     7,\n//\tpshift:    1,\n//\tploc:      0,\n//\n//\tdbits:     0,\n//\tdshift:    0,\n//\tdloc:      0,\n//\n//      sbits:     0,\n//      sloc:      0,\n//\n//\t//sbits:     2,\n//\t//do_stab:   1,\n//\tsbits:     1,\n//\tdo_stab:   0,\n//\tcontext:   (0<<15),\n//\n//\tmax_sym:   36,\n//\tnsym:      4,\n//\n//\tdo_qmap:   1,\n//\tdo_dedup:  0,\n//\tfixed_len: 1,\n//\tdo_sel:  0,\n//\tdo_rev:    0,\n//\tdo_pos:    1,\n//\tdo_delta:  0,\n//\tdo_qtab:   0\n//    }, {\n//\t//q40\n//\tqbits:     9,\n//\tqshift:    5,\n//\tqloc:      7,\n//\n//\tpbits:     7,\n//\tpshift:    0,\n//\tploc:      0,\n//\n//\tdbits:     0,\n//\tdshift:    0,\n//\tdloc:      0,\n//\n//      sbits:     0,\n//      sloc:      0,\n//\n//\t//sbits:     2,\n//\t//do_stab:   1,\n//\tsbits:     1,\n//\tdo_stab:   0,\n//\tcontext:   (1<<15),\n//\n//\tmax_sym:   44,\n//\tnsym:      45,\n//\n//\tdo_qmap:   0,\n//\tdo_dedup:  0,\n//\tfixed_len: 1,\n//\tdo_sel:  0,\n//\tdo_rev:    0,\n//\tdo_pos:    1,\n//\tdo_delta:  0,\n//\tdo_qtab:   0\n//    }]\n\n    return [{qbits:     8+(qshift>4),\n\t     qshift:    qshift,\n\t     qloc:      7,\n\n\t     pbits:     7,\n\t     pshift:    q_lens[0] > 128 ? 1 : 0,\n\t     ploc:      0,\n\n\t     dbits:     qshift>4 ? 0 : 1,\n\t     dshift:    3,\n\t     dloc:      15,\n\n\n\t     // NB: Also useful as a way of embedding sel and doing sel\n\t     // specific contexts. Identical bar context. Eg 0<<15 or 1<<15.\n\t     sbits:     0,\n\t     sloc:      15,\n\t     do_stab:   0,\n\t     context:   (0<<15),\n\n\t     max_sym:   max_sym,\n\t     nsym:      nsym,\n\n\t     do_qmap:   do_qmap,\n\t     do_dedup:  0,\n\t     fixed_len: (q_lens.length == 1) ? 1 : 0,\n\t     do_sel:    0,\n\t     do_rev:    0,\n\t     do_pos:    1,\n\t     do_delta:  (qshift <= 4) ? 1 : 0,\n\t     do_qtab:   0,\n\n\t     // Override above with some attempt at using selectors\n\t     // when the q_dirs are specific and non-fixed.\n\t     qbits:     8+(qshift>4)-(qd_fixed==0),\n\t     sbits:     1,\n\t     sloc:      15-(qshift<=4), // read1 vs read2\n\t     do_stab:   1,\n\t     do_sel:    1,\n\t     \n//\t     // q4+dir: 7245769 with, 7353962 without. 1.5% saving\n//\t     qbits:     6,\n//\t     dbits:     2,\n//\t     dshift:    2,\n//\t     dloc:      13,\n//\t     sbits:     1,\n//\t     sloc:      15,\n//\t     do_stab:   1,\n//\t     do_sel:    1,\n\n\t     // with 20 bits of context, q40 = 31741545\n\t     // qbits 10, dbits 2, pbits 7, sbits 1\n\t    }]\n}\n\nfunction store_array(out, tab, size) {\n    var i = 0; // index into tab\n    var j = 0; // current value in tab[i]\n\n    var tmp1 = new Array(size*2);\n    var sz1 = 0;\n\n    // First level of RLE.  Replace all runs of 'j' values\n    // with run-lengths, including zeros for missing values.\n    // Eg 0 1 2 2 2 3 3 3 4 4 4 5 5 5 5   7 7\n    // to 1 1 3     3     3     4       0 2\n    while (i < size) {\n\t// Length of j^{th} element\n\tvar i_start = i\n\twhile (i < size && tab[i] == j)\n\t    i++;\n\tvar run_len = i - i_start\n\n\t// Encode run length to tmp array\n\tdo {\n\t    var r = Math.min(255, run_len)\n\t    tmp1[sz1++] = r\n\t    run_len -= r\n\t} while (r == 255)\n\tj++;\n    }\n\n    // Second round of RLE on our tmp array, using a different\n    // RLE algorithm.\n    // Eg 1 1    3 3  3 4 0 2\n    // to 1 1 +0 3 3 +1 4 0 2\n    var last = -1\n    var tmp2 = new Array(size*2)\n    var sz2 = 0\n    i = 0  // index into tmp1]\n    // k is used size of tmp1[]\n    while (i < sz1) {\n\tvar curr = tmp1[i++];\n\ttmp2[sz2++] = curr\n\tif (curr == last) {\n\t    var i_start = i;\n\t    while (i < sz1 && tmp1[i] == last && i - i_start < 255)\n\t\ti++;\n\t    tmp2[sz2++] = i - i_start;\n\t} else {\n\t    last = curr\n\t}\n    }\n\n    // Append 2nd RLE, tmp2, to out.\n    out.WriteData(tmp2, sz2)\n}\n\n\t\t\t\t     \n\n// q_lens is an array of quality lengths per record.\n// (If they're all the same, just set one value.)\nfunction encode_fqz_params(out, params, qhist, qtab, ptab, dtab, stab) {\n    var dsqr = [\n        0, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3,\n        4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5,\n        5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,\n        6, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7\n    ]\n\n    for (var i = 0; i < params.length; i++)\n\tstab[i] = i; // 1 parameter set per selector value\n    for (; i < 256; i++)\n\tstab[i] = params.length-1;\n\n    // Store global meta-data\n    out.WriteByte(5);            // FQZ format number\n    var gflags = ((params.length > 1) ? GFLAG_MULTI_PARAM : 0)\n\t       | ((params[0].do_stab) ? GFLAG_HAVE_STAB   : 0)\n    out.WriteByte(gflags)\n\n    if (gflags & GFLAG_MULTI_PARAM)\n\tout.WriteByte(params.length) // Number of parameter blocks.\n\n    if (gflags & GFLAG_HAVE_STAB) {\n\tvar max_sel = 1<<params[0].sbits;\n\tif (max_sel > 0) max_sel--;\n\tout.WriteByte(max_sel)\n\tstore_array(out, stab, 256)\n    }\n\n    // Store per-param meta-data\n    for (var p = 0; p < params.length; p++) {\n\tout.WriteUint16(params[p].context)\n\tout.WriteByte((params[p].do_qtab  ? FLAG_QTAB  : 0) |  // FLAG\n\t\t      (params[p].do_delta ? FLAG_DTAB  : 0) |\n\t\t      (params[p].do_pos   ? FLAG_PTAB  : 0) |\n\t\t      (params[p].do_qmap  ? FLAG_QMAP  : 0) |\n\t\t      (params[p].do_sel   ? FLAG_SEL   : 0) |\n\t\t      (params[p].fixed_len? FLAG_FLEN  : 0) |\n\t\t      (params[p].do_dedup ? FLAG_DEDUP : 0))\n\tif (params[p].do_qmap)\n\t    out.WriteByte(params[p].nsym)\n\telse\n\t    out.WriteByte(params[p].max_sym)\n\tout.WriteByte((params[p].qbits << 4) | (params[p].qshift))\n\tout.WriteByte((params[p].qloc  << 4) | (params[p].sloc))\n\tout.WriteByte((params[p].ploc  << 4) | (params[p].dloc))\n\n\tif (params[p].do_qmap) {\n\t    params[p].max_sym = params[p].nsym\n\t    var n = 0;\n\t    for (var i = 0; i < 256; i++) {\n\t\tif (qhist[p][i]) {\n\t\t    out.WriteByte(i)\n\t\t    qhist[p][i] = n++;\n\t\t}\n\t    }\n\t    // Ensure we have all matched input params\n\t    for (; n < params[p].nsym; n++)\n\t\tout.WriteByte(0)\n\t} else {\n\t    //params[p].nsym = 255;\n\t    for (var i = 0; i < 256; i++)\n\t\tqhist[p][i] = i; // NOP\n\t}\n\n\tif (params[p].qbits > 0) {\n\t    //\t// Eg map 0-44 to a smaller range, to improve context usage.\n\t    //\t// Makes q40 test set go from 33596471 to 33450075 (-0.4%)\n\t    //\tparams[p].do_qtab = 1;\n\t    //\tfor (var j = i = 0; i < params[p].max_sym; i++) {\n\t    //\t    qtab[i]=j;\n\t    //\t    if ((i%3)!=0 | i >= 28) j++\n\t    //\t    console.log(\"qtab[\",i,\"]=\",qtab[i]);\n\t    //\t}\n\t    //\tfor (; i < 256; i++)\n\t    //\t    qtab[i] = qtab[params[p].max_sym-1]\n\n\t    for (var i = 0; i < 256; i++)\n\t\tqtab[p][i] = i; // NOP for now\n\n\t    if (params[p].do_qtab)\n\t\tstore_array(out, qtab[p], 256)\n\t}\n\n\tif (params[p].pbits > 0) {\n\t    for (var i = 0; i < 1024; i++)\n\t\tptab[p][i] = Math.min((1<<params[p].pbits)-1, i >> params[p].pshift)\n\n\t    store_array(out, ptab[p], 1024)\n\t}\n\n\tif (params[p].dbits > 0) {\n\t    for (var i = 0; i < 256; i++)\n\t\tif (dsqr[i] > (1<<params[p].dbits) - 1)\n\t\t    dsqr[i] = (1<<params[p].dbits) - 1\n\t    for (var i = 0; i < 256; i++)\n\t\tdtab[p][i] = dsqr[Math.min(dsqr.length-1, i >> params[p].dshift)]\n\n\t    store_array(out, dtab[p], 256)\n\t}\n    }\n\n    return out\n}\n\nfunction encode_fqz(out, src, q_lens, q_dirs, params, qhist, qtab, ptab, dtab, stab) {\n    //console.error(\"0:\",params[0])\n    //console.error(\"1:\",params[1])\n\n    var max_sel = 1<<params[0].sbits\n    if (max_sel > 0) max_sel--\n    var n_in = src.length\n\n    // Create the models\n    var max_sym = 0;\n    for (var p = 0; p < params.length; p++)\n\tif (max_sym < params[p].max_sym)\n\t    max_sym = params[p].max_sym;\n\n    var model_qual = new Array(1<<16)\n    for (var i = 0; i < (1<<16); i++)\n\tmodel_qual[i] = new ByteModel(max_sym+1)\n\n    var model_len = new Array(4)\n    for (var i = 0; i < 4; i++)\n\tmodel_len[i] = new ByteModel(256)\n\n    var model_rev    = new ByteModel(2)\n    var model_dup    = new ByteModel(2)\n    var model_sel    = new ByteModel(max_sel+1)\n\n    // Note: our JavaScript encoder doesn't have a way for reversing\n    // some quality strings, so we ignore do_rev for now.\n    var rc = new RangeCoder(src)\n\n    // The main encoding loop\n    var p = 0; // remaining position along current record\n    var i = 0; // index in src data\n    var rec = 0;\n\n    while (i < n_in) {\n\tif (p == 0) {\n\t    //var s = 0 // single non-mixed sample\n\t    var s = q_dirs[rec]\n\t    if (params[0].sbits > 0) {// FIXME: check All params[].do_stab / sbits must be identical\n\t\t//console.log(\"Ssel\", s)\n\t        model_sel.ModelEncode(out, rc, s)\n\t    }\n\t    var x = stab[s]\n\n\t    // Reset contexts at the statr of each new record\n\t    var len = q_lens[Math.min(q_lens.length-1, rec++)]\n\t    if (params[x].fixed_len) {\n\t\tif (params[x].fixed_len > 0) { // First length\n\t\t    //console.log(\"Len\", len)\n\t\t    model_len[0].ModelEncode(out, rc, len       & 0xff)\n\t\t    model_len[1].ModelEncode(out, rc, (len>>8)  & 0xff)\n\t\t    model_len[2].ModelEncode(out, rc, (len>>16) & 0xff)\n\t\t    model_len[3].ModelEncode(out, rc, (len>>24) & 0xff)\n\t\t    params[x].fixed_len = -1; // indicate we've stored it once\n\t\t}\n\t    } else {\n\t\t//console.log(\"len\", len)\n\t\tmodel_len[0].ModelEncode(out, rc, len       & 0xff)\n\t\tmodel_len[1].ModelEncode(out, rc, (len>>8)  & 0xff)\n\t\tmodel_len[2].ModelEncode(out, rc, (len>>16) & 0xff)\n\t\tmodel_len[3].ModelEncode(out, rc, (len>>24) & 0xff)\n\t    }\n\n\t    if (params[x].do_dedup)\n\t\tprocess.exit(1) // FIXME\n\n\t    p = len\n\t    var delta = 0\n\t    //var last  = 0\n\t    var last  = params[x].context\n\t    var qlast = 0\n\t    var q1    = 0\n\t}\n\n\t// Encode current quality\n\tvar q = src[i++]\n\tvar Q = qhist[x][q]\n\tmodel_qual[last].ModelEncode(out, rc, Q)\n\t//console.log(\"Ctx\",last,qhist[x][q])\n\n\t// Update contexts for next quality\n\tqlast = (qlast << params[x].qshift) + qtab[x][Q]\n\tlast  = params[x].context\n\tlast += (qlast & ((1<<params[x].qbits)-1)) << params[x].qloc\n\n\t// 46.6-48.6 billion cycles with ifs + \"<< params[x].?loc\" shifts\n\t// 47.3-47.3 billion cycles with ifs\n\t// 47.1-47.9 billion cycles without ifs\n\tif (params[x].pbits > 0)\n\t    last += ptab[x][Math.min(p, 1023)] << params[x].ploc\n\n\tif (params[x].dbits > 0) {\n\t    last += dtab[x][Math.min(delta, 255)] << params[x].dloc\n\t    delta += (q1 != Q) ? 1 : 0\n\t    q1 = Q\n\t}\n\n\tif (params[x].do_sel)\n\t    last += s << params[x].sloc\n\n\tlast = (last & 0xffff)\n\tp--\n    }\n\n    rc.RangeFinishEncode(out)\n    return out.buf.slice(0, out.pos)\n}\n\nfunction encode(src, q_lens, q_dirs) {\n    var qhist = new Array(2)\n    var qtab  = new Array(2)\n    var ptab  = new Array(2)\n    var dtab  = new Array(2)\n    var stab  = new Array(256)\n\n    for (var s = 0; s < 2; s++) {\n        qhist[s] = new Array(256)\n        qtab[s]  = new Array(256)\n        ptab[s]  = new Array(1024) \n        dtab[s]  = new Array(256)\n    }\n\n    var out = new IOStream(\"\", 0, src.length*1.1 + 100); // FIXME: guestimate worst case\n\n    out.WriteUint7(src.length);\n    var params = pick_fqz_params(src, q_lens, q_dirs, qhist)\n    var out = encode_fqz_params(out, params, qhist, qtab, ptab, dtab, stab)\n    return encode_fqz(out, src, q_lens, q_dirs, params, qhist, qtab, ptab, dtab, stab)\n}\n\nmodule.exports = { decode, encode }\n","/*\n * Copyright (c) 2019 Genome Research Ltd.\n * Author(s): James Bonfield\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice,\n *       this list of conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above\n *       copyright notice, this list of conditions and the following\n *       disclaimer in the documentation and/or other materials provided\n *       with the distribution.\n *\n *    3. Neither the names Genome Research Ltd and Wellcome Trust Sanger\n *       Institute nor the names of its contributors may be used to endorse\n *       or promote products derived from this software without specific\n *       prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY GENOME RESEARCH LTD AND CONTRIBUTORS \"AS\n * IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GENOME RESEARCH\n * LTD OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n// Name tokeniser\n//\n// This is a reference implementation designed to match the\n// written specification as closely as possible.  It is *NOT*\n// an efficient implementation, but see comments below.\n\nconst IOStream  = require(\"./iostream\");\nconst rans      = require(\"./rans4x16\");\nconst arith_gen = require(\"./arith_gen\");\n\nvar arith = new arith_gen()\n\nconst TOK_TYPE    = 0\nconst TOK_STRING  = 1\nconst TOK_CHAR    = 2\nconst TOK_DIGITS0 = 3\nconst TOK_DZLEN   = 4\nconst TOK_DUP     = 5\nconst TOK_DIFF    = 6\nconst TOK_DIGITS  = 7\nconst TOK_DELTA   = 8\nconst TOK_DELTA0  = 9\nconst TOK_MATCH   = 10\nconst TOK_NOP     = 11\nconst TOK_END     = 12\n\n//----------------------------------------------------------------------\n// Token byte streams\nfunction DecodeTokenByteStreams(src, in_size, use_arith, nnames) {\n    var t = -1\n\n    var B = new Array(256)\n\n    while (!src.EOF()) {\n\tvar ttype = src.ReadByte()\n\tvar tok_new = ttype & 128\n\tvar tok_dup = ttype & 64\n\tvar type    = ttype & 63\n\n\tif (tok_new) {\n\t    t++\n\t    B[t] = new Array(13)\n\t}\n\n\tif (type != TOK_TYPE && tok_new) {\n\t    var M = new Array(nnames-1).fill(TOK_MATCH)\n\t    B[t][TOK_TYPE] = new IOStream(Buffer.from([type].concat(M)))\n        }\n\n\tif (tok_dup) {\n\t    var dup_pos  = src.ReadByte()\n\t    var dup_type = src.ReadByte()\n\t    B[t][type] = new IOStream(B[dup_pos][dup_type].buf)\n\t} else {\n\t    var clen = src.ReadUint7()\n\t    var data = src.ReadData(clen)\n\n\t    if (use_arith)\n\t\tB[t][type] = arith.decode(data)\n\t    else\n\t\tB[t][type] = rans.decode(data)\n\t    B[t][type] = new IOStream(B[t][type])\n\t}\n    }\n\n    return B\n}\n\n//----------------------------------------------------------------------\n// Token decode\nfunction LeftPadNumber(val, len) {\n    var str = val+\"\"\n    while (str.length < len)\n\tstr = \"0\" + str\n\n    return str\n}\n\nfunction DecodeSingleName(B, N, T, n) {\n    var type = B[0][TOK_TYPE].ReadByte()\n    var dist = B[0][type].ReadUint32()\n    var m = n - dist\n\n    if (type == TOK_DUP) {\n\tN[n] = N[m]\n\tT[n] = T[m]\n\treturn N[n]\n    }\n    \n    var t = 1\n    N[n] = \"\"\n    T[n] = new Array(256)\n    do {\n\ttype = B[t][TOK_TYPE].ReadByte()\n\n\tswitch(type) {\n\tcase TOK_CHAR:\n\t    T[n][t] = B[t][TOK_CHAR].ReadChar()\n\t    break\n\n\tcase TOK_STRING:\n\t    T[n][t] = B[t][TOK_STRING].ReadString()\n\t    break\n\t\n\tcase TOK_DIGITS:\n\t    T[n][t] = B[t][TOK_DIGITS].ReadUint32()\n\t    break\n\n\tcase TOK_DIGITS0:\n\t    var d = B[t][TOK_DIGITS0].ReadUint32()\n\t    var l = B[t][TOK_DZLEN].ReadByte()\n\t    T[n][t] = LeftPadNumber(d, l)\n\t    break\n\n\tcase TOK_DELTA:\n\t    T[n][t] = (T[m][t]>>0) + B[t][TOK_DELTA].ReadByte()\n\t    break\n\n\tcase TOK_DELTA0:\n\t    var d = (T[m][t]>>0) + B[t][TOK_DELTA0].ReadByte()\n\t    var l = T[m][t].length\n\t    T[n][t] = LeftPadNumber(d, l)\n\t    break\n\n\tcase TOK_MATCH:\n\t    T[n][t] = T[m][t]\n\t    break\n\n\tdefault:\n\t    T[n][t] = \"\"\n\t    break\n\t}\n\n\tN[n] += T[n][t++]\n    } while (type != TOK_END)\n\n    return N[n]\n}\n\n//----------------------------------------------------------------------\n// Main tokeniser decode entry function: decodes a compressed src and\n// returns the uncompressed buffer.\nfunction decode(src, len, separator) {\n    var src = new IOStream(src)\n    var ulen = src.ReadUint32()\n    var nnames = src.ReadUint32()\n    var use_arith = src.ReadByte()\n\n    var B = DecodeTokenByteStreams(src, len, use_arith, nnames)\n    var N = new Array(nnames)\n    var T = new Array(nnames)\n\n    var str = \"\"\n    if (typeof separator === 'undefined')\n\tseparator = '\\n'\n    for (var i = 0; i < nnames; i++)\n\tstr += DecodeSingleName(B, N, T, i) + separator\n\n    return str\n}\n\n//----------------------------------------------------------------------\n// Main tokeniser encode function\n\n// Encoder is trickier than decode as we have a lot of decisions to make.\n// However here we just make a simple guess without anything complex,\n// to demonstrate the basic idea.  See the C implementation for further\n// expansion on this.\nfunction encode(src, use_arith) {\n    // Convert buffer to array of names\n    var str = src.toString()\n    if (str[str.length-1] == '\\n')\n\tstr = str.substring(0,str.length-1)\n    var names = str.split(\"\\n\")\n\n    var out = new IOStream(\"\", 0, str.length*2 + 10000) // guess max size\n    out.WriteUint32(str.length)\n    out.WriteUint32(names.length)\n    out.WriteByte(use_arith)\n\n    // Tokenise names\n    var T = new Array(names.length)\n    var H = {}\n    var F = new Array(256).fill(0) // DELTA vs DIGIT frequency\n    var max_tok = 0\n    var max_len = 0\n    for (var i = 0; i < names.length; i++) {\n\tvar [ntok,len] = TokeniseName(T, H, F, names[i], i)\n\tif (max_tok < ntok)\n\t    max_tok = ntok\n\tif (max_len < len)\n\t    max_len = len\n    }\n\n    // Convert tokens to byte streams and serialise\n    for (var tnum = 0; tnum < max_tok; tnum++) {\n\tvar B = new Array(TOK_END+1)\n\tfor (var type = 0; type <= TOK_END; type++)\n\t    B[type] = new IOStream(\"\", 0, names.length * max_len)\n\n\tFillByteStreams(B, T, tnum, names, max_tok, max_len)\n\tSerialiseByteStreams(B, tnum, use_arith, out)\n    }\n\n    return out.buf.slice(0, out.pos)\n}\n\nfunction FillByteStreams(B, T, tnum, names, max_tok, max_len) {\n    // Create byte streams B[]\n    for (var n = 0; n < names.length; n++) {\n\tif (tnum > 0 && T[n][0].type == TOK_DUP)\n\t    continue\n\n\tif (!T[n][tnum])\n\t    continue\n\n\tB[TOK_TYPE].WriteByte(T[n][tnum].type)\n\n\tswitch (T[n][tnum].type) {\n\tcase TOK_DIFF:\n\t    B[TOK_DIFF].WriteUint32(T[n][tnum].val)\n\t    break\n\n\tcase TOK_DUP:\n\t    B[TOK_DUP].WriteUint32(T[n][tnum].val)\n\t    break\n\n\tcase TOK_STRING:\n\t    B[TOK_STRING].WriteString(T[n][tnum].val)\n\t    break\n\n\tcase TOK_CHAR:\n\t    B[TOK_CHAR].WriteChar(T[n][tnum].val)\n\t    break\n\n\tcase TOK_DIGITS:\n\t    B[TOK_DIGITS].WriteUint32(T[n][tnum].val)\n\t    break\n\n\tcase TOK_DIGITS0:\n\t    B[TOK_DIGITS0].WriteUint32(T[n][tnum].val)\n\t    B[TOK_DZLEN].WriteByte(T[n][tnum].val.length)\n\t    break\n\n\tcase TOK_DELTA:\n\t    B[T[n][tnum].type].WriteByte(T[n][tnum].val)\n\t    break\n\n\tcase TOK_DELTA0:\n\t    B[T[n][tnum].type].WriteByte(T[n][tnum].val)\n\t    break\n\t}\n    }\n}\n\nfunction SerialiseByteStreams(B, tnum, use_arith, out) {\n    // Compress and serialise byte streams B[]\n    for (var type = 0; type <= TOK_END; type++) {\n\tif (B[type].pos <= 0)\n\t    continue\n\n\tout.WriteByte(type + ((type == 0) ? 128 : 0))\n\n\t// IOStream to sized buffer\n\tB[type] = B[type].buf.slice(0, B[type].pos)\n\tvar comp = try_compress(B[type], use_arith)\n\n\tout.WriteUint7(comp.length)\n\tout.WriteData(comp, comp.length)\n    }\n}\n\nfunction try_compress(src, use_arith) {\n    var best = 1<<30\n    var comp\n\n    var methods = [0, 1, 64, 65, 128, 129, 193+8]\n    for (var i in methods) {\n\tvar lvl = methods[i]\n\tif ((lvl & 1) && src.length < 100)\n\t    continue\n\n\tif ((lvl & 8) && (src.length % 4) != 0)\n\t    continue\n\n\ttry {\n\t    var tmp = use_arith\n\t\t? arith.encode(src, lvl)\n\t\t: rans.encode(src, lvl)\n\t} catch (e) {\n\t    var tmp = 0\n\t}\n\tif (tmp && best > tmp.length) {\n\t    best = tmp.length\n\t    comp = tmp\n\t}\n    }\n\n    return comp\n}\n\nfunction TokeniseName(T, H, F, name, n) {\n    var max_len = 0\n\n    // Always compare against last name only\n    var p = n-1\n    T[n] = new Array(256)\n\n    if (H[name]) {\n\t//console.error(name,H[name],n)\n\tT[n][0] = {\n\t    type: TOK_DUP,\n\t    val:  n - H[name]\n\t}\n    } else {\n\tT[n][0] = {\n\t    type: TOK_DIFF,\n\t    val:  n == 0 ? 0 : 1\n\t}\n    }\n\n    H[name] = n\n\n    // Splits on alphanumerics, punctuation\n    var tok = name.match(/([a-zA-Z0-9]{1,9})|([^a-zA-Z0-9]+)/g)\n    for (var i = 0; i < tok.length; i++) {\n\tvar t = i+1 // token 0 = DIFF vs DUP\n\tvar type = TOK_STRING\n\tvar val = tok[i]\n\tif (tok[i].match(/^0+[0-9]*$/g))\n\t    type = TOK_DIGITS0\n\telse if (tok[i].match(/^[0-9]+$/g))\n\t    type = TOK_DIGITS\n\telse if (tok[i].length == 1)\n\t    type = TOK_CHAR\n\n\tif (p >= 0 && T[p][t]) {\n\t    if (T[p][t].str == tok[i]) {\n\t\ttype = TOK_MATCH\n\t\tval = \"\"\n\t    } else if (T[p][t].type == TOK_DIGITS || T[p][t].type == TOK_DELTA) {\n\t\tvar d = val - T[p][t].str;\n\t\tF[t]++\n\t\tif (d >= 0 && d < 256 && F[t] > n/2) {\n\t\t    type = TOK_DELTA\n\t\t    val = d\n\t\t}\n\t    } else if ((T[p][t].type == TOK_DIGITS0 || T[p][t].type == TOK_DELTA0)\n\t\t       && T[p][t].str.length == val.length) {\n\t\tvar d = val - T[p][t].str;\n\t\tF[t]++\n\t\tif (d >= 0 && d < 256 && F[t] > n/2) {\n\t\t    type = TOK_DELTA0\n\t\t    val = d\n\t\t}\n\t    }\n\t}\n\n\tT[n][t] = {\n\t    str:  tok[i],\n\t    val:  val,\n\t    type: type\n\t}\n\n\tif (max_len < T[n][t].val.length+3)  // +3 for integers; 5 -> (Uint32)5\n\t    max_len = T[n][t].val.length+3\n\n\t//console.error(t,T[n][t])\n    }\n    T[n][++t] = {\n\ttype: TOK_END\n    }\n\n    return [t+1, max_len]\n}\n\nmodule.exports = { encode, decode }\n",null,"(function(){\r\n  var crypt = require('crypt'),\r\n      utf8 = require('charenc').utf8,\r\n      isBuffer = require('is-buffer'),\r\n      bin = require('charenc').bin,\r\n\r\n  // The core\r\n  md5 = function (message, options) {\r\n    // Convert to byte array\r\n    if (message.constructor == String)\r\n      if (options && options.encoding === 'binary')\r\n        message = bin.stringToBytes(message);\r\n      else\r\n        message = utf8.stringToBytes(message);\r\n    else if (isBuffer(message))\r\n      message = Array.prototype.slice.call(message, 0);\r\n    else if (!Array.isArray(message) && message.constructor !== Uint8Array)\r\n      message = message.toString();\r\n    // else, assume byte array already\r\n\r\n    var m = crypt.bytesToWords(message),\r\n        l = message.length * 8,\r\n        a =  1732584193,\r\n        b = -271733879,\r\n        c = -1732584194,\r\n        d =  271733878;\r\n\r\n    // Swap endian\r\n    for (var i = 0; i < m.length; i++) {\r\n      m[i] = ((m[i] <<  8) | (m[i] >>> 24)) & 0x00FF00FF |\r\n             ((m[i] << 24) | (m[i] >>>  8)) & 0xFF00FF00;\r\n    }\r\n\r\n    // Padding\r\n    m[l >>> 5] |= 0x80 << (l % 32);\r\n    m[(((l + 64) >>> 9) << 4) + 14] = l;\r\n\r\n    // Method shortcuts\r\n    var FF = md5._ff,\r\n        GG = md5._gg,\r\n        HH = md5._hh,\r\n        II = md5._ii;\r\n\r\n    for (var i = 0; i < m.length; i += 16) {\r\n\r\n      var aa = a,\r\n          bb = b,\r\n          cc = c,\r\n          dd = d;\r\n\r\n      a = FF(a, b, c, d, m[i+ 0],  7, -680876936);\r\n      d = FF(d, a, b, c, m[i+ 1], 12, -389564586);\r\n      c = FF(c, d, a, b, m[i+ 2], 17,  606105819);\r\n      b = FF(b, c, d, a, m[i+ 3], 22, -1044525330);\r\n      a = FF(a, b, c, d, m[i+ 4],  7, -176418897);\r\n      d = FF(d, a, b, c, m[i+ 5], 12,  1200080426);\r\n      c = FF(c, d, a, b, m[i+ 6], 17, -1473231341);\r\n      b = FF(b, c, d, a, m[i+ 7], 22, -45705983);\r\n      a = FF(a, b, c, d, m[i+ 8],  7,  1770035416);\r\n      d = FF(d, a, b, c, m[i+ 9], 12, -1958414417);\r\n      c = FF(c, d, a, b, m[i+10], 17, -42063);\r\n      b = FF(b, c, d, a, m[i+11], 22, -1990404162);\r\n      a = FF(a, b, c, d, m[i+12],  7,  1804603682);\r\n      d = FF(d, a, b, c, m[i+13], 12, -40341101);\r\n      c = FF(c, d, a, b, m[i+14], 17, -1502002290);\r\n      b = FF(b, c, d, a, m[i+15], 22,  1236535329);\r\n\r\n      a = GG(a, b, c, d, m[i+ 1],  5, -165796510);\r\n      d = GG(d, a, b, c, m[i+ 6],  9, -1069501632);\r\n      c = GG(c, d, a, b, m[i+11], 14,  643717713);\r\n      b = GG(b, c, d, a, m[i+ 0], 20, -373897302);\r\n      a = GG(a, b, c, d, m[i+ 5],  5, -701558691);\r\n      d = GG(d, a, b, c, m[i+10],  9,  38016083);\r\n      c = GG(c, d, a, b, m[i+15], 14, -660478335);\r\n      b = GG(b, c, d, a, m[i+ 4], 20, -405537848);\r\n      a = GG(a, b, c, d, m[i+ 9],  5,  568446438);\r\n      d = GG(d, a, b, c, m[i+14],  9, -1019803690);\r\n      c = GG(c, d, a, b, m[i+ 3], 14, -187363961);\r\n      b = GG(b, c, d, a, m[i+ 8], 20,  1163531501);\r\n      a = GG(a, b, c, d, m[i+13],  5, -1444681467);\r\n      d = GG(d, a, b, c, m[i+ 2],  9, -51403784);\r\n      c = GG(c, d, a, b, m[i+ 7], 14,  1735328473);\r\n      b = GG(b, c, d, a, m[i+12], 20, -1926607734);\r\n\r\n      a = HH(a, b, c, d, m[i+ 5],  4, -378558);\r\n      d = HH(d, a, b, c, m[i+ 8], 11, -2022574463);\r\n      c = HH(c, d, a, b, m[i+11], 16,  1839030562);\r\n      b = HH(b, c, d, a, m[i+14], 23, -35309556);\r\n      a = HH(a, b, c, d, m[i+ 1],  4, -1530992060);\r\n      d = HH(d, a, b, c, m[i+ 4], 11,  1272893353);\r\n      c = HH(c, d, a, b, m[i+ 7], 16, -155497632);\r\n      b = HH(b, c, d, a, m[i+10], 23, -1094730640);\r\n      a = HH(a, b, c, d, m[i+13],  4,  681279174);\r\n      d = HH(d, a, b, c, m[i+ 0], 11, -358537222);\r\n      c = HH(c, d, a, b, m[i+ 3], 16, -722521979);\r\n      b = HH(b, c, d, a, m[i+ 6], 23,  76029189);\r\n      a = HH(a, b, c, d, m[i+ 9],  4, -640364487);\r\n      d = HH(d, a, b, c, m[i+12], 11, -421815835);\r\n      c = HH(c, d, a, b, m[i+15], 16,  530742520);\r\n      b = HH(b, c, d, a, m[i+ 2], 23, -995338651);\r\n\r\n      a = II(a, b, c, d, m[i+ 0],  6, -198630844);\r\n      d = II(d, a, b, c, m[i+ 7], 10,  1126891415);\r\n      c = II(c, d, a, b, m[i+14], 15, -1416354905);\r\n      b = II(b, c, d, a, m[i+ 5], 21, -57434055);\r\n      a = II(a, b, c, d, m[i+12],  6,  1700485571);\r\n      d = II(d, a, b, c, m[i+ 3], 10, -1894986606);\r\n      c = II(c, d, a, b, m[i+10], 15, -1051523);\r\n      b = II(b, c, d, a, m[i+ 1], 21, -2054922799);\r\n      a = II(a, b, c, d, m[i+ 8],  6,  1873313359);\r\n      d = II(d, a, b, c, m[i+15], 10, -30611744);\r\n      c = II(c, d, a, b, m[i+ 6], 15, -1560198380);\r\n      b = II(b, c, d, a, m[i+13], 21,  1309151649);\r\n      a = II(a, b, c, d, m[i+ 4],  6, -145523070);\r\n      d = II(d, a, b, c, m[i+11], 10, -1120210379);\r\n      c = II(c, d, a, b, m[i+ 2], 15,  718787259);\r\n      b = II(b, c, d, a, m[i+ 9], 21, -343485551);\r\n\r\n      a = (a + aa) >>> 0;\r\n      b = (b + bb) >>> 0;\r\n      c = (c + cc) >>> 0;\r\n      d = (d + dd) >>> 0;\r\n    }\r\n\r\n    return crypt.endian([a, b, c, d]);\r\n  };\r\n\r\n  // Auxiliary functions\r\n  md5._ff  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & c | ~b & d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._gg  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & d | c & ~d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._hh  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b ^ c ^ d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._ii  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (c ^ (b | ~d)) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n\r\n  // Package private blocksize\r\n  md5._blocksize = 16;\r\n  md5._digestsize = 16;\r\n\r\n  module.exports = function (message, options) {\r\n    if (message === undefined || message === null)\r\n      throw new Error('Illegal argument ' + message);\r\n\r\n    var digestbytes = crypt.wordsToBytes(md5(message, options));\r\n    return options && options.asBytes ? digestbytes :\r\n        options && options.asString ? bin.bytesToString(digestbytes) :\r\n        crypt.bytesToHex(digestbytes);\r\n  };\r\n\r\n})();\r\n","(function() {\n  var base64map\n      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n\n  crypt = {\n    // Bit-wise rotation left\n    rotl: function(n, b) {\n      return (n << b) | (n >>> (32 - b));\n    },\n\n    // Bit-wise rotation right\n    rotr: function(n, b) {\n      return (n << (32 - b)) | (n >>> b);\n    },\n\n    // Swap big-endian to little-endian and vice versa\n    endian: function(n) {\n      // If number given, swap endian\n      if (n.constructor == Number) {\n        return crypt.rotl(n, 8) & 0x00FF00FF | crypt.rotl(n, 24) & 0xFF00FF00;\n      }\n\n      // Else, assume array and swap all items\n      for (var i = 0; i < n.length; i++)\n        n[i] = crypt.endian(n[i]);\n      return n;\n    },\n\n    // Generate an array of any length of random bytes\n    randomBytes: function(n) {\n      for (var bytes = []; n > 0; n--)\n        bytes.push(Math.floor(Math.random() * 256));\n      return bytes;\n    },\n\n    // Convert a byte array to big-endian 32-bit words\n    bytesToWords: function(bytes) {\n      for (var words = [], i = 0, b = 0; i < bytes.length; i++, b += 8)\n        words[b >>> 5] |= bytes[i] << (24 - b % 32);\n      return words;\n    },\n\n    // Convert big-endian 32-bit words to a byte array\n    wordsToBytes: function(words) {\n      for (var bytes = [], b = 0; b < words.length * 32; b += 8)\n        bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a hex string\n    bytesToHex: function(bytes) {\n      for (var hex = [], i = 0; i < bytes.length; i++) {\n        hex.push((bytes[i] >>> 4).toString(16));\n        hex.push((bytes[i] & 0xF).toString(16));\n      }\n      return hex.join('');\n    },\n\n    // Convert a hex string to a byte array\n    hexToBytes: function(hex) {\n      for (var bytes = [], c = 0; c < hex.length; c += 2)\n        bytes.push(parseInt(hex.substr(c, 2), 16));\n      return bytes;\n    },\n\n    // Convert a byte array to a base-64 string\n    bytesToBase64: function(bytes) {\n      for (var base64 = [], i = 0; i < bytes.length; i += 3) {\n        var triplet = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];\n        for (var j = 0; j < 4; j++)\n          if (i * 8 + j * 6 <= bytes.length * 8)\n            base64.push(base64map.charAt((triplet >>> 6 * (3 - j)) & 0x3F));\n          else\n            base64.push('=');\n      }\n      return base64.join('');\n    },\n\n    // Convert a base-64 string to a byte array\n    base64ToBytes: function(base64) {\n      // Remove non-base-64 characters\n      base64 = base64.replace(/[^A-Z0-9+\\/]/ig, '');\n\n      for (var bytes = [], i = 0, imod4 = 0; i < base64.length;\n          imod4 = ++i % 4) {\n        if (imod4 == 0) continue;\n        bytes.push(((base64map.indexOf(base64.charAt(i - 1))\n            & (Math.pow(2, -2 * imod4 + 8) - 1)) << (imod4 * 2))\n            | (base64map.indexOf(base64.charAt(i)) >>> (6 - imod4 * 2)));\n      }\n      return bytes;\n    }\n  };\n\n  module.exports = crypt;\n})();\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n",null,null,null,"var global = typeof self !== 'undefined' ? self : this;\nvar __self__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = global.DOMException\n}\nF.prototype = global;\nreturn new F();\n})();\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n})({});\n})(__self__);\n__self__.fetch.ponyfill = true;\n// Remove \"polyfill\" property added by whatwg-fetch\ndelete __self__.fetch.polyfill;\n// Choose between native implementation (global) or custom implementation (__self__)\n// var ctx = global.fetch ? global : __self__;\nvar ctx = __self__; // this line disable service worker support temporarily\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"/* eslint-disable no-underscore-dangle */\nimport {\n  Feature,\n  SimpleFeatureSerialized,\n} from '@jbrowse/core/util/simpleFeature'\n\nimport CramAdapter from './CramAdapter'\n\nexport interface Mismatch {\n  qual?: number\n  start: number\n  length: number\n  type: string\n  base: string\n  altbase?: string\n  seq?: string\n  cliplen?: number\n}\n\nexport default class CramSlightlyLazyFeature implements Feature {\n  // uses parameter properties to automatically create fields on the class\n  // https://www.typescriptlang.org/docs/handbook/classes.html#parameter-properties\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  constructor(private record: any, private _store: CramAdapter) {}\n\n  _get_name() {\n    return this.record.readName\n  }\n\n  _get_start() {\n    return this.record.alignmentStart - 1\n  }\n\n  _get_end() {\n    return this.record.alignmentStart + this.record.lengthOnRef - 1\n  }\n\n  _get_cram_read_features() {\n    return this.record.readFeatures\n  }\n\n  _get_type() {\n    return 'match'\n  }\n\n  _get_score() {\n    return this.record.mappingQuality\n  }\n\n  _get_flags() {\n    return this.record.flags\n  }\n\n  _get_strand() {\n    return this.record.isReverseComplemented() ? -1 : 1\n  }\n\n  _read_group_id() {\n    const rg = this._store.samHeader.readGroups\n    return rg ? rg[this.record.readGroupId] : undefined\n  }\n\n  _get_qual() {\n    return (this.record.qualityScores || []).join(' ')\n  }\n\n  qualRaw() {\n    return this.record.qualityScores\n  }\n\n  _get_seq_id() {\n    return this._store.refIdToName(this.record.sequenceId)\n  }\n\n  _get_refName() {\n    return this._get_seq_id()\n  }\n\n  _get_is_paired() {\n    return !!this.record.mate\n  }\n\n  _get_pair_orientation() {\n    return this.record.isPaired() ? this.record.getPairOrientation() : undefined\n  }\n\n  _get_template_length() {\n    return this.record.templateLength || this.record.templateSize\n  }\n\n  _get_next_seq_id() {\n    return this.record.mate\n      ? this._store.refIdToName(this.record.mate.sequenceId)\n      : undefined\n  }\n\n  _get_next_pos() {\n    return this.record.mate ? this.record.mate.alignmentStart : undefined\n  }\n\n  _get_next_segment_position() {\n    return this.record.mate\n      ? `${this._store.refIdToName(this.record.mate.sequenceId)}:${\n          this.record.mate.alignmentStart\n        }`\n      : undefined\n  }\n\n  _get_tags() {\n    const RG = this._read_group_id()\n    const { tags } = this.record\n    // avoids a tag copy if no RG, but just copy if there is one\n    return RG !== undefined ? { ...tags, RG } : tags\n  }\n\n  _get_seq() {\n    return this.record.getReadBases()\n  }\n\n  // generate a CIGAR, based on code from jkbonfield\n  _get_CIGAR() {\n    let seq = ''\n    let cigar = ''\n    let op = 'M'\n    let oplen = 0\n\n    // not sure I should access these, but...\n    const ref = this.record._refRegion.seq\n    const refStart = this.record._refRegion.start\n    let last_pos = this.record.alignmentStart\n    let sublen = 0\n    if (typeof this.record.readFeatures !== 'undefined') {\n      // @ts-ignore\n      this.record.readFeatures.forEach(({ code, refPos, sub, data }) => {\n        sublen = refPos - last_pos\n        seq += ref.substring(last_pos - refStart, refPos - refStart)\n        last_pos = refPos\n\n        if (oplen && op !== 'M') {\n          cigar += oplen + op\n          oplen = 0\n        }\n        if (sublen) {\n          op = 'M'\n          oplen += sublen\n        }\n\n        if (code === 'b') {\n          // An array of bases stored verbatim\n          const ret = data.split(',')\n          const added = String.fromCharCode(...ret)\n          seq += added\n          last_pos += added.length\n          oplen += added.length\n        } else if (code === 'B') {\n          // Single base (+ qual score)\n          seq += sub\n          last_pos++\n          oplen++\n        } else if (code === 'X') {\n          // Substitution\n          seq += sub\n          last_pos++\n          oplen++\n        } else if (code === 'D' || code === 'N') {\n          // Deletion or Ref Skip\n          last_pos += data\n          if (oplen) {\n            cigar += oplen + op\n          }\n          cigar += data + code\n          oplen = 0\n        } else if (code === 'I' || code === 'S') {\n          // Insertion or soft-clip\n          seq += data\n          if (oplen) {\n            cigar += oplen + op\n          }\n          cigar += data.length + code\n          oplen = 0\n        } else if (code === 'i') {\n          // Single base insertion\n          seq += data\n          if (oplen) {\n            cigar += oplen + op\n          }\n          cigar += `${1}I`\n          oplen = 0\n        } else if (code === 'P') {\n          // Padding\n          if (oplen) {\n            cigar += oplen + op\n          }\n          cigar += `${data}P`\n        } else if (code === 'H') {\n          // Hard clip\n          if (oplen) {\n            cigar += oplen + op\n          }\n          cigar += `${data}H`\n          oplen = 0\n        } // else q or Q\n      })\n    } else {\n      sublen = this.record.readLength - seq.length\n    }\n    if (seq.length !== this.record.readLength) {\n      sublen = this.record.readLength - seq.length\n      seq += ref.substring(last_pos - refStart, last_pos - refStart + sublen)\n\n      if (oplen && op !== 'M') {\n        cigar += oplen + op\n        oplen = 0\n      }\n      op = 'M'\n      oplen += sublen\n    }\n    if (oplen) {\n      cigar += oplen + op\n    }\n    return cigar\n  }\n\n  tags() {\n    const properties = Object.getOwnPropertyNames(\n      CramSlightlyLazyFeature.prototype,\n    )\n    return properties\n      .filter(\n        prop =>\n          prop.startsWith('_get_') &&\n          prop !== '_get_mismatches' &&\n          prop !== '_get_cram_read_features',\n      )\n      .map(methodName => methodName.replace('_get_', ''))\n  }\n\n  id() {\n    return `${this._store.id}-${this.record.uniqueId}`\n  }\n\n  get(field: string) {\n    const methodName = `_get_${field}`\n    // @ts-ignore\n    if (this[methodName]) {\n      // @ts-ignore\n      return this[methodName]()\n    }\n    return undefined\n  }\n\n  parent(): undefined | Feature {\n    return undefined\n  }\n\n  children(): undefined | Feature[] {\n    return undefined\n  }\n\n  set(): void {}\n\n  pairedFeature() {\n    return false\n  }\n\n  _get_clipPos() {\n    const mismatches = this.get('mismatches')\n    if (mismatches.length) {\n      const record =\n        this.get('strand') === -1\n          ? mismatches[mismatches.length - 1]\n          : mismatches[0]\n      const { type, cliplen } = record\n      if (type === 'softclip' || type === 'hardclip') {\n        return cliplen\n      }\n    }\n    return 0\n  }\n\n  toJSON(): SimpleFeatureSerialized {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const tags: Record<string, any> = {}\n    this.tags().forEach((t: string) => {\n      const val = this.get(t)\n      if (val !== undefined) {\n        tags[t] = val\n      }\n    })\n\n    return {\n      ...tags,\n      name: this.get('name'),\n      type: this.get('type'),\n      uniqueId: this.id(),\n    }\n  }\n\n  _get_mismatches(): Mismatch[] {\n    const readFeatures = this.get('cram_read_features')\n    const qual = this.qualRaw()\n    if (!readFeatures) {\n      return []\n    }\n    const start = this.get('start')\n    const mismatches: Mismatch[] = []\n    readFeatures.forEach(\n      (args: {\n        code: string\n        refPos: number\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        data: any\n        pos: number\n        sub: string\n        ref: string\n      }) => {\n        const { code, pos, data, sub, ref } = args\n        const refPos = args.refPos - 1 - start\n        if (code === 'X') {\n          // substitution\n          mismatches.push({\n            start: refPos,\n            length: 1,\n            base: sub,\n            qual: qual?.[pos],\n            altbase: ref,\n            type: 'mismatch',\n          })\n        } else if (code === 'I') {\n          // insertion\n          mismatches.push({\n            start: refPos,\n            type: 'insertion',\n            base: `${data.length}`,\n            length: 0,\n          })\n        } else if (code === 'N') {\n          // reference skip\n          mismatches.push({\n            type: 'skip',\n            length: data,\n            start: refPos,\n            base: 'N',\n          })\n        } else if (code === 'S') {\n          // soft clip\n          const len = data.length\n          mismatches.push({\n            start: refPos,\n            type: 'softclip',\n            base: `S${len}`,\n            cliplen: len,\n            length: 1,\n          })\n        } else if (code === 'P') {\n          // padding\n        } else if (code === 'H') {\n          // hard clip\n          const len = data\n          mismatches.push({\n            start: refPos,\n            type: 'hardclip',\n            base: `H${len}`,\n            cliplen: len,\n            length: 1,\n          })\n        } else if (code === 'D') {\n          // deletion\n          mismatches.push({\n            type: 'deletion',\n            length: data,\n            start: refPos,\n            base: '*',\n          })\n        } else if (code === 'b') {\n          // stretch of bases\n        } else if (code === 'q') {\n          // stretch of qual scores\n        } else if (code === 'B') {\n          // a pair of [base, qual]\n        } else if (code === 'i') {\n          // single-base insertion\n          // insertion\n          mismatches.push({\n            start: refPos,\n            type: 'insertion',\n            base: data,\n            length: 1,\n          })\n        } else if (code === 'Q') {\n          // single quality value\n        }\n      },\n    )\n    return mismatches\n  }\n}\n","import { CraiIndex, IndexedCramFile } from '@gmod/cram'\nimport {\n  BaseFeatureDataAdapter,\n  BaseOptions,\n} from '@jbrowse/core/data_adapters/BaseAdapter'\nimport { Region } from '@jbrowse/core/util/types'\nimport { checkAbortSignal } from '@jbrowse/core/util'\nimport { openLocation } from '@jbrowse/core/util/io'\nimport { readConfObject } from '@jbrowse/core/configuration'\nimport { ObservableCreate } from '@jbrowse/core/util/rxjs'\nimport { Feature } from '@jbrowse/core/util/simpleFeature'\nimport { toArray } from 'rxjs/operators'\nimport CramSlightlyLazyFeature from './CramSlightlyLazyFeature'\n\ninterface HeaderLine {\n  tag: string\n  value: any // eslint-disable-line @typescript-eslint/no-explicit-any\n  data: HeaderLine[]\n}\ninterface Header {\n  idToName?: string[]\n  nameToId?: Record<string, number>\n  readGroups?: number[]\n}\n\nexport default class CramAdapter extends BaseFeatureDataAdapter {\n  samHeader: Header = {}\n\n  private setupP?: Promise<{\n    samHeader: Header\n    cram: any // eslint-disable-line @typescript-eslint/no-explicit-any\n    sequenceAdapter: any // eslint-disable-line @typescript-eslint/no-explicit-any\n  }>\n\n  // maps a refname to an id\n  private seqIdToRefName: string[] | undefined\n\n  // maps a seqId to original refname, passed specially to render args, to a seqid\n  private seqIdToOriginalRefName: string[] = []\n\n  public async configure() {\n    const cramLocation = readConfObject(this.config, 'cramLocation')\n    const craiLocation = readConfObject(this.config, 'craiLocation')\n    if (!cramLocation) {\n      throw new Error('missing cramLocation argument')\n    }\n    if (!craiLocation) {\n      throw new Error('missing craiLocation argument')\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const cram: any = new IndexedCramFile({\n      cramFilehandle: openLocation(cramLocation, this.pluginManager),\n      index: new CraiIndex({\n        filehandle: openLocation(craiLocation, this.pluginManager),\n      }),\n      seqFetch: this.seqFetch.bind(this),\n      checkSequenceMD5: false,\n      fetchSizeLimit: 200_000_000, // just make this a large size to avoid hitting it\n    })\n    // instantiate the sequence adapter\n    const sequenceAdapterType = readConfObject(this.config, [\n      'sequenceAdapter',\n      'type',\n    ])\n\n    if (!this.getSubAdapter) {\n      throw new Error('Error getting subadapter')\n    }\n\n    const seqConf = readConfObject(this.config, 'sequenceAdapter')\n    const { dataAdapter: sequenceAdapter } = await this.getSubAdapter(seqConf)\n\n    if (!(sequenceAdapter instanceof BaseFeatureDataAdapter)) {\n      throw new Error(\n        `CRAM feature adapters cannot use sequence adapters of type '${sequenceAdapterType}'`,\n      )\n    }\n\n    return { cram, sequenceAdapter }\n  }\n\n  async getHeader(opts?: BaseOptions) {\n    const { cram } = await this.configure()\n    return cram.cram.getHeaderText(opts)\n  }\n\n  private async seqFetch(seqId: number, start: number, end: number) {\n    start -= 1 // convert from 1-based closed to interbase\n\n    const { sequenceAdapter } = await this.configure()\n    const refName = this.refIdToOriginalName(seqId) || this.refIdToName(seqId)\n    if (!refName) {\n      return undefined\n    }\n\n    const seqChunks = await sequenceAdapter\n      .getFeatures({\n        refName,\n        start,\n        end,\n        assemblyName: '',\n      })\n      .pipe(toArray())\n      .toPromise()\n\n    const sequence = seqChunks\n      .sort((a, b) => a.get('start') - b.get('start'))\n      .map(chunk => {\n        const chunkStart = chunk.get('start')\n        const chunkEnd = chunk.get('end')\n        const trimStart = Math.max(start - chunkStart, 0)\n        const trimEnd = Math.min(end - chunkStart, chunkEnd - chunkStart)\n        const trimLength = trimEnd - trimStart\n        const chunkSeq = chunk.get('seq') || chunk.get('residues')\n        return chunkSeq.substr(trimStart, trimLength)\n      })\n      .join('')\n\n    if (sequence.length !== end - start) {\n      throw new Error(\n        `sequence fetch failed: fetching ${refName}:${(\n          start - 1\n        ).toLocaleString()}-${end.toLocaleString()} returned ${sequence.length.toLocaleString()} bases, but should have returned ${(\n          end - start\n        ).toLocaleString()}`,\n      )\n    }\n    return sequence\n  }\n\n  private async setupPre(opts?: BaseOptions) {\n    const { statusCallback = () => {} } = opts || {}\n    const configured = await this.configure()\n    statusCallback('Downloading index')\n    const { cram } = configured\n    const samHeader: HeaderLine[] = await cram.cram.getSamHeader(opts?.signal)\n\n    // use the @SQ lines in the header to figure out the\n    // mapping between ref ID numbers and names\n    const idToName: string[] = []\n    const nameToId: Record<string, number> = {}\n    samHeader\n      .filter(l => l.tag === 'SQ')\n      .forEach((sqLine, refId) => {\n        sqLine.data.forEach(item => {\n          if (item.tag === 'SN') {\n            // this is the ref name\n            const refName = item.value\n            nameToId[refName] = refId\n            idToName[refId] = refName\n          }\n        })\n      })\n\n    const readGroups = samHeader\n      .filter(l => l.tag === 'RG')\n      .map(rgLine => rgLine.data.find(item => item.tag === 'ID')?.value)\n\n    const data = { idToName, nameToId, readGroups }\n    statusCallback('')\n    this.samHeader = data\n    return { samHeader: data, ...configured }\n  }\n\n  private async setup(opts?: BaseOptions) {\n    if (!this.setupP) {\n      this.setupP = this.setupPre(opts).catch(e => {\n        this.setupP = undefined\n        throw e\n      })\n    }\n    return this.setupP\n  }\n\n  async getRefNames(opts?: BaseOptions) {\n    const { samHeader } = await this.setup(opts)\n    if (!samHeader.idToName) {\n      throw new Error('CRAM file has no header lines')\n    }\n    return samHeader.idToName\n  }\n\n  // use info from the SAM header if possible, but fall back to using\n  // the ref seq order from when the browser's refseqs were loaded\n  refNameToId(refName: string) {\n    if (this.samHeader.nameToId) {\n      return this.samHeader.nameToId[refName]\n    }\n    if (this.seqIdToRefName) {\n      return this.seqIdToRefName.indexOf(refName)\n    }\n    return undefined\n  }\n\n  // use info from the SAM header if possible, but fall back to using\n  // the ref seq order from when the browser's refseqs were loaded\n  refIdToName(refId: number) {\n    if (this.samHeader.idToName) {\n      return this.samHeader.idToName[refId]\n    }\n    if (this.seqIdToRefName) {\n      return this.seqIdToRefName[refId]\n    }\n    return undefined\n  }\n\n  refIdToOriginalName(refId: number) {\n    return this.seqIdToOriginalRefName[refId]\n  }\n\n  getFeatures(\n    region: Region & { originalRefName?: string },\n    opts?: BaseOptions,\n  ) {\n    const { signal, statusCallback = () => {} } = opts || {}\n    const { refName, start, end, originalRefName } = region\n\n    return ObservableCreate<Feature>(async observer => {\n      const { cram, sequenceAdapter } = await this.setup(opts)\n      statusCallback('Downloading alignments')\n      if (!this.seqIdToRefName) {\n        this.seqIdToRefName = await sequenceAdapter.getRefNames(opts)\n      }\n      const refId = this.refNameToId(refName)\n      if (refId !== undefined) {\n        if (originalRefName) {\n          this.seqIdToOriginalRefName[refId] = originalRefName\n        }\n        const records = await cram.getRecordsForRange(refId, start, end, opts)\n        checkAbortSignal(signal)\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        records.forEach((record: any) => {\n          observer.next(this.cramRecordToFeature(record))\n        })\n      } else {\n        console.warn('Unknown refName', refName)\n      }\n      statusCallback('')\n      observer.complete()\n    }, signal)\n  }\n\n  freeResources(/* { region } */): void {}\n\n  cramRecordToFeature(record: unknown) {\n    return new CramSlightlyLazyFeature(record, this)\n  }\n\n  // we return the configured fetchSizeLimit, and the bytes for the region\n  async estimateRegionsStats(regions: Region[], opts?: BaseOptions) {\n    const bytes = await this.bytesForRegions(regions, opts)\n    const fetchSizeLimit = readConfObject(this.config, 'fetchSizeLimit')\n    return {\n      bytes,\n      fetchSizeLimit,\n    }\n  }\n\n  /**\n   * get the approximate number of bytes queried from the file for the given\n   * query regions\n   * @param regions - list of query regions\n   */\n  private async bytesForRegions(regions: Region[], _opts?: BaseOptions) {\n    const { cram } = await this.configure()\n    const blockResults = await Promise.all(\n      regions.map(region => {\n        const { refName, start, end } = region\n        const chrId = this.refNameToId(refName)\n        return cram.index.getEntriesForRange(chrId, start, end)\n      }),\n    )\n\n    return blockResults.flat().reduce((a, b) => a + b.sliceBytes, 0)\n  }\n}\n","\"use strict\";\n/* eslint-disable */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbortSignal = exports.AbortController = void 0;\nconst cjs_ponyfill_1 = require(\"abortcontroller-polyfill/dist/cjs-ponyfill\");\nvar getGlobal = function () {\n    // the only reliable means to get the global object is\n    // `Function('return this')()`\n    // However, this causes CSP violations in Chrome apps.\n    if (typeof self !== 'undefined') {\n        return self;\n    }\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    throw new Error('unable to locate global object');\n};\n//@ts-ignore\nlet AbortController = typeof getGlobal().AbortController === 'undefined' ? cjs_ponyfill_1.AbortController : getGlobal().AbortController;\nexports.AbortController = AbortController;\n//@ts-ignore\nlet AbortSignal = typeof getGlobal().AbortController === 'undefined' ? cjs_ponyfill_1.AbortSignal : getGlobal().AbortSignal;\nexports.AbortSignal = AbortSignal;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst AbortablePromiseCache_1 = __importDefault(require(\"./AbortablePromiseCache\"));\nexports.default = AbortablePromiseCache_1.default;\n","module.exports = Long;\r\n\r\n/**\r\n * wasm optimizations, to do native i64 multiplication and divide\r\n */\r\nvar wasm = null;\r\n\r\ntry {\r\n  wasm = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([\r\n    0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11\r\n  ])), {}).exports;\r\n} catch (e) {\r\n  // no wasm support :(\r\n}\r\n\r\n/**\r\n * Constructs a 64 bit two's-complement integer, given its low and high 32 bit values as *signed* integers.\r\n *  See the from* functions below for more convenient ways of constructing Longs.\r\n * @exports Long\r\n * @class A Long class for representing a 64 bit two's-complement integer value.\r\n * @param {number} low The low (signed) 32 bits of the long\r\n * @param {number} high The high (signed) 32 bits of the long\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @constructor\r\n */\r\nfunction Long(low, high, unsigned) {\r\n\r\n    /**\r\n     * The low 32 bits as a signed value.\r\n     * @type {number}\r\n     */\r\n    this.low = low | 0;\r\n\r\n    /**\r\n     * The high 32 bits as a signed value.\r\n     * @type {number}\r\n     */\r\n    this.high = high | 0;\r\n\r\n    /**\r\n     * Whether unsigned or not.\r\n     * @type {boolean}\r\n     */\r\n    this.unsigned = !!unsigned;\r\n}\r\n\r\n// The internal representation of a long is the two given signed, 32-bit values.\r\n// We use 32-bit pieces because these are the size of integers on which\r\n// Javascript performs bit-operations.  For operations like addition and\r\n// multiplication, we split each number into 16 bit pieces, which can easily be\r\n// multiplied within Javascript's floating-point representation without overflow\r\n// or change in sign.\r\n//\r\n// In the algorithms below, we frequently reduce the negative case to the\r\n// positive case by negating the input(s) and then post-processing the result.\r\n// Note that we must ALWAYS check specially whether those values are MIN_VALUE\r\n// (-2^63) because -MIN_VALUE == MIN_VALUE (since 2^63 cannot be represented as\r\n// a positive number, it overflows back into a negative).  Not handling this\r\n// case would often result in infinite recursion.\r\n//\r\n// Common constant values ZERO, ONE, NEG_ONE, etc. are defined below the from*\r\n// methods on which they depend.\r\n\r\n/**\r\n * An indicator used to reliably determine if an object is a Long or not.\r\n * @type {boolean}\r\n * @const\r\n * @private\r\n */\r\nLong.prototype.__isLong__;\r\n\r\nObject.defineProperty(Long.prototype, \"__isLong__\", { value: true });\r\n\r\n/**\r\n * @function\r\n * @param {*} obj Object\r\n * @returns {boolean}\r\n * @inner\r\n */\r\nfunction isLong(obj) {\r\n    return (obj && obj[\"__isLong__\"]) === true;\r\n}\r\n\r\n/**\r\n * Tests if the specified object is a Long.\r\n * @function\r\n * @param {*} obj Object\r\n * @returns {boolean}\r\n */\r\nLong.isLong = isLong;\r\n\r\n/**\r\n * A cache of the Long representations of small integer values.\r\n * @type {!Object}\r\n * @inner\r\n */\r\nvar INT_CACHE = {};\r\n\r\n/**\r\n * A cache of the Long representations of small unsigned integer values.\r\n * @type {!Object}\r\n * @inner\r\n */\r\nvar UINT_CACHE = {};\r\n\r\n/**\r\n * @param {number} value\r\n * @param {boolean=} unsigned\r\n * @returns {!Long}\r\n * @inner\r\n */\r\nfunction fromInt(value, unsigned) {\r\n    var obj, cachedObj, cache;\r\n    if (unsigned) {\r\n        value >>>= 0;\r\n        if (cache = (0 <= value && value < 256)) {\r\n            cachedObj = UINT_CACHE[value];\r\n            if (cachedObj)\r\n                return cachedObj;\r\n        }\r\n        obj = fromBits(value, (value | 0) < 0 ? -1 : 0, true);\r\n        if (cache)\r\n            UINT_CACHE[value] = obj;\r\n        return obj;\r\n    } else {\r\n        value |= 0;\r\n        if (cache = (-128 <= value && value < 128)) {\r\n            cachedObj = INT_CACHE[value];\r\n            if (cachedObj)\r\n                return cachedObj;\r\n        }\r\n        obj = fromBits(value, value < 0 ? -1 : 0, false);\r\n        if (cache)\r\n            INT_CACHE[value] = obj;\r\n        return obj;\r\n    }\r\n}\r\n\r\n/**\r\n * Returns a Long representing the given 32 bit integer value.\r\n * @function\r\n * @param {number} value The 32 bit integer in question\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @returns {!Long} The corresponding Long value\r\n */\r\nLong.fromInt = fromInt;\r\n\r\n/**\r\n * @param {number} value\r\n * @param {boolean=} unsigned\r\n * @returns {!Long}\r\n * @inner\r\n */\r\nfunction fromNumber(value, unsigned) {\r\n    if (isNaN(value))\r\n        return unsigned ? UZERO : ZERO;\r\n    if (unsigned) {\r\n        if (value < 0)\r\n            return UZERO;\r\n        if (value >= TWO_PWR_64_DBL)\r\n            return MAX_UNSIGNED_VALUE;\r\n    } else {\r\n        if (value <= -TWO_PWR_63_DBL)\r\n            return MIN_VALUE;\r\n        if (value + 1 >= TWO_PWR_63_DBL)\r\n            return MAX_VALUE;\r\n    }\r\n    if (value < 0)\r\n        return fromNumber(-value, unsigned).neg();\r\n    return fromBits((value % TWO_PWR_32_DBL) | 0, (value / TWO_PWR_32_DBL) | 0, unsigned);\r\n}\r\n\r\n/**\r\n * Returns a Long representing the given value, provided that it is a finite number. Otherwise, zero is returned.\r\n * @function\r\n * @param {number} value The number in question\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @returns {!Long} The corresponding Long value\r\n */\r\nLong.fromNumber = fromNumber;\r\n\r\n/**\r\n * @param {number} lowBits\r\n * @param {number} highBits\r\n * @param {boolean=} unsigned\r\n * @returns {!Long}\r\n * @inner\r\n */\r\nfunction fromBits(lowBits, highBits, unsigned) {\r\n    return new Long(lowBits, highBits, unsigned);\r\n}\r\n\r\n/**\r\n * Returns a Long representing the 64 bit integer that comes by concatenating the given low and high bits. Each is\r\n *  assumed to use 32 bits.\r\n * @function\r\n * @param {number} lowBits The low 32 bits\r\n * @param {number} highBits The high 32 bits\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @returns {!Long} The corresponding Long value\r\n */\r\nLong.fromBits = fromBits;\r\n\r\n/**\r\n * @function\r\n * @param {number} base\r\n * @param {number} exponent\r\n * @returns {number}\r\n * @inner\r\n */\r\nvar pow_dbl = Math.pow; // Used 4 times (4*8 to 15+4)\r\n\r\n/**\r\n * @param {string} str\r\n * @param {(boolean|number)=} unsigned\r\n * @param {number=} radix\r\n * @returns {!Long}\r\n * @inner\r\n */\r\nfunction fromString(str, unsigned, radix) {\r\n    if (str.length === 0)\r\n        throw Error('empty string');\r\n    if (str === \"NaN\" || str === \"Infinity\" || str === \"+Infinity\" || str === \"-Infinity\")\r\n        return ZERO;\r\n    if (typeof unsigned === 'number') {\r\n        // For goog.math.long compatibility\r\n        radix = unsigned,\r\n        unsigned = false;\r\n    } else {\r\n        unsigned = !! unsigned;\r\n    }\r\n    radix = radix || 10;\r\n    if (radix < 2 || 36 < radix)\r\n        throw RangeError('radix');\r\n\r\n    var p;\r\n    if ((p = str.indexOf('-')) > 0)\r\n        throw Error('interior hyphen');\r\n    else if (p === 0) {\r\n        return fromString(str.substring(1), unsigned, radix).neg();\r\n    }\r\n\r\n    // Do several (8) digits each time through the loop, so as to\r\n    // minimize the calls to the very expensive emulated div.\r\n    var radixToPower = fromNumber(pow_dbl(radix, 8));\r\n\r\n    var result = ZERO;\r\n    for (var i = 0; i < str.length; i += 8) {\r\n        var size = Math.min(8, str.length - i),\r\n            value = parseInt(str.substring(i, i + size), radix);\r\n        if (size < 8) {\r\n            var power = fromNumber(pow_dbl(radix, size));\r\n            result = result.mul(power).add(fromNumber(value));\r\n        } else {\r\n            result = result.mul(radixToPower);\r\n            result = result.add(fromNumber(value));\r\n        }\r\n    }\r\n    result.unsigned = unsigned;\r\n    return result;\r\n}\r\n\r\n/**\r\n * Returns a Long representation of the given string, written using the specified radix.\r\n * @function\r\n * @param {string} str The textual representation of the Long\r\n * @param {(boolean|number)=} unsigned Whether unsigned or not, defaults to signed\r\n * @param {number=} radix The radix in which the text is written (2-36), defaults to 10\r\n * @returns {!Long} The corresponding Long value\r\n */\r\nLong.fromString = fromString;\r\n\r\n/**\r\n * @function\r\n * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val\r\n * @param {boolean=} unsigned\r\n * @returns {!Long}\r\n * @inner\r\n */\r\nfunction fromValue(val, unsigned) {\r\n    if (typeof val === 'number')\r\n        return fromNumber(val, unsigned);\r\n    if (typeof val === 'string')\r\n        return fromString(val, unsigned);\r\n    // Throws for non-objects, converts non-instanceof Long:\r\n    return fromBits(val.low, val.high, typeof unsigned === 'boolean' ? unsigned : val.unsigned);\r\n}\r\n\r\n/**\r\n * Converts the specified value to a Long using the appropriate from* function for its type.\r\n * @function\r\n * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val Value\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @returns {!Long}\r\n */\r\nLong.fromValue = fromValue;\r\n\r\n// NOTE: the compiler should inline these constant values below and then remove these variables, so there should be\r\n// no runtime penalty for these.\r\n\r\n/**\r\n * @type {number}\r\n * @const\r\n * @inner\r\n */\r\nvar TWO_PWR_16_DBL = 1 << 16;\r\n\r\n/**\r\n * @type {number}\r\n * @const\r\n * @inner\r\n */\r\nvar TWO_PWR_24_DBL = 1 << 24;\r\n\r\n/**\r\n * @type {number}\r\n * @const\r\n * @inner\r\n */\r\nvar TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;\r\n\r\n/**\r\n * @type {number}\r\n * @const\r\n * @inner\r\n */\r\nvar TWO_PWR_64_DBL = TWO_PWR_32_DBL * TWO_PWR_32_DBL;\r\n\r\n/**\r\n * @type {number}\r\n * @const\r\n * @inner\r\n */\r\nvar TWO_PWR_63_DBL = TWO_PWR_64_DBL / 2;\r\n\r\n/**\r\n * @type {!Long}\r\n * @const\r\n * @inner\r\n */\r\nvar TWO_PWR_24 = fromInt(TWO_PWR_24_DBL);\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar ZERO = fromInt(0);\r\n\r\n/**\r\n * Signed zero.\r\n * @type {!Long}\r\n */\r\nLong.ZERO = ZERO;\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar UZERO = fromInt(0, true);\r\n\r\n/**\r\n * Unsigned zero.\r\n * @type {!Long}\r\n */\r\nLong.UZERO = UZERO;\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar ONE = fromInt(1);\r\n\r\n/**\r\n * Signed one.\r\n * @type {!Long}\r\n */\r\nLong.ONE = ONE;\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar UONE = fromInt(1, true);\r\n\r\n/**\r\n * Unsigned one.\r\n * @type {!Long}\r\n */\r\nLong.UONE = UONE;\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar NEG_ONE = fromInt(-1);\r\n\r\n/**\r\n * Signed negative one.\r\n * @type {!Long}\r\n */\r\nLong.NEG_ONE = NEG_ONE;\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar MAX_VALUE = fromBits(0xFFFFFFFF|0, 0x7FFFFFFF|0, false);\r\n\r\n/**\r\n * Maximum signed value.\r\n * @type {!Long}\r\n */\r\nLong.MAX_VALUE = MAX_VALUE;\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar MAX_UNSIGNED_VALUE = fromBits(0xFFFFFFFF|0, 0xFFFFFFFF|0, true);\r\n\r\n/**\r\n * Maximum unsigned value.\r\n * @type {!Long}\r\n */\r\nLong.MAX_UNSIGNED_VALUE = MAX_UNSIGNED_VALUE;\r\n\r\n/**\r\n * @type {!Long}\r\n * @inner\r\n */\r\nvar MIN_VALUE = fromBits(0, 0x80000000|0, false);\r\n\r\n/**\r\n * Minimum signed value.\r\n * @type {!Long}\r\n */\r\nLong.MIN_VALUE = MIN_VALUE;\r\n\r\n/**\r\n * @alias Long.prototype\r\n * @inner\r\n */\r\nvar LongPrototype = Long.prototype;\r\n\r\n/**\r\n * Converts the Long to a 32 bit integer, assuming it is a 32 bit integer.\r\n * @returns {number}\r\n */\r\nLongPrototype.toInt = function toInt() {\r\n    return this.unsigned ? this.low >>> 0 : this.low;\r\n};\r\n\r\n/**\r\n * Converts the Long to a the nearest floating-point representation of this value (double, 53 bit mantissa).\r\n * @returns {number}\r\n */\r\nLongPrototype.toNumber = function toNumber() {\r\n    if (this.unsigned)\r\n        return ((this.high >>> 0) * TWO_PWR_32_DBL) + (this.low >>> 0);\r\n    return this.high * TWO_PWR_32_DBL + (this.low >>> 0);\r\n};\r\n\r\n/**\r\n * Converts the Long to a string written in the specified radix.\r\n * @param {number=} radix Radix (2-36), defaults to 10\r\n * @returns {string}\r\n * @override\r\n * @throws {RangeError} If `radix` is out of range\r\n */\r\nLongPrototype.toString = function toString(radix) {\r\n    radix = radix || 10;\r\n    if (radix < 2 || 36 < radix)\r\n        throw RangeError('radix');\r\n    if (this.isZero())\r\n        return '0';\r\n    if (this.isNegative()) { // Unsigned Longs are never negative\r\n        if (this.eq(MIN_VALUE)) {\r\n            // We need to change the Long value before it can be negated, so we remove\r\n            // the bottom-most digit in this base and then recurse to do the rest.\r\n            var radixLong = fromNumber(radix),\r\n                div = this.div(radixLong),\r\n                rem1 = div.mul(radixLong).sub(this);\r\n            return div.toString(radix) + rem1.toInt().toString(radix);\r\n        } else\r\n            return '-' + this.neg().toString(radix);\r\n    }\r\n\r\n    // Do several (6) digits each time through the loop, so as to\r\n    // minimize the calls to the very expensive emulated div.\r\n    var radixToPower = fromNumber(pow_dbl(radix, 6), this.unsigned),\r\n        rem = this;\r\n    var result = '';\r\n    while (true) {\r\n        var remDiv = rem.div(radixToPower),\r\n            intval = rem.sub(remDiv.mul(radixToPower)).toInt() >>> 0,\r\n            digits = intval.toString(radix);\r\n        rem = remDiv;\r\n        if (rem.isZero())\r\n            return digits + result;\r\n        else {\r\n            while (digits.length < 6)\r\n                digits = '0' + digits;\r\n            result = '' + digits + result;\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Gets the high 32 bits as a signed integer.\r\n * @returns {number} Signed high bits\r\n */\r\nLongPrototype.getHighBits = function getHighBits() {\r\n    return this.high;\r\n};\r\n\r\n/**\r\n * Gets the high 32 bits as an unsigned integer.\r\n * @returns {number} Unsigned high bits\r\n */\r\nLongPrototype.getHighBitsUnsigned = function getHighBitsUnsigned() {\r\n    return this.high >>> 0;\r\n};\r\n\r\n/**\r\n * Gets the low 32 bits as a signed integer.\r\n * @returns {number} Signed low bits\r\n */\r\nLongPrototype.getLowBits = function getLowBits() {\r\n    return this.low;\r\n};\r\n\r\n/**\r\n * Gets the low 32 bits as an unsigned integer.\r\n * @returns {number} Unsigned low bits\r\n */\r\nLongPrototype.getLowBitsUnsigned = function getLowBitsUnsigned() {\r\n    return this.low >>> 0;\r\n};\r\n\r\n/**\r\n * Gets the number of bits needed to represent the absolute value of this Long.\r\n * @returns {number}\r\n */\r\nLongPrototype.getNumBitsAbs = function getNumBitsAbs() {\r\n    if (this.isNegative()) // Unsigned Longs are never negative\r\n        return this.eq(MIN_VALUE) ? 64 : this.neg().getNumBitsAbs();\r\n    var val = this.high != 0 ? this.high : this.low;\r\n    for (var bit = 31; bit > 0; bit--)\r\n        if ((val & (1 << bit)) != 0)\r\n            break;\r\n    return this.high != 0 ? bit + 33 : bit + 1;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value equals zero.\r\n * @returns {boolean}\r\n */\r\nLongPrototype.isZero = function isZero() {\r\n    return this.high === 0 && this.low === 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value equals zero. This is an alias of {@link Long#isZero}.\r\n * @returns {boolean}\r\n */\r\nLongPrototype.eqz = LongPrototype.isZero;\r\n\r\n/**\r\n * Tests if this Long's value is negative.\r\n * @returns {boolean}\r\n */\r\nLongPrototype.isNegative = function isNegative() {\r\n    return !this.unsigned && this.high < 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value is positive.\r\n * @returns {boolean}\r\n */\r\nLongPrototype.isPositive = function isPositive() {\r\n    return this.unsigned || this.high >= 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value is odd.\r\n * @returns {boolean}\r\n */\r\nLongPrototype.isOdd = function isOdd() {\r\n    return (this.low & 1) === 1;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value is even.\r\n * @returns {boolean}\r\n */\r\nLongPrototype.isEven = function isEven() {\r\n    return (this.low & 1) === 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value equals the specified's.\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.equals = function equals(other) {\r\n    if (!isLong(other))\r\n        other = fromValue(other);\r\n    if (this.unsigned !== other.unsigned && (this.high >>> 31) === 1 && (other.high >>> 31) === 1)\r\n        return false;\r\n    return this.high === other.high && this.low === other.low;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value equals the specified's. This is an alias of {@link Long#equals}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.eq = LongPrototype.equals;\r\n\r\n/**\r\n * Tests if this Long's value differs from the specified's.\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.notEquals = function notEquals(other) {\r\n    return !this.eq(/* validates */ other);\r\n};\r\n\r\n/**\r\n * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.neq = LongPrototype.notEquals;\r\n\r\n/**\r\n * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.ne = LongPrototype.notEquals;\r\n\r\n/**\r\n * Tests if this Long's value is less than the specified's.\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.lessThan = function lessThan(other) {\r\n    return this.comp(/* validates */ other) < 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value is less than the specified's. This is an alias of {@link Long#lessThan}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.lt = LongPrototype.lessThan;\r\n\r\n/**\r\n * Tests if this Long's value is less than or equal the specified's.\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.lessThanOrEqual = function lessThanOrEqual(other) {\r\n    return this.comp(/* validates */ other) <= 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.lte = LongPrototype.lessThanOrEqual;\r\n\r\n/**\r\n * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.le = LongPrototype.lessThanOrEqual;\r\n\r\n/**\r\n * Tests if this Long's value is greater than the specified's.\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.greaterThan = function greaterThan(other) {\r\n    return this.comp(/* validates */ other) > 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value is greater than the specified's. This is an alias of {@link Long#greaterThan}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.gt = LongPrototype.greaterThan;\r\n\r\n/**\r\n * Tests if this Long's value is greater than or equal the specified's.\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.greaterThanOrEqual = function greaterThanOrEqual(other) {\r\n    return this.comp(/* validates */ other) >= 0;\r\n};\r\n\r\n/**\r\n * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.gte = LongPrototype.greaterThanOrEqual;\r\n\r\n/**\r\n * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {boolean}\r\n */\r\nLongPrototype.ge = LongPrototype.greaterThanOrEqual;\r\n\r\n/**\r\n * Compares this Long's value with the specified's.\r\n * @param {!Long|number|string} other Other value\r\n * @returns {number} 0 if they are the same, 1 if the this is greater and -1\r\n *  if the given one is greater\r\n */\r\nLongPrototype.compare = function compare(other) {\r\n    if (!isLong(other))\r\n        other = fromValue(other);\r\n    if (this.eq(other))\r\n        return 0;\r\n    var thisNeg = this.isNegative(),\r\n        otherNeg = other.isNegative();\r\n    if (thisNeg && !otherNeg)\r\n        return -1;\r\n    if (!thisNeg && otherNeg)\r\n        return 1;\r\n    // At this point the sign bits are the same\r\n    if (!this.unsigned)\r\n        return this.sub(other).isNegative() ? -1 : 1;\r\n    // Both are positive if at least one is unsigned\r\n    return (other.high >>> 0) > (this.high >>> 0) || (other.high === this.high && (other.low >>> 0) > (this.low >>> 0)) ? -1 : 1;\r\n};\r\n\r\n/**\r\n * Compares this Long's value with the specified's. This is an alias of {@link Long#compare}.\r\n * @function\r\n * @param {!Long|number|string} other Other value\r\n * @returns {number} 0 if they are the same, 1 if the this is greater and -1\r\n *  if the given one is greater\r\n */\r\nLongPrototype.comp = LongPrototype.compare;\r\n\r\n/**\r\n * Negates this Long's value.\r\n * @returns {!Long} Negated Long\r\n */\r\nLongPrototype.negate = function negate() {\r\n    if (!this.unsigned && this.eq(MIN_VALUE))\r\n        return MIN_VALUE;\r\n    return this.not().add(ONE);\r\n};\r\n\r\n/**\r\n * Negates this Long's value. This is an alias of {@link Long#negate}.\r\n * @function\r\n * @returns {!Long} Negated Long\r\n */\r\nLongPrototype.neg = LongPrototype.negate;\r\n\r\n/**\r\n * Returns the sum of this and the specified Long.\r\n * @param {!Long|number|string} addend Addend\r\n * @returns {!Long} Sum\r\n */\r\nLongPrototype.add = function add(addend) {\r\n    if (!isLong(addend))\r\n        addend = fromValue(addend);\r\n\r\n    // Divide each number into 4 chunks of 16 bits, and then sum the chunks.\r\n\r\n    var a48 = this.high >>> 16;\r\n    var a32 = this.high & 0xFFFF;\r\n    var a16 = this.low >>> 16;\r\n    var a00 = this.low & 0xFFFF;\r\n\r\n    var b48 = addend.high >>> 16;\r\n    var b32 = addend.high & 0xFFFF;\r\n    var b16 = addend.low >>> 16;\r\n    var b00 = addend.low & 0xFFFF;\r\n\r\n    var c48 = 0, c32 = 0, c16 = 0, c00 = 0;\r\n    c00 += a00 + b00;\r\n    c16 += c00 >>> 16;\r\n    c00 &= 0xFFFF;\r\n    c16 += a16 + b16;\r\n    c32 += c16 >>> 16;\r\n    c16 &= 0xFFFF;\r\n    c32 += a32 + b32;\r\n    c48 += c32 >>> 16;\r\n    c32 &= 0xFFFF;\r\n    c48 += a48 + b48;\r\n    c48 &= 0xFFFF;\r\n    return fromBits((c16 << 16) | c00, (c48 << 16) | c32, this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns the difference of this and the specified Long.\r\n * @param {!Long|number|string} subtrahend Subtrahend\r\n * @returns {!Long} Difference\r\n */\r\nLongPrototype.subtract = function subtract(subtrahend) {\r\n    if (!isLong(subtrahend))\r\n        subtrahend = fromValue(subtrahend);\r\n    return this.add(subtrahend.neg());\r\n};\r\n\r\n/**\r\n * Returns the difference of this and the specified Long. This is an alias of {@link Long#subtract}.\r\n * @function\r\n * @param {!Long|number|string} subtrahend Subtrahend\r\n * @returns {!Long} Difference\r\n */\r\nLongPrototype.sub = LongPrototype.subtract;\r\n\r\n/**\r\n * Returns the product of this and the specified Long.\r\n * @param {!Long|number|string} multiplier Multiplier\r\n * @returns {!Long} Product\r\n */\r\nLongPrototype.multiply = function multiply(multiplier) {\r\n    if (this.isZero())\r\n        return ZERO;\r\n    if (!isLong(multiplier))\r\n        multiplier = fromValue(multiplier);\r\n\r\n    // use wasm support if present\r\n    if (wasm) {\r\n        var low = wasm.mul(this.low,\r\n                           this.high,\r\n                           multiplier.low,\r\n                           multiplier.high);\r\n        return fromBits(low, wasm.get_high(), this.unsigned);\r\n    }\r\n\r\n    if (multiplier.isZero())\r\n        return ZERO;\r\n    if (this.eq(MIN_VALUE))\r\n        return multiplier.isOdd() ? MIN_VALUE : ZERO;\r\n    if (multiplier.eq(MIN_VALUE))\r\n        return this.isOdd() ? MIN_VALUE : ZERO;\r\n\r\n    if (this.isNegative()) {\r\n        if (multiplier.isNegative())\r\n            return this.neg().mul(multiplier.neg());\r\n        else\r\n            return this.neg().mul(multiplier).neg();\r\n    } else if (multiplier.isNegative())\r\n        return this.mul(multiplier.neg()).neg();\r\n\r\n    // If both longs are small, use float multiplication\r\n    if (this.lt(TWO_PWR_24) && multiplier.lt(TWO_PWR_24))\r\n        return fromNumber(this.toNumber() * multiplier.toNumber(), this.unsigned);\r\n\r\n    // Divide each long into 4 chunks of 16 bits, and then add up 4x4 products.\r\n    // We can skip products that would overflow.\r\n\r\n    var a48 = this.high >>> 16;\r\n    var a32 = this.high & 0xFFFF;\r\n    var a16 = this.low >>> 16;\r\n    var a00 = this.low & 0xFFFF;\r\n\r\n    var b48 = multiplier.high >>> 16;\r\n    var b32 = multiplier.high & 0xFFFF;\r\n    var b16 = multiplier.low >>> 16;\r\n    var b00 = multiplier.low & 0xFFFF;\r\n\r\n    var c48 = 0, c32 = 0, c16 = 0, c00 = 0;\r\n    c00 += a00 * b00;\r\n    c16 += c00 >>> 16;\r\n    c00 &= 0xFFFF;\r\n    c16 += a16 * b00;\r\n    c32 += c16 >>> 16;\r\n    c16 &= 0xFFFF;\r\n    c16 += a00 * b16;\r\n    c32 += c16 >>> 16;\r\n    c16 &= 0xFFFF;\r\n    c32 += a32 * b00;\r\n    c48 += c32 >>> 16;\r\n    c32 &= 0xFFFF;\r\n    c32 += a16 * b16;\r\n    c48 += c32 >>> 16;\r\n    c32 &= 0xFFFF;\r\n    c32 += a00 * b32;\r\n    c48 += c32 >>> 16;\r\n    c32 &= 0xFFFF;\r\n    c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;\r\n    c48 &= 0xFFFF;\r\n    return fromBits((c16 << 16) | c00, (c48 << 16) | c32, this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns the product of this and the specified Long. This is an alias of {@link Long#multiply}.\r\n * @function\r\n * @param {!Long|number|string} multiplier Multiplier\r\n * @returns {!Long} Product\r\n */\r\nLongPrototype.mul = LongPrototype.multiply;\r\n\r\n/**\r\n * Returns this Long divided by the specified. The result is signed if this Long is signed or\r\n *  unsigned if this Long is unsigned.\r\n * @param {!Long|number|string} divisor Divisor\r\n * @returns {!Long} Quotient\r\n */\r\nLongPrototype.divide = function divide(divisor) {\r\n    if (!isLong(divisor))\r\n        divisor = fromValue(divisor);\r\n    if (divisor.isZero())\r\n        throw Error('division by zero');\r\n\r\n    // use wasm support if present\r\n    if (wasm) {\r\n        // guard against signed division overflow: the largest\r\n        // negative number / -1 would be 1 larger than the largest\r\n        // positive number, due to two's complement.\r\n        if (!this.unsigned &&\r\n            this.high === -0x80000000 &&\r\n            divisor.low === -1 && divisor.high === -1) {\r\n            // be consistent with non-wasm code path\r\n            return this;\r\n        }\r\n        var low = (this.unsigned ? wasm.div_u : wasm.div_s)(\r\n            this.low,\r\n            this.high,\r\n            divisor.low,\r\n            divisor.high\r\n        );\r\n        return fromBits(low, wasm.get_high(), this.unsigned);\r\n    }\r\n\r\n    if (this.isZero())\r\n        return this.unsigned ? UZERO : ZERO;\r\n    var approx, rem, res;\r\n    if (!this.unsigned) {\r\n        // This section is only relevant for signed longs and is derived from the\r\n        // closure library as a whole.\r\n        if (this.eq(MIN_VALUE)) {\r\n            if (divisor.eq(ONE) || divisor.eq(NEG_ONE))\r\n                return MIN_VALUE;  // recall that -MIN_VALUE == MIN_VALUE\r\n            else if (divisor.eq(MIN_VALUE))\r\n                return ONE;\r\n            else {\r\n                // At this point, we have |other| >= 2, so |this/other| < |MIN_VALUE|.\r\n                var halfThis = this.shr(1);\r\n                approx = halfThis.div(divisor).shl(1);\r\n                if (approx.eq(ZERO)) {\r\n                    return divisor.isNegative() ? ONE : NEG_ONE;\r\n                } else {\r\n                    rem = this.sub(divisor.mul(approx));\r\n                    res = approx.add(rem.div(divisor));\r\n                    return res;\r\n                }\r\n            }\r\n        } else if (divisor.eq(MIN_VALUE))\r\n            return this.unsigned ? UZERO : ZERO;\r\n        if (this.isNegative()) {\r\n            if (divisor.isNegative())\r\n                return this.neg().div(divisor.neg());\r\n            return this.neg().div(divisor).neg();\r\n        } else if (divisor.isNegative())\r\n            return this.div(divisor.neg()).neg();\r\n        res = ZERO;\r\n    } else {\r\n        // The algorithm below has not been made for unsigned longs. It's therefore\r\n        // required to take special care of the MSB prior to running it.\r\n        if (!divisor.unsigned)\r\n            divisor = divisor.toUnsigned();\r\n        if (divisor.gt(this))\r\n            return UZERO;\r\n        if (divisor.gt(this.shru(1))) // 15 >>> 1 = 7 ; with divisor = 8 ; true\r\n            return UONE;\r\n        res = UZERO;\r\n    }\r\n\r\n    // Repeat the following until the remainder is less than other:  find a\r\n    // floating-point that approximates remainder / other *from below*, add this\r\n    // into the result, and subtract it from the remainder.  It is critical that\r\n    // the approximate value is less than or equal to the real value so that the\r\n    // remainder never becomes negative.\r\n    rem = this;\r\n    while (rem.gte(divisor)) {\r\n        // Approximate the result of division. This may be a little greater or\r\n        // smaller than the actual value.\r\n        approx = Math.max(1, Math.floor(rem.toNumber() / divisor.toNumber()));\r\n\r\n        // We will tweak the approximate result by changing it in the 48-th digit or\r\n        // the smallest non-fractional digit, whichever is larger.\r\n        var log2 = Math.ceil(Math.log(approx) / Math.LN2),\r\n            delta = (log2 <= 48) ? 1 : pow_dbl(2, log2 - 48),\r\n\r\n        // Decrease the approximation until it is smaller than the remainder.  Note\r\n        // that if it is too large, the product overflows and is negative.\r\n            approxRes = fromNumber(approx),\r\n            approxRem = approxRes.mul(divisor);\r\n        while (approxRem.isNegative() || approxRem.gt(rem)) {\r\n            approx -= delta;\r\n            approxRes = fromNumber(approx, this.unsigned);\r\n            approxRem = approxRes.mul(divisor);\r\n        }\r\n\r\n        // We know the answer can't be zero... and actually, zero would cause\r\n        // infinite recursion since we would make no progress.\r\n        if (approxRes.isZero())\r\n            approxRes = ONE;\r\n\r\n        res = res.add(approxRes);\r\n        rem = rem.sub(approxRem);\r\n    }\r\n    return res;\r\n};\r\n\r\n/**\r\n * Returns this Long divided by the specified. This is an alias of {@link Long#divide}.\r\n * @function\r\n * @param {!Long|number|string} divisor Divisor\r\n * @returns {!Long} Quotient\r\n */\r\nLongPrototype.div = LongPrototype.divide;\r\n\r\n/**\r\n * Returns this Long modulo the specified.\r\n * @param {!Long|number|string} divisor Divisor\r\n * @returns {!Long} Remainder\r\n */\r\nLongPrototype.modulo = function modulo(divisor) {\r\n    if (!isLong(divisor))\r\n        divisor = fromValue(divisor);\r\n\r\n    // use wasm support if present\r\n    if (wasm) {\r\n        var low = (this.unsigned ? wasm.rem_u : wasm.rem_s)(\r\n            this.low,\r\n            this.high,\r\n            divisor.low,\r\n            divisor.high\r\n        );\r\n        return fromBits(low, wasm.get_high(), this.unsigned);\r\n    }\r\n\r\n    return this.sub(this.div(divisor).mul(divisor));\r\n};\r\n\r\n/**\r\n * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.\r\n * @function\r\n * @param {!Long|number|string} divisor Divisor\r\n * @returns {!Long} Remainder\r\n */\r\nLongPrototype.mod = LongPrototype.modulo;\r\n\r\n/**\r\n * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.\r\n * @function\r\n * @param {!Long|number|string} divisor Divisor\r\n * @returns {!Long} Remainder\r\n */\r\nLongPrototype.rem = LongPrototype.modulo;\r\n\r\n/**\r\n * Returns the bitwise NOT of this Long.\r\n * @returns {!Long}\r\n */\r\nLongPrototype.not = function not() {\r\n    return fromBits(~this.low, ~this.high, this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns the bitwise AND of this Long and the specified.\r\n * @param {!Long|number|string} other Other Long\r\n * @returns {!Long}\r\n */\r\nLongPrototype.and = function and(other) {\r\n    if (!isLong(other))\r\n        other = fromValue(other);\r\n    return fromBits(this.low & other.low, this.high & other.high, this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns the bitwise OR of this Long and the specified.\r\n * @param {!Long|number|string} other Other Long\r\n * @returns {!Long}\r\n */\r\nLongPrototype.or = function or(other) {\r\n    if (!isLong(other))\r\n        other = fromValue(other);\r\n    return fromBits(this.low | other.low, this.high | other.high, this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns the bitwise XOR of this Long and the given one.\r\n * @param {!Long|number|string} other Other Long\r\n * @returns {!Long}\r\n */\r\nLongPrototype.xor = function xor(other) {\r\n    if (!isLong(other))\r\n        other = fromValue(other);\r\n    return fromBits(this.low ^ other.low, this.high ^ other.high, this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns this Long with bits shifted to the left by the given amount.\r\n * @param {number|!Long} numBits Number of bits\r\n * @returns {!Long} Shifted Long\r\n */\r\nLongPrototype.shiftLeft = function shiftLeft(numBits) {\r\n    if (isLong(numBits))\r\n        numBits = numBits.toInt();\r\n    if ((numBits &= 63) === 0)\r\n        return this;\r\n    else if (numBits < 32)\r\n        return fromBits(this.low << numBits, (this.high << numBits) | (this.low >>> (32 - numBits)), this.unsigned);\r\n    else\r\n        return fromBits(0, this.low << (numBits - 32), this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns this Long with bits shifted to the left by the given amount. This is an alias of {@link Long#shiftLeft}.\r\n * @function\r\n * @param {number|!Long} numBits Number of bits\r\n * @returns {!Long} Shifted Long\r\n */\r\nLongPrototype.shl = LongPrototype.shiftLeft;\r\n\r\n/**\r\n * Returns this Long with bits arithmetically shifted to the right by the given amount.\r\n * @param {number|!Long} numBits Number of bits\r\n * @returns {!Long} Shifted Long\r\n */\r\nLongPrototype.shiftRight = function shiftRight(numBits) {\r\n    if (isLong(numBits))\r\n        numBits = numBits.toInt();\r\n    if ((numBits &= 63) === 0)\r\n        return this;\r\n    else if (numBits < 32)\r\n        return fromBits((this.low >>> numBits) | (this.high << (32 - numBits)), this.high >> numBits, this.unsigned);\r\n    else\r\n        return fromBits(this.high >> (numBits - 32), this.high >= 0 ? 0 : -1, this.unsigned);\r\n};\r\n\r\n/**\r\n * Returns this Long with bits arithmetically shifted to the right by the given amount. This is an alias of {@link Long#shiftRight}.\r\n * @function\r\n * @param {number|!Long} numBits Number of bits\r\n * @returns {!Long} Shifted Long\r\n */\r\nLongPrototype.shr = LongPrototype.shiftRight;\r\n\r\n/**\r\n * Returns this Long with bits logically shifted to the right by the given amount.\r\n * @param {number|!Long} numBits Number of bits\r\n * @returns {!Long} Shifted Long\r\n */\r\nLongPrototype.shiftRightUnsigned = function shiftRightUnsigned(numBits) {\r\n    if (isLong(numBits))\r\n        numBits = numBits.toInt();\r\n    numBits &= 63;\r\n    if (numBits === 0)\r\n        return this;\r\n    else {\r\n        var high = this.high;\r\n        if (numBits < 32) {\r\n            var low = this.low;\r\n            return fromBits((low >>> numBits) | (high << (32 - numBits)), high >>> numBits, this.unsigned);\r\n        } else if (numBits === 32)\r\n            return fromBits(high, 0, this.unsigned);\r\n        else\r\n            return fromBits(high >>> (numBits - 32), 0, this.unsigned);\r\n    }\r\n};\r\n\r\n/**\r\n * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.\r\n * @function\r\n * @param {number|!Long} numBits Number of bits\r\n * @returns {!Long} Shifted Long\r\n */\r\nLongPrototype.shru = LongPrototype.shiftRightUnsigned;\r\n\r\n/**\r\n * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.\r\n * @function\r\n * @param {number|!Long} numBits Number of bits\r\n * @returns {!Long} Shifted Long\r\n */\r\nLongPrototype.shr_u = LongPrototype.shiftRightUnsigned;\r\n\r\n/**\r\n * Converts this Long to signed.\r\n * @returns {!Long} Signed long\r\n */\r\nLongPrototype.toSigned = function toSigned() {\r\n    if (!this.unsigned)\r\n        return this;\r\n    return fromBits(this.low, this.high, false);\r\n};\r\n\r\n/**\r\n * Converts this Long to unsigned.\r\n * @returns {!Long} Unsigned long\r\n */\r\nLongPrototype.toUnsigned = function toUnsigned() {\r\n    if (this.unsigned)\r\n        return this;\r\n    return fromBits(this.low, this.high, true);\r\n};\r\n\r\n/**\r\n * Converts this Long to its byte representation.\r\n * @param {boolean=} le Whether little or big endian, defaults to big endian\r\n * @returns {!Array.<number>} Byte representation\r\n */\r\nLongPrototype.toBytes = function toBytes(le) {\r\n    return le ? this.toBytesLE() : this.toBytesBE();\r\n};\r\n\r\n/**\r\n * Converts this Long to its little endian byte representation.\r\n * @returns {!Array.<number>} Little endian byte representation\r\n */\r\nLongPrototype.toBytesLE = function toBytesLE() {\r\n    var hi = this.high,\r\n        lo = this.low;\r\n    return [\r\n        lo        & 0xff,\r\n        lo >>>  8 & 0xff,\r\n        lo >>> 16 & 0xff,\r\n        lo >>> 24       ,\r\n        hi        & 0xff,\r\n        hi >>>  8 & 0xff,\r\n        hi >>> 16 & 0xff,\r\n        hi >>> 24\r\n    ];\r\n};\r\n\r\n/**\r\n * Converts this Long to its big endian byte representation.\r\n * @returns {!Array.<number>} Big endian byte representation\r\n */\r\nLongPrototype.toBytesBE = function toBytesBE() {\r\n    var hi = this.high,\r\n        lo = this.low;\r\n    return [\r\n        hi >>> 24       ,\r\n        hi >>> 16 & 0xff,\r\n        hi >>>  8 & 0xff,\r\n        hi        & 0xff,\r\n        lo >>> 24       ,\r\n        lo >>> 16 & 0xff,\r\n        lo >>>  8 & 0xff,\r\n        lo        & 0xff\r\n    ];\r\n};\r\n\r\n/**\r\n * Creates a Long from its byte representation.\r\n * @param {!Array.<number>} bytes Byte representation\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @param {boolean=} le Whether little or big endian, defaults to big endian\r\n * @returns {Long} The corresponding Long value\r\n */\r\nLong.fromBytes = function fromBytes(bytes, unsigned, le) {\r\n    return le ? Long.fromBytesLE(bytes, unsigned) : Long.fromBytesBE(bytes, unsigned);\r\n};\r\n\r\n/**\r\n * Creates a Long from its little endian byte representation.\r\n * @param {!Array.<number>} bytes Little endian byte representation\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @returns {Long} The corresponding Long value\r\n */\r\nLong.fromBytesLE = function fromBytesLE(bytes, unsigned) {\r\n    return new Long(\r\n        bytes[0]       |\r\n        bytes[1] <<  8 |\r\n        bytes[2] << 16 |\r\n        bytes[3] << 24,\r\n        bytes[4]       |\r\n        bytes[5] <<  8 |\r\n        bytes[6] << 16 |\r\n        bytes[7] << 24,\r\n        unsigned\r\n    );\r\n};\r\n\r\n/**\r\n * Creates a Long from its big endian byte representation.\r\n * @param {!Array.<number>} bytes Big endian byte representation\r\n * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\r\n * @returns {Long} The corresponding Long value\r\n */\r\nLong.fromBytesBE = function fromBytesBE(bytes, unsigned) {\r\n    return new Long(\r\n        bytes[4] << 24 |\r\n        bytes[5] << 16 |\r\n        bytes[6] <<  8 |\r\n        bytes[7],\r\n        bytes[0] << 24 |\r\n        bytes[1] << 16 |\r\n        bytes[2] <<  8 |\r\n        bytes[3],\r\n        unsigned\r\n    );\r\n};\r\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst abortcontroller_ponyfill_1 = require(\"./abortcontroller-ponyfill\");\nconst AggregateAbortController_1 = __importDefault(require(\"./AggregateAbortController\"));\nconst AggregateStatusReporter_1 = __importDefault(require(\"./AggregateStatusReporter\"));\nclass AbortablePromiseCache {\n    constructor({ fill, cache, }) {\n        if (typeof fill !== 'function') {\n            throw new TypeError('must pass a fill function');\n        }\n        if (typeof cache !== 'object') {\n            throw new TypeError('must pass a cache object');\n        }\n        if (typeof cache.get !== 'function' ||\n            typeof cache.set !== 'function' ||\n            typeof cache.delete !== 'function') {\n            throw new TypeError('cache must implement get(key), set(key, val), and and delete(key)');\n        }\n        this.cache = cache;\n        this.fillCallback = fill;\n    }\n    static isAbortException(exception) {\n        return (\n        // DOMException\n        exception.name === 'AbortError' ||\n            // standard-ish non-DOM abort exception\n            //@ts-ignore\n            exception.code === 'ERR_ABORTED' ||\n            // stringified DOMException\n            exception.message === 'AbortError: aborted' ||\n            // stringified standard-ish exception\n            exception.message === 'Error: aborted');\n    }\n    evict(key, entry) {\n        if (this.cache.get(key) === entry) {\n            this.cache.delete(key);\n        }\n    }\n    fill(key, data, signal, statusCallback) {\n        const aborter = new AggregateAbortController_1.default();\n        const statusReporter = new AggregateStatusReporter_1.default();\n        statusReporter.addCallback(statusCallback);\n        const newEntry = {\n            aborter: aborter,\n            promise: this.fillCallback(data, aborter.signal, (message) => {\n                statusReporter.callback(message);\n            }),\n            settled: false,\n            statusReporter,\n            get aborted() {\n                return this.aborter.signal.aborted;\n            },\n        };\n        newEntry.aborter.addSignal(signal);\n        // remove the fill from the cache when its abortcontroller fires, if still in there\n        newEntry.aborter.signal.addEventListener('abort', () => {\n            if (!newEntry.settled) {\n                this.evict(key, newEntry);\n            }\n        });\n        // chain off the cached promise to record when it settles\n        newEntry.promise\n            .then(() => {\n            newEntry.settled = true;\n        }, () => {\n            newEntry.settled = true;\n            // if the fill throws an error (including abort) and is still in the cache, remove it\n            this.evict(key, newEntry);\n        })\n            .catch(e => {\n            // this will only be reached if there is some kind of\n            // bad bug in this library\n            console.error(e);\n            throw e;\n        });\n        this.cache.set(key, newEntry);\n    }\n    static checkSinglePromise(promise, signal) {\n        // check just this signal for having been aborted, and abort the\n        // promise if it was, regardless of what happened with the cached\n        // response\n        function checkForSingleAbort() {\n            if (signal && signal.aborted) {\n                throw Object.assign(new Error('aborted'), { code: 'ERR_ABORTED' });\n            }\n        }\n        return promise.then(result => {\n            checkForSingleAbort();\n            return result;\n        }, error => {\n            checkForSingleAbort();\n            throw error;\n        });\n    }\n    has(key) {\n        return this.cache.has(key);\n    }\n    /**\n     * Callback for getting status of the pending async\n     *\n     * @callback statusCallback\n     * @param {any} status, current status string or message object\n     */\n    /**\n     * @param {any} key cache key to use for this request\n     * @param {any} data data passed as the first argument to the fill callback\n     * @param {AbortSignal} [signal] optional AbortSignal object that aborts the request\n     * @param {statusCallback} a callback to get the current status of a pending async operation\n     */\n    get(key, data, signal, statusCallback) {\n        if (!signal && data instanceof abortcontroller_ponyfill_1.AbortSignal) {\n            throw new TypeError('second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?');\n        }\n        const cacheEntry = this.cache.get(key);\n        if (cacheEntry) {\n            if (cacheEntry.aborted && !cacheEntry.settled) {\n                // if it's aborted but has not realized it yet, evict it and redispatch\n                this.evict(key, cacheEntry);\n                return this.get(key, data, signal, statusCallback);\n            }\n            if (cacheEntry.settled) {\n                // too late to abort, just return it\n                return cacheEntry.promise;\n            }\n            // request is in-flight, add this signal to its list of signals,\n            // or if there is no signal, the aborter will become non-abortable\n            cacheEntry.aborter.addSignal(signal);\n            cacheEntry.statusReporter.addCallback(statusCallback);\n            return AbortablePromiseCache.checkSinglePromise(cacheEntry.promise, signal);\n        }\n        // if we got here, it is not in the cache. fill.\n        this.fill(key, data, signal, statusCallback);\n        return AbortablePromiseCache.checkSinglePromise(\n        //see https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#non-null-assertion-operator-postfix-\n        //eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        this.cache.get(key).promise, signal);\n    }\n    /**\n     * delete the given entry from the cache. if it exists and its fill request has\n     * not yet settled, the fill will be signaled to abort.\n     *\n     * @param {any} key\n     */\n    delete(key) {\n        const cachedEntry = this.cache.get(key);\n        if (cachedEntry) {\n            if (!cachedEntry.settled) {\n                cachedEntry.aborter.abort();\n            }\n            this.cache.delete(key);\n        }\n    }\n    /**\n     * Clear all requests from the cache. Aborts any that have not settled.\n     * @returns {number} count of entries deleted\n     */\n    clear() {\n        // iterate without needing regenerator-runtime\n        const keyIter = this.cache.keys();\n        let deleteCount = 0;\n        for (let result = keyIter.next(); !result.done; result = keyIter.next()) {\n            this.delete(result.value);\n            deleteCount += 1;\n        }\n        return deleteCount;\n    }\n}\nexports.default = AbortablePromiseCache;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst abortcontroller_ponyfill_1 = require(\"./abortcontroller-ponyfill\");\nclass NullSignal {\n}\n/**\n * aggregates a number of abort signals, will only fire the aggregated\n * abort if all of the input signals have been aborted\n */\nclass AggregateAbortController {\n    constructor() {\n        this.signals = new Set();\n        this.abortController = new abortcontroller_ponyfill_1.AbortController();\n    }\n    /**\n     * @param {AbortSignal} [signal] optional AbortSignal to add. if falsy,\n     *  will be treated as a null-signal, and this abortcontroller will no\n     *  longer be abortable.\n     */\n    //@ts-ignore\n    addSignal(signal = new NullSignal()) {\n        if (this.signal.aborted) {\n            throw new Error('cannot add a signal, already aborted!');\n        }\n        // note that a NullSignal will never fire, so if we\n        // have one this thing will never actually abort\n        this.signals.add(signal);\n        if (signal.aborted) {\n            // handle the abort immediately if it is already aborted\n            // for some reason\n            this.handleAborted(signal);\n        }\n        else if (typeof signal.addEventListener === 'function') {\n            signal.addEventListener('abort', () => {\n                this.handleAborted(signal);\n            });\n        }\n    }\n    handleAborted(signal) {\n        this.signals.delete(signal);\n        if (this.signals.size === 0) {\n            this.abortController.abort();\n        }\n    }\n    get signal() {\n        return this.abortController.signal;\n    }\n    abort() {\n        this.abortController.abort();\n    }\n}\nexports.default = AggregateAbortController;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass AggregateStatusReporter {\n    constructor() {\n        this.callbacks = new Set();\n    }\n    addCallback(callback = () => { }) {\n        this.callbacks.add(callback);\n        callback(this.currentMessage);\n    }\n    callback(message) {\n        this.currentMessage = message;\n        this.callbacks.forEach(elt => {\n            elt(message);\n        });\n    }\n}\nexports.default = AggregateStatusReporter;\n",null,"\"use strict\";function _typeof(obj) {if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} //= =======================================================================================\n// Globals\n//= =======================================================================================\nvar _require = require(\"buffer\"),Buffer = _require.Buffer;\nvar vm = require(\"vm\");\n\nvar Context = require(\"./context\").Context;\nvar Long = require(\"long\");\n\nif (typeof window !== \"undefined\") window.Buffer = Buffer;\nif (typeof self !== \"undefined\") self.Buffer = Buffer; // this is for webworker, and also is not an elseif to avoid window polyfills in webworker\n\nvar PRIMITIVE_TYPES = {\n  UInt8: 1,\n  UInt16LE: 2,\n  UInt16BE: 2,\n  UInt32LE: 4,\n  UInt32BE: 4,\n  Int8: 1,\n  Int16LE: 2,\n  Int16BE: 2,\n  Int32LE: 4,\n  Int32BE: 4,\n  FloatLE: 4,\n  FloatBE: 4,\n  DoubleLE: 8,\n  DoubleBE: 8,\n  UInt64: 8,\n  Int64: 8 };\n\n\nvar SPECIAL_TYPES = {\n  String: null,\n  Buffer: null,\n  Array: null,\n  Skip: null,\n  Choice: null,\n  Nest: null,\n  Bit: null,\n  Itf8: null,\n  Ltf8: null };\n\n\nvar aliasRegistry = {};\nvar FUNCTION_PREFIX = \"___parser_\";\n\nvar BIT_RANGE = [];\n(function () {\n  var i;\n  for (i = 1; i <= 32; i++) {\n    BIT_RANGE.push(i);\n  }\n})();\n\n// Converts Parser's method names to internal type names\nvar NAME_MAP = {};\nObject.keys(PRIMITIVE_TYPES).\nconcat(Object.keys(SPECIAL_TYPES)).\nforEach(function (type) {\n  NAME_MAP[type.toLowerCase()] = type;\n});\n\n//= =======================================================================================\n// class Parser\n//= =======================================================================================\n\n//----------------------------------------------------------------------------------------\n// constructor\n//----------------------------------------------------------------------------------------\n\nvar Parser = function Parser() {\n  this.varName = \"\";\n  this.type = \"\";\n  this.options = {};\n  this.next = null;\n  this.head = null;\n  this.compiled = null;\n  this.endian = \"le\";\n  this.constructorFn = null;\n  this.alias = null;\n};\n\n//----------------------------------------------------------------------------------------\n// public methods\n//----------------------------------------------------------------------------------------\n\nParser.start = function () {\n  return new Parser();\n};\n\nObject.keys(PRIMITIVE_TYPES).forEach(function (type) {\n  Parser.prototype[type.toLowerCase()] = function (varName, options) {\n    return this.setNextParser(type.toLowerCase(), varName, options);\n  };\n\n  var typeWithoutEndian = type.replace(/BE|LE/, \"\").toLowerCase();\n  if (!(typeWithoutEndian in Parser.prototype)) {\n    Parser.prototype[typeWithoutEndian] = function (varName, options) {\n      return this[typeWithoutEndian + this.endian](varName, options);\n    };\n  }\n});\n\nBIT_RANGE.forEach(function (i) {\n  Parser.prototype[\"bit\".concat(i.toString())] = function (varName, options) {\n    if (!options) {\n      options = {};\n    }\n    options.length = i;\n    return this.setNextParser(\"bit\", varName, options);\n  };\n});\n\nParser.prototype.namely = function (alias) {\n  aliasRegistry[alias] = this;\n  this.alias = alias;\n  return this;\n};\n\nParser.prototype.skip = function (length, options) {\n  if (options && options.assert) {\n    throw new Error(\"assert option on skip is not allowed.\");\n  }\n\n  return this.setNextParser(\"skip\", \"\", { length: length });\n};\n\nParser.prototype.string = function (varName, options) {\n  if (!options.zeroTerminated && !options.length && !options.greedy) {\n    throw new Error(\n    \"Neither length, zeroTerminated, nor greedy is defined for string.\");\n\n  }\n  if ((options.zeroTerminated || options.length) && options.greedy) {\n    throw new Error(\n    \"greedy is mutually exclusive with length and zeroTerminated for string.\");\n\n  }\n  if (options.stripNull && !(options.length || options.greedy)) {\n    throw new Error(\n    \"Length or greedy must be defined if stripNull is defined.\");\n\n  }\n  options.encoding = options.encoding || \"utf8\";\n\n  return this.setNextParser(\"string\", varName, options);\n};\n\nParser.prototype.buffer = function (varName, options) {\n  if (!options.length && !options.readUntil) {\n    throw new Error(\"Length nor readUntil is defined in buffer parser\");\n  }\n\n  return this.setNextParser(\"buffer\", varName, options);\n};\n\nParser.prototype.array = function (varName, options) {\n  if (!options.readUntil && !options.length && !options.lengthInBytes) {\n    throw new Error(\"Length option of array is not defined.\");\n  }\n  if (!options.type) {\n    throw new Error(\"Type option of array is not defined.\");\n  }\n  if (\n  typeof options.type === \"string\" &&\n  !aliasRegistry[options.type] &&\n  Object.keys(PRIMITIVE_TYPES).indexOf(NAME_MAP[options.type]) < 0)\n  {\n    throw new Error(\"Specified primitive type \\\"\".concat(\n    options.type, \"\\\" is not supported.\"));\n\n  }\n\n  return this.setNextParser(\"array\", varName, options);\n};\n\nParser.prototype.choice = function (varName, options) {\n  if (arguments.length === 1 && _typeof(varName) === \"object\") {\n    options = varName;\n    varName = null;\n  }\n\n  if (!options.tag) {\n    throw new Error(\"Tag option of array is not defined.\");\n  }\n  if (!options.choices) {\n    throw new Error(\"Choices option of array is not defined.\");\n  }\n\n  Object.keys(options.choices).forEach(function (key) {\n    // if (isNaN(parseInt(key, 10))) {\n    //   throw new Error(\"Key of choices must be a number.\");\n    // }\n    if (!options.choices[key]) {\n      throw new Error(\"Choice Case \".concat(key, \" of \").concat(varName, \" is not valid.\"));\n    }\n\n    if (\n    typeof options.choices[key] === \"string\" &&\n    !aliasRegistry[options.choices[key]] &&\n    Object.keys(PRIMITIVE_TYPES).indexOf(NAME_MAP[options.choices[key]]) < 0)\n    {\n      throw new Error(\"Specified primitive type \\\"\".concat(\n      options.choices[key], \"\\\" is not supported.\"));\n\n    }\n  }, this);\n\n  return this.setNextParser(\"choice\", varName, options);\n};\n\nParser.prototype.nest = function (varName, options) {\n  if (arguments.length === 1 && _typeof(varName) === \"object\") {\n    options = varName;\n    varName = null;\n  }\n\n  if (!options.type) {\n    throw new Error(\"Type option of nest is not defined.\");\n  }\n  if (!(options.type instanceof Parser) && !aliasRegistry[options.type]) {\n    throw new Error(\"Type option of nest must be a Parser object.\");\n  }\n  if (!(options.type instanceof Parser) && !varName) {\n    throw new Error(\n    \"options.type must be a object if variable name is omitted.\");\n\n  }\n\n  return this.setNextParser(\"nest\", varName, options);\n};\n\nParser.prototype.endianess = function (endianess) {\n  switch (endianess.toLowerCase()) {\n    case \"little\":\n      this.endian = \"le\";\n      break;\n    case \"big\":\n      this.endian = \"be\";\n      break;\n    default:\n      throw new Error(\"Invalid endianess: \".concat(endianess));}\n\n\n  return this;\n};\n\nParser.prototype.create = function (constructorFn) {\n  if (!(constructorFn instanceof Function)) {\n    throw new Error(\"Constructor must be a Function object.\");\n  }\n\n  this.constructorFn = constructorFn;\n\n  return this;\n};\n\nParser.prototype.getCode = function () {\n  var ctx = new Context();\n\n  ctx.pushCode(\"if (!Buffer.isBuffer(buffer)) {\");\n  ctx.generateError('\"argument buffer is not a Buffer object\"');\n  ctx.pushCode(\"}\");\n\n  if (!this.alias) {\n    this.addRawCode(ctx);\n  } else {\n    this.addAliasedCode(ctx);\n  }\n\n  if (this.alias) {\n    ctx.pushCode(\"return {0}(0)\", FUNCTION_PREFIX + this.alias);\n  } else {\n    ctx.pushCode(\"return { offset: offset, result: vars };\");\n  }\n\n  return ctx.code;\n};\n\nParser.prototype.addRawCode = function (ctx) {\n  ctx.pushCode(\"var offset = 0;\");\n\n  if (this.constructorFn) {\n    ctx.pushCode(\"var vars = new constructorFn();\");\n  } else {\n    ctx.pushCode(\"var vars = {};\");\n  }\n\n  this.generate(ctx);\n\n  this.resolveReferences(ctx);\n\n  ctx.pushCode(\"return { offset: offset, result: vars };\");\n};\n\nParser.prototype.addAliasedCode = function (ctx) {\n  ctx.pushCode(\"function {0}(offset) {\", FUNCTION_PREFIX + this.alias);\n\n  if (this.constructorFn) {\n    ctx.pushCode(\"var vars = new constructorFn();\");\n  } else {\n    ctx.pushCode(\"var vars = {};\");\n  }\n\n  this.generate(ctx);\n\n  ctx.markResolved(this.alias);\n  this.resolveReferences(ctx);\n\n  ctx.pushCode(\"return { offset: offset, result: vars };\");\n  ctx.pushCode(\"}\");\n\n  return ctx;\n};\n\nParser.prototype.resolveReferences = function (ctx) {\n  var references = ctx.getUnresolvedReferences();\n  ctx.markRequested(references);\n  references.forEach(function (alias) {\n    var parser = aliasRegistry[alias];\n    parser.addAliasedCode(ctx);\n  });\n};\n\nParser.prototype.compile = function () {\n  var src = \"(function(buffer, constructorFn, Long) { \".concat(this.getCode(), \" })\");\n  this.compiled = vm.runInThisContext(src);\n};\n\nParser.prototype.sizeOf = function () {\n  var size = NaN;\n\n  if (Object.keys(PRIMITIVE_TYPES).indexOf(this.type) >= 0) {\n    size = PRIMITIVE_TYPES[this.type];\n\n    // if this is a fixed length string\n  } else if (\n  this.type === \"String\" &&\n  typeof this.options.length === \"number\")\n  {\n    size = this.options.length;\n\n    // if this is a fixed length buffer\n  } else if (\n  this.type === \"Buffer\" &&\n  typeof this.options.length === \"number\")\n  {\n    size = this.options.length;\n\n    // if this is a fixed length array\n  } else if (this.type === \"Array\" && typeof this.options.length === \"number\") {\n    var elementSize = NaN;\n    if (typeof this.options.type === \"string\") {\n      elementSize = PRIMITIVE_TYPES[NAME_MAP[this.options.type]];\n    } else if (this.options.type instanceof Parser) {\n      elementSize = this.options.type.sizeOf();\n    }\n    size = this.options.length * elementSize;\n\n    // if this a skip\n  } else if (this.type === \"Skip\") {\n    size = this.options.length;\n\n    // if this is a nested parser\n  } else if (this.type === \"Nest\") {\n    size = this.options.type.sizeOf();\n  } else if (!this.type) {\n    size = 0;\n  }\n\n  if (this.next) {\n    size += this.next.sizeOf();\n  }\n\n  return size;\n};\n\n// Follow the parser chain till the root and start parsing from there\nParser.prototype.parse = function (buffer) {\n  if (!this.compiled) {\n    this.compile();\n  }\n\n  return this.compiled(buffer, this.constructorFn, Long);\n};\n\n//----------------------------------------------------------------------------------------\n// private methods\n//----------------------------------------------------------------------------------------\n\nParser.prototype.setNextParser = function (type, varName, options) {\n  var parser = new Parser();\n\n  parser.type = NAME_MAP[type];\n  parser.varName = varName;\n  parser.options = options || parser.options;\n  parser.endian = this.endian;\n\n  if (this.head) {\n    this.head.next = parser;\n  } else {\n    this.next = parser;\n  }\n  this.head = parser;\n\n  return this;\n};\n\n// Call code generator for this parser\nParser.prototype.generate = function (ctx) {\n  if (this.type) {\n    this[\"generate\".concat(this.type)](ctx);\n    this.generateAssert(ctx);\n  }\n\n  var varName = ctx.generateVariable(this.varName);\n  if (this.options.formatter) {\n    this.generateFormatter(ctx, varName, this.options.formatter);\n  }\n\n  return this.generateNext(ctx);\n};\n\nParser.prototype.generateAssert = function (ctx) {\n  if (!this.options.assert) {\n    return;\n  }\n\n  var varName = ctx.generateVariable(this.varName);\n\n  switch (_typeof(this.options.assert)) {\n    case \"function\":\n      ctx.pushCode(\n      \"if (!({0}).call(vars, {1})) {\",\n      this.options.assert,\n      varName);\n\n      break;\n    case \"number\":\n      ctx.pushCode(\"if ({0} !== {1}) {\", this.options.assert, varName);\n      break;\n    case \"string\":\n      ctx.pushCode('if (\"{0}\" !== {1}) {', this.options.assert, varName);\n      break;\n    default:\n      throw new Error(\n      \"Assert option supports only strings, numbers and assert functions.\");}\n\n\n  ctx.generateError('\"Assert error: {0} is \" + {0}', varName);\n  ctx.pushCode(\"}\");\n};\n\n// Recursively call code generators and append results\nParser.prototype.generateNext = function (ctx) {\n  if (this.next) {\n    ctx = this.next.generate(ctx);\n  }\n\n  return ctx;\n};\n\nObject.keys(PRIMITIVE_TYPES).forEach(function (type) {\n  Parser.prototype[\"generate\".concat(type)] = function (ctx) {\n    if (type === \"UInt64\") {\n      ctx.pushCode(\n      \"{0} = Long.fromBytes(buffer.slice(offset,offset+8), true, this.endian === 'le').toNumber();\",\n      ctx.generateVariable(this.varName),\n      type);\n\n    } else if (type === \"Int64\") {\n      ctx.pushCode(\n      \"{0} = Long.fromBytes(buffer.slice(offset,offset+8), false, this.endian === 'le').toNumber();\",\n      ctx.generateVariable(this.varName),\n      type);\n\n    } else {\n      ctx.pushCode(\n      \"{0} = buffer.read{1}(offset);\",\n      ctx.generateVariable(this.varName),\n      type);\n\n    }\n    ctx.pushCode(\"offset += {0};\", PRIMITIVE_TYPES[type]);\n  };\n});\n\nParser.prototype.generateBit = function (ctx) {\n  // TODO find better method to handle nested bit fields\n  var parser = JSON.parse(JSON.stringify(this));\n  parser.varName = ctx.generateVariable(parser.varName);\n  ctx.bitFields.push(parser);\n\n  if (\n  !this.next ||\n  this.next && [\"Bit\", \"Nest\"].indexOf(this.next.type) < 0)\n  {\n    var sum = 0;\n    ctx.bitFields.forEach(function (p) {\n      sum += p.options.length;\n    });\n\n    var val = ctx.generateTmpVariable();\n\n    if (sum <= 8) {\n      ctx.pushCode(\"var {0} = buffer.readUInt8(offset);\", val);\n      sum = 8;\n    } else if (sum <= 16) {\n      ctx.pushCode(\"var {0} = buffer.readUInt16BE(offset);\", val);\n      sum = 16;\n    } else if (sum <= 24) {\n      var val1 = ctx.generateTmpVariable();\n      var val2 = ctx.generateTmpVariable();\n      ctx.pushCode(\"var {0} = buffer.readUInt16BE(offset);\", val1);\n      ctx.pushCode(\"var {0} = buffer.readUInt8(offset + 2);\", val2);\n      ctx.pushCode(\"var {2} = ({0} << 8) | {1};\", val1, val2, val);\n      sum = 24;\n    } else if (sum <= 32) {\n      ctx.pushCode(\"var {0} = buffer.readUInt32BE(offset);\", val);\n      sum = 32;\n    } else {\n      throw new Error(\n      \"Currently, bit field sequence longer than 4-bytes is not supported.\");\n\n    }\n    ctx.pushCode(\"offset += {0};\", sum / 8);\n\n    var bitOffset = 0;\n    var isBigEndian = this.endian === \"be\";\n    ctx.bitFields.forEach(function (p) {\n      ctx.pushCode(\n      \"{0} = {1} >> {2} & {3};\",\n      p.varName,\n      val,\n      isBigEndian ? sum - bitOffset - p.options.length : bitOffset,\n      (1 << p.options.length) - 1);\n\n      bitOffset += p.options.length;\n    });\n\n    ctx.bitFields = [];\n  }\n};\n\nParser.prototype.generateSkip = function (ctx) {\n  var length = ctx.generateOption(this.options.length);\n  ctx.pushCode(\"offset += {0};\", length);\n};\n\nParser.prototype.generateString = function (ctx) {\n  var name = ctx.generateVariable(this.varName);\n  var start = ctx.generateTmpVariable();\n\n  if (this.options.length && this.options.zeroTerminated) {\n    ctx.pushCode(\"var {0} = offset;\", start);\n    ctx.pushCode(\n    \"while(buffer.readUInt8(offset++) !== 0 && offset - {0}  < {1});\",\n    start,\n    this.options.length);\n\n    ctx.pushCode(\n    \"{0} = buffer.toString('{1}', {2}, offset - {2} < {3} ? offset - 1 : offset);\",\n    name,\n    this.options.encoding,\n    start,\n    this.options.length);\n\n  } else if (this.options.length) {\n    ctx.pushCode(\n    \"{0} = buffer.toString('{1}', offset, offset + {2});\",\n    name,\n    this.options.encoding,\n    ctx.generateOption(this.options.length));\n\n    ctx.pushCode(\"offset += {0};\", ctx.generateOption(this.options.length));\n  } else if (this.options.zeroTerminated) {\n    ctx.pushCode(\"var {0} = offset;\", start);\n    ctx.pushCode(\"while(buffer.readUInt8(offset++) !== 0);\");\n    ctx.pushCode(\n    \"{0} = buffer.toString('{1}', {2}, offset - 1);\",\n    name,\n    this.options.encoding,\n    start);\n\n  } else if (this.options.greedy) {\n    ctx.pushCode(\"var {0} = offset;\", start);\n    ctx.pushCode(\"while(buffer.length > offset++);\");\n    ctx.pushCode(\n    \"{0} = buffer.toString('{1}', {2}, offset);\",\n    name,\n    this.options.encoding,\n    start);\n\n  }\n  if (this.options.stripNull) {\n    ctx.pushCode(\"{0} = {0}.replace(/\\\\x00+$/g, '')\", name);\n  }\n};\n\nParser.prototype.generateBuffer = function (ctx) {\n  if (this.options.readUntil === \"eof\") {\n    ctx.pushCode(\n    \"{0} = buffer.slice(offset);\",\n    ctx.generateVariable(this.varName));\n\n  } else {\n    ctx.pushCode(\n    \"{0} = buffer.slice(offset, offset + {1});\",\n    ctx.generateVariable(this.varName),\n    ctx.generateOption(this.options.length));\n\n    ctx.pushCode(\"offset += {0};\", ctx.generateOption(this.options.length));\n  }\n\n  if (this.options.clone) {\n    ctx.pushCode(\"{0} = Buffer.from({0});\", ctx.generateVariable(this.varName));\n  }\n};\n\nParser.prototype.generateArray = function (ctx) {\n  var length = ctx.generateOption(this.options.length);\n  var lengthInBytes = ctx.generateOption(this.options.lengthInBytes);\n  var type = this.options.type;\n  var counter = ctx.generateTmpVariable();\n  var lhs = ctx.generateVariable(this.varName);\n  var item = ctx.generateTmpVariable();\n  var key = this.options.key;\n  var isHash = typeof key === \"string\";\n\n  if (isHash) {\n    ctx.pushCode(\"{0} = {};\", lhs);\n  } else {\n    ctx.pushCode(\"{0} = [];\", lhs);\n  }\n  if (typeof this.options.readUntil === \"function\") {\n    ctx.pushCode(\"do {\");\n  } else if (this.options.readUntil === \"eof\") {\n    ctx.pushCode(\"for (var {0} = 0; offset < buffer.length; {0}++) {\", counter);\n  } else if (lengthInBytes !== undefined) {\n    ctx.pushCode(\n    \"for (var {0} = offset; offset - {0} < {1}; ) {\",\n    counter,\n    lengthInBytes);\n\n  } else {\n    ctx.pushCode(\"for (var {0} = 0; {0} < {1}; {0}++) {\", counter, length);\n  }\n\n  if (typeof type === \"string\") {\n    if (!aliasRegistry[type]) {\n      ctx.pushCode(\"var {0} = buffer.read{1}(offset);\", item, NAME_MAP[type]);\n      ctx.pushCode(\"offset += {0};\", PRIMITIVE_TYPES[NAME_MAP[type]]);\n    } else {\n      var tempVar = ctx.generateTmpVariable();\n      ctx.pushCode(\"var {0} = {1}(offset);\", tempVar, FUNCTION_PREFIX + type);\n      ctx.pushCode(\"var {0} = {1}.result; offset = {1}.offset;\", item, tempVar);\n      if (type !== this.alias) ctx.addReference(type);\n    }\n  } else if (type instanceof Parser) {\n    ctx.pushCode(\"var {0} = {};\", item);\n\n    ctx.pushScope(item);\n    type.generate(ctx);\n    ctx.popScope();\n  }\n\n  if (isHash) {\n    ctx.pushCode(\"{0}[{2}.{1}] = {2};\", lhs, key, item);\n  } else {\n    ctx.pushCode(\"{0}.push({1});\", lhs, item);\n  }\n\n  ctx.pushCode(\"}\");\n\n  if (typeof this.options.readUntil === \"function\") {\n    ctx.pushCode(\n    \" while (!({0}).call(this, {1}, buffer.slice(offset)));\",\n    this.options.readUntil,\n    item);\n\n  }\n};\n\nParser.prototype.generateChoiceCase = function (ctx, varName, type) {\n  if (typeof type === \"string\") {\n    if (!aliasRegistry[type]) {\n      ctx.pushCode(\n      \"{0} = buffer.read{1}(offset);\",\n      ctx.generateVariable(this.varName),\n      NAME_MAP[type]);\n\n      ctx.pushCode(\"offset += {0};\", PRIMITIVE_TYPES[NAME_MAP[type]]);\n    } else {\n      var tempVar = ctx.generateTmpVariable();\n      ctx.pushCode(\"var {0} = {1}(offset);\", tempVar, FUNCTION_PREFIX + type);\n      ctx.pushCode(\n      \"{0} = {1}.result; offset = {1}.offset;\",\n      ctx.generateVariable(this.varName),\n      tempVar);\n\n      if (type !== this.alias) ctx.addReference(type);\n    }\n  } else if (type instanceof Parser) {\n    ctx.pushPath(varName);\n    type.generate(ctx);\n    ctx.popPath(varName);\n  }\n};\n\nParser.prototype.generateChoice = function (ctx) {\n  var tag = ctx.generateOption(this.options.tag);\n  if (this.varName) {\n    ctx.pushCode(\"{0} = {};\", ctx.generateVariable(this.varName));\n  }\n  ctx.pushCode(\"switch({0}) {\", tag);\n  Object.keys(this.options.choices).forEach(function (t) {\n    var type = this.options.choices[t];\n    if (Number.isNaN(parseInt(t, 10))) {\n      ctx.pushCode(\"case '{0}':\", t);\n    } else {\n      ctx.pushCode(\"case {0}:\", t);\n    }\n    this.generateChoiceCase(ctx, this.varName, type);\n    ctx.pushCode(\"break;\");\n  }, this);\n  ctx.pushCode(\"default:\");\n  if (this.options.defaultChoice) {\n    this.generateChoiceCase(ctx, this.varName, this.options.defaultChoice);\n  } else {\n    ctx.generateError('\"Met undefined tag value \" + {0} + \" at choice\"', tag);\n  }\n  ctx.pushCode(\"}\");\n};\n\nParser.prototype.generateNest = function (ctx) {\n  var nestVar = ctx.generateVariable(this.varName);\n\n  if (this.options.type instanceof Parser) {\n    if (this.varName) {\n      ctx.pushCode(\"{0} = {};\", nestVar);\n    }\n    ctx.pushPath(this.varName);\n    this.options.type.generate(ctx);\n    ctx.popPath(this.varName);\n  } else if (aliasRegistry[this.options.type]) {\n    var tempVar = ctx.generateTmpVariable();\n    ctx.pushCode(\n    \"var {0} = {1}(offset);\",\n    tempVar,\n    FUNCTION_PREFIX + this.options.type);\n\n    ctx.pushCode(\"{0} = {1}.result; offset = {1}.offset;\", nestVar, tempVar);\n    if (this.options.type !== this.alias) ctx.addReference(this.options.type);\n  }\n};\n\nParser.prototype.generateFormatter = function (ctx, varName, formatter) {\n  if (typeof formatter === \"function\") {\n    ctx.pushCode(\"{0} = ({1}).call(this, {0});\", varName, formatter);\n  }\n};\n\nParser.prototype.isInteger = function () {\n  return !!this.type.match(/U?Int[8|16|32][BE|LE]?|Bit\\d+/);\n};\n\n// /////////////////// CRAM-specific types //////////////////////////\n//\nParser.prototype.itf8 = function (varName, options) {\n  return this.setNextParser(\"itf8\", varName, options);\n};\nParser.prototype.itf8 = function (varName, options) {\n  return this.setNextParser(\"itf8\", varName, options);\n};\n\nParser.prototype.generateItf8 = function (ctx) {\n  var name = ctx.generateVariable(this.varName);\n  var countFlags = ctx.generateTmpVariable();\n  ctx.pushCode(\"\\n    var \".concat(\n  countFlags, \" = buffer[offset];\\n    if (\").concat(\n  countFlags, \" < 0x80) {\\n      \").concat(\n  name, \" = \").concat(countFlags, \";\\n      offset += 1;\\n    } else if (\").concat(\n\n  countFlags, \" < 0xc0) {\\n      \").concat(\n  name, \" = ((\").concat(countFlags, \"<<8) | buffer[offset+1]) & 0x3fff;\\n      offset += 2;\\n    } else if (\").concat(\n\n  countFlags, \" < 0xe0) {\\n      \").concat(\n  name, \" = ((\").concat(countFlags, \"<<16) | (buffer[offset+1]<< 8) |  buffer[offset+2]) & 0x1fffff;\\n      offset += 3;\\n    } else if (\").concat(\n\n  countFlags, \" < 0xf0) {\\n      \").concat(\n  name, \" = ((\").concat(countFlags, \"<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\\n      offset += 4\\n    } else {\\n      \").concat(\n\n\n  name, \" = ((\").concat(countFlags, \" & 0x0f)<<28) | (buffer[offset+1]<<20) | (buffer[offset+2]<<12) | (buffer[offset+3]<<4) | (buffer[offset+4] & 0x0f);\\n      // x=((0xff & 0x0f)<<28) | (0xff<<20) | (0xff<<12) | (0xff<<4) | (0x0f & 0x0f);\\n      // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\\n      offset += 5\\n    }\\n  \"));\n\n\n\n\n\n};\n\nParser.prototype.ltf8 = function (varName, options) {\n  return this.setNextParser(\"ltf8\", varName, options);\n};\n\nParser.prototype.generateLtf8 = function (ctx) {\n  var name = ctx.generateVariable(this.varName);\n  var countFlags = ctx.generateTmpVariable();\n  ctx.pushCode(\"\\n  var \".concat(\n  countFlags, \" = buffer[offset];\\n  if (\").concat(\n  countFlags, \" < 0x80) {\\n    \").concat(\n  name, \" = \").concat(countFlags, \";\\n    offset += 1;\\n  } else if (\").concat(\n\n  countFlags, \" < 0xc0) {\\n    \").concat(\n  name, \" = ((buffer[offset]<<8) | buffer[offset+1]) & 0x3fff;\\n    offset += 2;\\n  } else if (\").concat(\n\n  countFlags, \" < 0xe0) {\\n    \").concat(\n  name, \" = ((buffer[offset]<<16) | (buffer[offset+1]<<8) | buffer[offset+2]) & 0x1fffff;\\n    \").concat(\n  name, \" = (((\").concat(countFlags, \" & 63) << 16) | buffer.readUInt16LE(offset + 1));\\n    offset += 3;\\n  } else if (\").concat(\n\n  countFlags, \" < 0xf0) {\\n    \").concat(\n  name, \" = ((buffer[offset]<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\\n    offset += 4;\\n  } else if (\").concat(\n\n  countFlags, \" < 0xf8) {\\n    \").concat(\n  name, \" = (((buffer[offset] & 15) * Math.pow(2,32))) +\\n      (buffer[offset+1]<<24) | (buffer[offset+2]<<16 | buffer[offset+3]<<8 | buffer[offset+4])\\n    // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\\n    offset += 5;\\n  } else if (\").concat(\n\n\n\n  countFlags, \" < 0xfc) {\\n    \").concat(\n  name, \" = ((((buffer[offset] & 7) << 8) | buffer[offset+1] )) * Math.pow(2,32) +\\n      (buffer[offset+2]<<24) | (buffer[offset+3]<<16 | buffer[offset+4]<<8 | buffer[offset+5])\\n    offset += 6;\\n  } else if (\").concat(\n\n\n  countFlags, \" < 0xfe) {\\n    \").concat(\n  name, \" = ((((buffer[offset] & 3) << 16) | buffer[offset+1]<<8 | buffer[offset+2])) * Math.pow(2,32) +\\n      (buffer[offset+3]<<24) | (buffer[offset+4]<<16 | buffer[offset+5]<<8 | buffer[offset+6])\\n    offset += 7;\\n  } else if (\").concat(\n\n\n  countFlags, \" < 0xff) {\\n    \").concat(\n  name, \" = Long.fromBytesBE(buffer.slice(offset+1,offset+8));\\n    if (\").concat(\n  name, \".greaterThan(Number.MAX_SAFE_INTEGER) || \").concat(name, \".lessThan(Number.MIN_SAFE_INTEGER))\\n      throw new Error('integer overflow')\\n    \").concat(\n\n  name, \" = \").concat(name, \".toNumber()\\n    offset += 8;\\n  } else {\\n    \").concat(\n\n\n  name, \" = Long.fromBytesBE(buffer.slice(offset+1,offset+9));\\n    if (\").concat(\n  name, \".greaterThan(Number.MAX_SAFE_INTEGER) || \").concat(name, \".lessThan(Number.MIN_SAFE_INTEGER))\\n      throw new Error('integer overflow')\\n    \").concat(\n\n  name, \" = \").concat(name, \".toNumber()\\n    offset += 9;\\n  }\\n  \"));\n\n\n\n};\n\n//= =======================================================================================\n// Exports\n//= =======================================================================================\n\nexports.Parser = Parser;","// https://github.com/ionic-team/rollup-plugin-node-polyfills/blob/9b5fe1a9cafffd4871e6d65613ed224f807ea251/polyfills/vm.js#L129-L132\nfunction runInThisContext(code) {\n  const fn = new Function('code', 'return eval(code);');\n  return fn.call(globalThis, code);\n}\n\nmodule.exports.runInThisContext = runInThisContext;\n","\"use strict\";function _typeof(obj) {if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} //= =======================================================================================\n// class Context\n//= =======================================================================================\n\n//----------------------------------------------------------------------------------------\n// constructor\n//----------------------------------------------------------------------------------------\n\nvar Context = function Context() {\n  this.code = \"\";\n  this.scopes = [[\"vars\"]];\n  this.isAsync = false;\n  this.bitFields = [];\n  this.tmpVariableCount = 0;\n  this.references = {};\n};\n\n//----------------------------------------------------------------------------------------\n// public methods\n//----------------------------------------------------------------------------------------\n\nContext.prototype.generateVariable = function (name) {\n  var arr = [];\n\n  Array.prototype.push.apply(arr, this.scopes[this.scopes.length - 1]);\n\n  // $parent. prefixes allow sub-parsers to access values of their parent parsers\n  while (/^\\$parent\\./.test(name)) {\n    arr.pop();\n    name = name.replace(/^\\$parent\\./, \"\");\n  }\n\n  if (name) {\n    arr.push(name);\n  }\n\n  return arr.join(\".\");\n};\n\nContext.prototype.generateOption = function (val) {\n  switch (_typeof(val)) {\n    case \"number\":\n      return val.toString();\n    case \"string\":\n      return this.generateVariable(val);\n    case \"function\":\n      return \"(\".concat(val, \").call(\").concat(this.generateVariable(), \", vars)\");\n    default:\n      return undefined;}\n\n};\n\nContext.prototype.generateError = function () {\n  var args = Array.prototype.slice.call(arguments);\n  var err = Context.interpolate.apply(this, args);\n\n  if (this.isAsync) {\n    this.pushCode(\"return process.nextTick(function() { callback(new Error(\".concat(\n    err, \"), vars); });\"));\n\n  } else {\n    this.pushCode(\"throw new Error(\".concat(err, \");\"));\n  }\n};\n\nContext.prototype.generateTmpVariable = function () {\n  return \"$tmp\".concat(this.tmpVariableCount++);\n};\n\nContext.prototype.pushCode = function () {\n  var args = Array.prototype.slice.call(arguments);\n\n  this.code += \"\".concat(Context.interpolate.apply(this, args), \"\\n\");\n};\n\nContext.prototype.pushPath = function (name) {\n  if (name) {\n    this.scopes[this.scopes.length - 1].push(name);\n  }\n};\n\nContext.prototype.popPath = function (name) {\n  if (name) {\n    this.scopes[this.scopes.length - 1].pop();\n  }\n};\n\nContext.prototype.pushScope = function (name) {\n  this.scopes.push([name]);\n};\n\nContext.prototype.popScope = function () {\n  this.scopes.pop();\n};\n\nContext.prototype.addReference = function (alias) {\n  if (this.references[alias]) return;\n  this.references[alias] = { resolved: false, requested: false };\n};\n\nContext.prototype.markResolved = function (alias) {\n  this.references[alias].resolved = true;\n};\n\nContext.prototype.markRequested = function (aliasList) {\n  aliasList.forEach(\n  function (alias) {\n    this.references[alias].requested = true;\n  }.bind(this));\n\n};\n\nContext.prototype.getUnresolvedReferences = function () {\n  var references = this.references;\n  return Object.keys(this.references).filter(function (alias) {\n    return !references[alias].resolved && !references[alias].requested;\n  });\n};\n\n//----------------------------------------------------------------------------------------\n// private methods\n//----------------------------------------------------------------------------------------\n\nContext.interpolate = function (s) {\n  var re = /{\\d+}/g;\n  var matches = s.match(re);\n  var params = Array.prototype.slice.call(arguments, 1);\n\n  if (matches) {\n    matches.forEach(function (match) {\n      var index = parseInt(match.substr(1, match.length - 2), 10);\n      s = s.replace(match, params[index].toString());\n    });\n  }\n\n  return s;\n};\n\nexports.Context = Context;"],"sourceRoot":""}