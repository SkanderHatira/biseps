(this["webpackJsonp@jbrowse/web"]=this["webpackJsonp@jbrowse/web"]||[]).push([[44],{1742:function(e,t,a){"use strict";a.r(t);var n=a(29),r=a(12),l=a(1),c=a.n(l),o=a(79),i=a(51),u=a(1637),s=a(1639),m=a(1636),d=a(1641),b=a(1680),p=a(84),v=a(85),E=a(639),f=a(436),g=a.n(f),h=a(107),j=a(205),O=a(1643),y=a(1622),C=a(1644),x=a(1630),k=a(1632),N=a(1683),T=a(1640),S=a(1646),w=a(1673),M=a(1676),I=a(1675),A=a(814),L=a(1650),P=a(1745),F=a(1631),W=a(1628),V=a(257),D=a.n(V),H=a(237),J=a.n(H),R=a(823),z=a.n(R),B=a(83),K=a(428),U=a(1634),G=a(589),Z=a.n(G),_=a(640),q=a.n(_),Q=Object(i.a)((function(e){return{callbackEditor:{marginTop:"16px",borderBottom:"1px solid ".concat(e.palette.divider),fontFamily:'Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',fontSize:"12px"}}}));var X=Object(p.observer)((function(e){var t=e.slot,a=Q(),r=Object(l.useState)(t.value),o=Object(n.a)(r,2),i=o[0],u=o[1],s=Object(l.useState)(),m=Object(n.a)(s,2),d=m[0],b=m[1],p=Object(B.useDebounce)(i,400);return Object(l.useEffect)((function(){try{var e,a=p.startsWith("jexl:")?p:"jexl:".concat(p);Object(K.a)(a,null===(e=Object(v.getEnv)(t).pluginManager)||void 0===e?void 0:e.jexl),t.set(a),b(null)}catch(n){console.error({e:n}),b(n)}}),[p,t]),c.a.createElement(c.a.Fragment,null,c.a.createElement(A.a,null,c.a.createElement(C.a,{shrink:!0,htmlFor:"callback-editor"},t.name),c.a.createElement(q.a,{className:a.callbackEditor,value:i.startsWith("jexl:")?i.split("jexl:")[1]:i,onValueChange:function(e){return u(e)},highlight:function(e){return e},padding:10,style:{background:d?"#fdd":void 0}}),d?c.a.createElement(S.a,{style:{color:"#f00"}},"".concat(d)):null,c.a.createElement(S.a,null,t.description)),c.a.createElement(U.a,{title:c.a.createElement("div",null,"Callbacks are written in Jexl format. Click to learn more.",c.a.createElement("br",null)," Names of available context items: ",t.contextVariable),arrow:!0},c.a.createElement(T.a,{color:"primary",onClick:function(){var e=window.open("https://github.com/TomFrost/Jexl","_blank","noopener,noreferrer");e&&(e.opener=null)}},c.a.createElement(Z.a,null))))})),Y=Object(l.lazy)((function(){return Promise.all([a.e(4),a.e(59)]).then(a.bind(null,1735))}));var $=function(e){var t=e.value,a=e.label,r=e.TextFieldProps,o=e.onChange,i=Object(l.useState)(!1),u=Object(n.a)(i,2),s=u[0],m=u[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,Object.assign({value:t,label:a,InputProps:{style:{color:t,borderRightWidth:"25px",borderRightStyle:"solid",borderRightColor:t}},onClick:function(){return m(!s)},onChange:function(e){o(e.target.value)}},r)),s?c.a.createElement(c.a.Suspense,{fallback:c.a.createElement("div",null)},c.a.createElement(Y,{color:t,onChange:function(e){o(function(e){if(e instanceof Object){var t=e,a=t.r,n=t.g,r=t.b,l=t.a;return void 0===l?"rgb(".concat(a,",").concat(n,",").concat(r,")"):"rgba(".concat(a,",").concat(n,",").concat(r,",").concat(l,")")}return e}(e.rgb))}})):null)};$.defaultProps={label:"",value:"#000",TextFieldProps:{}};var ee=Object(p.observer)((function(e){var t=e.slot;return c.a.createElement($,{label:t.name,value:t.value,onChange:function(e){t.set(e)},TextFieldProps:{helperText:t.description,fullWidth:!0}})})),te=a(595),ae=Object(p.observer)((function(e){var t=e.slot;return c.a.createElement(O.a,{label:t.name,helperText:t.description,fullWidth:!0,value:t.value,onChange:function(e){return t.set(e.target.value)}})})),ne=Object(p.observer)((function(e){var t=e.slot;return c.a.createElement(O.a,{label:t.name,helperText:t.description,fullWidth:!0,multiline:!0,value:t.value,onChange:function(e){return t.set(e.target.value)}})})),re=function(){return c.a.createElement(y.a,null,c.a.createElement("path",{d:"M20.41,3C21.8,5.71 22.35,8.84 22,12C21.8,15.16 20.7,18.29 18.83,21L17.3,20C18.91,17.57 19.85,14.8 20,12C20.34,9.2 19.89,6.43 18.7,4L20.41,3M5.17,3L6.7,4C5.09,6.43 4.15,9.2 4,12C3.66,14.8 4.12,17.57 5.3,20L3.61,21C2.21,18.29 1.65,15.17 2,12C2.2,8.84 3.3,5.71 5.17,3M12.08,10.68L14.4,7.45H16.93L13.15,12.45L15.35,17.37H13.09L11.71,14L9.28,17.33H6.76L10.66,12.21L8.53,7.45H10.8L12.08,10.68Z"}))},le=Object(p.observer)((function(e){var t=e.slot,a=Object(l.useState)(""),r=Object(n.a)(a,2),o=r[0],i=r[1];return c.a.createElement(c.a.Fragment,null,t.name?c.a.createElement(C.a,null,t.name):null,c.a.createElement(x.a,{disablePadding:!0},t.value.map((function(e,a){return c.a.createElement(k.a,{key:a,disableGutters:!0},c.a.createElement(O.a,{value:e,onChange:function(e){return t.setAtIndex(a,e.target.value)},InputProps:{endAdornment:c.a.createElement(N.a,{position:"end"},c.a.createElement(T.a,{color:"secondary",onClick:function(){return t.removeAtIndex(a)}},c.a.createElement(D.a,null)))}}))})),c.a.createElement(k.a,{disableGutters:!0},c.a.createElement(O.a,{value:o,placeholder:"add new",onChange:function(e){return i(e.target.value)},InputProps:{endAdornment:c.a.createElement(N.a,{position:"end"},c.a.createElement(T.a,{onClick:function(){t.add(o),i("")},disabled:""===o,color:"secondary","data-testid":"stringArrayAdd-".concat(t.name)},c.a.createElement(J.a,null)))}}))),c.a.createElement(S.a,null,t.description))})),ce=Object(i.a)((function(e){return{card:{marginTop:e.spacing(1)}}})),oe=Object(p.observer)((function(e){var t=e.slot,a=ce(),r=Object(l.useState)(""),o=Object(n.a)(r,2),i=o[0],u=o[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(C.a,null,t.name),Array.from(t.value,(function(e){var r=Object(n.a)(e,2),l=r[0],o=r[1];return c.a.createElement(w.a,{raised:!0,key:l,className:a.card},c.a.createElement(M.a,{title:l,action:c.a.createElement(T.a,{color:"secondary",onClick:function(){return t.remove(l)}},c.a.createElement(D.a,null))}),c.a.createElement(I.a,null,c.a.createElement(le,{slot:{value:o,description:"Values associated with entry ".concat(l),setAtIndex:function(e,a){t.setAtKeyIndex(l,e,a)},removeAtIndex:function(e){t.removeAtKeyIndex(l,e)},add:function(e){t.addToKey(l,e)}}})))})),c.a.createElement(w.a,{raised:!0,className:a.card},c.a.createElement(M.a,{disableTypography:!0,title:c.a.createElement(O.a,{fullWidth:!0,value:i,placeholder:"add new",onChange:function(e){return u(e.target.value)},InputProps:{endAdornment:c.a.createElement(N.a,{position:"end"},c.a.createElement(T.a,{disabled:""===i,onClick:function(){t.add(i,[]),u("")},color:"secondary"},c.a.createElement(J.a,null)))}})})),c.a.createElement(S.a,null,t.description))})),ie=Object(p.observer)((function(e){var t=e.slot,a=ce(),r=Object(l.useState)(""),o=Object(n.a)(r,2),i=o[0],u=o[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(C.a,null,t.name),Array.from(t.value,(function(e){var r=Object(n.a)(e,2),l=r[0],o=r[1];return c.a.createElement(w.a,{raised:!0,key:l,className:a.card},c.a.createElement(M.a,{title:l,action:c.a.createElement(T.a,{color:"secondary",onClick:function(){return t.remove(l)}},c.a.createElement(D.a,null))}),c.a.createElement(I.a,null,c.a.createElement(ue,{slot:{value:o,set:function(e){return t.add(l,e)}}})))})),c.a.createElement(w.a,{raised:!0,className:a.card},c.a.createElement(M.a,{disableTypography:!0,title:c.a.createElement(O.a,{fullWidth:!0,value:i,placeholder:"add new",onChange:function(e){return u(e.target.value)},InputProps:{endAdornment:c.a.createElement(N.a,{position:"end"},c.a.createElement(T.a,{disabled:""===i,onClick:function(){t.add(i,0),u("")},color:"secondary"},c.a.createElement(J.a,null)))}})})),c.a.createElement(S.a,null,t.description))})),ue=Object(p.observer)((function(e){var t=e.slot,a=Object(l.useState)(t.value),r=Object(n.a)(a,2),o=r[0],i=r[1];return Object(l.useEffect)((function(){var e=parseFloat(o,10);Number.isNaN(e)?t.reset():t.set(e)}),[t,o]),c.a.createElement(O.a,{label:t.name,helperText:t.description,value:o,type:"number",onChange:function(e){return i(e.target.value)}})})),se=Object(p.observer)((function(e){var t=e.slot,a=Object(l.useState)(t.value),r=Object(n.a)(a,2),o=r[0],i=r[1];return Object(l.useEffect)((function(){var e=parseInt(o,10);Number.isNaN(e)||t.set(e)}),[t,o]),c.a.createElement(O.a,{label:t.name,helperText:t.description,value:o,type:"number",onChange:function(e){return i(e.target.value)}})})),me=Object(p.observer)((function(e){var t=e.slot;return c.a.createElement(A.a,null,c.a.createElement(L.a,{label:t.name,control:c.a.createElement(P.a,{checked:t.value,onChange:function(e){return t.set(e.target.checked)}})}),c.a.createElement(S.a,null,t.description))})),de=Object(p.observer)((function(e){var t=e.slot,a=e.slotSchema,n=Object(v.getPropertyMembers)(Object(j.getSubType)(a)),r=Object(j.getUnionSubTypes)(Object(j.getUnionSubTypes)(Object(j.getSubType)(Object(j.getPropertyType)(n,"value")))[1]).map((function(e){return e.value}));return c.a.createElement(O.a,{value:t.value,label:t.name,select:!0,helperText:t.description,fullWidth:!0,onChange:function(e){return t.set(e.target.value)}},r.map((function(e){return c.a.createElement(F.a,{key:e,value:e},e)})))})),be=Object(p.observer)((function(e){var t,a=e.slot;return c.a.createElement(h.FileSelector,{location:a.value,setLocation:function(e){return a.set(e)},name:a.name,description:a.description,rootModel:null===(t=Object(v.getEnv)(a).pluginManager)||void 0===t?void 0:t.rootModel})})),pe={string:ae,text:ne,fileLocation:be,stringArray:le,stringArrayMap:oe,numberMap:ie,number:ue,integer:se,color:ee,stringEnum:de,boolean:me,frozen:te.a,configRelationships:te.a},ve=Object(i.a)((function(e){return{paper:{display:"flex",marginBottom:e.spacing(2),position:"relative"},paperContent:{width:"100%"},slotModeSwitch:{width:24,background:e.palette.secondary.light,display:"flex",justifyContent:"center",alignItems:"center"}}})),Ee=Object(p.observer)((function(e){var t=e.slot,a=e.slotSchema,n=ve(),r=t.type,l=t.isCallback?X:pe[r];return l||(console.warn("no slot editor defined for ".concat(r,", editing as string")),l=ae),r in pe||console.warn("SlotEditor needs to implement ".concat(r)),c.a.createElement(W.a,{className:n.paper},c.a.createElement("div",{className:n.paperContent},c.a.createElement(l,{slot:t,slotSchema:a})),c.a.createElement("div",{className:n.slotModeSwitch},t.contextVariable.length?c.a.createElement(T.a,{className:n.slotModeIcon,onClick:function(){return t.isCallback?t.convertToValue():t.convertToCallback()},title:"convert to ".concat(t.isCallback?"regular value":"callback"),color:"secondary"},t.isCallback?c.a.createElement(re,null):c.a.createElement(z.a,null)):null))})),fe=Object(p.observer)((function(e){var t=e.typeNameChoices,a=e.slot,n=e.slotName,r=e.onChange,l=ve();return c.a.createElement(W.a,{className:l.paper},c.a.createElement("div",{className:l.paperContent},c.a.createElement(O.a,{value:a.type,label:"Type",select:!0,helperText:"Type of ".concat(n," to use"),fullWidth:!0,onChange:r},t.map((function(e){return c.a.createElement(F.a,{key:e,value:e},e)})))))})),ge=Object(i.a)((function(e){return{expandIcon:{color:"#fff"},root:{padding:e.spacing(1,3,1,1)},expansionPanelDetails:{display:"block",padding:e.spacing(1)},accordion:{border:"1px solid ".concat(e.palette.text.primary)}}})),he=Object(p.observer)((function(e){var t,a=ge(),n=e.slotName,l=e.slotSchema,i=e.schema,p=e.slot,v=void 0===p?i[n]:p,f=e.path,h=void 0===f?[]:f;if(Object(o.isConfigurationSchemaType)(l)){if(v.length)return v.map((function(t,a){var r="".concat(Object(E.singular)(n)," ").concat(a+1);return c.a.createElement(he,Object.assign({},e,{key:r,slot:t,slotName:r}))}));var j=Object(o.getTypeNamesFromExplicitlyTypedUnion)(l);return j.length&&(t=c.a.createElement(fe,{typeNameChoices:j,slotName:n,slot:v,onChange:function(e){e.target.value!==v.type&&i.setSubschema(n,{type:e.target.value})}})),c.a.createElement(u.a,{defaultExpanded:!0,className:a.accordion,TransitionProps:{unmountOnExit:!0,timeout:150}},c.a.createElement(s.a,{expandIcon:c.a.createElement(g.a,{className:a.expandIcon})},c.a.createElement(m.a,null,[].concat(Object(r.a)(h),[n]).join("\ud83e\udc52"))),c.a.createElement(d.a,{className:a.expansionPanelDetails},t,c.a.createElement(b.a,null,c.a.createElement(je,{schema:v,path:[].concat(Object(r.a)(h),[n])}))))}return Object(o.isConfigurationSlotType)(l)?c.a.createElement(Ee,{key:n,slot:v,slotSchema:l}):null})),je=Object(p.observer)((function(e){var t=e.schema,a=e.path,r=void 0===a?[]:a,l=Object(v.getMembers)(t).properties;return Object.entries(l).map((function(e){var a=Object(n.a)(e,2),l=a[0],o=a[1];return c.a.createElement(he,{key:l,slotName:l,slotSchema:o,path:r,schema:t})}))})),Oe=Object(p.observer)((function(e){var t=e.model,a=ge(),n=t.target&&Object(o.readConfObject)(t.target,"trackId"),r=t.target&&Object(o.readConfObject)(t.target,"name");return c.a.createElement(u.a,{key:n,defaultExpanded:!0,className:a.accordion,TransitionProps:{unmountOnExit:!0,timeout:150}},c.a.createElement(s.a,{expandIcon:c.a.createElement(g.a,{className:a.expandIcon})},c.a.createElement(m.a,null,r||"Configuration")),c.a.createElement(d.a,{className:a.expansionPanelDetails,"data-testid":"configEditor"},t.target?c.a.createElement(je,{schema:t.target}):"no target set"))}));t.default=Oe}}]);
//# sourceMappingURL=44.580de7c6.chunk.js.map